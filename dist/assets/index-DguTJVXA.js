(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Vu(e,t){const n=new Set(e.split(","));return r=>n.has(r)}const Xe={},mi=[],ln=()=>{},$1=()=>!1,Hs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Wu=e=>e.startsWith("onUpdate:"),wt=Object.assign,Ku=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},H1=Object.prototype.hasOwnProperty,Le=(e,t)=>H1.call(e,t),ge=Array.isArray,gi=e=>qs(e)==="[object Map]",dg=e=>qs(e)==="[object Set]",be=e=>typeof e=="function",ht=e=>typeof e=="string",Vr=e=>typeof e=="symbol",nt=e=>e!==null&&typeof e=="object",fg=e=>(nt(e)||be(e))&&be(e.then)&&be(e.catch),hg=Object.prototype.toString,qs=e=>hg.call(e),q1=e=>qs(e).slice(8,-1),pg=e=>qs(e)==="[object Object]",Gu=e=>ht(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,So=Vu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},z1=/-(\w)/g,Mn=zs(e=>e.replace(z1,(t,n)=>n?n.toUpperCase():"")),V1=/\B([A-Z])/g,Pi=zs(e=>e.replace(V1,"-$1").toLowerCase()),Vs=zs(e=>e.charAt(0).toUpperCase()+e.slice(1)),uc=zs(e=>e?`on${Vs(e)}`:""),hr=(e,t)=>!Object.is(e,t),Ga=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},mg=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Vc=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Rf;const gg=()=>Rf||(Rf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ws(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=ht(r)?Y1(r):Ws(r);if(i)for(const o in i)t[o]=i[o]}return t}else if(ht(e)||nt(e))return e}const W1=/;(?![^(]*\))/g,K1=/:([^]+)/,G1=/\/\*[^]*?\*\//g;function Y1(e){const t={};return e.replace(G1,"").split(W1).forEach(n=>{if(n){const r=n.split(K1);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Xt(e){let t="";if(ht(e))t=e;else if(ge(e))for(let n=0;n<e.length;n++){const r=Xt(e[n]);r&&(t+=r+" ")}else if(nt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function pt(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ht(t)&&(e.class=Xt(t)),n&&(e.style=Ws(n)),e}const J1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Z1=Vu(J1);function vg(e){return!!e||e===""}const ue=e=>ht(e)?e:e==null?"":ge(e)||nt(e)&&(e.toString===hg||!be(e.toString))?JSON.stringify(e,yg,2):String(e),yg=(e,t)=>t&&t.__v_isRef?yg(e,t.value):gi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],o)=>(n[dc(r,o)+" =>"]=i,n),{})}:dg(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>dc(n))}:Vr(t)?dc(t):nt(t)&&!ge(t)&&!pg(t)?String(t):t,dc=(e,t="")=>{var n;return Vr(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zt;class bg{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Zt,!t&&Zt&&(this.index=(Zt.scopes||(Zt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Zt;try{return Zt=this,t()}finally{Zt=n}}}on(){Zt=this}off(){Zt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function X1(e){return new bg(e)}function Q1(e,t=Zt){t&&t.active&&t.effects.push(e)}function _g(){return Zt}function Sg(e){Zt&&Zt.cleanups.push(e)}let Lr;class Yu{constructor(t,n,r,i){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Q1(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Sr();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(eb(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),wr()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=lr,n=Lr;try{return lr=!0,Lr=this,this._runnings++,Pf(this),this.fn()}finally{Nf(this),this._runnings--,Lr=n,lr=t}}stop(){this.active&&(Pf(this),Nf(this),this.onStop&&this.onStop(),this.active=!1)}}function eb(e){return e.value}function Pf(e){e._trackId++,e._depsLength=0}function Nf(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)wg(e.deps[t],e);e.deps.length=e._depsLength}}function wg(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let lr=!0,Wc=0;const Eg=[];function Sr(){Eg.push(lr),lr=!1}function wr(){const e=Eg.pop();lr=e===void 0?!0:e}function Ju(){Wc++}function Zu(){for(Wc--;!Wc&&Kc.length;)Kc.shift()()}function Cg(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&wg(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Kc=[];function Ig(e,t,n){Ju();for(const r of e.keys()){let i;r._dirtyLevel<t&&(i??(i=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(i??(i=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Kc.push(r.scheduler)))}Zu()}const xg=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},ds=new WeakMap,Dr=Symbol(""),Gc=Symbol("");function jt(e,t,n){if(lr&&Lr){let r=ds.get(e);r||ds.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=xg(()=>r.delete(n))),Cg(Lr,i)}}function zn(e,t,n,r,i,o){const a=ds.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(n==="length"&&ge(e)){const l=Number(r);a.forEach((c,u)=>{(u==="length"||!Vr(u)&&u>=l)&&s.push(c)})}else switch(n!==void 0&&s.push(a.get(n)),t){case"add":ge(e)?Gu(n)&&s.push(a.get("length")):(s.push(a.get(Dr)),gi(e)&&s.push(a.get(Gc)));break;case"delete":ge(e)||(s.push(a.get(Dr)),gi(e)&&s.push(a.get(Gc)));break;case"set":gi(e)&&s.push(a.get(Dr));break}Ju();for(const l of s)l&&Ig(l,4);Zu()}function tb(e,t){const n=ds.get(e);return n&&n.get(t)}const nb=Vu("__proto__,__v_isRef,__isVue"),Ag=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Vr)),Of=rb();function rb(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=$e(this);for(let o=0,a=this.length;o<a;o++)jt(r,"get",o+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map($e)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Sr(),Ju();const r=$e(this)[t].apply(this,n);return Zu(),wr(),r}}),e}function ib(e){Vr(e)||(e=String(e));const t=$e(this);return jt(t,"has",e),t.hasOwnProperty(e)}class kg{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?vb:Pg:o?Rg:Mg).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=ge(t);if(!i){if(a&&Le(Of,n))return Reflect.get(Of,n,r);if(n==="hasOwnProperty")return ib}const s=Reflect.get(t,n,r);return(Vr(n)?Ag.has(n):nb(n))||(i||jt(t,"get",n),o)?s:Rt(s)?a&&Gu(n)?s:s.value:nt(s)?i?Ng(s):Zo(s):s}}class Tg extends kg{constructor(t=!1){super(!1,t)}set(t,n,r,i){let o=t[n];if(!this._isShallow){const l=Po(o);if(!fs(r)&&!Po(r)&&(o=$e(o),r=$e(r)),!ge(t)&&Rt(o)&&!Rt(r))return l?!1:(o.value=r,!0)}const a=ge(t)&&Gu(n)?Number(n)<t.length:Le(t,n),s=Reflect.set(t,n,r,i);return t===$e(i)&&(a?hr(r,o)&&zn(t,"set",n,r):zn(t,"add",n,r)),s}deleteProperty(t,n){const r=Le(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&zn(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!Vr(n)||!Ag.has(n))&&jt(t,"has",n),r}ownKeys(t){return jt(t,"iterate",ge(t)?"length":Dr),Reflect.ownKeys(t)}}class ob extends kg{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const ab=new Tg,sb=new ob,lb=new Tg(!0);const Xu=e=>e,Ks=e=>Reflect.getPrototypeOf(e);function _a(e,t,n=!1,r=!1){e=e.__v_raw;const i=$e(e),o=$e(t);n||(hr(t,o)&&jt(i,"get",t),jt(i,"get",o));const{has:a}=Ks(i),s=r?Xu:n?td:No;if(a.call(i,t))return s(e.get(t));if(a.call(i,o))return s(e.get(o));e!==i&&e.get(t)}function Sa(e,t=!1){const n=this.__v_raw,r=$e(n),i=$e(e);return t||(hr(e,i)&&jt(r,"has",e),jt(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function wa(e,t=!1){return e=e.__v_raw,!t&&jt($e(e),"iterate",Dr),Reflect.get(e,"size",e)}function Lf(e){e=$e(e);const t=$e(this);return Ks(t).has.call(t,e)||(t.add(e),zn(t,"add",e,e)),this}function Df(e,t){t=$e(t);const n=$e(this),{has:r,get:i}=Ks(n);let o=r.call(n,e);o||(e=$e(e),o=r.call(n,e));const a=i.call(n,e);return n.set(e,t),o?hr(t,a)&&zn(n,"set",e,t):zn(n,"add",e,t),this}function Uf(e){const t=$e(this),{has:n,get:r}=Ks(t);let i=n.call(t,e);i||(e=$e(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&zn(t,"delete",e,void 0),o}function Ff(){const e=$e(this),t=e.size!==0,n=e.clear();return t&&zn(e,"clear",void 0,void 0),n}function Ea(e,t){return function(r,i){const o=this,a=o.__v_raw,s=$e(a),l=t?Xu:e?td:No;return!e&&jt(s,"iterate",Dr),a.forEach((c,u)=>r.call(i,l(c),l(u),o))}}function Ca(e,t,n){return function(...r){const i=this.__v_raw,o=$e(i),a=gi(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,c=i[e](...r),u=n?Xu:t?td:No;return!t&&jt(o,"iterate",l?Gc:Dr),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:s?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function tr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function cb(){const e={get(o){return _a(this,o)},get size(){return wa(this)},has:Sa,add:Lf,set:Df,delete:Uf,clear:Ff,forEach:Ea(!1,!1)},t={get(o){return _a(this,o,!1,!0)},get size(){return wa(this)},has:Sa,add:Lf,set:Df,delete:Uf,clear:Ff,forEach:Ea(!1,!0)},n={get(o){return _a(this,o,!0)},get size(){return wa(this,!0)},has(o){return Sa.call(this,o,!0)},add:tr("add"),set:tr("set"),delete:tr("delete"),clear:tr("clear"),forEach:Ea(!0,!1)},r={get(o){return _a(this,o,!0,!0)},get size(){return wa(this,!0)},has(o){return Sa.call(this,o,!0)},add:tr("add"),set:tr("set"),delete:tr("delete"),clear:tr("clear"),forEach:Ea(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=Ca(o,!1,!1),n[o]=Ca(o,!0,!1),t[o]=Ca(o,!1,!0),r[o]=Ca(o,!0,!0)}),[e,n,t,r]}const[ub,db,fb,hb]=cb();function Qu(e,t){const n=t?e?hb:fb:e?db:ub;return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Le(n,i)&&i in r?n:r,i,o)}const pb={get:Qu(!1,!1)},mb={get:Qu(!1,!0)},gb={get:Qu(!0,!1)};const Mg=new WeakMap,Rg=new WeakMap,Pg=new WeakMap,vb=new WeakMap;function yb(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bb(e){return e.__v_skip||!Object.isExtensible(e)?0:yb(q1(e))}function Zo(e){return Po(e)?e:ed(e,!1,ab,pb,Mg)}function _b(e){return ed(e,!1,lb,mb,Rg)}function Ng(e){return ed(e,!0,sb,gb,Pg)}function ed(e,t,n,r,i){if(!nt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=bb(e);if(a===0)return e;const s=new Proxy(e,a===2?r:n);return i.set(e,s),s}function wo(e){return Po(e)?wo(e.__v_raw):!!(e&&e.__v_isReactive)}function Po(e){return!!(e&&e.__v_isReadonly)}function fs(e){return!!(e&&e.__v_isShallow)}function Og(e){return e?!!e.__v_raw:!1}function $e(e){const t=e&&e.__v_raw;return t?$e(t):e}function Sb(e){return Object.isExtensible(e)&&mg(e,"__v_skip",!0),e}const No=e=>nt(e)?Zo(e):e,td=e=>nt(e)?Ng(e):e;class Lg{constructor(t,n,r,i){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Yu(()=>t(this._value),()=>Ya(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=$e(this);return(!t._cacheable||t.effect.dirty)&&hr(t._value,t._value=t.effect.run())&&Ya(t,4),Dg(t),t.effect._dirtyLevel>=2&&Ya(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function wb(e,t,n=!1){let r,i;const o=be(e);return o?(r=e,i=ln):(r=e.get,i=e.set),new Lg(r,i,o||!i,n)}function Dg(e){var t;lr&&Lr&&(e=$e(e),Cg(Lr,(t=e.dep)!=null?t:e.dep=xg(()=>e.dep=void 0,e instanceof Lg?e:void 0)))}function Ya(e,t=4,n){e=$e(e);const r=e.dep;r&&Ig(r,t)}function Rt(e){return!!(e&&e.__v_isRef===!0)}function ot(e){return Ug(e,!1)}function Bf(e){return Ug(e,!0)}function Ug(e,t){return Rt(e)?e:new Eb(e,t)}class Eb{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:$e(t),this._value=n?t:No(t)}get value(){return Dg(this),this._value}set value(t){const n=this.__v_isShallow||fs(t)||Po(t);t=n?t:$e(t),hr(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:No(t),Ya(this,4))}}function w(e){return Rt(e)?e.value:e}const Cb={get:(e,t,n)=>w(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Rt(i)&&!Rt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Fg(e){return wo(e)?e:new Proxy(e,Cb)}function lt(e){const t=ge(e)?new Array(e.length):{};for(const n in e)t[n]=xb(e,n);return t}class Ib{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return tb($e(this._object),this._key)}}function xb(e,t,n){const r=e[t];return Rt(r)?r:new Ib(e,t,n)}/**
* @vue/runtime-core v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cr(e,t,n,r){try{return r?e(...r):e()}catch(i){Gs(i,t,n)}}function vn(e,t,n,r){if(be(e)){const i=cr(e,t,n,r);return i&&fg(i)&&i.catch(o=>{Gs(o,t,n)}),i}if(ge(e)){const i=[];for(let o=0;o<e.length;o++)i.push(vn(e[o],t,n,r));return i}}function Gs(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){Sr(),cr(l,null,10,[e,a,s]),wr();return}}Ab(e,n,i,r)}function Ab(e,t,n,r=!0){console.error(e)}let Oo=!1,Yc=!1;const Mt=[];let kn=0;const vi=[];let rr=null,Rr=0;const Bg=Promise.resolve();let nd=null;function kb(e){const t=nd||Bg;return e?t.then(this?e.bind(this):e):t}function Tb(e){let t=kn+1,n=Mt.length;for(;t<n;){const r=t+n>>>1,i=Mt[r],o=Lo(i);o<e||o===e&&i.pre?t=r+1:n=r}return t}function rd(e){(!Mt.length||!Mt.includes(e,Oo&&e.allowRecurse?kn+1:kn))&&(e.id==null?Mt.push(e):Mt.splice(Tb(e.id),0,e),jg())}function jg(){!Oo&&!Yc&&(Yc=!0,nd=Bg.then(Hg))}function Mb(e){const t=Mt.indexOf(e);t>kn&&Mt.splice(t,1)}function Rb(e){ge(e)?vi.push(...e):(!rr||!rr.includes(e,e.allowRecurse?Rr+1:Rr))&&vi.push(e),jg()}function jf(e,t,n=Oo?kn+1:0){for(;n<Mt.length;n++){const r=Mt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Mt.splice(n,1),n--,r()}}}function $g(e){if(vi.length){const t=[...new Set(vi)].sort((n,r)=>Lo(n)-Lo(r));if(vi.length=0,rr){rr.push(...t);return}for(rr=t,Rr=0;Rr<rr.length;Rr++)rr[Rr]();rr=null,Rr=0}}const Lo=e=>e.id==null?1/0:e.id,Pb=(e,t)=>{const n=Lo(e)-Lo(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Hg(e){Yc=!1,Oo=!0,Mt.sort(Pb);try{for(kn=0;kn<Mt.length;kn++){const t=Mt[kn];t&&t.active!==!1&&cr(t,null,14)}}finally{kn=0,Mt.length=0,$g(),Oo=!1,nd=null,(Mt.length||vi.length)&&Hg()}}function Nb(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Xe;let i=n;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in r){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:d,trim:f}=r[u]||Xe;f&&(i=n.map(h=>ht(h)?h.trim():h)),d&&(i=n.map(Vc))}let s,l=r[s=uc(t)]||r[s=uc(Mn(t))];!l&&o&&(l=r[s=uc(Pi(t))]),l&&vn(l,e,6,i);const c=r[s+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,vn(c,e,6,i)}}function qg(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let a={},s=!1;if(!be(e)){const l=c=>{const u=qg(c,t,!0);u&&(s=!0,wt(a,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(nt(e)&&r.set(e,null),null):(ge(o)?o.forEach(l=>a[l]=null):wt(a,o),nt(e)&&r.set(e,a),a)}function Ys(e,t){return!e||!Hs(t)?!1:(t=t.slice(2).replace(/Once$/,""),Le(e,t[0].toLowerCase()+t.slice(1))||Le(e,Pi(t))||Le(e,t))}let gt=null,Js=null;function hs(e){const t=gt;return gt=e,Js=e&&e.type.__scopeId||null,t}function zg(e){Js=e}function Vg(){Js=null}function A(e,t=gt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&Zf(-1);const o=hs(t);let a;try{a=e(...i)}finally{hs(o),r._d&&Zf(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function fc(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:a,attrs:s,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:p,inheritAttrs:m}=e,y=hs(e);let g,v;try{if(n.shapeFlag&4){const E=i||r,C=E;g=An(c.call(C,E,u,d,h,f,p)),v=s}else{const E=t;g=An(E.length>1?E(d,{attrs:s,slots:a,emit:l}):E(d,null)),v=t.props?s:Ob(s)}}catch(E){xo.length=0,Gs(E,e,1),g=R(pr)}let b=g;if(v&&m!==!1){const E=Object.keys(v),{shapeFlag:C}=b;E.length&&C&7&&(o&&E.some(Wu)&&(v=Lb(v,o)),b=Si(b,v,!1,!0))}return n.dirs&&(b=Si(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),g=b,hs(y),g}const Ob=e=>{let t;for(const n in e)(n==="class"||n==="style"||Hs(n))&&((t||(t={}))[n]=e[n]);return t},Lb=(e,t)=>{const n={};for(const r in e)(!Wu(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Db(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?$f(r,a,c):!!a;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(a[f]!==r[f]&&!Ys(c,f))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===a?!1:r?a?$f(r,a,c):!0:!!a;return!1}function $f(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!Ys(n,o))return!0}return!1}function Ub({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Fb="components";function Bb(e,t){return $b(Fb,e,!0,t)||e}const jb=Symbol.for("v-ndc");function $b(e,t,n=!0,r=!1){const i=gt||At;if(i){const o=i.type;{const s=N_(o,!1);if(s&&(s===t||s===Mn(t)||s===Vs(Mn(t))))return o}const a=Hf(i[e]||o[e],t)||Hf(i.appContext[e],t);return!a&&r?o:a}}function Hf(e,t){return e&&(e[t]||e[Mn(t)]||e[Vs(Mn(t))])}const Hb=e=>e.__isSuspense;function qb(e,t){t&&t.pendingBranch?ge(e)?t.effects.push(...e):t.effects.push(e):Rb(e)}const zb=Symbol.for("v-scx"),Vb=()=>Za(zb);function Wb(e,t){return id(e,null,t)}const Ia={};function Ja(e,t,n){return id(e,t,n)}function id(e,t,{immediate:n,deep:r,flush:i,once:o,onTrack:a,onTrigger:s}=Xe){if(t&&o){const x=t;t=(...O)=>{x(...O),C()}}const l=At,c=x=>r===!0?x:Pr(x,r===!1?1:void 0);let u,d=!1,f=!1;if(Rt(e)?(u=()=>e.value,d=fs(e)):wo(e)?(u=()=>c(e),d=!0):ge(e)?(f=!0,d=e.some(x=>wo(x)||fs(x)),u=()=>e.map(x=>{if(Rt(x))return x.value;if(wo(x))return c(x);if(be(x))return cr(x,l,2)})):be(e)?t?u=()=>cr(e,l,2):u=()=>(h&&h(),vn(e,l,3,[p])):u=ln,t&&r){const x=u;u=()=>Pr(x())}let h,p=x=>{h=b.onStop=()=>{cr(x,l,4),h=b.onStop=void 0}},m;if(el)if(p=ln,t?n&&vn(t,l,3,[u(),f?[]:void 0,p]):u(),i==="sync"){const x=Vb();m=x.__watcherHandles||(x.__watcherHandles=[])}else return ln;let y=f?new Array(e.length).fill(Ia):Ia;const g=()=>{if(!(!b.active||!b.dirty))if(t){const x=b.run();(r||d||(f?x.some((O,U)=>hr(O,y[U])):hr(x,y)))&&(h&&h(),vn(t,l,3,[x,y===Ia?void 0:f&&y[0]===Ia?[]:y,p]),y=x)}else b.run()};g.allowRecurse=!!t;let v;i==="sync"?v=g:i==="post"?v=()=>Ut(g,l&&l.suspense):(g.pre=!0,l&&(g.id=l.uid),v=()=>rd(g));const b=new Yu(u,ln,v),E=_g(),C=()=>{b.stop(),E&&Ku(E.effects,b)};return t?n?g():y=b.run():i==="post"?Ut(b.run.bind(b),l&&l.suspense):b.run(),m&&m.push(C),C}function Kb(e,t,n){const r=this.proxy,i=ht(e)?e.includes(".")?Wg(r,e):()=>r[e]:e.bind(r,r);let o;be(t)?o=t:(o=t.handler,n=t);const a=Xo(this),s=id(i,o.bind(r),n);return a(),s}function Wg(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Pr(e,t=1/0,n){if(t<=0||!nt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Rt(e))Pr(e.value,t,n);else if(ge(e))for(let r=0;r<e.length;r++)Pr(e[r],t,n);else if(dg(e)||gi(e))e.forEach(r=>{Pr(r,t,n)});else if(pg(e))for(const r in e)Pr(e[r],t,n);return e}function ii(e,t){if(gt===null)return e;const n=tl(gt)||gt.proxy,r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,a,s,l=Xe]=t[i];o&&(be(o)&&(o={mounted:o,updated:o}),o.deep&&Pr(a),r.push({dir:o,instance:n,value:a,oldValue:void 0,arg:s,modifiers:l}))}return e}function xr(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(Sr(),vn(l,n,8,[e.el,s,e,t]),wr())}}/*! #__NO_SIDE_EFFECTS__ */function We(e,t){return be(e)?wt({name:e.name},t,{setup:e}):e}const Eo=e=>!!e.type.__asyncLoader,Kg=e=>e.type.__isKeepAlive;function Gb(e,t){Gg(e,"a",t)}function Yb(e,t){Gg(e,"da",t)}function Gg(e,t,n=At){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Zs(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Kg(i.parent.vnode)&&Jb(r,t,n,i),i=i.parent}}function Jb(e,t,n,r){const i=Zs(t,e,r,!0);ad(()=>{Ku(r[t],i)},n)}function Zs(e,t,n=At,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;Sr();const s=Xo(n),l=vn(t,n,e,a);return s(),wr(),l});return r?i.unshift(o):i.push(o),o}}const Yn=e=>(t,n=At)=>(!el||e==="sp")&&Zs(e,(...r)=>t(...r),n),Yg=Yn("bm"),od=Yn("m"),Zb=Yn("bu"),Xb=Yn("u"),Qb=Yn("bum"),ad=Yn("um"),e_=Yn("sp"),t_=Yn("rtg"),n_=Yn("rtc");function r_(e,t=At){Zs("ec",e,t)}function Xs(e,t,n,r){let i;const o=n;if(ge(e)||ht(e)){i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=t(e[a],a,void 0,o)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o)}else if(nt(e))if(e[Symbol.iterator])i=Array.from(e,(a,s)=>t(a,s,void 0,o));else{const a=Object.keys(e);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const c=a[s];i[s]=t(e[c],c,s,o)}}else i=[];return i}function V(e,t,n={},r,i){if(gt.isCE||gt.parent&&Eo(gt.parent)&&gt.parent.isCE)return t!=="default"&&(n.name=t),R("slot",n,r&&r());let o=e[t];o&&o._c&&(o._d=!1),re();const a=o&&Jg(o(n)),s=Se(mt,{key:n.key||a&&a.key||`_${t}`},a||(r?r():[]),a&&e._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function Jg(e){return e.some(t=>ms(t)?!(t.type===pr||t.type===mt&&!Jg(t.children)):!0)?e:null}const Jc=e=>e?dv(e)?tl(e)||e.proxy:Jc(e.parent):null,Co=wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Jc(e.parent),$root:e=>Jc(e.root),$emit:e=>e.emit,$options:e=>ld(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,rd(e.update)}),$nextTick:e=>e.n||(e.n=kb.bind(e.proxy)),$watch:e=>Kb.bind(e)}),hc=(e,t)=>e!==Xe&&!e.__isScriptSetup&&Le(e,t),i_={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let c;if(t[0]!=="$"){const h=a[t];if(h!==void 0)switch(h){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(hc(r,t))return a[t]=1,r[t];if(i!==Xe&&Le(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&Le(c,t))return a[t]=3,o[t];if(n!==Xe&&Le(n,t))return a[t]=4,n[t];Zc&&(a[t]=0)}}const u=Co[t];let d,f;if(u)return t==="$attrs"&&jt(e.attrs,"get",""),u(e);if((d=s.__cssModules)&&(d=d[t]))return d;if(n!==Xe&&Le(n,t))return a[t]=4,n[t];if(f=l.config.globalProperties,Le(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return hc(i,t)?(i[t]=n,!0):r!==Xe&&Le(r,t)?(r[t]=n,!0):Le(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},a){let s;return!!n[a]||e!==Xe&&Le(e,a)||hc(t,a)||(s=o[0])&&Le(s,a)||Le(r,a)||Le(Co,a)||Le(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Le(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function sd(){return o_().slots}function o_(){const e=T_();return e.setupContext||(e.setupContext=hv(e))}function qf(e){return ge(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Zc=!0;function a_(e){const t=ld(e),n=e.proxy,r=e.ctx;Zc=!1,t.beforeCreate&&zf(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:m,deactivated:y,beforeDestroy:g,beforeUnmount:v,destroyed:b,unmounted:E,render:C,renderTracked:x,renderTriggered:O,errorCaptured:U,serverPrefetch:H,expose:G,inheritAttrs:q,components:z,directives:Y,filters:le}=t;if(c&&s_(c,r,null),a)for(const k in a){const N=a[k];be(N)&&(r[k]=N.bind(n))}if(i){const k=i.call(n,n);nt(k)&&(e.data=Zo(k))}if(Zc=!0,o)for(const k in o){const N=o[k],ee=be(N)?N.bind(n,n):be(N.get)?N.get.bind(n,n):ln,se=!be(N)&&be(N.set)?N.set.bind(n):ln,J=ye({get:ee,set:se});Object.defineProperty(r,k,{enumerable:!0,configurable:!0,get:()=>J.value,set:K=>J.value=K})}if(s)for(const k in s)Zg(s[k],r,n,k);if(l){const k=be(l)?l.call(n):l;Reflect.ownKeys(k).forEach(N=>{h_(N,k[N])})}u&&zf(u,e,"c");function L(k,N){ge(N)?N.forEach(ee=>k(ee.bind(n))):N&&k(N.bind(n))}if(L(Yg,d),L(od,f),L(Zb,h),L(Xb,p),L(Gb,m),L(Yb,y),L(r_,U),L(n_,x),L(t_,O),L(Qb,v),L(ad,E),L(e_,H),ge(G))if(G.length){const k=e.exposed||(e.exposed={});G.forEach(N=>{Object.defineProperty(k,N,{get:()=>n[N],set:ee=>n[N]=ee})})}else e.exposed||(e.exposed={});C&&e.render===ln&&(e.render=C),q!=null&&(e.inheritAttrs=q),z&&(e.components=z),Y&&(e.directives=Y)}function s_(e,t,n=ln){ge(e)&&(e=Xc(e));for(const r in e){const i=e[r];let o;nt(i)?"default"in i?o=Za(i.from||r,i.default,!0):o=Za(i.from||r):o=Za(i),Rt(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[r]=o}}function zf(e,t,n){vn(ge(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Zg(e,t,n,r){const i=r.includes(".")?Wg(n,r):()=>n[r];if(ht(e)){const o=t[e];be(o)&&Ja(i,o)}else if(be(e))Ja(i,e.bind(n));else if(nt(e))if(ge(e))e.forEach(o=>Zg(o,t,n,r));else{const o=be(e.handler)?e.handler.bind(n):t[e.handler];be(o)&&Ja(i,o,e)}}function ld(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(c=>ps(l,c,a,!0)),ps(l,t,a)),nt(t)&&o.set(t,l),l}function ps(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&ps(e,o,n,!0),i&&i.forEach(a=>ps(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const s=l_[a]||n&&n[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const l_={data:Vf,props:Wf,emits:Wf,methods:fo,computed:fo,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:fo,directives:fo,watch:u_,provide:Vf,inject:c_};function Vf(e,t){return t?e?function(){return wt(be(e)?e.call(this,this):e,be(t)?t.call(this,this):t)}:t:e}function c_(e,t){return fo(Xc(e),Xc(t))}function Xc(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Lt(e,t){return e?[...new Set([].concat(e,t))]:t}function fo(e,t){return e?wt(Object.create(null),e,t):t}function Wf(e,t){return e?ge(e)&&ge(t)?[...new Set([...e,...t])]:wt(Object.create(null),qf(e),qf(t??{})):t}function u_(e,t){if(!e)return t;if(!t)return e;const n=wt(Object.create(null),e);for(const r in t)n[r]=Lt(e[r],t[r]);return n}function Xg(){return{app:null,config:{isNativeTag:$1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let d_=0;function f_(e,t){return function(r,i=null){be(r)||(r=wt({},r)),i!=null&&!nt(i)&&(i=null);const o=Xg(),a=new WeakSet;let s=!1;const l=o.app={_uid:d_++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:L_,get config(){return o.config},set config(c){},use(c,...u){return a.has(c)||(c&&be(c.install)?(a.add(c),c.install(l,...u)):be(c)&&(a.add(c),c(l,...u))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,u){return u?(o.components[c]=u,l):o.components[c]},directive(c,u){return u?(o.directives[c]=u,l):o.directives[c]},mount(c,u,d){if(!s){const f=R(r,i);return f.appContext=o,d===!0?d="svg":d===!1&&(d=void 0),u&&t?t(f,c):e(f,c,d),s=!0,l._container=c,c.__vue_app__=l,tl(f.component)||f.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return o.provides[c]=u,l},runWithContext(c){const u=Io;Io=l;try{return c()}finally{Io=u}}};return l}}let Io=null;function h_(e,t){if(At){let n=At.provides;const r=At.parent&&At.parent.provides;r===n&&(n=At.provides=Object.create(r)),n[e]=t}}function Za(e,t,n=!1){const r=At||gt;if(r||Io){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Io._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&be(t)?t.call(r&&r.proxy):t}}const Qg={},ev=()=>Object.create(Qg),tv=e=>Object.getPrototypeOf(e)===Qg;function p_(e,t,n,r=!1){const i={},o=ev();e.propsDefaults=Object.create(null),nv(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:_b(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function m_(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=$e(i),[l]=e.propsOptions;let c=!1;if((r||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Ys(e.emitsOptions,f))continue;const h=t[f];if(l)if(Le(o,f))h!==o[f]&&(o[f]=h,c=!0);else{const p=Mn(f);i[p]=Qc(l,s,p,h,e,!1)}else h!==o[f]&&(o[f]=h,c=!0)}}}else{nv(e,t,i,o)&&(c=!0);let u;for(const d in s)(!t||!Le(t,d)&&((u=Pi(d))===d||!Le(t,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=Qc(l,s,d,void 0,e,!0)):delete i[d]);if(o!==s)for(const d in o)(!t||!Le(t,d))&&(delete o[d],c=!0)}c&&zn(e.attrs,"set","")}function nv(e,t,n,r){const[i,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(So(l))continue;const c=t[l];let u;i&&Le(i,u=Mn(l))?!o||!o.includes(u)?n[u]=c:(s||(s={}))[u]=c:Ys(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,a=!0)}if(o){const l=$e(n),c=s||Xe;for(let u=0;u<o.length;u++){const d=o[u];n[d]=Qc(i,l,d,c[d],e,!Le(c,d))}}return a}function Qc(e,t,n,r,i,o){const a=e[n];if(a!=null){const s=Le(a,"default");if(s&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&be(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=Xo(i);r=c[n]=l.call(null,t),u()}}else r=l}a[0]&&(o&&!s?r=!1:a[1]&&(r===""||r===Pi(n))&&(r=!0))}return r}function rv(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!be(e)){const u=d=>{l=!0;const[f,h]=rv(d,t,!0);wt(a,f),h&&s.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return nt(e)&&r.set(e,mi),mi;if(ge(o))for(let u=0;u<o.length;u++){const d=Mn(o[u]);Kf(d)&&(a[d]=Xe)}else if(o)for(const u in o){const d=Mn(u);if(Kf(d)){const f=o[u],h=a[d]=ge(f)||be(f)?{type:f}:wt({},f);if(h){const p=Jf(Boolean,h.type),m=Jf(String,h.type);h[0]=p>-1,h[1]=m<0||p<m,(p>-1||Le(h,"default"))&&s.push(d)}}}const c=[a,s];return nt(e)&&r.set(e,c),c}function Kf(e){return e[0]!=="$"&&!So(e)}function Gf(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Yf(e,t){return Gf(e)===Gf(t)}function Jf(e,t){return ge(t)?t.findIndex(n=>Yf(n,e)):be(t)&&Yf(t,e)?0:-1}const iv=e=>e[0]==="_"||e==="$stable",cd=e=>ge(e)?e.map(An):[An(e)],g_=(e,t,n)=>{if(t._n)return t;const r=A((...i)=>cd(t(...i)),n);return r._c=!1,r},ov=(e,t,n)=>{const r=e._ctx;for(const i in e){if(iv(i))continue;const o=e[i];if(be(o))t[i]=g_(i,o,r);else if(o!=null){const a=cd(o);t[i]=()=>a}}},av=(e,t)=>{const n=cd(t);e.slots.default=()=>n},v_=(e,t)=>{const n=e.slots=ev();if(e.vnode.shapeFlag&32){const r=t._;r?(wt(n,t),mg(n,"_",r,!0)):ov(t,n)}else t&&av(e,t)},y_=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,a=Xe;if(r.shapeFlag&32){const s=t._;s?n&&s===1?o=!1:(wt(i,t),!n&&s===1&&delete i._):(o=!t.$stable,ov(t,i)),a=t}else t&&(av(e,t),a={default:1});if(o)for(const s in i)!iv(s)&&a[s]==null&&delete i[s]};function eu(e,t,n,r,i=!1){if(ge(e)){e.forEach((f,h)=>eu(f,t&&(ge(t)?t[h]:t),n,r,i));return}if(Eo(r)&&!i)return;const o=r.shapeFlag&4?tl(r.component)||r.component.proxy:r.el,a=i?null:o,{i:s,r:l}=e,c=t&&t.r,u=s.refs===Xe?s.refs={}:s.refs,d=s.setupState;if(c!=null&&c!==l&&(ht(c)?(u[c]=null,Le(d,c)&&(d[c]=null)):Rt(c)&&(c.value=null)),be(l))cr(l,s,12,[a,u]);else{const f=ht(l),h=Rt(l);if(f||h){const p=()=>{if(e.f){const m=f?Le(d,l)?d[l]:u[l]:l.value;i?ge(m)&&Ku(m,o):ge(m)?m.includes(o)||m.push(o):f?(u[l]=[o],Le(d,l)&&(d[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else f?(u[l]=a,Le(d,l)&&(d[l]=a)):h&&(l.value=a,e.k&&(u[e.k]=a))};a?(p.id=-1,Ut(p,n)):p()}}}const Ut=qb;function b_(e){return __(e)}function __(e,t){const n=gg();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=ln,insertStaticContent:p}=e,m=(S,I,P,F=null,B=null,Z=null,Q=void 0,W=null,X=!!I.dynamicChildren)=>{if(S===I)return;S&&!Xi(S,I)&&(F=Ct(S),K(S,B,Z,!0),S=null),I.patchFlag===-2&&(X=!1,I.dynamicChildren=null);const{type:j,ref:ne,shapeFlag:de}=I;switch(j){case Qs:y(S,I,P,F);break;case pr:g(S,I,P,F);break;case mc:S==null&&v(I,P,F,Q);break;case mt:z(S,I,P,F,B,Z,Q,W,X);break;default:de&1?C(S,I,P,F,B,Z,Q,W,X):de&6?Y(S,I,P,F,B,Z,Q,W,X):(de&64||de&128)&&j.process(S,I,P,F,B,Z,Q,W,X,Ke)}ne!=null&&B&&eu(ne,S&&S.ref,Z,I||S,!I)},y=(S,I,P,F)=>{if(S==null)r(I.el=s(I.children),P,F);else{const B=I.el=S.el;I.children!==S.children&&c(B,I.children)}},g=(S,I,P,F)=>{S==null?r(I.el=l(I.children||""),P,F):I.el=S.el},v=(S,I,P,F)=>{[S.el,S.anchor]=p(S.children,I,P,F,S.el,S.anchor)},b=({el:S,anchor:I},P,F)=>{let B;for(;S&&S!==I;)B=f(S),r(S,P,F),S=B;r(I,P,F)},E=({el:S,anchor:I})=>{let P;for(;S&&S!==I;)P=f(S),i(S),S=P;i(I)},C=(S,I,P,F,B,Z,Q,W,X)=>{I.type==="svg"?Q="svg":I.type==="math"&&(Q="mathml"),S==null?x(I,P,F,B,Z,Q,W,X):H(S,I,B,Z,Q,W,X)},x=(S,I,P,F,B,Z,Q,W)=>{let X,j;const{props:ne,shapeFlag:de,transition:ce,dirs:ve}=S;if(X=S.el=a(S.type,Z,ne&&ne.is,ne),de&8?u(X,S.children):de&16&&U(S.children,X,null,F,B,pc(S,Z),Q,W),ve&&xr(S,null,F,"created"),O(X,S,S.scopeId,Q,F),ne){for(const Ve in ne)Ve!=="value"&&!So(Ve)&&o(X,Ve,null,ne[Ve],Z,S.children,F,B,Ye);"value"in ne&&o(X,"value",null,ne.value,Z),(j=ne.onVnodeBeforeMount)&&Sn(j,F,S)}ve&&xr(S,null,F,"beforeMount");const Te=S_(B,ce);Te&&ce.beforeEnter(X),r(X,I,P),((j=ne&&ne.onVnodeMounted)||Te||ve)&&Ut(()=>{j&&Sn(j,F,S),Te&&ce.enter(X),ve&&xr(S,null,F,"mounted")},B)},O=(S,I,P,F,B)=>{if(P&&h(S,P),F)for(let Z=0;Z<F.length;Z++)h(S,F[Z]);if(B){let Z=B.subTree;if(I===Z){const Q=B.vnode;O(S,Q,Q.scopeId,Q.slotScopeIds,B.parent)}}},U=(S,I,P,F,B,Z,Q,W,X=0)=>{for(let j=X;j<S.length;j++){const ne=S[j]=W?ir(S[j]):An(S[j]);m(null,ne,I,P,F,B,Z,Q,W)}},H=(S,I,P,F,B,Z,Q)=>{const W=I.el=S.el;let{patchFlag:X,dynamicChildren:j,dirs:ne}=I;X|=S.patchFlag&16;const de=S.props||Xe,ce=I.props||Xe;let ve;if(P&&Ar(P,!1),(ve=ce.onVnodeBeforeUpdate)&&Sn(ve,P,I,S),ne&&xr(I,S,P,"beforeUpdate"),P&&Ar(P,!0),j?G(S.dynamicChildren,j,W,P,F,pc(I,B),Z):Q||N(S,I,W,null,P,F,pc(I,B),Z,!1),X>0){if(X&16)q(W,I,de,ce,P,F,B);else if(X&2&&de.class!==ce.class&&o(W,"class",null,ce.class,B),X&4&&o(W,"style",de.style,ce.style,B),X&8){const Te=I.dynamicProps;for(let Ve=0;Ve<Te.length;Ve++){const tt=Te[Ve],vt=de[tt],fn=ce[tt];(fn!==vt||tt==="value")&&o(W,tt,vt,fn,B,S.children,P,F,Ye)}}X&1&&S.children!==I.children&&u(W,I.children)}else!Q&&j==null&&q(W,I,de,ce,P,F,B);((ve=ce.onVnodeUpdated)||ne)&&Ut(()=>{ve&&Sn(ve,P,I,S),ne&&xr(I,S,P,"updated")},F)},G=(S,I,P,F,B,Z,Q)=>{for(let W=0;W<I.length;W++){const X=S[W],j=I[W],ne=X.el&&(X.type===mt||!Xi(X,j)||X.shapeFlag&70)?d(X.el):P;m(X,j,ne,null,F,B,Z,Q,!0)}},q=(S,I,P,F,B,Z,Q)=>{if(P!==F){if(P!==Xe)for(const W in P)!So(W)&&!(W in F)&&o(S,W,P[W],null,Q,I.children,B,Z,Ye);for(const W in F){if(So(W))continue;const X=F[W],j=P[W];X!==j&&W!=="value"&&o(S,W,j,X,Q,I.children,B,Z,Ye)}"value"in F&&o(S,"value",P.value,F.value,Q)}},z=(S,I,P,F,B,Z,Q,W,X)=>{const j=I.el=S?S.el:s(""),ne=I.anchor=S?S.anchor:s("");let{patchFlag:de,dynamicChildren:ce,slotScopeIds:ve}=I;ve&&(W=W?W.concat(ve):ve),S==null?(r(j,P,F),r(ne,P,F),U(I.children||[],P,ne,B,Z,Q,W,X)):de>0&&de&64&&ce&&S.dynamicChildren?(G(S.dynamicChildren,ce,P,B,Z,Q,W),(I.key!=null||B&&I===B.subTree)&&sv(S,I,!0)):N(S,I,P,ne,B,Z,Q,W,X)},Y=(S,I,P,F,B,Z,Q,W,X)=>{I.slotScopeIds=W,S==null?I.shapeFlag&512?B.ctx.activate(I,P,F,Q,X):le(I,P,F,B,Z,Q,X):Be(S,I,X)},le=(S,I,P,F,B,Z,Q)=>{const W=S.component=k_(S,F,B);if(Kg(S)&&(W.ctx.renderer=Ke),M_(W),W.asyncDep){if(B&&B.registerDep(W,L),!S.el){const X=W.subTree=R(pr);g(null,X,I,P)}}else L(W,S,I,P,B,Z,Q)},Be=(S,I,P)=>{const F=I.component=S.component;if(Db(S,I,P))if(F.asyncDep&&!F.asyncResolved){k(F,I,P);return}else F.next=I,Mb(F.update),F.effect.dirty=!0,F.update();else I.el=S.el,F.vnode=I},L=(S,I,P,F,B,Z,Q)=>{const W=()=>{if(S.isMounted){let{next:ne,bu:de,u:ce,parent:ve,vnode:Te}=S;{const ri=lv(S);if(ri){ne&&(ne.el=Te.el,k(S,ne,Q)),ri.asyncDep.then(()=>{S.isUnmounted||W()});return}}let Ve=ne,tt;Ar(S,!1),ne?(ne.el=Te.el,k(S,ne,Q)):ne=Te,de&&Ga(de),(tt=ne.props&&ne.props.onVnodeBeforeUpdate)&&Sn(tt,ve,ne,Te),Ar(S,!0);const vt=fc(S),fn=S.subTree;S.subTree=vt,m(fn,vt,d(fn.el),Ct(fn),S,B,Z),ne.el=vt.el,Ve===null&&Ub(S,vt.el),ce&&Ut(ce,B),(tt=ne.props&&ne.props.onVnodeUpdated)&&Ut(()=>Sn(tt,ve,ne,Te),B)}else{let ne;const{el:de,props:ce}=I,{bm:ve,m:Te,parent:Ve}=S,tt=Eo(I);if(Ar(S,!1),ve&&Ga(ve),!tt&&(ne=ce&&ce.onVnodeBeforeMount)&&Sn(ne,Ve,I),Ar(S,!0),de&&ba){const vt=()=>{S.subTree=fc(S),ba(de,S.subTree,S,B,null)};tt?I.type.__asyncLoader().then(()=>!S.isUnmounted&&vt()):vt()}else{const vt=S.subTree=fc(S);m(null,vt,P,F,S,B,Z),I.el=vt.el}if(Te&&Ut(Te,B),!tt&&(ne=ce&&ce.onVnodeMounted)){const vt=I;Ut(()=>Sn(ne,Ve,vt),B)}(I.shapeFlag&256||Ve&&Eo(Ve.vnode)&&Ve.vnode.shapeFlag&256)&&S.a&&Ut(S.a,B),S.isMounted=!0,I=P=F=null}},X=S.effect=new Yu(W,ln,()=>rd(j),S.scope),j=S.update=()=>{X.dirty&&X.run()};j.id=S.uid,Ar(S,!0),j()},k=(S,I,P)=>{I.component=S;const F=S.vnode.props;S.vnode=I,S.next=null,m_(S,I.props,F,P),y_(S,I.children,P),Sr(),jf(S),wr()},N=(S,I,P,F,B,Z,Q,W,X=!1)=>{const j=S&&S.children,ne=S?S.shapeFlag:0,de=I.children,{patchFlag:ce,shapeFlag:ve}=I;if(ce>0){if(ce&128){se(j,de,P,F,B,Z,Q,W,X);return}else if(ce&256){ee(j,de,P,F,B,Z,Q,W,X);return}}ve&8?(ne&16&&Ye(j,B,Z),de!==j&&u(P,de)):ne&16?ve&16?se(j,de,P,F,B,Z,Q,W,X):Ye(j,B,Z,!0):(ne&8&&u(P,""),ve&16&&U(de,P,F,B,Z,Q,W,X))},ee=(S,I,P,F,B,Z,Q,W,X)=>{S=S||mi,I=I||mi;const j=S.length,ne=I.length,de=Math.min(j,ne);let ce;for(ce=0;ce<de;ce++){const ve=I[ce]=X?ir(I[ce]):An(I[ce]);m(S[ce],ve,P,null,B,Z,Q,W,X)}j>ne?Ye(S,B,Z,!0,!1,de):U(I,P,F,B,Z,Q,W,X,de)},se=(S,I,P,F,B,Z,Q,W,X)=>{let j=0;const ne=I.length;let de=S.length-1,ce=ne-1;for(;j<=de&&j<=ce;){const ve=S[j],Te=I[j]=X?ir(I[j]):An(I[j]);if(Xi(ve,Te))m(ve,Te,P,null,B,Z,Q,W,X);else break;j++}for(;j<=de&&j<=ce;){const ve=S[de],Te=I[ce]=X?ir(I[ce]):An(I[ce]);if(Xi(ve,Te))m(ve,Te,P,null,B,Z,Q,W,X);else break;de--,ce--}if(j>de){if(j<=ce){const ve=ce+1,Te=ve<ne?I[ve].el:F;for(;j<=ce;)m(null,I[j]=X?ir(I[j]):An(I[j]),P,Te,B,Z,Q,W,X),j++}}else if(j>ce)for(;j<=de;)K(S[j],B,Z,!0),j++;else{const ve=j,Te=j,Ve=new Map;for(j=Te;j<=ce;j++){const Gt=I[j]=X?ir(I[j]):An(I[j]);Gt.key!=null&&Ve.set(Gt.key,j)}let tt,vt=0;const fn=ce-Te+1;let ri=!1,kf=0;const Zi=new Array(fn);for(j=0;j<fn;j++)Zi[j]=0;for(j=ve;j<=de;j++){const Gt=S[j];if(vt>=fn){K(Gt,B,Z,!0);continue}let _n;if(Gt.key!=null)_n=Ve.get(Gt.key);else for(tt=Te;tt<=ce;tt++)if(Zi[tt-Te]===0&&Xi(Gt,I[tt])){_n=tt;break}_n===void 0?K(Gt,B,Z,!0):(Zi[_n-Te]=j+1,_n>=kf?kf=_n:ri=!0,m(Gt,I[_n],P,null,B,Z,Q,W,X),vt++)}const Tf=ri?w_(Zi):mi;for(tt=Tf.length-1,j=fn-1;j>=0;j--){const Gt=Te+j,_n=I[Gt],Mf=Gt+1<ne?I[Gt+1].el:F;Zi[j]===0?m(null,_n,P,Mf,B,Z,Q,W,X):ri&&(tt<0||j!==Tf[tt]?J(_n,P,Mf,2):tt--)}}},J=(S,I,P,F,B=null)=>{const{el:Z,type:Q,transition:W,children:X,shapeFlag:j}=S;if(j&6){J(S.component.subTree,I,P,F);return}if(j&128){S.suspense.move(I,P,F);return}if(j&64){Q.move(S,I,P,Ke);return}if(Q===mt){r(Z,I,P);for(let de=0;de<X.length;de++)J(X[de],I,P,F);r(S.anchor,I,P);return}if(Q===mc){b(S,I,P);return}if(F!==2&&j&1&&W)if(F===0)W.beforeEnter(Z),r(Z,I,P),Ut(()=>W.enter(Z),B);else{const{leave:de,delayLeave:ce,afterLeave:ve}=W,Te=()=>r(Z,I,P),Ve=()=>{de(Z,()=>{Te(),ve&&ve()})};ce?ce(Z,Te,Ve):Ve()}else r(Z,I,P)},K=(S,I,P,F=!1,B=!1)=>{const{type:Z,props:Q,ref:W,children:X,dynamicChildren:j,shapeFlag:ne,patchFlag:de,dirs:ce}=S;if(W!=null&&eu(W,null,P,S,!0),ne&256){I.ctx.deactivate(S);return}const ve=ne&1&&ce,Te=!Eo(S);let Ve;if(Te&&(Ve=Q&&Q.onVnodeBeforeUnmount)&&Sn(Ve,I,S),ne&6)st(S.component,P,F);else{if(ne&128){S.suspense.unmount(P,F);return}ve&&xr(S,null,I,"beforeUnmount"),ne&64?S.type.remove(S,I,P,B,Ke,F):j&&(Z!==mt||de>0&&de&64)?Ye(j,I,P,!1,!0):(Z===mt&&de&384||!B&&ne&16)&&Ye(X,I,P),F&&rt(S)}(Te&&(Ve=Q&&Q.onVnodeUnmounted)||ve)&&Ut(()=>{Ve&&Sn(Ve,I,S),ve&&xr(S,null,I,"unmounted")},P)},rt=S=>{const{type:I,el:P,anchor:F,transition:B}=S;if(I===mt){Pe(P,F);return}if(I===mc){E(S);return}const Z=()=>{i(P),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(S.shapeFlag&1&&B&&!B.persisted){const{leave:Q,delayLeave:W}=B,X=()=>Q(P,Z);W?W(S.el,Z,X):X()}else Z()},Pe=(S,I)=>{let P;for(;S!==I;)P=f(S),i(S),S=P;i(I)},st=(S,I,P)=>{const{bum:F,scope:B,update:Z,subTree:Q,um:W}=S;F&&Ga(F),B.stop(),Z&&(Z.active=!1,K(Q,S,I,P)),W&&Ut(W,I),Ut(()=>{S.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},Ye=(S,I,P,F=!1,B=!1,Z=0)=>{for(let Q=Z;Q<S.length;Q++)K(S[Q],I,P,F,B)},Ct=S=>S.shapeFlag&6?Ct(S.component.subTree):S.shapeFlag&128?S.suspense.next():f(S.anchor||S.el);let er=!1;const Ir=(S,I,P)=>{S==null?I._vnode&&K(I._vnode,null,null,!0):m(I._vnode||null,S,I,null,null,null,P),er||(er=!0,jf(),$g(),er=!1),I._vnode=S},Ke={p:m,um:K,m:J,r:rt,mt:le,mc:U,pc:N,pbc:G,n:Ct,o:e};let bn,ba;return{render:Ir,hydrate:bn,createApp:f_(Ir,bn)}}function pc({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ar({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function S_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function sv(e,t,n=!1){const r=e.children,i=t.children;if(ge(r)&&ge(i))for(let o=0;o<r.length;o++){const a=r[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=ir(i[o]),s.el=a.el),n||sv(a,s)),s.type===Qs&&(s.el=a.el)}}function w_(e){const t=e.slice(),n=[0];let r,i,o,a,s;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,e[n[s]]<c?o=s+1:a=s;c<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,a=n[o-1];o-- >0;)n[o]=a,a=t[a];return n}function lv(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:lv(t)}const E_=e=>e.__isTeleport,mt=Symbol.for("v-fgt"),Qs=Symbol.for("v-txt"),pr=Symbol.for("v-cmt"),mc=Symbol.for("v-stc"),xo=[];let gn=null;function re(e=!1){xo.push(gn=e?null:[])}function C_(){xo.pop(),gn=xo[xo.length-1]||null}let Do=1;function Zf(e){Do+=e}function cv(e){return e.dynamicChildren=Do>0?gn||mi:null,C_(),Do>0&&gn&&gn.push(e),e}function Qe(e,t,n,r,i,o){return cv(te(e,t,n,r,i,o,!0))}function Se(e,t,n,r,i){return cv(R(e,t,n,r,i,!0))}function ms(e){return e?e.__v_isVNode===!0:!1}function Xi(e,t){return e.type===t.type&&e.key===t.key}const uv=({key:e})=>e??null,Xa=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ht(e)||Rt(e)||be(e)?{i:gt,r:e,k:t,f:!!n}:e:null);function te(e,t=null,n=null,r=0,i=null,o=e===mt?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&uv(t),ref:t&&Xa(t),scopeId:Js,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:gt};return s?(ud(l,n),o&128&&e.normalize(l)):n&&(l.shapeFlag|=ht(n)?8:16),Do>0&&!a&&gn&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&gn.push(l),l}const R=I_;function I_(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===jb)&&(e=pr),ms(e)){const s=Si(e,t,!0);return n&&ud(s,n),Do>0&&!o&&gn&&(s.shapeFlag&6?gn[gn.indexOf(e)]=s:gn.push(s)),s.patchFlag|=-2,s}if(O_(e)&&(e=e.__vccOpts),t){t=ct(t);let{class:s,style:l}=t;s&&!ht(s)&&(t.class=Xt(s)),nt(l)&&(Og(l)&&!ge(l)&&(l=wt({},l)),t.style=Ws(l))}const a=ht(e)?1:Hb(e)?128:E_(e)?64:nt(e)?4:be(e)?2:0;return te(e,t,n,r,i,a,o,!0)}function ct(e){return e?Og(e)||tv(e)?wt({},e):e:null}function Si(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:a,children:s,transition:l}=e,c=t?nn(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&uv(c),ref:t&&t.ref?n&&o?ge(o)?o.concat(Xa(t)):[o,Xa(t)]:Xa(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==mt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Si(e.ssContent),ssFallback:e.ssFallback&&Si(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&(u.transition=l.clone(u)),u}function me(e=" ",t=0){return R(Qs,null,e,t)}function Oe(e="",t=!1){return t?(re(),Se(pr,null,e)):R(pr,null,e)}function An(e){return e==null||typeof e=="boolean"?R(pr):ge(e)?R(mt,null,e.slice()):typeof e=="object"?ir(e):R(Qs,null,String(e))}function ir(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Si(e)}function ud(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ge(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),ud(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!tv(t)?t._ctx=gt:i===3&&gt&&(gt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else be(t)?(t={default:t,_ctx:gt},n=32):(t=String(t),r&64?(n=16,t=[me(t)]):n=8);e.children=t,e.shapeFlag|=n}function nn(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Xt([t.class,r.class]));else if(i==="style")t.style=Ws([t.style,r.style]);else if(Hs(i)){const o=t[i],a=r[i];a&&o!==a&&!(ge(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=r[i])}return t}function Sn(e,t,n,r=null){vn(e,t,7,[n,r])}const x_=Xg();let A_=0;function k_(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||x_,o={uid:A_++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new bg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rv(r,i),emitsOptions:qg(r,i),emit:null,emitted:null,propsDefaults:Xe,inheritAttrs:r.inheritAttrs,ctx:Xe,data:Xe,props:Xe,attrs:Xe,slots:Xe,refs:Xe,setupState:Xe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Nb.bind(null,o),e.ce&&e.ce(o),o}let At=null;const T_=()=>At||gt;let gs,tu;{const e=gg(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),o=>{i.length>1?i.forEach(a=>a(o)):i[0](o)}};gs=t("__VUE_INSTANCE_SETTERS__",n=>At=n),tu=t("__VUE_SSR_SETTERS__",n=>el=n)}const Xo=e=>{const t=At;return gs(e),e.scope.on(),()=>{e.scope.off(),gs(t)}},Xf=()=>{At&&At.scope.off(),gs(null)};function dv(e){return e.vnode.shapeFlag&4}let el=!1;function M_(e,t=!1){t&&tu(t);const{props:n,children:r}=e.vnode,i=dv(e);p_(e,n,i,t),v_(e,r);const o=i?R_(e,t):void 0;return t&&tu(!1),o}function R_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,i_);const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?hv(e):null,o=Xo(e);Sr();const a=cr(r,e,0,[e.props,i]);if(wr(),o(),fg(a)){if(a.then(Xf,Xf),t)return a.then(s=>{Qf(e,s,t)}).catch(s=>{Gs(s,e,0)});e.asyncDep=a}else Qf(e,a,t)}else fv(e,t)}function Qf(e,t,n){be(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:nt(t)&&(e.setupState=Fg(t)),fv(e,n)}let eh;function fv(e,t,n){const r=e.type;if(!e.render){if(!t&&eh&&!r.render){const i=r.template||ld(e).template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:l}=r,c=wt(wt({isCustomElement:o,delimiters:s},a),l);r.render=eh(i,c)}}e.render=r.render||ln}{const i=Xo(e);Sr();try{a_(e)}finally{wr(),i()}}}const P_={get(e,t){return jt(e,"get",""),e[t]}};function hv(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,P_),slots:e.slots,emit:e.emit,expose:t}}function tl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Fg(Sb(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Co)return Co[n](e)},has(t,n){return n in t||n in Co}}))}function N_(e,t=!0){return be(e)?e.displayName||e.name:e.name||t&&e.__name}function O_(e){return be(e)&&"__vccOpts"in e}const ye=(e,t)=>wb(e,t,el);function xa(e,t,n){const r=arguments.length;return r===2?nt(t)&&!ge(t)?ms(t)?R(e,null,[t]):R(e,t):R(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ms(n)&&(n=[n]),R(e,t,n))}const L_="3.4.26";/**
* @vue/runtime-dom v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const D_="http://www.w3.org/2000/svg",U_="http://www.w3.org/1998/Math/MathML",or=typeof document<"u"?document:null,th=or&&or.createElement("template"),F_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?or.createElementNS(D_,e):t==="mathml"?or.createElementNS(U_,e):or.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>or.createTextNode(e),createComment:e=>or.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>or.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const a=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{th.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const s=th.content;if(r==="svg"||r==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},B_=Symbol("_vtc");function j_(e,t,n){const r=e[B_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const nh=Symbol("_vod"),$_=Symbol("_vsh"),H_=Symbol(""),q_=/(^|;)\s*display\s*:/;function z_(e,t,n){const r=e.style,i=ht(n);let o=!1;if(n&&!i){if(t)if(ht(t))for(const a of t.split(";")){const s=a.slice(0,a.indexOf(":")).trim();n[s]==null&&Qa(r,s,"")}else for(const a in t)n[a]==null&&Qa(r,a,"");for(const a in n)a==="display"&&(o=!0),Qa(r,a,n[a])}else if(i){if(t!==n){const a=r[H_];a&&(n+=";"+a),r.cssText=n,o=q_.test(n)}}else t&&e.removeAttribute("style");nh in e&&(e[nh]=o?r.display:"",e[$_]&&(r.display="none"))}const rh=/\s*!important$/;function Qa(e,t,n){if(ge(n))n.forEach(r=>Qa(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=V_(e,t);rh.test(n)?e.setProperty(Pi(r),n.replace(rh,""),"important"):e[r]=n}}const ih=["Webkit","Moz","ms"],gc={};function V_(e,t){const n=gc[t];if(n)return n;let r=Mn(t);if(r!=="filter"&&r in e)return gc[t]=r;r=Vs(r);for(let i=0;i<ih.length;i++){const o=ih[i]+r;if(o in e)return gc[t]=o}return t}const oh="http://www.w3.org/1999/xlink";function W_(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(oh,t.slice(6,t.length)):e.setAttributeNS(oh,t,n);else{const o=Z1(t);n==null||o&&!vg(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function K_(e,t,n,r,i,o,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,i,o),e[t]=n??"";return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const c=s==="OPTION"?e.getAttribute("value")||"":e.value,u=n??"";(c!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=vg(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function fi(e,t,n,r){e.addEventListener(t,n,r)}function G_(e,t,n,r){e.removeEventListener(t,n,r)}const ah=Symbol("_vei");function Y_(e,t,n,r,i=null){const o=e[ah]||(e[ah]={}),a=o[t];if(r&&a)a.value=r;else{const[s,l]=J_(t);if(r){const c=o[t]=Q_(r,i);fi(e,s,c,l)}else a&&(G_(e,s,a,l),o[t]=void 0)}}const sh=/(?:Once|Passive|Capture)$/;function J_(e){let t;if(sh.test(e)){t={};let r;for(;r=e.match(sh);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Pi(e.slice(2)),t]}let vc=0;const Z_=Promise.resolve(),X_=()=>vc||(Z_.then(()=>vc=0),vc=Date.now());function Q_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;vn(eS(r,n.value),t,5,[r])};return n.value=e,n.attached=X_(),n}function eS(e,t){if(ge(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const lh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,tS=(e,t,n,r,i,o,a,s,l)=>{const c=i==="svg";t==="class"?j_(e,r,c):t==="style"?z_(e,n,r):Hs(t)?Wu(t)||Y_(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):nS(e,t,r,c))?K_(e,t,r,o,a,s,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),W_(e,t,r,c))};function nS(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&lh(t)&&be(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return lh(t)&&ht(n)?!1:t in e}const ch=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ge(t)?n=>Ga(t,n):t};function rS(e){e.target.composing=!0}function uh(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const yc=Symbol("_assign"),oi={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[yc]=ch(i);const o=r||i.props&&i.props.type==="number";fi(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;n&&(s=s.trim()),o&&(s=Vc(s)),e[yc](s)}),n&&fi(e,"change",()=>{e.value=e.value.trim()}),t||(fi(e,"compositionstart",rS),fi(e,"compositionend",uh),fi(e,"change",uh))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},o){if(e[yc]=ch(o),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?Vc(e.value):e.value,s=t??"";a!==s&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===s)||(e.value=s))}},iS=["ctrl","shift","alt","meta"],oS={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>iS.some(n=>e[`${n}Key`]&&!t.includes(n))},Et=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...o)=>{for(let a=0;a<t.length;a++){const s=oS[t[a]];if(s&&s(i,t))return}return e(i,...o)})},aS=wt({patchProp:tS},F_);let dh;function sS(){return dh||(dh=b_(aS))}const lS=(...e)=>{const t=sS().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=uS(r);if(!i)return;const o=t._component;!be(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,cS(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function cS(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function uS(e){return ht(e)?document.querySelector(e):e}const dS="Logging",fS="x-amz-user-agent",hS="NoHubcallbackProvidedException";var Jt;(function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"})(Jt||(Jt={}));const fh={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class kt{constructor(t,n=Jt.WARN){this.name=t,this.level=n,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){const t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...n){let r=this.level;kt.LOG_LEVEL&&(r=kt.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(r=window.LOG_LEVEL);const i=fh[r];if(!(fh[t]>=i))return;let a=console.log.bind(console);t===Jt.ERROR&&console.error&&(a=console.error.bind(console)),t===Jt.WARN&&console.warn&&(a=console.warn.bind(console)),kt.BIND_ALL_LOG_LEVELS&&(t===Jt.INFO&&console.info&&(a=console.info.bind(console)),t===Jt.DEBUG&&console.debug&&(a=console.debug.bind(console)));const s=`[${t}] ${this._ts()} ${this.name}`;let l="";if(n.length===1&&typeof n[0]=="string")l=`${s} - ${n[0]}`,a(l);else if(n.length===1)l=`${s} ${n[0]}`,a(s,n[0]);else if(typeof n[0]=="string"){let c=n.slice(1);c.length===1&&(c=c[0]),l=`${s} - ${n[0]} ${c}`,a(`${s} - ${n[0]}`,c)}else l=`${s} ${n}`,a(s,n);for(const c of this._pluggables){const u={message:l,timestamp:Date.now()};c.pushLogs([u])}}log(...t){this._log(Jt.INFO,...t)}info(...t){this._log(Jt.INFO,...t)}warn(...t){this._log(Jt.WARN,...t)}error(...t){this._log(Jt.ERROR,...t)}debug(...t){this._log(Jt.DEBUG,...t)}verbose(...t){this._log(Jt.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===dS&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}}kt.LOG_LEVEL=null;kt.BIND_ALL_LOG_LEVELS=!1;class rn extends Error{constructor({message:t,name:n,recoverySuggestion:r,underlyingError:i}){super(t),this.name=n,this.underlyingError=i,this.recoverySuggestion=r,this.constructor=rn,Object.setPrototypeOf(this,rn.prototype)}}var vs;(function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown"})(vs||(vs={}));const dd=(e,t=rn)=>(n,r,i)=>{const{message:o,recoverySuggestion:a}=e[r];if(!n)throw new t({name:r,message:i?`${o} ${i}`:o,recoverySuggestion:a})},Rn=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",Qi=new kt("Hub");class pv{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,n){const r=this.listeners.get(t);if(!r){Qi.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...r.filter(({callback:i})=>i!==n)])}dispatch(t,n,r,i){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(i===Rn||Qi.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const o={channel:t,payload:{...n},source:r,patternInfo:[]};try{this._toListeners(o)}catch(a){Qi.error(a)}}listen(t,n,r="noname"){let i;if(typeof n!="function")throw new rn({name:hS,message:"No callback supplied to Hub"});i=n;let o=this.listeners.get(t);return o||(o=[],this.listeners.set(t,o)),o.push({name:r,callback:i}),()=>{this._remove(t,i)}}_toListeners(t){const{channel:n,payload:r}=t,i=this.listeners.get(n);i&&i.forEach(o=>{Qi.debug(`Dispatching to ${n} with `,r);try{o.callback(t)}catch(a){Qi.error(a)}})}}const Pn=new pv("__default__"),ys=new pv("internal-hub"),mv=()=>{if(typeof window=="object"&&typeof window.crypto=="object")return window.crypto;if(typeof crypto=="object")return crypto;throw new rn({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},pS=()=>{if(typeof window<"u"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new rn({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},mS=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new rn({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},gv={convert(e){return mS()(e)}};var Tn;(function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"})(Tn||(Tn={}));const gS={[Tn.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[Tn.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[Tn.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[Tn.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[Tn.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},fd=dd(gS);function De(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,fd(t,Tn.AuthUserPoolException)}function nl(e){var n,r,i,o,a,s,l,c;const t=!!((r=(n=e==null?void 0:e.loginWith)==null?void 0:n.oauth)!=null&&r.domain)&&!!((o=(i=e==null?void 0:e.loginWith)==null?void 0:i.oauth)!=null&&o.redirectSignOut)&&!!((s=(a=e==null?void 0:e.loginWith)==null?void 0:a.oauth)!=null&&s.redirectSignIn)&&!!((c=(l=e==null?void 0:e.loginWith)==null?void 0:l.oauth)!=null&&c.responseType);fd(t,Tn.OAuthNotConfigureException)}function es(e){const t=!!(e!=null&&e.identityPoolId);fd(t,Tn.InvalidIdentityPoolIdException)}function Vn(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{const r=t[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(gv.convert(r).split("").map(a=>`%${`00${a.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),o=JSON.parse(i);return{toString:()=>e,payload:o}}catch{throw new Error("Invalid token payload")}}const vv=e=>{const t=Reflect.ownKeys(e);for(const n of t){const r=e[n];(r&&typeof r=="object"||typeof r=="function")&&vv(r)}return Object.freeze(e)},vS=new kt("parseAWSExports"),yS={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},bS=(e={})=>{var Pe,st,Ye,Ct,er,Ir;if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new rn({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:r,aws_appsync_region:i,aws_bots_config:o,aws_cognito_identity_pool_id:a,aws_cognito_sign_up_verification_method:s,aws_cognito_mfa_configuration:l,aws_cognito_mfa_types:c,aws_cognito_password_protection_settings:u,aws_cognito_verification_mechanisms:d,aws_cognito_signup_attributes:f,aws_cognito_social_providers:h,aws_cognito_username_attributes:p,aws_mandatory_sign_in:m,aws_mobile_analytics_app_id:y,aws_mobile_analytics_app_region:g,aws_user_files_s3_bucket:v,aws_user_files_s3_bucket_region:b,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:E,aws_user_pools_id:C,aws_user_pools_web_client_id:x,geo:O,oauth:U,predictions:H,aws_cloud_logic_custom:G,Notifications:q,modelIntrospection:z}=e,Y={};y&&(Y.Analytics={Pinpoint:{appId:y,region:g}});const{InAppMessaging:le,Push:Be}=q??{};if(le!=null&&le.AWSPinpoint||Be!=null&&Be.AWSPinpoint){if(le!=null&&le.AWSPinpoint){const{appId:Ke,region:bn}=le.AWSPinpoint;Y.Notifications={InAppMessaging:{Pinpoint:{appId:Ke,region:bn}}}}if(Be!=null&&Be.AWSPinpoint){const{appId:Ke,region:bn}=Be.AWSPinpoint;Y.Notifications={...Y.Notifications,PushNotification:{Pinpoint:{appId:Ke,region:bn}}}}}if(Array.isArray(o)&&(Y.Interactions={LexV1:Object.fromEntries(o.map(Ke=>[Ke.name,Ke]))}),r){const Ke=yS[n];Ke||vS.debug(`Invalid authentication type ${n}. Falling back to IAM.`),Y.API={GraphQL:{endpoint:r,apiKey:t,region:i,defaultAuthMode:Ke??"iam"}},z&&(Y.API.GraphQL.modelIntrospection=z)}const L=l?{status:l&&l.toLowerCase(),totpEnabled:(c==null?void 0:c.includes("TOTP"))??!1,smsEnabled:(c==null?void 0:c.includes("SMS"))??!1}:void 0,k=u?{minLength:u.passwordPolicyMinLength,requireLowercase:((Pe=u.passwordPolicyCharacters)==null?void 0:Pe.includes("REQUIRES_LOWERCASE"))??!1,requireUppercase:((st=u.passwordPolicyCharacters)==null?void 0:st.includes("REQUIRES_UPPERCASE"))??!1,requireNumbers:((Ye=u.passwordPolicyCharacters)==null?void 0:Ye.includes("REQUIRES_NUMBERS"))??!1,requireSpecialCharacters:((Ct=u.passwordPolicyCharacters)==null?void 0:Ct.includes("REQUIRES_SYMBOLS"))??!1}:void 0,ee=Array.from(new Set([...d??[],...f??[]])).reduce((Ke,bn)=>({...Ke,[bn.toLowerCase()]:{required:!0}}),{}),se=(p==null?void 0:p.includes("EMAIL"))??!1,J=(p==null?void 0:p.includes("PHONE_NUMBER"))??!1;(a||C)&&(Y.Auth={Cognito:{identityPoolId:a,allowGuestAccess:m!=="enable",signUpVerificationMethod:s,userAttributes:ee,userPoolClientId:x,userPoolId:C,mfa:L,passwordFormat:k,loginWith:{username:!(se||J),email:se,phone:J}}});const K=U?Object.keys(U).length>0:!1,rt=h?h.length>0:!1;if(Y.Auth&&K&&(Y.Auth.Cognito.loginWith={...Y.Auth.Cognito.loginWith,oauth:{..._S(U),...rt&&{providers:SS(h)}}}),v&&(Y.Storage={S3:{bucket:v,region:b,dangerouslyConnectToHttpEndpointForTesting:E}}),O){const{amazon_location_service:Ke}=O;Y.Geo={LocationService:{maps:Ke.maps,geofenceCollections:Ke.geofenceCollections,searchIndices:Ke.search_indices,region:Ke.region}}}if(G&&(Y.API={...Y.API,REST:G.reduce((Ke,bn)=>{const{name:ba,endpoint:S,region:I,service:P}=bn;return{...Ke,[ba]:{endpoint:S,...P?{service:P}:void 0,...I?{region:I}:void 0}}},{})}),H){const{VoiceId:Ke}=((Ir=(er=H==null?void 0:H.convert)==null?void 0:er.speechGenerator)==null?void 0:Ir.defaults)??{};Y.Predictions=Ke?{...H,convert:{...H.convert,speechGenerator:{...H.convert.speechGenerator,defaults:{voiceId:Ke}}}}:H}return Y},hh=e=>(e==null?void 0:e.split(","))??[],_S=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:r,responseType:i})=>({domain:e,scopes:t,redirectSignIn:hh(n),redirectSignOut:hh(r),responseType:i}),SS=e=>e.map(t=>{const n=t.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)}),yv=Symbol("oauth-listener");function wS(e){const{version:t}=e;return t?t.startsWith("1"):!1}function ES(e){if(!e)return;const{bucket_name:t,aws_region:n}=e;return{S3:{bucket:t,region:n}}}function CS(e){if(!e)return;const{user_pool_id:t,user_pool_client_id:n,identity_pool_id:r,password_policy:i,mfa_configuration:o,mfa_methods:a,unauthenticated_identities_enabled:s,oauth:l,username_attributes:c,standard_required_attributes:u}=e,d={Cognito:{userPoolId:t,userPoolClientId:n}};return r&&(d.Cognito={...d.Cognito,identityPoolId:r}),i&&(d.Cognito.passwordFormat={requireLowercase:i.require_lowercase,requireNumbers:i.require_numbers,requireUppercase:i.require_uppercase,requireSpecialCharacters:i.require_symbols,minLength:i.min_length??6}),o&&(d.Cognito.mfa={status:NS(o),smsEnabled:a==null?void 0:a.includes("SMS"),totpEnabled:a==null?void 0:a.includes("TOTP")}),s&&(d.Cognito.allowGuestAccess=s),l&&(d.Cognito.loginWith={oauth:{domain:l.domain,redirectSignIn:l.redirect_sign_in_uri,redirectSignOut:l.redirect_sign_out_uri,responseType:l.response_type==="token"?"token":"code",scopes:l.scopes,providers:PS(l.identity_providers)}}),c&&(d.Cognito.loginWith={...d.Cognito.loginWith,email:c.includes("email"),phone:c.includes("phone_number"),username:c.includes("username")}),u&&(d.Cognito.userAttributes=u.reduce((f,h)=>({...f,[h]:{required:!0}}),{})),d}function IS(e){if(!(e!=null&&e.amazon_pinpoint))return;const{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}function xS(e){if(!e)return;const{aws_region:t,geofence_collections:n,maps:r,search_indices:i}=e;return{LocationService:{region:t,searchIndices:i,geofenceCollections:n,maps:r}}}function AS(e){if(!e)return;const{aws_region:t,default_authorization_type:n,url:r,api_key:i,model_introspection:o}=e;return{GraphQL:{endpoint:r,defaultAuthMode:RS(n),region:t,apiKey:i,modelIntrospection:o}}}function kS(e){if(!e)return;const{aws_region:t,channels:n,amazon_pinpoint_app_id:r}=e,i=n.includes("IN_APP_MESSAGING"),o=n.includes("APNS")||n.includes("FCM");if(!(i||o))return;const a={};return i&&(a.InAppMessaging={Pinpoint:{appId:r,region:t}}),o&&(a.PushNotification={Pinpoint:{appId:r,region:t}}),a}function TS(e){const t={};return e.storage&&(t.Storage=ES(e.storage)),e.auth&&(t.Auth=CS(e.auth)),e.analytics&&(t.Analytics=IS(e.analytics)),e.geo&&(t.Geo=xS(e.geo)),e.data&&(t.API=AS(e.data)),e.notifications&&(t.Notifications=kS(e.notifications)),t}const MS={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function RS(e){return MS[e]}const ph={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function PS(e=[]){return e.reduce((t,n)=>(ph[n]!==void 0&&t.push(ph[n]),t),[])}function NS(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}const bv=e=>Object.keys(e).some(t=>t.startsWith("aws_"))?bS(e):wS(e)?TS(e):e;function mh({expiresAt:e,clockDrift:t}){return Date.now()+t>e}class OS{configure(t,n){this.authConfig=t,this.authOptions=n}async fetchAuthSession(t={}){var o,a,s,l,c,u;let n,r;const i=await this.getTokens(t);return i?(r=(a=(o=i.accessToken)==null?void 0:o.payload)==null?void 0:a.sub,n=await((l=(s=this.authOptions)==null?void 0:s.credentialsProvider)==null?void 0:l.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:i,authenticated:!0,forceRefresh:t.forceRefresh}))):n=await((u=(c=this.authOptions)==null?void 0:c.credentialsProvider)==null?void 0:u.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh})),{tokens:i,credentials:n==null?void 0:n.credentials,identityId:n==null?void 0:n.identityId,userSub:r}}async clearCredentials(){var t,n;await((n=(t=this.authOptions)==null?void 0:t.credentialsProvider)==null?void 0:n.clearCredentialsAndIdentityId())}async getTokens(t){var n,r;return await((r=(n=this.authOptions)==null?void 0:n.tokenProvider)==null?void 0:r.getTokens(t))??void 0}}function LS(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(d){a(d)}}function l(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})}function DS(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var sn=64,US=32,FS=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),BS=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],jS=Math.pow(2,53)-1,ts=function(){function e(){this.state=Int32Array.from(BS),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=t.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>jS)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=t[n++],r--,this.bufferLength===sn&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%sn>=sn-8){for(var i=this.bufferLength;i<sn;i++)n.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<sn-8;i++)n.setUint8(i,0);n.setUint32(sn-8,Math.floor(t/4294967296),!0),n.setUint32(sn-4,t),this.hashBuffer(),this.finished=!0}for(var o=new Uint8Array(US),i=0;i<8;i++)o[i*4]=this.state[i]>>>24&255,o[i*4+1]=this.state[i]>>>16&255,o[i*4+2]=this.state[i]>>>8&255,o[i*4+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var t=this,n=t.buffer,r=t.state,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],c=r[5],u=r[6],d=r[7],f=0;f<sn;f++){if(f<16)this.temp[f]=(n[f*4]&255)<<24|(n[f*4+1]&255)<<16|(n[f*4+2]&255)<<8|n[f*4+3]&255;else{var h=this.temp[f-2],p=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10;h=this.temp[f-15];var m=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[f]=(p+this.temp[f-7]|0)+(m+this.temp[f-16]|0)}var y=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&c^~l&u)|0)+(d+(FS[f]+this.temp[f]|0)|0)|0,g=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&o^i&a^o&a)|0;d=u,u=c,c=l,l=s+y|0,s=a,a=o,o=i,i=y+g|0}r[0]+=i,r[1]+=o,r[2]+=a,r[3]+=s,r[4]+=l,r[5]+=c,r[6]+=u,r[7]+=d},e}();const $S=e=>new TextEncoder().encode(e);var HS=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:$S;function _v(e){return e instanceof Uint8Array?e:typeof e=="string"?HS(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function qS(e){return typeof e=="string"?e.length===0:e.byteLength===0}var zS=function(){function e(t){this.secret=t,this.hash=new ts,this.reset()}return e.prototype.update=function(t){if(!(qS(t)||this.error))try{this.hash.update(_v(t))}catch(n){this.error=n}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return LS(this,void 0,void 0,function(){return DS(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new ts,this.secret){this.outer=new ts;var t=VS(this.secret),n=new Uint8Array(sn);n.set(t);for(var r=0;r<sn;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(var r=0;r<t.byteLength;r++)t[r]=0}},e}();function VS(e){var t=_v(e);if(t.byteLength>sn){var n=new ts;n.update(t),t=n.digest()}var r=new Uint8Array(sn);return r.set(t),r}const Sv={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Sv[e]=t}function WS(e){let t="";for(let n=0;n<e.byteLength;n++)t+=Sv[e[n]];return t}var dt;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(dt||(dt={}));var Wn;(function(e){e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"})(Wn||(Wn={}));var gh;(function(e){e.Record="1",e.IdentifyUser="2"})(gh||(gh={}));var vh;(function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"})(vh||(vh={}));var Re;(function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36"})(Re||(Re={}));var yh;(function(e){e.Subscribe="1",e.GraphQl="2"})(yh||(yh={}));var Ao;(function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"})(Ao||(Ao={}));var nu;(function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"})(nu||(nu={}));var bh;(function(e){e.None="0"})(bh||(bh={}));var _h;(function(e){e.Convert="1",e.Identify="2",e.Interpret="3"})(_h||(_h={}));var Sh;(function(e){e.Subscribe="1"})(Sh||(Sh={}));var wh;(function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"})(wh||(wh={}));var ru;(function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7"})(ru||(ru={}));const rl=()=>typeof global<"u",Ni=()=>typeof window<"u",wv=()=>typeof document<"u",hd=()=>typeof process<"u",Uo=(e,t)=>!!Object.keys(e).find(n=>n.startsWith(t));var Eh={};function KS(){const e=r=>r.startsWith("_react")||r.startsWith("__react"),t=r=>Object.keys(r).find(e),n=()=>Array.from(document.querySelectorAll("[id]"));return wv()&&n().some(t)}function GS(){return hd()&&typeof Eh<"u"&&!!Object.keys(Eh).find(e=>e.includes("react"))}function YS(){return Ni()&&Uo(window,"__VUE")}function JS(){return rl()&&Uo(global,"__VUE")}var Ch={};function ZS(){return Ni()&&Uo(window,"__SVELTE")}function XS(){return hd()&&typeof Ch<"u"&&!!Object.keys(Ch).find(e=>e.includes("svelte"))}function QS(){return Ni()&&window.next&&typeof window.next=="object"}function ew(){return rl()&&(Uo(global,"__next")||Uo(global,"__NEXT"))}function tw(){return Ni()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function nw(){return rl()&&typeof global.__NUXT_PATHS__<"u"}var Ih={};function rw(){const e=!!(wv()&&document.querySelector("[ng-version]")),t=!!(Ni()&&typeof window.ng<"u");return e||t}function iw(){var e;return hd()&&typeof Ih=="object"&&((e=Ih.npm_lifecycle_script)==null?void 0:e.startsWith("ng "))||!1}function ow(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function aw(){return rl()&&typeof global.expo<"u"}function sw(){return Ni()}const lw=[{platform:dt.Expo,detectionMethod:aw},{platform:dt.ReactNative,detectionMethod:ow},{platform:dt.NextJs,detectionMethod:QS},{platform:dt.Nuxt,detectionMethod:tw},{platform:dt.Angular,detectionMethod:rw},{platform:dt.React,detectionMethod:KS},{platform:dt.VueJs,detectionMethod:YS},{platform:dt.Svelte,detectionMethod:ZS},{platform:dt.WebUnknown,detectionMethod:sw},{platform:dt.NextJsSSR,detectionMethod:ew},{platform:dt.NuxtSSR,detectionMethod:nw},{platform:dt.ReactSSR,detectionMethod:GS},{platform:dt.VueJsSSR,detectionMethod:JS},{platform:dt.AngularSSR,detectionMethod:iw},{platform:dt.SvelteSSR,detectionMethod:XS}];function cw(){var e;return((e=lw.find(t=>t.detectionMethod()))==null?void 0:e.platform)||dt.ServerSideUnknown}const pd=()=>typeof window<"u"&&typeof window.document<"u";class uw{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new OS}configure(t,n){const r=bv(t);this.resourcesConfig=r,n&&(this.libraryOptions=n),this.resourcesConfig=vv(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),Pn.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",Rn),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[yv](t){var n,r,i;(r=(n=this.resourcesConfig.Auth)==null?void 0:n.Cognito.loginWith)!=null&&r.oauth?t((i=this.resourcesConfig.Auth)==null?void 0:i.Cognito):this.oAuthListener=t}notifyOAuthListener(){var t,n,r;!((n=(t=this.resourcesConfig.Auth)==null?void 0:t.Cognito.loginWith)!=null&&n.oauth)||!this.oAuthListener||(this.oAuthListener((r=this.resourcesConfig.Auth)==null?void 0:r.Cognito),this.oAuthListener=void 0)}}const qe=new uw,Ev=(e,t)=>e.Auth.fetchAuthSession(t),Cv=e=>Ev(qe,e);function Iv(){return qe.Auth.clearCredentials()}const il=e=>{const{headers:t,statusCode:n}=e;return{...dw(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},dw=e=>typeof(e==null?void 0:e.$metadata)=="object",Oi=async e=>{if(!e||e.statusCode<300)return;const t=await ol(e),r=(a=>{const[s]=a.toString().split(/[,:]+/);return s.includes("#")?s.split("#")[1]:s})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),i=t.message??t.Message??"Unknown error",o=new Error(i);return Object.assign(o,{name:r,$metadata:il(e)})},ol=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:il(e)})},Pt=(e,t,n,r)=>async(i,o)=>{const a={...r,...i},s=await a.endpointResolver(a,o),l=await t(o,s),c=await e(l,{...a});return n(c)},xv={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},fw={partitions:[xv,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},Av=e=>{const{partitions:t}=fw;for(const{regions:n,outputs:r,regionRegex:i}of t){const o=new RegExp(i);if(n.includes(e)||o.test(e))return r.dnsSuffix}return xv.outputs.dnsSuffix},hw=3,kv=({maxAttempts:e=hw,retryDecider:t,computeDelay:n,abortSignal:r})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,o)=>async function(s){let l,c=o.attemptsCount??0,u;const d=()=>{if(u)return xh(u,c),u;throw xh(l,c),l};for(;!(r!=null&&r.aborted)&&c<e;){try{u=await i(s),l=void 0}catch(f){l=f,u=void 0}if(c=(o.attemptsCount??0)>c?o.attemptsCount??0:c+1,o.attemptsCount=c,await t(u,l)){if(!(r!=null&&r.aborted)&&c<e){const f=n(c);await pw(f,r)}continue}else return d()}if(r!=null&&r.aborted)throw new Error("Request aborted.");return d()}},pw=(e,t)=>{if(t!=null&&t.aborted)return Promise.resolve();let n,r;const i=new Promise(o=>{r=o,n=setTimeout(o,e)});return t==null||t.addEventListener("abort",function o(a){clearTimeout(n),t==null||t.removeEventListener("abort",o),r()}),i},xh=(e,t)=>{Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata={...e.$metadata??{},attempts:t})},Tv=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(i){if(t.trim().length===0)return await n(i);{const o=e.toLowerCase();return i.headers[o]=i.headers[o]?`${i.headers[o]} ${t}`:t,await n(i)}},al=(e,t)=>(n,r)=>{const i={};let o=a=>e(a,r);for(let a=t.length-1;a>=0;a--){const s=t[a];o=s(r)(o,i)}return o(n)},bc=e=>{let t;return()=>(t||(t=e()),t)},mw=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),Mv=async({url:e,method:t,headers:n,body:r},{abortSignal:i,cache:o,withCrossDomainCredentials:a})=>{var d;let s;try{s=await fetch(e,{method:t,headers:n,body:mw(t)?r:void 0,signal:i,cache:o,credentials:a?"include":"same-origin"})}catch(f){throw f instanceof TypeError?new Error("Network error"):f}const l={};(d=s.headers)==null||d.forEach((f,h)=>{l[h.toLowerCase()]=f});const c={statusCode:s.status,headers:l,body:null},u=Object.assign(s.body??{},{text:bc(()=>s.text()),blob:bc(()=>s.blob()),json:bc(()=>s.json())});return{...c,body:u}},md=al(Mv,[Tv,kv]),gw=5*60*1e3;function vw(e=gw){return r=>{const i=2**r*100+100*Math.random();return i>e?!1:i}}const Ah=5*60*1e3,gd=e=>{const n=vw(Ah)(e);return n===!1?Ah:n},yw=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],bw=e=>!!e&&yw.includes(e),vd=e=>async(t,n)=>{const r=n??await e(t)??void 0,i=(r==null?void 0:r.code)||(r==null?void 0:r.name),o=t==null?void 0:t.statusCode;return Ew(n)||ww(o,i)||bw(i)||Cw(o,i)},_w=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],Sw=["TimeoutError","RequestTimeout","RequestTimeoutException"],ww=(e,t)=>e===429||!!t&&_w.includes(t),Ew=e=>(e==null?void 0:e.name)==="Network error",Cw=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&Sw.includes(t),mr=URL,kh=URLSearchParams,Iw="6.3.6";let ko;const ns=[];let bs=!1;const xw=10,Aw=10,kw=1e3,Rv=()=>{var e;if(!ko){if(ko=cw(),bs)for(;ns.length;)(e=ns.pop())==null||e();else ns.forEach(t=>{t()});Th(dt.ServerSideUnknown,xw),Th(dt.WebUnknown,Aw)}return ko},Tw=e=>{bs||ns.push(e)};function Mw(){ko=void 0}function Th(e,t){ko===e&&!bs&&setTimeout(()=>{Mw(),bs=!0,setTimeout(Rv,kw)},t)}const nr={},ai=e=>{nr[e.category]=e.apis.reduce((r,i)=>{var o;return{...r,[i]:{refCount:(o=r[i])!=null&&o.refCount?r[i].refCount+1:1,additionalDetails:e.additionalDetails}}},nr[e.category]??{});let t=!1;return()=>{t||(t=!0,e.apis.forEach(r=>{const i=nr[e.category][r].refCount;i>1?nr[e.category][r].refCount=i-1:(delete nr[e.category][r],Object.keys(nr[e.category]).length||delete nr[e.category])}))}},Rw=(e,t)=>{var n,r;return(r=(n=nr[e])==null?void 0:n[t])==null?void 0:r.additionalDetails},Pw="aws-amplify",Nw=({category:e,action:t}={})=>{const n=[[Pw,Iw]];if(e&&n.push([e,t]),n.push(["framework",Rv()]),e&&t){const r=Rw(e,t);r&&r.forEach(i=>{n.push(i)})}return n},sl=e=>Nw(e).map(([r,i])=>r&&i?`${r}/${i}`:r).join(" "),Ow="cognito-identity",Lw=({region:e})=>({url:new mr(`https://cognito-identity.${e}.${Av(e)}`)}),Dw=()=>e=>async function(n){return n.headers["cache-control"]="no-store",e(n)},Pv=al(md,[Dw]),yd={service:Ow,endpointResolver:Lw,retryDecider:vd(Oi),computeDelay:gd,userAgentValue:sl(),cache:"no-store"};Tw(()=>{yd.userAgentValue=sl()});const Nv=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),Ov=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),Uw=(e,t)=>{const n=Nv("GetId"),r=JSON.stringify(e);return Ov(t,n,r)},Fw=async e=>{if(e.statusCode>=300)throw await Oi(e);return{IdentityId:(await ol(e)).IdentityId,$metadata:il(e)}},Bw=Pt(Pv,Uw,Fw,yd),jw=(e,t)=>{const n=Nv("GetCredentialsForIdentity"),r=JSON.stringify(e);return Ov(t,n,r)},$w=async e=>{if(e.statusCode>=300)throw await Oi(e);{const t=await ol(e);return{IdentityId:t.IdentityId,Credentials:Hw(t.Credentials),$metadata:il(e)}}},Hw=({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:r}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:r&&new Date(r*1e3)}),Mh=Pt(Pv,jw,$w,yd);class Aa extends rn{constructor(){super({name:vs.PlatformNotSupported,message:"Function not supported on current platform"})}}class Lv{constructor(t){this.storage=t}async setItem(t,n){if(!this.storage)throw new Aa;this.storage.setItem(t,n)}async getItem(t){if(!this.storage)throw new Aa;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new Aa;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new Aa;this.storage.clear()}}class Dv{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}const qw=()=>typeof window<"u"&&window.localStorage?window.localStorage:new Dv,zw=()=>typeof window<"u"&&window.sessionStorage?window.sessionStorage:new Dv;class Vw extends Lv{constructor(){super(qw())}}class Ww extends Lv{constructor(){super(zw())}}/*! js-cookie v3.0.5 | MIT */function ka(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Kw={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function iu(e,t){function n(i,o,a){if(!(typeof document>"u")){a=ka({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var l in a)a[l]&&(s+="; "+l,a[l]!==!0&&(s+="="+a[l].split(";")[0]));return document.cookie=i+"="+e.write(o,i)+s}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},s=0;s<o.length;s++){var l=o[s].split("="),c=l.slice(1).join("=");try{var u=decodeURIComponent(l[0]);if(a[u]=e.read(c,u),i===u)break}catch{}}return i?a[i]:a}}return Object.create({set:n,get:r,remove:function(i,o){n(i,"",ka({},o,{expires:-1}))},withAttributes:function(i){return iu(this.converter,ka({},this.attributes,i))},withConverter:function(i){return iu(ka({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Ta=iu(Kw,{path:"/"});class Rh{constructor(t={}){const{path:n,domain:r,expires:i,sameSite:o,secure:a}=t;if(this.domain=r,this.path=n||"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?i:365,this.secure=Object.prototype.hasOwnProperty.call(t,"secure")?a:!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!o||!["strict","lax","none"].includes(o))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(o==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=o}}async setItem(t,n){Ta.set(t,n,this.getData())}async getItem(t){return Ta.get(t)??null}async removeItem(t){Ta.remove(t,this.getData())}async clear(){const t=Ta.get(),n=Object.keys(t).map(r=>this.removeItem(r));await Promise.all(n)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}const wi=new Vw;new Ww;const Gw=new kt("I18n");let Yw=class{constructor(){this._options=null,this._lang=null,this._dict={}}setDefaultLanguage(){!this._lang&&typeof window<"u"&&window&&window.navigator&&(this._lang=window.navigator.language),Gw.debug(this._lang)}setLanguage(t){this._lang=t}get(t,n=void 0){if(this.setDefaultLanguage(),!this._lang)return typeof n<"u"?n:t;const r=this._lang;let i=this.getByLanguage(t,r);return i||(r.indexOf("-")>0&&(i=this.getByLanguage(t,r.split("-")[0])),i)?i:typeof n<"u"?n:t}getByLanguage(t,n,r=null){if(!n)return r;const i=this._dict[n];return i?i[t]:r}putVocabulariesForLanguage(t,n){let r=this._dict[t];r||(r=this._dict[t]={}),this._dict[t]={...r,...n}}putVocabularies(t){Object.keys(t).forEach(n=>{this.putVocabulariesForLanguage(n,t[n])})}};var Nr;(function(e){e.NotConfigured="NotConfigured"})(Nr||(Nr={}));const Jw={[Nr.NotConfigured]:{message:"i18n is not configured."}},Ma=dd(Jw),Ph=new kt("I18n");let Ra={language:null},hn=null;class Hn{static configure(t){return Ph.debug("configure I18n"),t&&(Ra=Object.assign({},Ra,t.I18n||t),Hn.createInstance()),Ra}static getModuleName(){return"I18n"}static createInstance(){Ph.debug("create I18n instance"),!hn&&(hn=new Yw)}static setLanguage(t){Hn.checkConfig(),Ma(!!hn,Nr.NotConfigured),hn.setLanguage(t)}static get(t,n){return Hn.checkConfig()?(Ma(!!hn,Nr.NotConfigured),hn.get(t,n)):typeof n>"u"?t:n}static putVocabulariesForLanguage(t,n){Hn.checkConfig(),Ma(!!hn,Nr.NotConfigured),hn.putVocabulariesForLanguage(t,n)}static putVocabularies(t){Hn.checkConfig(),Ma(!!hn,Nr.NotConfigured),hn.putVocabularies(t)}static checkConfig(){return hn||Hn.createInstance(),!0}}Hn.createInstance();const Uv=e=>Object.keys(e).map(t=>t.toLowerCase()).sort().join(";"),Zw="X-Amz-Date",Xw="X-Amz-Security-Token",Qw="authorization",eE="host",tE=Zw.toLowerCase(),nE=Xw.toLowerCase(),Fv="aws4_request",Bv="AWS4-HMAC-SHA256",rE="AWS4",iE="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",oE="UNSIGNED-PAYLOAD",aE=(e,t,n)=>`${e}/${t}/${n}/${Fv}`,sE=e=>{const t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}},lE=({credentials:e,signingDate:t=new Date,signingRegion:n,signingService:r,uriEscapePath:i=!0})=>{const{accessKeyId:o,secretAccessKey:a,sessionToken:s}=e,{longDate:l,shortDate:c}=sE(t),u=aE(c,n,r);return{accessKeyId:o,credentialScope:u,longDate:l,secretAccessKey:a,sessionToken:s,shortDate:c,signingRegion:n,signingService:r,uriEscapePath:i}},ho=(e,t)=>{const n=new zS(e??void 0);return n.update(t),n.digestSync()},ou=(e,t)=>{const n=ho(e,t);return WS(n)},cE=e=>Object.entries(e).map(([t,n])=>({key:t.toLowerCase(),value:(n==null?void 0:n.trim().replace(/\s+/g," "))??""})).sort((t,n)=>t.key<n.key?-1:1).map(t=>`${t.key}:${t.value}
`).join(""),uE=e=>Array.from(e).sort(([t,n],[r,i])=>t===r?n<i?-1:1:t<r?-1:1).map(([t,n])=>`${Nh(t)}=${Nh(n)}`).join("&"),Nh=e=>encodeURIComponent(e).replace(/[!'()*]/g,dE),dE=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,fE=(e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/",hE=e=>e==null?iE:pE(e)?ou(null,e):oE,pE=e=>typeof e=="string"||ArrayBuffer.isView(e)||mE(e),mE=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",gE=({body:e,headers:t,method:n,url:r},i=!0)=>[n,fE(r.pathname,i),uE(r.searchParams),cE(t),Uv(t),hE(e)].join(`
`),vE=(e,t,n,r)=>{const i=`${rE}${e}`,o=ho(i,t),a=ho(o,n),s=ho(a,r);return ho(s,Fv)},yE=(e,t,n)=>[Bv,e,t,n].join(`
`),bE=(e,{credentialScope:t,longDate:n,secretAccessKey:r,shortDate:i,signingRegion:o,signingService:a,uriEscapePath:s})=>{const l=gE(e,s),c=ou(null,l),u=yE(n,t,c);return ou(vE(r,i,o,a),u)},_E=(e,t)=>{const n=lE(t),{accessKeyId:r,credentialScope:i,longDate:o,sessionToken:a}=n,s={...e.headers};s[eE]=e.url.host,s[tE]=o,a&&(s[nE]=a);const l={...e,headers:s},c=bE(l,n),u=`Credential=${r}/${i}`,d=`SignedHeaders=${Uv(s)}`,f=`Signature=${c}`;return s[Qw]=`${Bv} ${u}, ${d}, ${f}`,l},jv=e=>new Date(Date.now()+e),SE=5*60*1e3,wE=(e,t)=>Math.abs(jv(t).getTime()-e)>=SE,EE=(e,t)=>wE(e,t)?e-Date.now():t,CE=({credentials:e,region:t,service:n,uriEscapePath:r=!0})=>{let i;return o=>async function(s){i=i??0;const l={credentials:typeof e=="function"?await e():e,signingDate:jv(i),signingRegion:t,signingService:n,uriEscapePath:r},c=await _E(s,l),u=await o(c),d=IE(u);return d&&(i=EE(Date.parse(d),i)),u}},IE=({headers:e}={})=>(e==null?void 0:e.date)??(e==null?void 0:e.Date)??(e==null?void 0:e["x-amz-date"]),xE=al(Mv,[Tv,kv,CE]),AE=e=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n};function kE(e){return(e.match(/.{2}/g)||[]).map(n=>String.fromCharCode(parseInt(n,16))).join("")}function TE(e){return e.split("").map(t=>t.charCodeAt(0).toString(16).padStart(2,"0")).join("")}const ME=e=>{let t;return async(...n)=>t||(t=new Promise((r,i)=>{e(...n).then(o=>{r(o)}).catch(o=>{i(o)}).finally(()=>{t=void 0})}),t)},RE=async()=>{const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:n="",model:r="",architecture:i="",fullVersionList:o=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),a=o.map(l=>`${l.brand}/${l.version}`).join(";");return[t,n,i,r,t,a].filter(l=>l).join(" ")};class _s extends rn{get response(){return this._response?PE(this._response):void 0}constructor(t){super(t),this.constructor=_s,Object.setPrototypeOf(this,_s.prototype),t.response&&(this._response=t.response)}}const PE=e=>({...e,headers:{...e.headers}});function NE(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}const Fo={convert(e,{urlSafe:t}={urlSafe:!1}){const n=typeof e=="string"?e:NE(e),r=pS()(n);return t?r.replace(/\+/g,"-").replace(/\//g,"_"):r}};function OE(){return mv().getRandomValues(new Uint32Array(1))[0]}function LE(e){const{words:t}=e,{sigBytes:n}=e,r=[];for(let i=0;i<n;i++){const o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((o&15).toString(16))}return r.join("")}class bd{constructor(t,n){this.words=[];let r=t;r=this.words=r||[],n!==void 0?this.sigBytes=n:this.sigBytes=r.length*4}random(t){const n=[];for(let r=0;r<t;r+=4)n.push(OE());return new bd(n,t)}toString(){return LE(this)}}class Ee extends rn{constructor(t){super(t),this.constructor=Ee,Object.setPrototypeOf(this,Ee.prototype)}}function Wr(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new Ee({name:vs.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const $v="cognito-idp",DE=({region:e})=>{var i;const t=(i=qe.getConfig().Auth)==null?void 0:i.Cognito,n=t==null?void 0:t.userPoolEndpoint,r=new mr(`https://${$v}.${e}.${Av(e)}`);return{url:n?new mr(n):r}},UE=()=>(e,t)=>async function(r){return r.headers["cache-control"]="no-store",e(r)},Ht=al(md,[UE]),qt={service:$v,endpointResolver:DE,retryDecider:vd(Oi),computeDelay:gd,userAgentValue:sl(),cache:"no-store"},FE=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),BE=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),zt=e=>(t,n)=>{const r=FE(e),i=JSON.stringify(t);return BE(n,r,i)},Vt=()=>async e=>{if(e.statusCode>=300){const t=await Oi(e);throw Wr(t),new Ee({name:t.name,message:t.message})}else return await ol(e)},Qo=Pt(Ht,zt("InitiateAuth"),Vt(),qt),jE=Pt(Ht,zt("RevokeToken"),Vt(),qt),$E=Pt(Ht,zt("SignUp"),Vt(),qt),HE=Pt(Ht,zt("ConfirmSignUp"),Vt(),qt),qE=Pt(Ht,zt("ForgotPassword"),Vt(),qt),zE=Pt(Ht,zt("ConfirmForgotPassword"),Vt(),qt),Jn=Pt(Ht,zt("RespondToAuthChallenge"),Vt(),qt),VE=Pt(Ht,zt("ResendConfirmationCode"),Vt(),qt),WE=Pt(Ht,zt("VerifySoftwareToken"),Vt(),qt),KE=Pt(Ht,zt("AssociateSoftwareToken"),Vt(),qt),GE=Pt(Ht,zt("GetUser"),Vt(),qt),YE=Pt(Ht,zt("ConfirmDevice"),Vt(),qt),JE=Pt(Ht,zt("GetUserAttributeVerificationCode"),Vt(),qt),ZE=Pt(Ht,zt("VerifyUserAttribute"),Vt(),qt);var xe;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"})(xe||(xe={}));const XE={[xe.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[xe.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[xe.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[xe.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[xe.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[xe.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[xe.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[xe.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[xe.EmptySignInPassword]:{message:"password is required to signIn"},[xe.EmptySignInUsername]:{message:"username is required to signIn"},[xe.EmptySignUpPassword]:{message:"password is required to signUp"},[xe.EmptySignUpUsername]:{message:"username is required to signUp"},[xe.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[xe.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[xe.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[xe.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[xe.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var yt;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(yt||(yt={}));var Fr;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(Fr||(Fr={}));function ft(e,t){const{message:n,recoverySuggestion:r}=XE[t];if(!e)throw new Ee({name:t,message:n,recoverySuggestion:r})}function Ge(e){const t=e==null?void 0:e.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new Ee({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function au(e){if(!e||!e.includes(":"))throw new Ee({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}function Oh(e){return Object.entries(e).map(([t,n])=>({Name:t,Value:n}))}function QE(e){const t={};return e==null||e.forEach(n=>{n.Name&&(t[n.Name]=n.Value)}),t}var Lh;(function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(Lh||(Lh={}));var Dh;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Dh||(Dh={}));var Uh;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Uh||(Uh={}));var Fh;(function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Fh||(Fh={}));var Bh;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Bh||(Bh={}));var jh;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(jh||(jh={}));var $h;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})($h||($h={}));var Hh;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Hh||(Hh={}));var qh;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(qh||(qh={}));var zh;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(zh||(zh={}));var Vh;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(Vh||(Vh={}));var Wh;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(Wh||(Wh={}));var Kh;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Kh||(Kh={}));var Gh;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"})(Gh||(Gh={}));var Ss;(function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ss||(Ss={}));var Yh;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Yh||(Yh={}));var Jh;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Jh||(Jh={}));var Zh;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Zh||(Zh={}));var Xh;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"})(Xh||(Xh={}));var Qh;(function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Qh||(Qh={}));var ep;(function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ep||(ep={}));var tp;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(tp||(tp={}));var np;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(np||(np={}));var rp;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(rp||(rp={}));const ll="UserUnAuthenticatedException",eC="UserAlreadyAuthenticatedException",tC="DeviceMetadataNotFoundException",Hv="AutoSignInException",nC="InvalidRedirectException",rC=new Ee({name:nC,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),iC="InvalidOriginException",oC=new Ee({name:iC,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),aC="OAuthSignOutException",sC="TokenRefreshException",lC="UnexpectedSignInInterruptionException";function cl(e){if(!e||!e.accessToken)throw new Ee({name:ll,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function cC(e){if(!e||!e.idToken)throw new Ee({name:ll,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const uC=new Ee({name:sC,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),dC=new Ee({name:ll,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function qv(e){if(pC(e))throw uC;if(!hC(e))throw dC}function zv(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new Ee({name:tC,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}const fC={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function Vv(e){return(e==null?void 0:e.accessToken)||(e==null?void 0:e.idToken)}function hC(e){return Vv(e)&&(e==null?void 0:e.refreshToken)}function pC(e){return Vv(e)&&!(e!=null&&e.refreshToken)}const mC=async e=>{var s,l;const t=(s=e.getConfig().Auth)==null?void 0:s.Cognito;De(t);const n=await e.Auth.getTokens({forceRefresh:!1});cl(n);const{"cognito:username":r,sub:i}=((l=n.idToken)==null?void 0:l.payload)??{},o={username:r,userId:i},a=gC(n);return a&&(o.signInDetails=a),o};function gC(e){return e==null?void 0:e.signInDetails}const ul=async()=>mC(qe),ut=(e,t)=>sl({category:Wn.Auth,action:e,...t}),vC=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return Wv();default:return e}};function Wv(){return{username:void 0,challengeName:void 0,signInSession:void 0}}const yC=e=>{let t=e(Wv(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},gr=yC(vC);function ea(e){gr.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function Kn(){gr.dispatch({type:"SET_INITIAL_STATE"})}const rs={convert(e){return new TextEncoder().encode(e)}};function ie(e,t){e!=null&&this.fromString(e,t)}function Dt(){return new ie(null,null)}let ur;const bC=0xdeadbeefcafe,ip=(bC&16777215)===15715070;function _C(e,t,n,r,i,o){for(;--o>=0;){const a=t*this[e++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=a&67108863}return i}function SC(e,t,n,r,i,o){const a=t&32767,s=t>>15;for(;--o>=0;){let l=this[e]&32767;const c=this[e++]>>15,u=s*l+c*a;l=a*l+((u&32767)<<15)+n[r]+(i&1073741823),i=(l>>>30)+(u>>>15)+s*c+(i>>>30),n[r++]=l&1073741823}return i}function wC(e,t,n,r,i,o){const a=t&16383,s=t>>14;for(;--o>=0;){let l=this[e]&16383;const c=this[e++]>>14,u=s*l+c*a;l=a*l+((u&16383)<<14)+n[r]+i,i=(l>>28)+(u>>14)+s*c,n[r++]=l&268435455}return i}const op=typeof navigator<"u";op&&ip&&navigator.appName==="Microsoft Internet Explorer"?(ie.prototype.am=SC,ur=30):op&&ip&&navigator.appName!=="Netscape"?(ie.prototype.am=_C,ur=26):(ie.prototype.am=wC,ur=28);ie.prototype.DB=ur;ie.prototype.DM=(1<<ur)-1;ie.prototype.DV=1<<ur;const _d=52;ie.prototype.FV=Math.pow(2,_d);ie.prototype.F1=_d-ur;ie.prototype.F2=2*ur-_d;const EC="0123456789abcdefghijklmnopqrstuvwxyz",dl=[];let Li,cn;Li=48;for(cn=0;cn<=9;++cn)dl[Li++]=cn;Li=97;for(cn=10;cn<36;++cn)dl[Li++]=cn;Li=65;for(cn=10;cn<36;++cn)dl[Li++]=cn;function ap(e){return EC.charAt(e)}function CC(e,t){const n=dl[e.charCodeAt(t)];return n??-1}function IC(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function xC(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function Sd(e){const t=Dt();return t.fromInt(e),t}function AC(e,t){let n;if(t===16)n=4;else if(t===8)n=3;else if(t===2)n=1;else if(t===32)n=5;else if(t===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let r=e.length,i=!1,o=0;for(;--r>=0;){const a=CC(e,r);if(a<0){e.charAt(r)==="-"&&(i=!0);continue}i=!1,o===0?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,o+=n,o>=this.DB&&(o-=this.DB)}this.clamp(),i&&ie.ZERO.subTo(this,this)}function kC(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function TC(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const n=(1<<t)-1;let r,i=!1,o="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(r=this[a]>>s)>0&&(i=!0,o=ap(r));a>=0;)s<t?(r=(this[a]&(1<<s)-1)<<t-s,r|=this[--a]>>(s+=this.DB-t)):(r=this[a]>>(s-=t)&n,s<=0&&(s+=this.DB,--a)),r>0&&(i=!0),i&&(o+=ap(r));return i?o:"0"}function MC(){const e=Dt();return ie.ZERO.subTo(this,e),e}function RC(){return this.s<0?this.negate():this}function PC(e){let t=this.s-e.s;if(t!=0)return t;let n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function wd(e){let t=1,n;return(n=e>>>16)!==0&&(e=n,t+=16),(n=e>>8)!==0&&(e=n,t+=8),(n=e>>4)!==0&&(e=n,t+=4),(n=e>>2)!==0&&(e=n,t+=2),(n=e>>1)!==0&&(e=n,t+=1),t}function NC(){return this.t<=0?0:this.DB*(this.t-1)+wd(this[this.t-1]^this.s&this.DM)}function OC(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function LC(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function DC(e,t){const n=e%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(e/this.DB);let a=this.s<<n&this.DM,s;for(s=this.t-1;s>=0;--s)t[s+o+1]=this[s]>>r|a,a=(this[s]&i)<<n;for(s=o-1;s>=0;--s)t[s]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()}function UC(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}const r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(let a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<i,t[a-n]=this[a]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}function FC(e,t){let n=0,r=0;const i=Math.min(e.t,this.t);for(;n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function BC(e,t){const n=this.abs(),r=e.abs();let i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&ie.ZERO.subTo(t,t)}function jC(e){const t=this.abs();let n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){const r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function $C(e,t,n){const r=e.abs();if(r.t<=0)return;const i=this.abs();if(i.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n===null&&(n=Dt());const o=Dt(),a=this.s,s=e.s,l=this.DB-wd(r[r.t-1]);l>0?(r.lShiftTo(l,o),i.lShiftTo(l,n)):(r.copyTo(o),i.copyTo(n));const c=o.t,u=o[c-1];if(u===0)return;const d=u*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),f=this.FV/d,h=(1<<this.F1)/d,p=1<<this.F2;let m=n.t,y=m-c;const g=t===null?Dt():t;for(o.dlShiftTo(y,g),n.compareTo(g)>=0&&(n[n.t++]=1,n.subTo(g,n)),ie.ONE.dlShiftTo(c,g),g.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--y>=0;){let v=n[--m]===u?this.DM:Math.floor(n[m]*f+(n[m-1]+p)*h);if((n[m]+=o.am(0,v,n,y,0,c))<v)for(o.dlShiftTo(y,g),n.subTo(g,n);n[m]<--v;)n.subTo(g,n)}t!==null&&(n.drShiftTo(c,t),a!==s&&ie.ZERO.subTo(t,t)),n.t=c,n.clamp(),l>0&&n.rShiftTo(l,n),a<0&&ie.ZERO.subTo(n,n)}function HC(e){const t=Dt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(ie.ZERO)>0&&e.subTo(t,t),t}function qC(){if(this.t<1)return 0;const e=this[0];if(!(e&1))return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function zC(e){return this.compareTo(e)===0}function VC(e,t){let n=0,r=0;const i=Math.min(e.t,this.t);for(;n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()}function WC(e){const t=Dt();return this.addTo(e,t),t}function KC(e){const t=Dt();return this.subTo(e,t),t}function GC(e){const t=Dt();return this.multiplyTo(e,t),t}function YC(e){const t=Dt();return this.divRemTo(e,t,null),t}function Di(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function JC(e){const t=Dt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(ie.ZERO)>0&&this.m.subTo(t,t),t}function ZC(e){const t=Dt();return e.copyTo(t),this.reduce(t),t}function XC(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=e[t]&32767;const r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function QC(e,t){e.squareTo(t),this.reduce(t)}function eI(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Di.prototype.convert=JC;Di.prototype.revert=ZC;Di.prototype.reduce=XC;Di.prototype.mulTo=eI;Di.prototype.sqrTo=QC;function tI(e,t,n){let r=e.bitLength(),i,o=Sd(1);const a=new Di(t);if(r<=0)return o;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6;const s=[];let l=3;const c=i-1,u=(1<<i)-1;if(s[1]=a.convert(this),i>1){const g=Dt();for(a.sqrTo(s[1],g);l<=u;)s[l]=Dt(),a.mulTo(g,s[l-2],s[l]),l+=2}let d=e.t-1,f,h=!0,p=Dt(),m;for(r=wd(e[d])-1;d>=0;){for(r>=c?f=e[d]>>r-c&u:(f=(e[d]&(1<<r+1)-1)<<c-r,d>0&&(f|=e[d-1]>>this.DB+r-c)),l=i;!(f&1);)f>>=1,--l;if((r-=l)<0&&(r+=this.DB,--d),h)s[f].copyTo(o),h=!1;else{for(;l>1;)a.sqrTo(o,p),a.sqrTo(p,o),l-=2;l>0?a.sqrTo(o,p):(m=o,o=p,p=m),a.mulTo(p,s[f],o)}for(;d>=0&&!(e[d]&1<<r);)a.sqrTo(o,p),m=o,o=p,p=m,--r<0&&(r=this.DB-1,--d)}const y=a.revert(o);return n(null,y),y}ie.prototype.copyTo=IC;ie.prototype.fromInt=xC;ie.prototype.fromString=AC;ie.prototype.clamp=kC;ie.prototype.dlShiftTo=OC;ie.prototype.drShiftTo=LC;ie.prototype.lShiftTo=DC;ie.prototype.rShiftTo=UC;ie.prototype.subTo=FC;ie.prototype.multiplyTo=BC;ie.prototype.squareTo=jC;ie.prototype.divRemTo=$C;ie.prototype.invDigit=qC;ie.prototype.addTo=VC;ie.prototype.toString=TC;ie.prototype.negate=MC;ie.prototype.abs=RC;ie.prototype.compareTo=PC;ie.prototype.bitLength=NC;ie.prototype.mod=HC;ie.prototype.equals=zC;ie.prototype.add=WC;ie.prototype.subtract=KC;ie.prototype.multiply=GC;ie.prototype.divide=YC;ie.prototype.modPow=tI;ie.ZERO=Sd(0);ie.ONE=Sd(1);const nI=async({a:e,g:t,k:n,x:r,B:i,N:o,U:a})=>new Promise((s,l)=>{t.modPow(r,o,(c,u)=>{if(c){l(c);return}i.subtract(n.multiply(u)).modPow(e.add(a.multiply(r)),o,(d,f)=>{if(d){l(d);return}s(f.mod(o))})})}),rI="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",Kv={},su={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Kv[e]=t,su[t]=e}const Ei=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const r=e.slice(n,n+2).toLowerCase();if(r in su)t[n/2]=su[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return t};function Gv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Ci={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lu=function(e,t){return lu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},lu(e,t)};function iI(e,t){lu(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var cu=function(){return cu=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},cu.apply(this,arguments)};function oI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function aI(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function sI(e,t){return function(n,r){t(n,r,e)}}function lI(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function cI(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(d){a(d)}}function l(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})}function uI(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function dI(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function fI(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function uu(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yv(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function hI(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Yv(arguments[t]));return e}function pI(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function Bo(e){return this instanceof Bo?(this.v=e,this):new Bo(e)}function mI(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(f){r[f]&&(i[f]=function(h){return new Promise(function(p,m){o.push([f,h,p,m])>1||s(f,h)})})}function s(f,h){try{l(r[f](h))}catch(p){d(o[0][3],p)}}function l(f){f.value instanceof Bo?Promise.resolve(f.value.v).then(c,u):d(o[0][2],f)}function c(f){s("next",f)}function u(f){s("throw",f)}function d(f,h){f(h),o.shift(),o.length&&s(o[0][0],o[0][1])}}function gI(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(a){return(n=!n)?{value:Bo(e[i](a)),done:i==="return"}:o?o(a):a}:o}}function vI(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof uu=="function"?uu(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(s,l){a=e[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(c){o({value:c,done:s})},a)}}function yI(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function bI(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _I(e){return e&&e.__esModule?e:{default:e}}function SI(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function wI(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const EI=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return cu},__asyncDelegator:gI,__asyncGenerator:mI,__asyncValues:vI,__await:Bo,__awaiter:cI,__classPrivateFieldGet:SI,__classPrivateFieldSet:wI,__createBinding:dI,__decorate:aI,__exportStar:fI,__extends:iI,__generator:uI,__importDefault:_I,__importStar:bI,__makeTemplateObject:yI,__metadata:lI,__param:sI,__read:Yv,__rest:oI,__spread:hI,__spreadArrays:pI,__values:uu},Symbol.toStringTag,{value:"Module"})),Jv=Gv(EI);var eo={},Yt={},sp;function Zv(){return sp||(sp=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.MAX_HASHABLE_LENGTH=Yt.INIT=Yt.KEY=Yt.DIGEST_LENGTH=Yt.BLOCK_SIZE=void 0,Yt.BLOCK_SIZE=64,Yt.DIGEST_LENGTH=32,Yt.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yt.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Yt.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),Yt}var to={},lp;function CI(){if(lp)return to;lp=1,Object.defineProperty(to,"__esModule",{value:!0}),to.RawSha256=void 0;var e=Zv(),t=function(){function n(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(r){if(this.finished)throw new Error("Attempted to update an already finished hash.");var i=0,o=r.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=r[i++],o--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var r=this.bytesHashed*8,i=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(i.setUint8(this.bufferLength++,128),o%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var a=this.bufferLength;a<e.BLOCK_SIZE;a++)i.setUint8(a,0);this.hashBuffer(),this.bufferLength=0}for(var a=this.bufferLength;a<e.BLOCK_SIZE-8;a++)i.setUint8(a,0);i.setUint32(e.BLOCK_SIZE-8,Math.floor(r/4294967296),!0),i.setUint32(e.BLOCK_SIZE-4,r),this.hashBuffer(),this.finished=!0}for(var s=new Uint8Array(e.DIGEST_LENGTH),a=0;a<8;a++)s[a*4]=this.state[a]>>>24&255,s[a*4+1]=this.state[a]>>>16&255,s[a*4+2]=this.state[a]>>>8&255,s[a*4+3]=this.state[a]>>>0&255;return s},n.prototype.hashBuffer=function(){for(var r=this,i=r.buffer,o=r.state,a=o[0],s=o[1],l=o[2],c=o[3],u=o[4],d=o[5],f=o[6],h=o[7],p=0;p<e.BLOCK_SIZE;p++){if(p<16)this.temp[p]=(i[p*4]&255)<<24|(i[p*4+1]&255)<<16|(i[p*4+2]&255)<<8|i[p*4+3]&255;else{var m=this.temp[p-2],y=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10;m=this.temp[p-15];var g=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;this.temp[p]=(y+this.temp[p-7]|0)+(g+this.temp[p-16]|0)}var v=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&d^~u&f)|0)+(h+(e.KEY[p]+this.temp[p]|0)|0)|0,b=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&s^a&l^s&l)|0;h=f,f=d,d=u,u=c+v|0,c=l,l=s,s=a,a=v+b|0}o[0]+=a,o[1]+=s,o[2]+=l,o[3]+=c,o[4]+=u,o[5]+=d,o[6]+=f,o[7]+=h},n}();return to.RawSha256=t,to}var _c={},no={};const II=e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,i&63|128);else if(n+1<e.length&&(i&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320){const o=65536+((i&1023)<<10)+(e.charCodeAt(++n)&1023);t.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else t.push(i>>12|224,i>>6&63|128,i&63|128)}return Uint8Array.from(t)},xI=e=>{let t="";for(let n=0,r=e.length;n<r;n++){const i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){const o=e[++n];t+=String.fromCharCode((i&31)<<6|o&63)}else if(240<=i&&i<365){const a="%"+[i,e[++n],e[++n],e[++n]].map(s=>s.toString(16)).join("%");t+=decodeURIComponent(a)}else t+=String.fromCharCode((i&15)<<12|(e[++n]&63)<<6|e[++n]&63)}return t};function AI(e){return new TextEncoder().encode(e)}function kI(e){return new TextDecoder("utf-8").decode(e)}const TI=e=>typeof TextEncoder=="function"?AI(e):II(e),MI=e=>typeof TextDecoder=="function"?kI(e):xI(e),RI=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:TI,toUtf8:MI},Symbol.toStringTag,{value:"Module"})),PI=Gv(RI);var cp;function NI(){if(cp)return no;cp=1,Object.defineProperty(no,"__esModule",{value:!0}),no.convertToBuffer=void 0;var e=PI,t=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:e.fromUtf8;function n(r){return r instanceof Uint8Array?r:typeof r=="string"?t(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}return no.convertToBuffer=n,no}var ro={},up;function OI(){if(up)return ro;up=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return ro.isEmptyData=e,ro}var io={},dp;function LI(){if(dp)return io;dp=1,Object.defineProperty(io,"__esModule",{value:!0}),io.numToUint8=void 0;function e(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}return io.numToUint8=e,io}var oo={},fp;function DI(){if(fp)return oo;fp=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.uint32ArrayFrom=void 0;function e(t){if(!Uint32Array.from){for(var n=new Uint32Array(t.length),r=0;r<t.length;)n[r]=t[r],r+=1;return n}return Uint32Array.from(t)}return oo.uint32ArrayFrom=e,oo}var hp;function UI(){return hp||(hp=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=NI();Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var n=OI();Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var r=LI();Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return r.numToUint8}});var i=DI();Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return i.uint32ArrayFrom}})}(_c)),_c}var pp;function FI(){if(pp)return eo;pp=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.Sha256=void 0;var e=Jv,t=Zv(),n=CI(),r=UI(),i=function(){function a(s){this.secret=s,this.hash=new n.RawSha256,this.reset()}return a.prototype.update=function(s){if(!((0,r.isEmptyData)(s)||this.error))try{this.hash.update((0,r.convertToBuffer)(s))}catch(l){this.error=l}},a.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},a.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(s){return[2,this.digestSync()]})})},a.prototype.reset=function(){if(this.hash=new n.RawSha256,this.secret){this.outer=new n.RawSha256;var s=o(this.secret),l=new Uint8Array(t.BLOCK_SIZE);l.set(s);for(var c=0;c<t.BLOCK_SIZE;c++)s[c]^=54,l[c]^=92;this.hash.update(s),this.outer.update(l);for(var c=0;c<s.byteLength;c++)s[c]=0}},a}();eo.Sha256=i;function o(a){var s=(0,r.convertToBuffer)(a);if(s.byteLength>t.BLOCK_SIZE){var l=new n.RawSha256;l.update(s),s=l.digest()}var c=new Uint8Array(t.BLOCK_SIZE);return c.set(s),c}return eo}(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Jv;t.__exportStar(FI(),e)})(Ci);const Ed=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=Kv[e[n]];return t},du=e=>{const t=new Ci.Sha256;t.update(e);const n=t.digestSync(),r=Ed(n);return new Array(64-r.length).join("0")+r},is=e=>du(Ei(e)),BI=/^[89a-f]/i,$n=e=>{if(!(e instanceof ie))throw new Error("Not a BigInteger");const t=e.compareTo(ie.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!==0?`0${n}`:n,n=BI.test(n)?`00${n}`:n,t){const r=n.split("").map(o=>{const a=~parseInt(o,16)&15;return"0123456789ABCDEF".charAt(a)}).join("");n=new ie(r,16).add(ie.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},jI=({A:e,B:t})=>{const n=new ie(is($n(e)+$n(t)),16);if(n.equals(ie.ZERO))throw new Error("U cannot be zero.");return n},$I=(e,t,n)=>{const r=new Ci.Sha256(t);r.update(e);const i=r.digestSync(),o=new Ci.Sha256(i);return o.update(n),o.digestSync().slice(0,16)},Cd=e=>{const t=new bd().random(e).toString();return Ei(t)},HI=()=>Fo.convert(Cd(40));class qI{constructor({userPoolName:t,a:n,g:r,A:i,N:o}){this.encoder=rs,this.userPoolName=t,this.a=n,this.g=r,this.A=i,this.N=o,this.k=new ie(is(`${$n(o)}${$n(r)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new Ee({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new Ee({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new Ee({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(t,n){this.randomPassword=HI();const r=`${t}${n}:${this.randomPassword}`,i=du(r),o=Ed(Cd(16));return this.saltToHashDevices=$n(new ie(o,16)),new Promise((a,s)=>{this.g.modPow(new ie(is(this.saltToHashDevices+i),16),this.N,(l,c)=>{if(l){s(l);return}this.verifierDevices=$n(c),a()})})}async getPasswordAuthenticationKey({username:t,password:n,serverBValue:r,salt:i}){if(r.mod(this.N).equals(ie.ZERO))throw new Error("B cannot be zero.");const o=jI({A:this.A,B:r}),a=`${this.userPoolName}${t}:${n}`,s=du(a),l=new ie(is($n(i)+s),16),c=await nI({a:this.a,g:this.g,k:this.k,x:l,B:r,N:this.N,U:o}),u=this.encoder.convert("Caldera Derived Key"),d=this.encoder.convert(""),f=new Uint8Array(u.byteLength+d.byteLength);return f.set(u,0),f.set(d,u.byteLength),$I(Ei($n(c)),Ei($n(o)),f)}}const zI=async({a:e,g:t,N:n})=>new Promise((r,i)=>{t.modPow(e,n,(o,a)=>{if(o){i(o);return}if(a.mod(n).equals(ie.ZERO)){i(new Error("Illegal parameter. A mod N cannot be 0."));return}r(a)})}),fl=async e=>{const t=new ie(rI,16),n=new ie("2",16),r=VI(),i=await zI({a:r,g:n,N:t});return new qI({userPoolName:e,a:r,g:n,A:i,N:t})},VI=()=>{const e=Ed(Cd(128));return new ie(e,16)},WI=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],KI=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Xv=()=>{const e=new Date,t=KI[e.getUTCDay()],n=WI[e.getUTCMonth()],r=e.getUTCDate();let i=e.getUTCHours();i<10&&(i=`0${i}`);let o=e.getUTCMinutes();o<10&&(o=`0${o}`);let a=e.getUTCSeconds();a<10&&(a=`0${a}`);const s=e.getUTCFullYear();return`${t} ${n} ${r} ${i}:${o}:${a} UTC ${s}`},Qv=({userPoolName:e,username:t,challengeParameters:n,dateNow:r,hkdf:i})=>{const o=rs.convert(e),a=rs.convert(t),s=GI(n.SECRET_BLOCK),l=rs.convert(r),c=new Uint8Array(o.byteLength+a.byteLength+s.byteLength+l.byteLength);c.set(o,0),c.set(a,o.byteLength),c.set(s,o.byteLength+a.byteLength),c.set(l,o.byteLength+a.byteLength+s.byteLength);const u=new Ci.Sha256(i);u.update(c);const d=u.digestSync();return Fo.convert(d)},GI=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=gv.convert(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i};function Nt({username:e,userPoolId:t,userPoolClientId:n}){if(typeof window>"u")return;const r=window.AmazonCognitoAdvancedSecurityData;if(typeof r>"u")return;const i=r.getData(e,t,n);return i?{EncodedData:i}:{}}const fu="userAttributes.";async function YI({challengeResponse:e,clientMetadata:t,session:n,username:r,config:i,tokenOrchestrator:o}){const{userPoolId:a,userPoolClientId:s}=i,l={USERNAME:r,ANSWER:e},c=await(o==null?void 0:o.getDeviceMetadata(r));c&&c.deviceKey&&(l.DEVICE_KEY=c.deviceKey);const u=Nt({username:r,userPoolId:a,userPoolClientId:s}),d={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:l,Session:n,ClientMetadata:t,ClientId:s,UserContextData:u},f=await Jn({region:Ge(a),userAgentValue:ut(Re.ConfirmSignIn)},d);return f.ChallengeName==="DEVICE_SRP_AUTH"?hl({username:r,config:i,clientMetadata:t,session:f.Session,tokenOrchestrator:o}):f}async function JI({challengeResponse:e,username:t,clientMetadata:n,session:r,deviceName:i,config:o}){const{userPoolId:a,userPoolClientId:s}=o,l={USERNAME:t},{Session:c}=await WE({region:Ge(a),userAgentValue:ut(Re.ConfirmSignIn)},{UserCode:e,Session:r,FriendlyDeviceName:i});gr.dispatch({type:"SET_SIGN_IN_SESSION",value:c});const u={ChallengeName:"MFA_SETUP",ChallengeResponses:l,Session:c,ClientMetadata:n,ClientId:s};return Jn({region:Ge(a)},u)}async function ZI({challengeResponse:e,username:t,clientMetadata:n,session:r,config:i}){const{userPoolId:o,userPoolClientId:a}=i;ft(e==="TOTP"||e==="SMS",xe.IncorrectMFAMethod);const s={USERNAME:t,ANSWER:u2(e)},l=Nt({username:t,userPoolId:o,userPoolClientId:a}),c={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:s,Session:r,ClientMetadata:n,ClientId:a,UserContextData:l};return Jn({region:Ge(o),userAgentValue:ut(Re.ConfirmSignIn)},c)}async function XI({challengeResponse:e,clientMetadata:t,session:n,username:r,config:i}){const{userPoolId:o,userPoolClientId:a}=i,s={USERNAME:r,SMS_MFA_CODE:e},l=Nt({username:r,userPoolId:o,userPoolClientId:a}),c={ChallengeName:"SMS_MFA",ChallengeResponses:s,Session:n,ClientMetadata:t,ClientId:a,UserContextData:l};return Jn({region:Ge(o),userAgentValue:ut(Re.ConfirmSignIn)},c)}async function QI({challengeResponse:e,clientMetadata:t,session:n,username:r,config:i}){const{userPoolId:o,userPoolClientId:a}=i,s={USERNAME:r,SOFTWARE_TOKEN_MFA_CODE:e},l=Nt({username:r,userPoolId:o,userPoolClientId:a}),c={ChallengeName:"SOFTWARE_TOKEN_MFA",ChallengeResponses:s,Session:n,ClientMetadata:t,ClientId:a,UserContextData:l};return Jn({region:Ge(o),userAgentValue:ut(Re.ConfirmSignIn)},c)}async function e2({challengeResponse:e,clientMetadata:t,session:n,username:r,requiredAttributes:i,config:o}){const{userPoolId:a,userPoolClientId:s}=o,l={...l2(i),NEW_PASSWORD:e,USERNAME:r},c=Nt({username:r,userPoolId:a,userPoolClientId:s}),u={ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:l,ClientMetadata:t,Session:n,ClientId:s,UserContextData:c};return Jn({region:Ge(a),userAgentValue:ut(Re.ConfirmSignIn)},u)}async function t2(e,t,n,r,i){var h,p;const{userPoolClientId:o,userPoolId:a}=r,s={USERNAME:e,PASSWORD:t},l=await i.getDeviceMetadata(e);l&&l.deviceKey&&(s.DEVICE_KEY=l.deviceKey);const c=Nt({username:e,userPoolId:a,userPoolClientId:o}),u={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:s,ClientMetadata:n,ClientId:o,UserContextData:c},d=await Qo({region:Ge(a),userAgentValue:ut(Re.SignIn)},u),f=((h=d.ChallengeParameters)==null?void 0:h.USERNAME)??((p=d.ChallengeParameters)==null?void 0:p.USER_ID_FOR_SRP)??e;return pl(f),d.ChallengeName==="DEVICE_SRP_AUTH"?hl({username:f,config:r,clientMetadata:n,session:d.Session,tokenOrchestrator:i}):d}async function n2(e,t,n,r,i){const{userPoolId:o,userPoolClientId:a}=r,s=(o==null?void 0:o.split("_")[1])||"",l=await fl(s),c={USERNAME:e,SRP_A:l.A.toString(16)},u=Nt({username:e,userPoolId:o,userPoolClientId:a}),d={AuthFlow:"USER_SRP_AUTH",AuthParameters:c,ClientMetadata:n,ClientId:a,UserContextData:u},f=await Qo({region:Ge(o),userAgentValue:ut(Re.SignIn)},d),{ChallengeParameters:h,Session:p}=f,m=(h==null?void 0:h.USERNAME)??e;return pl(m),ia(ey,[t,h,n,p,l,r,i],m,i)}async function r2(e,t,n,r){var f;const{userPoolClientId:i,userPoolId:o}=n,a={USERNAME:e},s=await r.getDeviceMetadata(e);s&&s.deviceKey&&(a.DEVICE_KEY=s.deviceKey);const l=Nt({username:e,userPoolId:o,userPoolClientId:i}),c={AuthFlow:"CUSTOM_AUTH",AuthParameters:a,ClientMetadata:t,ClientId:i,UserContextData:l},u=await Qo({region:Ge(o),userAgentValue:ut(Re.SignIn)},c),d=((f=u.ChallengeParameters)==null?void 0:f.USERNAME)??e;return pl(d),u.ChallengeName==="DEVICE_SRP_AUTH"?hl({username:d,config:n,clientMetadata:t,session:u.Session,tokenOrchestrator:r}):u}async function i2(e,t,n,r,i){De(r);const{userPoolId:o,userPoolClientId:a}=r,s=(o==null?void 0:o.split("_")[1])||"",l=await fl(s),c={USERNAME:e,SRP_A:l.A.toString(16),CHALLENGE_NAME:"SRP_A"},u=Nt({username:e,userPoolId:o,userPoolClientId:a}),d={AuthFlow:"CUSTOM_AUTH",AuthParameters:c,ClientMetadata:n,ClientId:a,UserContextData:u},{ChallengeParameters:f,Session:h}=await Qo({region:Ge(o),userAgentValue:ut(Re.SignIn)},d),p=(f==null?void 0:f.USERNAME)??e;return pl(p),ia(ey,[t,f,n,h,l,r,i],p,i)}async function hl({username:e,config:t,clientMetadata:n,session:r,tokenOrchestrator:i}){const{userPoolId:o}=t,a=t.userPoolClientId,s=await(i==null?void 0:i.getDeviceMetadata(e));zv(s);const l=await fl(s.deviceGroupKey),c={USERNAME:e,SRP_A:l.A.toString(16),DEVICE_KEY:s.deviceKey},u={ChallengeName:"DEVICE_SRP_AUTH",ClientId:a,ChallengeResponses:c,ClientMetadata:n,Session:r},{ChallengeParameters:d,Session:f}=await Jn({region:Ge(o)},u);return o2(e,d,n,f,l,t,i)}async function o2(e,t,n,r,i,{userPoolId:o,userPoolClientId:a},s){const l=await(s==null?void 0:s.getDeviceMetadata(e));zv(l);const c=new ie(t==null?void 0:t.SRP_B,16),u=new ie(t==null?void 0:t.SALT,16),{deviceKey:d}=l,{deviceGroupKey:f}=l,h=await i.getPasswordAuthenticationKey({username:l.deviceKey,password:l.randomPassword,serverBValue:c,salt:u}),p=Xv(),m={USERNAME:(t==null?void 0:t.USERNAME)??e,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:p,PASSWORD_CLAIM_SIGNATURE:Qv({username:d,userPoolName:f,challengeParameters:t,dateNow:p,hkdf:h}),DEVICE_KEY:d},y=Nt({username:e,userPoolId:o,userPoolClientId:a}),g={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:a,ChallengeResponses:m,Session:r,ClientMetadata:n,UserContextData:y};return Jn({region:Ge(o)},g)}async function ey(e,t,n,r,i,o,a){const{userPoolId:s,userPoolClientId:l}=o,c=(s==null?void 0:s.split("_")[1])||"",u=new ie(t==null?void 0:t.SRP_B,16),d=new ie(t==null?void 0:t.SALT,16),f=t==null?void 0:t.USER_ID_FOR_SRP;if(!f)throw new Ee({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const h=await i.getPasswordAuthenticationKey({username:f,password:e,serverBValue:u,salt:d}),p=Xv(),m={USERNAME:f,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:p,PASSWORD_CLAIM_SIGNATURE:Qv({username:f,userPoolName:c,challengeParameters:t,dateNow:p,hkdf:h})},y=await a.getDeviceMetadata(f);y&&y.deviceKey&&(m.DEVICE_KEY=y.deviceKey);const g=Nt({username:f,userPoolId:s,userPoolClientId:l}),v={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:m,ClientMetadata:n,Session:r,ClientId:l,UserContextData:g},b=await Jn({region:Ge(s)},v);return b.ChallengeName==="DEVICE_SRP_AUTH"?hl({username:f,config:o,clientMetadata:n,session:b.Session,tokenOrchestrator:a}):b}async function ta(e){var i;const{challengeName:t,challengeParameters:n}=e,r=(i=qe.getConfig().Auth)==null?void 0:i.Cognito;switch(De(r),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":{const{signInSession:o,username:a}=gr.getState();if(!f2(n,"TOTP"))throw new Ee({name:Fr.SignInException,message:`Cannot initiate MFA setup from available types: ${hu(pu(n.MFAS_CAN_SETUP))}`});const{Session:s,SecretCode:l}=await KE({region:Ge(r.userPoolId)},{Session:o});return gr.dispatch({type:"SET_SIGN_IN_SESSION",value:s}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:a2(l,a)}}}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:s2(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:hu(pu(n.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new Ee({name:Fr.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function a2(e,t){return{sharedSecret:e,getSetupUri:(n,r)=>{const i=`otpauth://totp/${n}:${r??t}?secret=${e}&issuer=${n}`;return new mr(i)}}}function na(e){if(e===Ss.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===Ss.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function s2(e){return e?JSON.parse(e).map(n=>n.includes(fu)?n.replace(fu,""):n):[]}function l2(e){if(!e)return{};const t={};return Object.entries(e).forEach(([n,r])=>{r&&(t[`${fu}${n}`]=r)}),t}async function c2(e,t,n,r,i,o,a,s){const l=s==null?void 0:s.userAttributes,c=s==null?void 0:s.friendlyDeviceName;switch(t){case"SMS_MFA":return XI({challengeResponse:r,clientMetadata:a,session:n,username:e,config:i});case"SELECT_MFA_TYPE":return ZI({challengeResponse:r,clientMetadata:a,session:n,username:e,config:i});case"MFA_SETUP":return JI({challengeResponse:r,clientMetadata:a,session:n,username:e,deviceName:c,config:i});case"NEW_PASSWORD_REQUIRED":return e2({challengeResponse:r,clientMetadata:a,session:n,username:e,requiredAttributes:l,config:i});case"CUSTOM_CHALLENGE":return ia(YI,[{challengeResponse:r,clientMetadata:a,session:n,username:e,config:i,tokenOrchestrator:o}],e,o);case"SOFTWARE_TOKEN_MFA":return QI({challengeResponse:r,clientMetadata:a,session:n,username:e,config:i})}throw new Ee({name:Fr.SignInException,message:`An error occurred during the sign in process. 
		${t} challengeName returned by the underlying service was not addressed.`})}function u2(e){let t="SMS_MFA";return e==="TOTP"&&(t="SOFTWARE_TOKEN_MFA"),t}function d2(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP"}function hu(e){if(e)return e.map(d2).filter(Boolean)}function pu(e){return e?JSON.parse(e):[]}function f2(e,t){const{MFAS_CAN_SETUP:n}=e,r=hu(pu(n));return r?r.includes(t):!1}async function ty(){let e;try{e=await ul()}catch{}if(e&&e.userId&&e.username)throw new Ee({name:eC,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}async function ra(e,t,n){if(!t)return;const r=e.split("_")[1]||"",i=await fl(r),o=t==null?void 0:t.DeviceKey,a=t==null?void 0:t.DeviceGroupKey;try{await i.generateHashDevice(a??"",o??"")}catch{return}const s={Salt:Fo.convert(Ei(i.getSaltToHashDevices())),PasswordVerifier:Fo.convert(Ei(i.getVerifierDevices()))},l=i.getRandomPassword();try{return await YE({region:Ge(e)},{AccessToken:n,DeviceName:await RE(),DeviceKey:t==null?void 0:t.DeviceKey,DeviceSecretVerifierConfig:s}),{deviceKey:o,deviceGroupKey:a,randomPassword:l}}catch{return}}async function ia(e,t,n,r){try{return await e(...t)}catch(i){if(i instanceof Ee&&i.name==="ResourceNotFoundException"&&i.message.includes("Device does not exist."))return await r.clearDeviceMetadata(n),e(...t);throw i}}function pl(e){const{dispatch:t}=gr;t({type:"SET_USERNAME",value:e})}function ml(e){return gr.getState().username??e}const h2=async({tokens:e,authConfig:t,username:n})=>{var f,h;De(t==null?void 0:t.Cognito);const r=Ge(t.Cognito.userPoolId);qv(e);const i=e.refreshToken,o={REFRESH_TOKEN:i};(f=e.deviceMetadata)!=null&&f.deviceKey&&(o.DEVICE_KEY=e.deviceMetadata.deviceKey);const a=Nt({username:n,userPoolId:t.Cognito.userPoolId,userPoolClientId:t.Cognito.userPoolClientId}),{AuthenticationResult:s}=await Qo({region:r},{ClientId:(h=t==null?void 0:t.Cognito)==null?void 0:h.userPoolClientId,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,UserContextData:a}),l=Vn((s==null?void 0:s.AccessToken)??""),c=s!=null&&s.IdToken?Vn(s.IdToken):void 0,{iat:u}=l.payload;if(!u)throw new Ee({name:"iatNotFoundException",message:"iat not found in access token"});const d=u*1e3-new Date().getTime();return{accessToken:l,idToken:c,clockDrift:d,refreshToken:i,username:n}},p2=ME(h2),m2={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails"};var ws;(function(e){e.InvalidAuthTokens="InvalidAuthTokens"})(ws||(ws={}));const g2={[ws.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},v2=dd(g2);class y2{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new Ee({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}async loadTokens(){try{const t=await this.getAuthKeys(),n=await this.getKeyValueStorage().getItem(t.accessToken);if(!n)throw new Ee({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const r=Vn(n),i=await this.getKeyValueStorage().getItem(t.idToken),o=i?Vn(i):void 0,a=await this.getKeyValueStorage().getItem(t.refreshToken)??void 0,s=await this.getKeyValueStorage().getItem(t.clockDrift)??"0",l=Number.parseInt(s),c=await this.getKeyValueStorage().getItem(t.signInDetails),u={accessToken:r,idToken:o,refreshToken:a,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:l,username:await this.getLastAuthUser()};return c&&(u.signInDetails=JSON.parse(c)),u}catch{return null}}async storeTokens(t){v2(t!==void 0,ws.InvalidAuthTokens),await this.clearTokens();const n=t.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),n);const r=await this.getAuthKeys();await this.getKeyValueStorage().setItem(r.accessToken,t.accessToken.toString()),t.idToken&&await this.getKeyValueStorage().setItem(r.idToken,t.idToken.toString()),t.refreshToken&&await this.getKeyValueStorage().setItem(r.refreshToken,t.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(r.deviceKey,t.deviceMetadata.deviceKey),t.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(r.deviceGroupKey,t.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(r.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails&&await this.getKeyValueStorage().setItem(r.signInDetails,JSON.stringify(t.signInDetails)),await this.getKeyValueStorage().setItem(r.clockDrift,`${t.clockDrift}`)}async clearTokens(){const t=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey())])}async getDeviceMetadata(t){const n=await this.getAuthKeys(t),r=await this.getKeyValueStorage().getItem(n.deviceKey),i=await this.getKeyValueStorage().getItem(n.deviceGroupKey),o=await this.getKeyValueStorage().getItem(n.randomPasswordKey);return o&&i&&r?{deviceKey:r,deviceGroupKey:i,randomPassword:o}:null}async clearDeviceMetadata(t){const n=await this.getAuthKeys(t);await Promise.all([this.getKeyValueStorage().removeItem(n.deviceKey),this.getKeyValueStorage().removeItem(n.deviceGroupKey),this.getKeyValueStorage().removeItem(n.randomPasswordKey)])}async getAuthKeys(t){var r;De((r=this.authConfig)==null?void 0:r.Cognito);const n=t??await this.getLastAuthUser();return b2(this.name,`${this.authConfig.Cognito.userPoolClientId}.${n}`)}getLastAuthUserKey(){var n;De((n=this.authConfig)==null?void 0:n.Cognito);const t=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${t}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}}const b2=(e,t)=>Id(m2)(`${e}`,t);function Id(e){const t=Object.values({...e});return(n,r)=>t.reduce((i,o)=>({...i,[o]:`${n}.${r}.${o}`}),{})}const mp="amplify-signin-with-hostedUI",wn="CognitoIdentityServiceProvider";class ny{constructor(t){this.keyValueStorage=t}async clearOAuthInflightData(){De(this.cognitoConfig);const t=En(wn,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])}async clearOAuthData(){De(this.cognitoConfig);const t=En(wn,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(mp),this.keyValueStorage.removeItem(t.oauthSignIn)}loadOAuthState(){De(this.cognitoConfig);const t=En(wn,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){De(this.cognitoConfig);const n=En(wn,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthState,t)}loadPKCE(){De(this.cognitoConfig);const t=En(wn,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){De(this.cognitoConfig);const n=En(wn,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}async loadOAuthInFlight(){De(this.cognitoConfig);const t=En(wn,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(t.inflightOAuth)==="true"}async storeOAuthInFlight(t){De(this.cognitoConfig);const n=En(wn,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.inflightOAuth,`${t}`)}async loadOAuthSignIn(){var o;De(this.cognitoConfig);const t=En(wn,this.cognitoConfig.userPoolClientId),n=await this.keyValueStorage.getItem(mp),[r,i]=((o=await this.keyValueStorage.getItem(t.oauthSignIn))==null?void 0:o.split(","))??[];return{isOAuthSignIn:r==="true"||n==="true",preferPrivateSession:i==="true"}}async storeOAuthSignIn(t,n=!1){De(this.cognitoConfig);const r=En(wn,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(r.oauthSignIn,`${t},${n}`)}}const En=(e,t)=>Id(fC)(e,t),Ft=new ny(wi),mu=[],_2=e=>{mu.push(e)},ry=()=>{var e;for(;mu.length;)(e=mu.pop())==null||e()};class S2{constructor(){this.waitForInflightOAuth=pd()?async()=>{if(await Ft.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((t,n)=>{_2(t)}),this.inflightPromise)}:async()=>{}}setAuthConfig(t){Ft.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new Ee({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new Ee({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(t){var a,s,l,c,u;let n;try{De((a=this.authConfig)==null?void 0:a.Cognito)}catch{return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,n=await this.getTokenStore().loadTokens();const r=await this.getTokenStore().getLastAuthUser();if(n===null)return null;const i=!!(n!=null&&n.idToken)&&mh({expiresAt:(((l=(s=n.idToken)==null?void 0:s.payload)==null?void 0:l.exp)??0)*1e3,clockDrift:n.clockDrift??0}),o=mh({expiresAt:(((u=(c=n.accessToken)==null?void 0:c.payload)==null?void 0:u.exp)??0)*1e3,clockDrift:n.clockDrift??0});return(t!=null&&t.forceRefresh||i||o)&&(n=await this.refreshTokens({tokens:n,username:r}),n===null)?null:{accessToken:n==null?void 0:n.accessToken,idToken:n==null?void 0:n.idToken,signInDetails:n==null?void 0:n.signInDetails}}async refreshTokens({tokens:t,username:n}){try{const{signInDetails:r}=t,i=await this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:n});return i.signInDetails=r,await this.setTokens({tokens:i}),Pn.dispatch("auth",{event:"tokenRefresh"},"Auth",Rn),i}catch(r){return this.handleErrors(r)}}handleErrors(t){if(Wr(t),t.message!=="Network error"&&this.clearTokens(),Pn.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",Rn),t.name.startsWith("NotAuthorizedException"))return null;throw t}async setTokens({tokens:t}){return this.getTokenStore().storeTokens(t)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}}class w2{constructor(){this.authTokenStore=new y2,this.authTokenStore.setKeyValueStorage(wi),this.tokenOrchestrator=new S2,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(p2)}getTokens({forceRefresh:t}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:t})}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}}const Or=new w2,{tokenOrchestrator:yn}=Or;async function Kr(e){if(e.AccessToken){const t=Vn(e.AccessToken),n=(t.payload.iat||0)*1e3,r=new Date().getTime(),i=n>0?n-r:0;let o,a,s;e.RefreshToken&&(a=e.RefreshToken),e.IdToken&&(o=Vn(e.IdToken)),e!=null&&e.NewDeviceMetadata&&(s=e.NewDeviceMetadata);const l={accessToken:t,idToken:o,refreshToken:a,clockDrift:i,deviceMetadata:s,username:e.username};e!=null&&e.signInDetails&&(l.signInDetails=e.signInDetails),await yn.setTokens({tokens:l})}else throw new rn({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}const E2="Unable to get user session following successful sign-in.",Ui=async()=>{try{Pn.dispatch("auth",{event:"signedIn",data:await ul()},"Auth",Rn)}catch(e){throw e.name===ll?new Ee({name:lC,message:E2,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}};async function C2(e){var s;const t=(s=qe.getConfig().Auth)==null?void 0:s.Cognito;De(t);const{username:n,password:r,options:i}=e,o={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},a=i==null?void 0:i.clientMetadata;ft(!!n,xe.EmptySignInUsername),ft(!r,xe.CustomAuthSignInPassword);try{const{ChallengeName:l,ChallengeParameters:c,AuthenticationResult:u,Session:d}=await ia(r2,[n,a,t,yn],n,yn),f=ml(n);return ea({signInSession:d,username:f,challengeName:l,signInDetails:o}),u?(Kn(),await Kr({username:f,...u,NewDeviceMetadata:await ra(t.userPoolId,u.NewDeviceMetadata,u.AccessToken),signInDetails:o}),await Ui(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ta({challengeName:l,challengeParameters:c})}catch(l){Kn(),Wr(l);const c=na(l.name);if(c)return c;throw l}}async function I2(e){var s;const{username:t,password:n,options:r}=e,i={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},o=(s=qe.getConfig().Auth)==null?void 0:s.Cognito;De(o);const a=r==null?void 0:r.clientMetadata;ft(!!t,xe.EmptySignInUsername),ft(!!n,xe.EmptySignInPassword);try{const{ChallengeName:l,ChallengeParameters:c,AuthenticationResult:u,Session:d}=await i2(t,n,a,o,yn),f=ml(t);return ea({signInSession:d,username:f,challengeName:l,signInDetails:i}),u?(await Kr({username:f,...u,NewDeviceMetadata:await ra(o.userPoolId,u.NewDeviceMetadata,u.AccessToken),signInDetails:i}),Kn(),await Ui(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ta({challengeName:l,challengeParameters:c})}catch(l){Kn(),Wr(l);const c=na(l.name);if(c)return c;throw l}}async function gp(e){var a,s;const{username:t,password:n}=e,r=(a=qe.getConfig().Auth)==null?void 0:a.Cognito,i={loginId:t,authFlowType:"USER_SRP_AUTH"};De(r);const o=(s=e.options)==null?void 0:s.clientMetadata;ft(!!t,xe.EmptySignInUsername),ft(!!n,xe.EmptySignInPassword);try{const{ChallengeName:l,ChallengeParameters:c,AuthenticationResult:u,Session:d}=await n2(t,n,o,r,yn),f=ml(t);return ea({signInSession:d,username:f,challengeName:l,signInDetails:i}),u?(Kn(),await Kr({username:f,...u,NewDeviceMetadata:await ra(r.userPoolId,u.NewDeviceMetadata,u.AccessToken),signInDetails:i}),await Ui(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ta({challengeName:l,challengeParameters:c})}catch(l){Kn(),Wr(l);const c=na(l.name);if(c)return c;throw l}}async function x2(e){var s;const{username:t,password:n,options:r}=e,i=(s=qe.getConfig().Auth)==null?void 0:s.Cognito,o={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};De(i);const a=r==null?void 0:r.clientMetadata;ft(!!t,xe.EmptySignInUsername),ft(!!n,xe.EmptySignInPassword);try{const{ChallengeName:l,ChallengeParameters:c,AuthenticationResult:u,Session:d}=await ia(t2,[t,n,a,i,yn],t,yn),f=ml(t);return ea({signInSession:d,username:f,challengeName:l,signInDetails:o}),u?(await Kr({...u,username:f,NewDeviceMetadata:await ra(i.userPoolId,u.NewDeviceMetadata,u.AccessToken),signInDetails:o}),Kn(),await Ui(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ta({challengeName:l,challengeParameters:c})}catch(l){Kn(),Wr(l);const c=na(l.name);if(c)return c;throw l}}async function xd(e){var n;const t=(n=e.options)==null?void 0:n.authFlowType;switch(await ty(),t){case"USER_SRP_AUTH":return gp(e);case"USER_PASSWORD_AUTH":return x2(e);case"CUSTOM_WITHOUT_SRP":return C2(e);case"CUSTOM_WITH_SRP":return I2(e);default:return gp(e)}}const iy=async()=>{throw new Ee({name:Hv,message:"The autoSignIn flow has not started, or has been cancelled/completed.",recoverySuggestion:"Please try to use the signIn API or log out before starting a new autoSignIn flow."})};let Ad=iy;function gu(e){Ad=e}function yi(){Ad=iy}const oy=3*60*1e3;function A2(e){const t=ys.listen("auth-internal",async({payload:r})=>{switch(r.event){case"confirmSignUp":{const i=r.data;i!=null&&i.isSignUpComplete&&(ys.dispatch("auth-internal",{event:"autoSignIn"}),gu(uy(e)),t())}}}),n=setTimeout(()=>{t(),bi(!1),clearTimeout(n),yi()},oy)}function ay(e,t){let n;return r=>{n||e(...r),clearTimeout(n),n=setTimeout(()=>{n=void 0},t)}}function k2(e,t,n){const r=Date.now(),i=setInterval(async()=>{if(Date.now()-r>oy)clearInterval(i),bi(!1),n(new Ee({name:Hv,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),yi();else try{const s=await xd(e);s.nextStep.signInStep!=="CONFIRM_SIGN_UP"&&(t(s),clearInterval(i),bi(!1),yi())}catch(s){clearInterval(i),bi(!1),n(s),yi()}},5e3)}const T2=ay(k2,300),M2=ay(N2,300);let sy=!1,ly;function cy(e){ly=e}function R2(e){return ly===e}function po(){return sy}function bi(e){e===!1&&cy(void 0),sy=e}function Pa(e){return!!e.UserConfirmed}function P2(e){return async()=>new Promise((t,n)=>{T2([e,t,n])})}async function N2(e,t,n){try{const r=await xd(e);t(r),yi()}catch(r){n(r),yi()}}function uy(e){return async()=>new Promise((t,n)=>{M2([e,t,n])})}const O2=uy;async function L2(e){var p;const{username:t,password:n,options:r}=e,i=(p=qe.getConfig().Auth)==null?void 0:p.Cognito,o=(i==null?void 0:i.signUpVerificationMethod)??"code",{clientMetadata:a,validationData:s,autoSignIn:l}=e.options??{};De(i),ft(!!t,xe.EmptySignUpUsername),ft(!!n,xe.EmptySignUpPassword);const c=typeof l!="boolean"?l:void 0,u={username:t,options:c};(c==null?void 0:c.authFlowType)!=="CUSTOM_WITHOUT_SRP"&&(u.password=n),(c||l===!0)&&(cy(t),bi(!0));const d=await $E({region:Ge(i.userPoolId),userAgentValue:ut(Re.SignUp)},{Username:t,Password:n,UserAttributes:(r==null?void 0:r.userAttributes)&&Oh(r==null?void 0:r.userAttributes),ClientMetadata:a,ValidationData:s&&Oh(s),ClientId:i.userPoolClientId}),{UserSub:f,CodeDeliveryDetails:h}=d;if(Pa(d)&&po())return gu(O2(u)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:f};if(Pa(d)&&!po())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:f};if(!Pa(d)&&po()&&o==="code")A2(u);else if(!Pa(d)&&po()&&o==="link")return gu(P2(u)),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:h==null?void 0:h.DeliveryMedium,destination:h==null?void 0:h.Destination,attributeName:h==null?void 0:h.AttributeName}},userId:f};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:h==null?void 0:h.DeliveryMedium,destination:h==null?void 0:h.Destination,attributeName:h==null?void 0:h.AttributeName}},userId:f}}async function dy(e){var c,u;const{username:t}=e;ft(!!t,xe.EmptyResetPasswordUsername);const n=(c=qe.getConfig().Auth)==null?void 0:c.Cognito;De(n);const{userPoolClientId:r,userPoolId:i}=n,o=(u=e.options)==null?void 0:u.clientMetadata,a=Nt({username:t,userPoolId:i,userPoolClientId:r}),l=(await qE({region:Ge(n.userPoolId),userAgentValue:ut(Re.ResetPassword)},{Username:t,ClientMetadata:o,ClientId:n.userPoolClientId,UserContextData:a})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:l==null?void 0:l.DeliveryMedium,destination:l==null?void 0:l.Destination,attributeName:l==null?void 0:l.AttributeName}}}}async function D2(e){var c,u;const t=(c=qe.getConfig().Auth)==null?void 0:c.Cognito;De(t);const{userPoolClientId:n,userPoolId:r}=t,{username:i,newPassword:o}=e;ft(!!i,xe.EmptyConfirmResetPasswordUsername),ft(!!o,xe.EmptyConfirmResetPasswordNewPassword);const a=e.confirmationCode;ft(!!a,xe.EmptyConfirmResetPasswordConfirmationCode);const s=(u=e.options)==null?void 0:u.clientMetadata,l=Nt({username:i,userPoolId:r,userPoolClientId:n});await zE({region:Ge(t.userPoolId),userAgentValue:ut(Re.ConfirmResetPassword)},{Username:i,ConfirmationCode:a,Password:o,ClientMetadata:s,ClientId:t.userPoolClientId,UserContextData:l})}async function fy(e){var d,f;const{username:t}=e;ft(!!t,xe.EmptySignUpUsername);const n=(d=qe.getConfig().Auth)==null?void 0:d.Cognito;De(n);const{userPoolClientId:r,userPoolId:i}=n,o=(f=e.options)==null?void 0:f.clientMetadata,a=Nt({username:t,userPoolId:i,userPoolClientId:r}),{CodeDeliveryDetails:s}=await VE({region:Ge(n.userPoolId),userAgentValue:ut(Re.ResendSignUpCode)},{Username:t,ClientMetadata:o,ClientId:n.userPoolClientId,UserContextData:a}),{DeliveryMedium:l,AttributeName:c,Destination:u}={...s};return{destination:u,deliveryMedium:l,attributeName:c||void 0}}async function U2(e){var c;const{username:t,confirmationCode:n,options:r}=e,i=(c=qe.getConfig().Auth)==null?void 0:c.Cognito;De(i);const{userPoolId:o,userPoolClientId:a}=i,s=r==null?void 0:r.clientMetadata;ft(!!t,xe.EmptyConfirmSignUpUsername),ft(!!n,xe.EmptyConfirmSignUpCode);const l=Nt({username:t,userPoolId:o,userPoolClientId:a});return await HE({region:Ge(i.userPoolId),userAgentValue:ut(Re.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:s,ForceAliasCreation:r==null?void 0:r.forceAliasCreation,ClientId:i.userPoolClientId,UserContextData:l}),new Promise((u,d)=>{try{const f={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!po()||!R2(t)){u(f);return}const h=ys.listen("auth-internal",({payload:p})=>{switch(p.event){case"autoSignIn":u({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),bi(!1),h()}});ys.dispatch("auth-internal",{event:"confirmSignUp",data:f})}catch(f){d(f)}})}async function hy(e){var c;const{challengeResponse:t,options:n}=e,{username:r,challengeName:i,signInSession:o,signInDetails:a}=gr.getState(),s=(c=qe.getConfig().Auth)==null?void 0:c.Cognito;De(s);const l=n==null?void 0:n.clientMetadata;if(ft(!!t,xe.EmptyChallengeResponse),!r||!i||!o)throw new Ee({name:Fr.SignInException,message:`
			An error occurred during the sign in process. 
			
			This most likely occurred due to:
			1. signIn was not called before confirmSignIn.
			2. signIn threw an exception.
			3. page was refreshed during the sign in flow.
			`,recoverySuggestion:"Make sure a successful call to signIn is made before calling confirmSignInand that the page is not refreshed until the sign in process is done."});try{const{Session:u,ChallengeName:d,AuthenticationResult:f,ChallengeParameters:h}=await c2(r,i,o,t,s,yn,l,n);return ea({signInSession:u,username:r,challengeName:d,signInDetails:a}),f?(Kn(),await Kr({username:r,...f,NewDeviceMetadata:await ra(s.userPoolId,f.NewDeviceMetadata,f.AccessToken),signInDetails:a}),await Ui(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ta({challengeName:d,challengeParameters:h})}catch(u){Wr(u);const d=na(u.name);if(d)return d;throw u}}async function F2(e){var o;const t=(o=qe.getConfig().Auth)==null?void 0:o.Cognito;De(t);const{confirmationCode:n,userAttributeKey:r}=e;ft(!!n,xe.EmptyConfirmUserAttributeCode);const{tokens:i}=await Cv({forceRefresh:!1});cl(i),await ZE({region:Ge(t.userPoolId),userAgentValue:ut(Re.ConfirmUserAttribute)},{AccessToken:i.accessToken.toString(),AttributeName:r,Code:n})}new kt("AuthError");const B2={oauthSignInError:{message:yt.OAUTH_ERROR,log:"Make sure Cognito Hosted UI has been configured correctly"},noConfig:{message:yt.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:yt.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:yt.EMPTY_USERNAME},invalidUsername:{message:yt.INVALID_USERNAME},emptyPassword:{message:yt.EMPTY_PASSWORD},emptyCode:{message:yt.EMPTY_CODE},signUpError:{message:yt.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:yt.NO_MFA},invalidMFA:{message:yt.INVALID_MFA},emptyChallengeResponse:{message:yt.EMPTY_CHALLENGE},noUserSession:{message:yt.NO_USER_SESSION},deviceConfig:{message:yt.DEVICE_CONFIG},networkError:{message:yt.NETWORK_ERROR},autoSignInError:{message:yt.AUTOSIGNIN_ERROR},default:{message:yt.DEFAULT_MSG}},Br=(e,t)=>new Ee({message:e??"An error has occurred during the oauth process.",name:Fr.OAuthSignInError,recoverySuggestion:B2.oauthSignInError.log});var vu;(function(e){e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",e.AutoSignInError="autoSignInError",e.OAuthSignInError="oauthSignInError"})(vu||(vu={}));const j2="`signInWithRedirect` has been canceled.",$2="An error occurred while validating the state.",H2="Try to initiate an OAuth flow from Amplify",py=async e=>{const t=await Ft.loadOAuthState(),n=e===t?t:void 0;if(!n)throw new Ee({name:vu.OAuthSignInError,message:e===null?j2:$2,recoverySuggestion:e===null?void 0:H2});return n},my=async({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:r,responseType:i,domain:o,preferPrivateSession:a})=>{const s=new mr(e),l=s.searchParams.get("error"),c=s.searchParams.get("error_description");if(l)throw Br(c??l);return i==="code"?q2({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:r,domain:o,preferPrivateSession:a}):z2({currentUrl:e,redirectUri:r,preferPrivateSession:a})},q2=async({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:r,domain:i,preferPrivateSession:o})=>{const a=new mr(e),s=a.searchParams.get("code"),l=a.searchParams.get("state");if(!s||!l)throw Br("User cancelled OAuth flow.");const c=await py(l),u="https://"+i+"/oauth2/token",d=await Ft.loadPKCE(),f={grant_type:"authorization_code",code:s,client_id:n,redirect_uri:r,...d?{code_verifier:d}:{}},h=Object.entries(f).map(([x,O])=>`${encodeURIComponent(x)}=${encodeURIComponent(O)}`).join("&"),{access_token:p,refresh_token:m,id_token:y,error:g,error_message:v,token_type:b,expires_in:E}=await(await fetch(u,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",[fS]:t},body:h})).json();if(g)throw Br(v??g);const C=(p&&Vn(p).payload.username)??"username";return await Kr({username:C,AccessToken:p,IdToken:y,RefreshToken:m,TokenType:b,ExpiresIn:E}),gy({redirectUri:r,state:c,preferPrivateSession:o})},z2=async({currentUrl:e,redirectUri:t,preferPrivateSession:n})=>{const r=new mr(e),{id_token:i,access_token:o,state:a,token_type:s,expires_in:l,error_description:c,error:u}=(r.hash??"#").substring(1).split("&").map(h=>h.split("=")).reduce((h,[p,m])=>({...h,[p]:m}),{id_token:void 0,access_token:void 0,state:void 0,token_type:void 0,expires_in:void 0,error_description:void 0,error:void 0});if(u)throw Br(c??u);if(!o)throw Br("No access token returned from OAuth flow.");const d=await py(a),f=(o&&Vn(o).payload.username)??"username";return await Kr({username:f,AccessToken:o,IdToken:i,TokenType:s,ExpiresIn:l}),gy({redirectUri:t,state:d,preferPrivateSession:n})},gy=async({redirectUri:e,state:t,preferPrivateSession:n})=>{await Ft.clearOAuthData(),await Ft.storeOAuthSignIn(!0,n),ry(),V2(t)&&Pn.dispatch("auth",{event:"customOAuthState",data:kE(W2(t))},"Auth",Rn),Pn.dispatch("auth",{event:"signInWithRedirect"},"Auth",Rn),await Ui(),K2(e)},V2=e=>/-/.test(e),W2=e=>e.split("-").splice(1).join("-"),K2=e=>{typeof window<"u"&&typeof window.history<"u"&&window.history.replaceState(window.history.state,"",e)};function kd(e){const t=(e==null?void 0:e.find(G2))??(e==null?void 0:e.find(Y2)),n=(e==null?void 0:e.find(Z2))??(e==null?void 0:e.find(J2));if(t)return t;throw n?oC:rC}const G2=e=>e.startsWith(String(window.location.origin+window.location.pathname)),Y2=e=>e.includes(String(window.location.hostname)),J2=e=>e.startsWith("http://"),Z2=e=>e.startsWith("https://"),Td=async e=>{ry(),await Ft.clearOAuthInflightData(),Pn.dispatch("auth",{event:"signInWithRedirect_failure",data:{error:e}},"Auth",Rn)},X2=async e=>{try{De(e),nl(e),Ft.setAuthConfig(e)}catch{return}if(await Ft.loadOAuthInFlight())try{const t=window.location.href,{loginWith:n,userPoolClientId:r}=e,{domain:i,redirectSignIn:o,responseType:a}=n.oauth,s=kd(o);await my({currentUrl:t,clientId:r,domain:i,redirectUri:s,responseType:a,userAgentValue:ut(Re.SignInWithRedirect)})}catch(t){await Td(t)}};pd()&&qe[yv](X2);const Q2={Google:"Google",Facebook:"Facebook",Amazon:"LoginWithAmazon",Apple:"SignInWithApple"},vy=async e=>{window!=null&&window.location&&(window.location.href=e.replace("http://","https://"))},vp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ex=e=>{const t=new Uint8Array(e);mv().getRandomValues(t);let n="",r;for(const i of t)n+=vp.charAt(i%vp.length);return{value:n,method:"S256",toCodeChallenge(){return r||(r=tx(n),r)}}};function tx(e){const t=new Ci.Sha256;return t.update(e),nx(Fo.convert(t.digestSync(),{urlSafe:!0}))}function nx(e){return e.replace(/=/g,"")}const rx=()=>AE(32),ix=e=>{async function t(n){if(n.persisted&&await e.loadOAuthInFlight()){const i=Br("User cancelled OAuth flow.");await Td(i)}window.removeEventListener("pageshow",t)}window.addEventListener("pageshow",t)};async function yy(e){var r,i,o;const t=(r=qe.getConfig().Auth)==null?void 0:r.Cognito;De(t),nl(t),Ft.setAuthConfig(t),await ty();let n="COGNITO";return typeof(e==null?void 0:e.provider)=="string"?n=Q2[e.provider]:(i=e==null?void 0:e.provider)!=null&&i.custom&&(n=e.provider.custom),ox({oauthConfig:t.loginWith.oauth,clientId:t.userPoolClientId,provider:n,customState:e==null?void 0:e.customState,preferPrivateSession:(o=e==null?void 0:e.options)==null?void 0:o.preferPrivateSession})}const ox=async({oauthConfig:e,provider:t,clientId:n,customState:r,preferPrivateSession:i})=>{const{domain:o,redirectSignIn:a,responseType:s,scopes:l}=e,c=rx(),u=r?`${c}-${TE(r)}`:c,{value:d,method:f,toCodeChallenge:h}=ex(128),p=kd(e.redirectSignIn);pd()&&Ft.storeOAuthInFlight(!0),Ft.storeOAuthState(u),Ft.storePKCE(d);const m=Object.entries({redirect_uri:p,response_type:s,client_id:n,identity_provider:t,scope:l.join(" "),state:u,...s==="code"&&{code_challenge:h(),code_challenge_method:f}}).map(([E,C])=>`${encodeURIComponent(E)}=${encodeURIComponent(C)}`).join("&"),y=`https://${o}/oauth2/authorize?${m}`;ix(Ft);const{type:g,error:v,url:b}=await vy(y)??{};try{if(g==="error")throw Br(String(v));g==="success"&&b&&await my({currentUrl:b,clientId:n,domain:o,redirectUri:p,responseType:s,userAgentValue:ut(Re.SignInWithRedirect),preferPrivateSession:i})}catch(E){throw await Td(E),E}},ax=async e=>{var i;const t=(i=e.getConfig().Auth)==null?void 0:i.Cognito;De(t);const{tokens:n}=await Ev(e,{forceRefresh:!1});cl(n);const{UserAttributes:r}=await GE({region:Ge(t.userPoolId),userAgentValue:ut(Re.FetchUserAttributes)},{AccessToken:n.accessToken.toString()});return QE(r)},by=()=>ax(qe),sx=async e=>{await e.clearOAuthData(),yn.clearTokens(),await Iv(),Pn.dispatch("auth",{event:"signedOut"},"Auth",Rn)},lx=async(e,t=!1)=>{nl(e);const{loginWith:n,userPoolClientId:r}=e,{domain:i,redirectSignOut:o}=n.oauth,a=kd(o),s=`https://${i}/logout?${Object.entries({client_id:r,logout_uri:encodeURIComponent(a)}).map(([l,c])=>`${l}=${c}`).join("&")}`;return vy(s)},cx=async(e,t)=>{const{isOAuthSignIn:n}=await t.loadOAuthSignIn();if(await sx(t),n)return lx(e)},ux=new kt("Auth");async function dx(e){var r;const t=(r=qe.getConfig().Auth)==null?void 0:r.Cognito;De(t),await fx(t);let n;try{nl(t),n=!0}catch{n=!1}if(n){const i=new ny(wi);i.setAuthConfig(t);const{type:o}=await cx(t,i)??{};if(o==="error")throw new Ee({name:aC,message:"An error occurred when attempting to log out from OAuth provider."})}else yn.clearTokens(),await Iv(),Pn.dispatch("auth",{event:"signedOut"},"Auth",Rn)}async function fx(e){try{const t=await yn.getTokenStore().loadTokens();qv(t),hx(t.accessToken)&&await jE({region:Ge(e.userPoolId),userAgentValue:ut(Re.SignOut)},{ClientId:e.userPoolClientId,Token:t.refreshToken})}catch{ux.debug("Client signOut error caught but will proceed with token removal")}}const hx=e=>{var t;return!!((t=e==null?void 0:e.payload)!=null&&t.origin_jti)},px=async e=>{var u;const{userAttributeKey:t,options:n}=e,r=(u=qe.getConfig().Auth)==null?void 0:u.Cognito,i=n==null?void 0:n.clientMetadata;De(r);const{tokens:o}=await Cv({forceRefresh:!1});cl(o);const{CodeDeliveryDetails:a}=await JE({region:Ge(r.userPoolId),userAgentValue:ut(Re.SendUserAttributeVerificationCode)},{AccessToken:o.accessToken.toString(),ClientMetadata:i,AttributeName:t}),{DeliveryMedium:s,AttributeName:l,Destination:c}={...a};return{destination:c,deliveryMedium:s,attributeName:l}},mx={identityId:"identityId"},gx=new kt("DefaultIdentityIdStore");class vx{setAuthConfig(t){es(t.Cognito),this.authConfig=t,this._authKeys=yx("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this.keyValueStorage=t}async loadIdentityId(){var t;es((t=this.authConfig)==null?void 0:t.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const n=await this.keyValueStorage.getItem(this._authKeys.identityId);return n?{id:n,type:"guest"}:null}}catch(n){return gx.log("Error getting stored IdentityId.",n),null}}async storeIdentityId(t){var n;es((n=this.authConfig)==null?void 0:n.Cognito),t.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,t.id),this._primaryIdentityId=void 0):(this._primaryIdentityId=t.id,this.keyValueStorage.removeItem(this._authKeys.identityId))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const yx=(e,t)=>Id(mx)(`com.amplify.${e}`,t);function _y(e){const t=Vn(e).payload.iss,n={};if(!t)throw new Ee({name:"InvalidIdTokenException",message:"Invalid Idtoken."});const r=t.replace(/(^\w+:|^)\/\//,"");return n[r]=e,n}const bx=new kt("CognitoIdentityIdProvider");async function _x({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});let r=await n.loadIdentityId();if(e){if(r&&r.type==="primary")return r.id;{const i=e.idToken?_y(e.idToken.toString()):{},o=await yp(i,t);r&&r.id===o&&bx.debug(`The guest identity ${r.id} has become the primary identity.`),r={id:o,type:"primary"}}}else{if(r&&r.type==="guest")return r.id;r={id:await yp({},t),type:"guest"}}return n.storeIdentityId(r),r.id}async function yp(e,t){const n=t==null?void 0:t.identityPoolId,r=au(n),i=(await Bw({region:r},{IdentityPoolId:n,Logins:e})).IdentityId;if(!i)throw new Ee({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}const Na=new kt("CognitoCredentialsProvider"),bp=50*60*1e3;class Sx{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}async clearCredentialsAndIdentityId(){Na.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){Na.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(t){const n=t.authenticated,{tokens:r}=t,{authConfig:i}=t;try{es(i==null?void 0:i.Cognito)}catch{return}if(!n&&!i.Cognito.allowGuestAccess)return;const{forceRefresh:o}=t,a=this.hasTokenChanged(r),s=await _x({tokens:r,authConfig:i.Cognito,identityIdStore:this._identityIdStore});return(o||a)&&this.clearCredentials(),n?(cC(r),this.credsForOIDCTokens(i.Cognito,r,s)):this.getGuestCredentials(s,i.Cognito)}async getGuestCredentials(t,n){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return Na.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const r=au(n.identityPoolId),i=await Mh({region:r},{IdentityId:t});if(i.Credentials&&i.Credentials.AccessKeyId&&i.Credentials.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+bp;const o={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:t},a=i.IdentityId;return a&&(o.identityId=a,this._identityIdStore.storeIdentityId({id:a,type:"guest"})),this._credentialsAndIdentityId={...o,isAuthenticatedCreds:!1},o}else throw new Ee({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(t,n,r){var s;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return Na.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const i=n.idToken?_y(n.idToken.toString()):{},o=au(t.identityPoolId),a=await Mh({region:o},{IdentityId:r,Logins:i});if(a.Credentials&&a.Credentials.AccessKeyId&&a.Credentials.SecretKey){const l={credentials:{accessKeyId:a.Credentials.AccessKeyId,secretAccessKey:a.Credentials.SecretKey,sessionToken:a.Credentials.SessionToken,expiration:a.Credentials.Expiration},identityId:r};this._credentialsAndIdentityId={...l,isAuthenticatedCreds:!0,associatedIdToken:(s=n.idToken)==null?void 0:s.toString()},this._nextCredentialsRefresh=new Date().getTime()+bp;const c=a.IdentityId;return c&&(l.identityId=c,this._identityIdStore.storeIdentityId({id:c,type:"primary"})),l}else throw new Ee({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){var n,r;return!!t&&!!((n=this._credentialsAndIdentityId)!=null&&n.associatedIdToken)&&((r=t.idToken)==null?void 0:r.toString())!==this._credentialsAndIdentityId.associatedIdToken}}const wx=new Sx(new vx(wi)),gl={configure(e,t){const n=bv(e);if(!n.Auth){qe.configure(n,t);return}if(t!=null&&t.Auth){qe.configure(n,t);return}if(!qe.libraryOptions.Auth){Or.setAuthConfig(n.Auth),Or.setKeyValueStorage(t!=null&&t.ssr?new Rh({sameSite:"lax"}):wi),qe.configure(n,{...t,Auth:{tokenProvider:Or,credentialsProvider:wx}});return}if(t){t.ssr!==void 0&&Or.setKeyValueStorage(t.ssr?new Rh({sameSite:"lax"}):wi),qe.configure(n,{Auth:qe.libraryOptions.Auth,...t});return}qe.configure(n)},getConfig(){return qe.getConfig()}},Nn=We({__name:"base-footer",setup(e){const t=sd();return(n,r)=>V(n.$slots,"footert",nn(n.$attrs,{slotData:w(t).default&&w(t).default()}),()=>[te("footer",pt(ct(n.$attrs)),[V(n.$slots,"default")],16)])}}),On=We({__name:"base-form",setup(e){const t=sd();return(n,r)=>V(n.$slots,"formt",nn(n.$attrs,{slotData:w(t).default&&w(t).default()}),()=>[te("form",nn({"data-amplify-form":""},n.$attrs),[V(n.$slots,"default")],16)])}}),vl=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Ex={};function Cx(e,t){return re(),Qe("div",null,[V(e.$slots,"default")])}const Wt=vl(Ex,[["render",Cx]]),Ix=["type","data-fullwidth","data-size","data-fontWeight","data-variation","data-loading","data-disabled","disabled"],un=We({__name:"amplify-button",props:{type:null,fullWidth:{type:[Boolean,String]},size:null,variation:null,fontWeight:null,loading:{type:[Boolean,String]},disabled:{type:[Boolean,String]}},setup(e){const t=e,{type:n,fullWidth:r,size:i,variation:o,fontWeight:a}=lt(t);return(s,l)=>V(s.$slots,"buttont",pt(ct(s.$attrs)),()=>[te("button",nn({class:["amplify-button amplify-field-group__control",{[`amplify-button--${w(o)}`]:w(o),[`amplify-button--${w(i)}`]:w(i),"amplify-button--fullwidth":w(r),"amplify-button--loading":e.loading,"amplify-button--disabled":e.disabled}],type:w(n),style:{fontWeight:w(a)},"data-fullwidth":w(r),"data-size":w(i),"data-fontWeight":w(a),"data-variation":w(o),"data-loading":e.loading,"data-disabled":e.disabled,disabled:e.disabled},s.$attrs,{"data-amplify-button":""}),[V(s.$slots,"default")],16,Ix)])}}),Md=e=>{var t;return(t=e.context.actorRef)==null?void 0:t.getSnapshot()},Rd=e=>{var t;return(t=Md(e))==null?void 0:t.context},xx={apis:[Re.DeleteUser,Re.UpdatePassword],category:Wn.Auth},Ax={apis:[Re.SignUp,Re.ConfirmSignUp,Re.ResendSignUpCode,Re.SignIn,Re.ConfirmSignIn,Re.FetchUserAttributes,Re.SignOut,Re.ResetPassword,Re.ConfirmResetPassword,Re.SignInWithRedirect],category:Wn.Auth},kx={apis:[nu.NotifyMessageInteraction],category:Wn.InAppMessaging},Tx={category:Wn.Geo,apis:[Ao.SearchByText,Ao.SearchForSuggestions,Ao.SearchByPlaceId]},Mx={category:Wn.Geo,apis:[]},Rx={apis:[ru.UploadData],category:Wn.Storage};function jo(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function Sy(e){return typeof e=="string"||typeof e=="object"&&Object.prototype.toString.call(e)==="[object String]"}function Px(e){return jo(e)&&Object.prototype.toString.call(e)==="[object Map]"}function Nx(e){return jo(e)&&Object.prototype.toString.call(e)==="[object Set]"}function wy(e){if(e==null)return!0;if(jo(e)&&(Px(e)||Nx(e)))return!e.size;if(jo(e)&&(Sy(e)||Array.isArray(e)))return!e.length;for(const t in e)if(Lx(e,t))return!1;return!0}function Ox(e){return jo(e)&&wy(e)}function Lx(e,t){return e!=null&&Object.prototype.hasOwnProperty.call(e,t)}function _p(e){return typeof e=="function"}function Dx(...e){}const Ey=({payload:e},t,n)=>{const{event:r}=e,{send:i}=t,{onSignIn:o,onSignOut:a}=n??{};switch(r){case"signedIn":{_p(o)&&o(e);break}case"signInWithRedirect":{i("SIGN_IN_WITH_REDIRECT");break}case"signedOut":case"tokenRefresh_failure":{r==="signedOut"&&_p(a)&&a(),i("SIGN_OUT");break}}},Ux=(e,t=Ey)=>{const n=r=>t(r,e);return Pn.listen("auth",n,"authenticator-hub-handler")},Fx=["+1","+7","+20","+27","+30","+31","+32","+33","+34","+36","+39","+40","+41","+43","+44","+45","+46","+47","+48","+49","+51","+52","+53","+54","+55","+56","+57","+58","+60","+61","+62","+63","+64","+65","+66","+81","+82","+84","+86","+90","+91","+92","+93","+94","+95","+98","+212","+213","+216","+218","+220","+221","+222","+223","+224","+225","+226","+227","+228","+229","+230","+231","+232","+233","+234","+235","+236","+237","+238","+239","+240","+241","+242","+243","+244","+245","+246","+248","+249","+250","+251","+252","+253","+254","+255","+256","+257","+258","+260","+261","+262","+263","+264","+265","+266","+267","+268","+269","+290","+291","+297","+298","+299","+345","+350","+351","+352","+353","+354","+355","+356","+357","+358","+359","+370","+371","+372","+373","+374","+375","+376","+377","+378","+379","+380","+381","+382","+385","+386","+387","+389","+420","+421","+423","+500","+501","+502","+503","+504","+505","+506","+507","+508","+509","+537","+590","+591","+593","+594","+595","+596","+597","+598","+599","+670","+672","+673","+674","+675","+676","+677","+678","+679","+680","+681","+682","+683","+685","+686","+687","+688","+689","+690","+691","+692","+850","+852","+853","+855","+856","+872","+880","+886","+960","+961","+962","+963","+964","+965","+966","+967","+968","+970","+971","+972","+973","+974","+975","+976","+977","+992","+993","+994","+995","+996","+998"],$o={birthdate:{label:"Birthdate",placeholder:"Enter your Birthdate",type:"date",autocomplete:"bday",isRequired:!0},confirmation_code:{label:"Confirmation Code",placeholder:"Enter your Confirmation Code",type:"text",autocomplete:"one-time-code",isRequired:!0},confirm_password:{label:"Confirm Password",placeholder:"Please confirm your Password",type:"password",autocomplete:"new-password",isRequired:!0},email:{label:"Email",placeholder:"Enter your Email",type:"email",autocomplete:"username",isRequired:!0},family_name:{label:"Family Name",placeholder:"Enter your Family Name",type:"text",autocomplete:"family-name",isRequired:!0},given_name:{label:"Given Name",placeholder:"Enter your Given Name",type:"text",autocomplete:"given-name",isRequired:!0},middle_name:{label:"Middle Name",placeholder:"Enter your Middle Name",type:"text",autocomplete:"additional-name",isRequired:!0},name:{label:"Name",placeholder:"Enter your Name",type:"text",autocomplete:"name",isRequired:!0},nickname:{label:"Nickname",placeholder:"Enter your Nickname",type:"text",autocomplete:"tel",isRequired:!0},password:{label:"Password",placeholder:"Enter your Password",type:"password",autocomplete:"new-password",isRequired:!0},phone_number:{label:"Phone Number",placeholder:"Enter your Phone Number",type:"tel",autocomplete:"tel",dialCode:"+1",dialCodeList:Fx,isRequired:!0},preferred_username:{label:"Preferred Username",placeholder:"Enter your Preferred Username",type:"text",isRequired:!0},profile:{label:"Profile",placeholder:"Add your Profile",type:"url",autocomplete:"url",isRequired:!0},website:{label:"Website",placeholder:"Add your Website",type:"url",autocomplete:"url",isRequired:!0},username:{label:"Username",placeholder:"Enter your Username",type:"text",autocomplete:"username",isRequired:!0}},Bx=["^","$","*",".","[","]","{","}","(",")","?",'"',"!","@","#","%","&","/","\\",",",">","<","'",":",";","|","_","~","`","=","+","-"," "],jx=(e,t)=>{if(t!=null&&t.matches("federatedSignIn")){if(e.matches("signUpActor"))return"signUp";if(e.matches("signInActor"))return"signIn"}switch(!0){case e.matches("idle"):return"idle";case e.matches("setup"):return"setup";case e.matches("signOut"):return"signOut";case e.matches("authenticated"):return"authenticated";case(t==null?void 0:t.matches("confirmSignUp")):case(t==null?void 0:t.matches("resendSignUpCode")):return"confirmSignUp";case(t==null?void 0:t.matches("confirmSignIn")):return"confirmSignIn";case(t==null?void 0:t.matches("setupTotp.edit")):case(t==null?void 0:t.matches("setupTotp.submit")):return"setupTotp";case(t==null?void 0:t.matches("signIn")):return"signIn";case(t==null?void 0:t.matches("signUp")):case(t==null?void 0:t.matches("autoSignIn")):return"signUp";case(t==null?void 0:t.matches("forceChangePassword")):return"forceNewPassword";case(t==null?void 0:t.matches("forgotPassword")):return"forgotPassword";case(t==null?void 0:t.matches("confirmResetPassword")):return"confirmResetPassword";case(t==null?void 0:t.matches("selectUserAttributes")):return"verifyUser";case(t==null?void 0:t.matches("confirmVerifyUserAttribute")):return"confirmVerifyUser";case e.matches("getCurrentUser"):case(t==null?void 0:t.matches("fetchUserAttributes")):return"transition";default:return null}},$x=e=>{const t=n=>r=>e({type:n,data:r});return{initializeMachine:t("INIT"),resendCode:t("RESEND"),signOut:t("SIGN_OUT"),submitForm:t("SUBMIT"),updateForm:t("CHANGE"),updateBlur:t("BLUR"),toFederatedSignIn:t("FEDERATED_SIGN_IN"),toForgotPassword:t("FORGOT_PASSWORD"),toSignIn:t("SIGN_IN"),toSignUp:t("SIGN_UP"),skipVerification:t("SKIP")}},Hx=e=>{var t,n;const r=Rd(e)??{},{challengeName:i,codeDeliveryDetails:o,remoteError:a,validationError:s,totpSecretCode:l=null,unverifiedUserAttributes:c,username:u}=r,{socialProviders:d=[]}=((t=e.context)==null?void 0:t.config)??{},f=(r==null?void 0:r.user)??((n=e.context)==null?void 0:n.user),h=!!(s&&Object.keys(s).length>0),p=Md(e),m=e.hasTag("pending")||(p==null?void 0:p.hasTag("pending")),y=jx(e,p);return{authStatus:(g=>{switch(g){case"idle":case"setup":return"configuring";case"authenticated":return"authenticated";default:return"unauthenticated"}})(y),challengeName:i,codeDeliveryDetails:o,error:a,hasValidationErrors:h,isPending:m,route:y,socialProviders:d,totpSecretCode:l,unverifiedUserAttributes:c,user:f,username:u,validationErrors:s}},qx=({send:e,state:t})=>{const n=$x(e),r=Hx(t);return{...n,...r}};var yu;(function(e){e.Apple="Apple",e.Amazon="Amazon",e.Facebook="Facebook",e.Google="Google"})(yu||(yu={}));var Sp;(function(e){e.Email="email",e.PhoneNumber="phone_number"})(Sp||(Sp={}));const zx=["birthdate","email","family_name","given_name","middle_name","name","nickname","phone_number","preferred_username","profile","website"],Vx=["username","email","phone_number"],Cy=[...Vx,...zx,"confirmation_code","password","confirm_password"],Wx=e=>Cy.includes(e),Ln=e=>{const t=new FormData(e.target);return Object.fromEntries(t)},Iy=e=>Cy.includes(e),Kx=e=>Array.isArray(e),Gx=e=>e?Kx(e)?e:[e]:null,Yx=e=>{const t=e.trim().split("");for(let n=0;n<t.length;n++)n>0&&n<t.length-1&&(t[n]="*");return t.join("")},Jx=e=>{if(e.length<4)return e;const t=e.split("");for(let n=0;n<t.length-4;n++)t[n]="*";return t.join("")},Zx=e=>{const t=e.split("@");return`${Yx(t[0])}@${t[1]}`},Xx=(e,t)=>e==="Phone Number"?Jx(t):Zx(t),Qx=e=>Bx.some(t=>e.includes(t)),eA=(e,t,n)=>encodeURI(`otpauth://totp/${e}:${t}?secret=${n}&issuer=${e}`);function tA(e,...t){return Object.entries(e).reduce((n,[r,i])=>({...n,[r]:t.includes(r)?i:i==null?void 0:i.trim()}),{})}const nA={ADD_PROFILE:"Add your Profile",ADD_WEBSITE:"Add your Website",BACK_SIGN_IN:"Back to Sign In",BIRTHDATE:"Birthdate",CHANGE_PASSWORD:"Change Password",CHANGING_PASSWORD:"Changing",CODE:"Code",CODE_ARRIVAL:"It may take a minute to arrive",CODE_EMAILED:"Your code is on the way. To log in, enter the code we emailed to",CODE_SENT:"Your code is on the way. To log in, enter the code we sent you",CODE_TEXTED:"Your code is on the way. To log in, enter the code we texted to",CONFIRM_PASSWORD:"Confirm Password",CONFIRM_PASSWORD_PLACEHOLDER:"Please confirm your Password",CONFIRM_RESET_PASSWORD_HEADING:"Reset your Password",CONFIRM_SIGNUP_HEADING:"Confirm Sign Up",CONFIRM_SMS:"Confirm SMS Code",CONFIRM_MFA_DEFAULT:"Confirm MFA Code",CONFIRM_TOTP:"Confirm TOTP Code",CONFIRM:"Confirm",CONFIRMATION_CODE:"Confirmation Code",CONFIRMING:"Confirming",CREATE_ACCOUNT:"Create Account",CREATING_ACCOUNT:"Creating Account",EMAIL_ADDRESS:"Email",ENTER_BIRTHDATE:"Enter your Birthdate",ENTER_CODE:"Enter your code",ENTER_CONFIRMATION_CODE:"Enter your Confirmation Code",ENTER_EMAIL:"Enter your Email",ENTER_FAMILY_NAME:"Enter your Family Name",ENTER_GIVEN_NAME:"Enter your Given Name",ENTER_MIDDLE_NAME:"Enter your Middle Name",ENTER_NAME:"Enter your Name",ENTER_NICK_NAME:"Enter your Nickname",ENTER_PASSWORD:"Enter your Password",ENTER_PHONE_NUMBER:"Enter your Phone Number",ENTER_PREFERRED_USERNAME:"Enter your Preferred Username",ENTER_USERNAME:"Enter your username",FAMILY_NAME:"Family Name",GIVEN_NAME:"Given Name",FORGOT_PASSWORD:"Forgot Password?",FORGOT_YOUR_PASSWORD:"Forgot your password?",HIDE_PASSWORD:"Hide password",LOADING:"Loading",LOGIN_NAME:"Username",MIDDLE_NAME:"Middle Name",NAME:"Name",NICKNAME:"Nickname",NEW_PASSWORD:"New password",OR:"or",PASSWORD:"Password",PHONE_NUMBER:"Phone Number",PREFERRED_USERNAME:"Preferred Username",PROFILE:"Profile",RESEND_CODE:"Resend Code",RESET_PASSWORD_HEADING:"Reset your password",RESET_PASSWORD:"Reset Password",SEND_CODE:"Send code",SENDING:"Sending",SETUP_TOTP:"Setup TOTP",SHOW_PASSWORD:"Show password",SIGN_IN_BUTTON:"Sign in",SIGN_IN_TAB:"Sign In",SIGN_IN_WITH_AMAZON:"Sign In with Amazon",SIGN_IN_WITH_APPLE:"Sign In with Apple",SIGN_IN_WITH_FACEBOOK:"Sign In with Facebook",SIGN_IN_WITH_GOOGLE:"Sign In with Google",SIGN_IN:"Sign in to your account",SIGN_UP_BUTTON:"Create a new account",SIGNING_IN_BUTTON:"Signing in",SKIP:"Skip",SUBMIT:"Submit",SUBMITTING:"Submitting",UPPERCASE_COPY:"COPY",VERIFY_CONTACT:"Verify Contact",VERIFY_HEADING:"Account recovery requires verified contact information",VERIFY:"Verify",WE_EMAILED:"We Emailed You",WE_SENT_CODE:"We Sent A Code",WE_TEXTED:"We Texted You",WEBSITE:"Website"},rA={...nA},Ie={...rA};function ae(e){return Hn.get(e)}const Pd=e=>{var t;const n=(t=e==null?void 0:e.context.config)==null?void 0:t.loginMechanisms,[r]=n??["username"];return r},iA=e=>{const t={...e};for(const[n,r]of Object.entries(e)){const{label:i,placeholder:o}=r;t[n]={...r,label:i?ae(i):void 0,placeholder:o?ae(o):void 0}}return t},oA=e=>Object.entries(e).sort((t,n)=>{const r=t[1].order||Number.MAX_VALUE,i=n[1].order||Number.MAX_VALUE;return r-i}).filter(t=>t[1]!==void 0),aA="+1",vr=e=>{let t=$o[e];const{type:n}=t;return n==="tel"&&(t={...t,dialCode:aA}),t},yl=e=>{const t=Pd(e);return{...vr(t),autocomplete:"username"}},os=e=>({confirmation_code:{...vr("confirmation_code"),label:"Code *",placeholder:"Code"}}),sA=e=>({username:{...yl(e)},password:{...vr("password"),autocomplete:"current-password"}}),lA=e=>{const{loginMechanisms:t,signUpAttributes:n}=e.context.config,r=Pd(e),i=Array.from(new Set([...t,"password","confirm_password",...n])),o={};for(const a of i)if(Iy(a)){const s=a===r?yl(e):vr(a);o[a]={...s}}else console.debug(`Authenticator does not have a default implementation for ${a}. Customize SignUp FormFields to add your own.`);return o},cA=e=>({confirmation_code:{...vr("confirmation_code"),placeholder:"Enter your code"}}),uA=e=>{const t=Pd(e),{label:n}=$o[t];return{username:{...yl(e),label:`Enter your ${n.toLowerCase()}`,placeholder:`Enter your ${n.toLowerCase()}`}}},dA=e=>({...os(),password:{...vr("password"),label:"New Password",placeholder:"New Password"},confirm_password:{...vr("confirm_password"),label:"Confirm Password",placeholder:"Confirm Password"}}),fA=e=>{const t=Md(e),{missingAttributes:n}=t.context,r=Array.from(new Set(["password","confirm_password",...n??[]])),i={};for(const o of r)Iy(o)?i[o]={...vr(o)}:console.debug(`Authenticator does not have a default implementation for ${o}. Customize ForceNewPassword FormFields to add your own.`);return i},hA={signIn:sA,signUp:lA,confirmSignUp:cA,confirmSignIn:os,forceNewPassword:fA,forgotPassword:uA,confirmResetPassword:dA,confirmVerifyUser:os,setupTotp:os},pA=(e,t)=>{const n=hA[e];return n(t)},mA=(e,t)=>{var n,r;const i=(r=(n=Rd(t))==null?void 0:n.formFields)==null?void 0:r[e];return!i||Object.keys(i).length===0?{}:Object.entries(i).reduce((o,[a,s])=>{if((e==="signIn"||e==="forgotPassword")&&a==="username"){const l={...yl(t),...s};return{...o,[a]:l}}else if(Wx(a)){const l={...$o[a],...s};return{...o,[a]:l}}else return{...o,[a]:s}},{})},gA=(e,t)=>{const n=pA(e,t),r=mA(e,t),i={...n,...r};return delete i.QR,iA(i)},vA=e=>e.map(t=>{const n=t[0],r={...t[1],order:void 0};return[n,r]}),yA=(e,t)=>{const n=gA(e,t);return vA(oA(n))},bA=e=>{switch(e){case"SMS_MFA":return ae(Ie.CONFIRM_SMS);case"SOFTWARE_TOKEN_MFA":return ae(Ie.CONFIRM_TOTP);default:return ae(Ie.CONFIRM_MFA_DEFAULT)}},_A=e=>{const{DeliveryMedium:t,Destination:n}=e??{},r=t==="EMAIL",i=t==="SMS",o=ae(Ie.CODE_ARRIVAL);return r||i?`${ae(r?Ie.CODE_EMAILED:Ie.CODE_TEXTED)} ${n}. ${o}.`:`${ae(Ie.CODE_SENT)}. ${o}.`},SA=e=>{const{DeliveryMedium:t}=e??{},n=t==="EMAIL";return ae(!n&&t==="SMS"?Ie.WE_SENT_CODE:n?Ie.WE_EMAILED:Ie.WE_TEXTED)},wA={amazon:"Amazon",apple:"Apple",facebook:"Facebook",google:"Google"},EA=(e,t)=>ae(`Sign ${e==="signIn"?"In":"Up"} with ${wA[t]}`),dn={getBackToSignInText:()=>ae(Ie.BACK_SIGN_IN),getChangePasswordText:()=>ae(Ie.CHANGE_PASSWORD),getChangingText:()=>ae(Ie.CHANGING_PASSWORD),getConfirmText:()=>ae(Ie.CONFIRM),getConfirmingText:()=>ae(Ie.CONFIRMING),getCopyText:()=>ae(Ie.UPPERCASE_COPY),getHidePasswordText:()=>ae(Ie.HIDE_PASSWORD),getLoadingText:()=>ae(Ie.LOADING),getOrText:()=>ae(Ie.OR),getResendCodeText:()=>ae(Ie.RESEND_CODE),getSendCodeText:()=>ae(Ie.SEND_CODE),getSendingText:()=>ae(Ie.SENDING),getShowPasswordText:()=>ae(Ie.SHOW_PASSWORD),getSubmitText:()=>ae(Ie.SUBMIT),getSubmittingText:()=>ae(Ie.SUBMITTING),getSignInTabText:()=>ae(Ie.SIGN_IN_TAB),getSignUpTabText:()=>ae(Ie.CREATE_ACCOUNT),getForgotPasswordText:e=>ae(e?Ie.FORGOT_PASSWORD:Ie.FORGOT_YOUR_PASSWORD),getSigningInText:()=>ae(Ie.SIGNING_IN_BUTTON),getSignInText:()=>ae(Ie.SIGN_IN_BUTTON),getCreatingAccountText:()=>ae(Ie.CREATING_ACCOUNT),getCreateAccountText:()=>ae(Ie.CREATE_ACCOUNT),getDeliveryMessageText:_A,getDeliveryMethodText:SA,getChallengeText:bA,getResetYourPasswordText:()=>ae(Ie.RESET_PASSWORD),getSetupTotpText:()=>ae(Ie.SETUP_TOTP),getSetupTotpInstructionsText:()=>ae("Copy and paste the secret key below into an authenticator app and then enter the code in the text field below."),getCopiedText:()=>ae("COPIED"),getSignInWithFederationText:EA,getSkipText:()=>ae(Ie.SKIP),getVerifyText:()=>ae(Ie.VERIFY),getVerifyContactText:()=>ae(Ie.VERIFY_CONTACT),getAccountRecoveryInfoText:()=>ae(Ie.VERIFY_HEADING),getInvalidEmailText:()=>ae("Please enter a valid email"),getRequiredFieldText:()=>ae("This field is required")};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $=function(){return $=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$.apply(this,arguments)};function Nd(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Me(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ue(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Je(e,t,n){if(arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var ze;(function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"})(ze||(ze={}));var yr;(function(e){e.Parent="#_parent",e.Internal="#_internal"})(yr||(yr={}));var Es=ze.Start,bl=ze.Stop,Fi=ze.Raise,oa=ze.Send,Od=ze.Cancel,xy=ze.NullEvent,_l=ze.Assign,CA=ze.After,IA=ze.DoneState,Sl=ze.Log,Ay=ze.Init,Cs=ze.Invoke,xA=ze.ErrorExecution,bu=ze.ErrorPlatform,Ld=ze.ErrorCustom,wl=ze.Update,ky=ze.Choose,Ty=ze.Pure;const AA=Object.freeze(Object.defineProperty({__proto__:null,after:CA,assign:_l,cancel:Od,choose:ky,doneState:IA,error:Ld,errorExecution:xA,errorPlatform:bu,init:Ay,invoke:Cs,log:Sl,nullEvent:xy,pure:Ty,raise:Fi,send:oa,start:Es,stop:bl,update:wl},Symbol.toStringTag,{value:"Module"}));var My=".",wp={},_u="xstate.guard",kA="",Sc;function Dd(e,t,n){n===void 0&&(n=My);var r=To(e,n),i=To(t,n);return je(i)?je(r)?i===r:!1:je(r)?r in i:Object.keys(r).every(function(o){return o in i?Dd(r[o],i[o]):!1})}function Ry(e){try{return je(e)||typeof e=="number"?"".concat(e):e.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Su(e,t){try{return Bi(e)?e:e.toString().split(t)}catch{throw new Error("'".concat(e,"' is not a valid state path."))}}function TA(e){return typeof e=="object"&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function To(e,t){if(TA(e))return e.value;if(Bi(e))return Is(e);if(typeof e!="string")return e;var n=Su(e,t);return Is(n)}function Is(e){if(e.length===1)return e[0];for(var t={},n=t,r=0;r<e.length-1;r++)r===e.length-2?n[e[r]]=e[r+1]:(n[e[r]]={},n=n[e[r]]);return t}function mo(e,t){for(var n={},r=Object.keys(e),i=0;i<r.length;i++){var o=r[i];n[o]=t(e[o],o,e,i)}return n}function Ep(e,t,n){var r,i,o={};try{for(var a=Me(Object.keys(e)),s=a.next();!s.done;s=a.next()){var l=s.value,c=e[l];n(c)&&(o[l]=t(c,l,e))}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}var MA=function(e){return function(t){var n,r,i=t;try{for(var o=Me(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=i[s]}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}};function RA(e,t){return function(n){var r,i,o=n;try{for(var a=Me(e),s=a.next();!s.done;s=a.next()){var l=s.value;o=o[t][l]}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}}function as(e){if(!e)return[[]];if(je(e))return[[e]];var t=it(Object.keys(e).map(function(n){var r=e[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:as(e[n]).map(function(i){return[n].concat(i)})}));return t}function it(e){var t;return(t=[]).concat.apply(t,Je([],Ue(e),!1))}function Py(e){return Bi(e)?e:[e]}function mn(e){return e===void 0?[]:Py(e)}function xs(e,t,n){var r,i;if(Fe(e))return e(t,n.data);var o={};try{for(var a=Me(Object.keys(e)),s=a.next();!s.done;s=a.next()){var l=s.value,c=e[l];Fe(c)?o[l]=c(t,n.data):o[l]=c}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}function PA(e){return/^(done|error)\./.test(e)}function Cp(e){return!!(e instanceof Promise||e!==null&&(Fe(e)||typeof e=="object")&&Fe(e.then))}function NA(e){return e!==null&&typeof e=="object"&&"transition"in e&&typeof e.transition=="function"}function OA(e,t){var n,r,i=Ue([[],[]],2),o=i[0],a=i[1];try{for(var s=Me(e),l=s.next();!l.done;l=s.next()){var c=l.value;t(c)?o.push(c):a.push(c)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return[o,a]}function Ny(e,t){return mo(e.states,function(n,r){if(n){var i=(je(t)?void 0:t[r])||(n?n.current:void 0);if(i)return{current:i,states:Ny(n,i)}}})}function LA(e,t){return{current:t,states:Ny(e,t)}}function Ip(e,t,n,r){var i=e&&n.reduce(function(o,a){var s,l,c=a.assignment,u={state:r,action:a,_event:t},d={};if(Fe(c))d=c(o,t.data,u);else try{for(var f=Me(Object.keys(c)),h=f.next();!h.done;h=f.next()){var p=h.value,m=c[p];d[p]=Fe(m)?m(o,t.data,u):m}}catch(y){s={error:y}}finally{try{h&&!h.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}return Object.assign({},o,d)},e);return i}var DA=function(){};function Bi(e){return Array.isArray(e)}function Fe(e){return typeof e=="function"}function je(e){return typeof e=="string"}function Oy(e,t){if(e)return je(e)?{type:_u,name:e,predicate:t?t[e]:void 0}:Fe(e)?{type:_u,name:e.name,predicate:e}:e}function UA(e){try{return"subscribe"in e&&Fe(e.subscribe)}catch{return!1}}var ar=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();Sc={},Sc[ar]=function(){return this},Sc[Symbol.observable]=function(){return this};function Ii(e){return!!e&&"__xstatenode"in e}function FA(e){return!!e&&typeof e.send=="function"}var BA=function(){var e=0;return function(){return e++,e.toString(16)}}();function El(e,t){return je(e)||typeof e=="number"?$({type:e},t):e}function It(e,t){if(!je(e)&&"$$type"in e&&e.$$type==="scxml")return e;var n=El(e);return $({name:n.type,data:n,$$type:"scxml",type:"external"},t)}function si(e,t){var n=Py(t).map(function(r){return typeof r>"u"||typeof r=="string"||Ii(r)?{target:r,event:e}:$($({},r),{event:e})});return n}function jA(e){if(!(e===void 0||e===kA))return mn(e)}function Ly(e,t,n,r,i){var o=e.options.guards,a={state:i,cond:t,_event:r};if(t.type===_u)return((o==null?void 0:o[t.name])||t.predicate)(n,r.data,a);var s=o==null?void 0:o[t.type];if(!s)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return s(n,r.data,a)}function Dy(e){return typeof e=="string"?{type:e}:e}function ss(e,t,n){var r=function(){},i=typeof e=="object",o=i?e:null;return{next:((i?e.next:e)||r).bind(o),error:((i?e.error:t)||r).bind(o),complete:((i?e.complete:n)||r).bind(o)}}function Oa(e,t){return"".concat(e,":invocation[").concat(t,"]")}function wu(e){return(e.type===Fi||e.type===oa&&e.to===yr.Internal)&&typeof e.delay!="number"}var Ur=It({type:Ay});function As(e,t){return t&&t[e]||void 0}function xi(e,t){var n;if(je(e)||typeof e=="number"){var r=As(e,t);Fe(r)?n={type:e,exec:r}:r?n=r:n={type:e,exec:void 0}}else if(Fe(e))n={type:e.name||e.toString(),exec:e};else{var r=As(e.type,t);if(Fe(r))n=$($({},e),{exec:r});else if(r){var i=r.type||e.type;n=$($($({},r),e),{type:i})}else n=e}return n}var qn=function(e,t){if(!e)return[];var n=Bi(e)?e:[e];return n.map(function(r){return xi(r,t)})};function Cl(e){var t=xi(e);return $($({id:je(e)?e:t.id},t),{type:t.type})}function Uy(e,t){return{type:Fi,event:typeof e=="function"?e:El(e),delay:t?t.delay:void 0,id:t==null?void 0:t.id}}function Fy(e,t,n,r){var i={_event:n},o=It(Fe(e.event)?e.event(t,n.data,i):e.event),a;if(je(e.delay)){var s=r&&r[e.delay];a=Fe(s)?s(t,n.data,i):s}else a=Fe(e.delay)?e.delay(t,n.data,i):e.delay;return $($({},e),{type:Fi,_event:o,delay:a})}function ji(e,t){return{to:t?t.to:void 0,type:oa,event:Fe(e)?e:El(e),delay:t?t.delay:void 0,id:t&&t.id!==void 0?t.id:Fe(e)?e.name:Ry(e)}}function By(e,t,n,r){var i={_event:n},o=It(Fe(e.event)?e.event(t,n.data,i):e.event),a;if(je(e.delay)){var s=r&&r[e.delay];a=Fe(s)?s(t,n.data,i):s}else a=Fe(e.delay)?e.delay(t,n.data,i):e.delay;var l=Fe(e.to)?e.to(t,n.data,i):e.to;return $($({},e),{to:l,_event:o,event:o.data,delay:a})}function Ud(e,t){return ji(e,$($({},t),{to:yr.Parent}))}function $A(e,t,n){return ji(t,$($({},n),{to:e}))}function jy(){return Ud(wl)}function HA(e,t){return ji(e,$($({},t),{to:function(n,r,i){var o=i._event;return o.origin}}))}var qA=function(e,t){return{context:e,event:t}};function zA(e,t){return e===void 0&&(e=qA),{type:Sl,label:t,expr:e}}var $y=function(e,t,n){return $($({},e),{value:je(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})},Hy=function(e){return{type:Od,sendId:e}};function qy(e){var t=Cl(e);return{type:ze.Start,activity:t,exec:void 0}}function zy(e){var t=Fe(e)?e:Cl(e);return{type:ze.Stop,activity:t,exec:void 0}}function Vy(e,t,n){var r=Fe(e.activity)?e.activity(t,n.data):e.activity,i=typeof r=="string"?{id:r}:r,o={type:ze.Stop,activity:i};return o}var Wy=function(e){return{type:_l,assignment:e}};function VA(e){return typeof e=="object"&&"type"in e}function Ky(e,t){var n=t?"#".concat(t):"";return"".concat(ze.After,"(").concat(e,")").concat(n)}function go(e,t){var n="".concat(ze.DoneState,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function Mo(e,t){var n="".concat(ze.DoneInvoke,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function pi(e,t){var n="".concat(ze.ErrorPlatform,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function WA(e){return{type:ze.Pure,get:e}}function Gy(e,t){return ji(function(n,r){return r},$($({},t),{to:e}))}function KA(e,t){return Ud(function(n,r,i){return{type:Ld,data:Fe(e)?e(n,r,i):e}},$($({},t),{to:yr.Parent}))}function GA(e){return{type:ze.Choose,conds:e}}var YA=function(e){var t,n,r=[];try{for(var i=Me(e),o=i.next();!o.done;o=i.next())for(var a=o.value,s=0;s<a.actions.length;){if(a.actions[s].type===_l){r.push(a.actions[s]),a.actions.splice(s,1);continue}s++}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r};function Ho(e,t,n,r,i,o,a){a===void 0&&(a=!1);var s=a?[]:YA(i),l=s.length?Ip(n,r,s,t):n,c=a?[n]:void 0,u=[];function d(p,m){var y;switch(m.type){case Fi:{var g=Fy(m,l,r,e.options.delays);return o&&typeof g.delay=="number"&&o(g,l,r),g}case oa:var v=By(m,l,r,e.options.delays);return o&&v.to!==yr.Internal&&(p==="entry"?u.push(v):o(v,l,r)),v;case Sl:{var b=$y(m,l,r);return o==null||o(b,l,r),b}case ky:{var E=m,C=(y=E.conds.find(function(L){var k=Oy(L.cond,e.options.guards);return!k||Ly(e,k,l,r,o?void 0:t)}))===null||y===void 0?void 0:y.actions;if(!C)return[];var x=Ue(Ho(e,t,l,r,[{type:p,actions:qn(mn(C),e.options.actions)}],o,a),2),O=x[0],U=x[1];return l=U,c==null||c.push(l),O}case Ty:{var C=m.get(l,r.data);if(!C)return[];var H=Ue(Ho(e,t,l,r,[{type:p,actions:qn(mn(C),e.options.actions)}],o,a),2),G=H[0],q=H[1];return l=q,c==null||c.push(l),G}case bl:{var b=Vy(m,l,r);return o==null||o(b,n,r),b}case _l:{l=Ip(l,r,[m],o?void 0:t),c==null||c.push(l);break}default:var z=xi(m,e.options.actions),Y=z.exec;if(o)o(z,l,r);else if(Y&&c){var le=c.length-1,Be=$($({},z),{exec:function(L){for(var k=[],N=1;N<arguments.length;N++)k[N-1]=arguments[N];Y.apply(void 0,Je([c[le]],Ue(k),!1))}});z=Be}return z}}function f(p){var m,y,g=[];try{for(var v=Me(p.actions),b=v.next();!b.done;b=v.next()){var E=b.value,C=d(p.type,E);C&&(g=g.concat(C))}}catch(x){m={error:x}}finally{try{b&&!b.done&&(y=v.return)&&y.call(v)}finally{if(m)throw m.error}}return u.forEach(function(x){o(x,l,r)}),u.length=0,g}var h=it(i.map(f));return[h,l]}const Yy=Object.freeze(Object.defineProperty({__proto__:null,actionTypes:AA,after:Ky,assign:Wy,cancel:Hy,choose:GA,done:go,doneInvoke:Mo,error:pi,escalate:KA,forwardTo:Gy,getActionFunction:As,initEvent:Ur,isActionObject:VA,log:zA,pure:WA,raise:Uy,resolveActions:Ho,resolveLog:$y,resolveRaise:Fy,resolveSend:By,resolveStop:Vy,respond:HA,send:ji,sendParent:Ud,sendTo:$A,sendUpdate:jy,start:qy,stop:zy,toActionObject:xi,toActionObjects:qn,toActivityDefinition:Cl},Symbol.toStringTag,{value:"Module"}));var ks=[],hi=function(e,t){ks.push(e);var n=t(e);return ks.pop(),n},JA=function(e){return e(ks[ks.length-1])};function Jy(e){var t;return t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}},t[ar]=function(){return this},t}function ZA(e,t,n,r){var i,o=Dy(e.src),a=(i=t==null?void 0:t.options.services)===null||i===void 0?void 0:i[o.type],s=e.data?xs(e.data,n,r):void 0,l=a?Fd(a,e.id,s):Jy(e.id);return l.meta=e,l}function Fd(e,t,n){var r=Jy(t);if(r.deferred=!0,Ii(e)){var i=r.state=hi(void 0,function(){return(n?e.withContext(n):e).initialState});r.getSnapshot=function(){return i}}return r}function XA(e){try{return typeof e.send=="function"}catch{return!1}}function QA(e){return XA(e)&&"id"in e}function ek(e){var t;return $((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},t[ar]=function(){return this},t),e)}var Ts=function(e){return e.type==="atomic"||e.type==="final"};function Zy(e){return Object.keys(e.states).map(function(t){return e.states[t]})}function qo(e){return Zy(e).filter(function(t){return t.type!=="history"})}function Xy(e){var t=[e];return Ts(e)?t:t.concat(it(qo(e).map(Xy)))}function vo(e,t){var n,r,i,o,a,s,l,c,u=new Set(e),d=Eu(u),f=new Set(t);try{for(var h=Me(f),p=h.next();!p.done;p=h.next())for(var m=p.value,y=m.parent;y&&!f.has(y);)f.add(y),y=y.parent}catch(H){n={error:H}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}var g=Eu(f);try{for(var v=Me(f),b=v.next();!b.done;b=v.next()){var m=b.value;if(m.type==="compound"&&(!g.get(m)||!g.get(m).length))d.get(m)?d.get(m).forEach(function(G){return f.add(G)}):m.initialStateNodes.forEach(function(G){return f.add(G)});else if(m.type==="parallel")try{for(var E=(a=void 0,Me(qo(m))),C=E.next();!C.done;C=E.next()){var x=C.value;f.has(x)||(f.add(x),d.get(x)?d.get(x).forEach(function(G){return f.add(G)}):x.initialStateNodes.forEach(function(G){return f.add(G)}))}}catch(G){a={error:G}}finally{try{C&&!C.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}}}catch(H){i={error:H}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}try{for(var O=Me(f),U=O.next();!U.done;U=O.next())for(var m=U.value,y=m.parent;y&&!f.has(y);)f.add(y),y=y.parent}catch(H){l={error:H}}finally{try{U&&!U.done&&(c=O.return)&&c.call(O)}finally{if(l)throw l.error}}return f}function Qy(e,t){var n=t.get(e);if(!n)return{};if(e.type==="compound"){var r=n[0];if(r){if(Ts(r))return r.key}else return{}}var i={};return n.forEach(function(o){i[o.key]=Qy(o,t)}),i}function Eu(e){var t,n,r=new Map;try{for(var i=Me(e),o=i.next();!o.done;o=i.next()){var a=o.value;r.has(a)||r.set(a,[]),a.parent&&(r.has(a.parent)||r.set(a.parent,[]),r.get(a.parent).push(a))}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function tk(e,t){var n=vo([e],t);return Qy(e,Eu(n))}function yo(e,t){return Array.isArray(e)?e.some(function(n){return n===t}):e instanceof Set?e.has(t):!1}function nk(e){return Je([],Ue(new Set(it(Je([],Ue(e.map(function(t){return t.ownEvents})),!1)))),!1)}function ls(e,t){return t.type==="compound"?qo(t).some(function(n){return n.type==="final"&&yo(e,n)}):t.type==="parallel"?qo(t).every(function(n){return ls(e,n)}):!1}function rk(e){return e===void 0&&(e=[]),e.reduce(function(t,n){return n.meta!==void 0&&(t[n.id]=n.meta),t},{})}function xp(e){return new Set(it(e.map(function(t){return t.tags})))}function e0(e,t){if(e===t)return!0;if(e===void 0||t===void 0)return!1;if(je(e)||je(t))return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(i){return e0(e[i],t[i])})}function ik(e){return typeof e!="object"||e===null?!1:"value"in e&&"_event"in e}function ok(e,t){var n=e.exec,r=$($({},e),{exec:n!==void 0?function(){return n(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0});return r}var In=function(){function e(t){var n=this,r;this.actions=[],this.activities=wp,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||wp,this.meta=rk(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=(r=Array.isArray(t.tags)?new Set(t.tags):t.tags)!==null&&r!==void 0?r:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return nk(n.configuration)}})}return e.from=function(t,n){if(t instanceof e)return t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t;var r=Ur;return new e({value:t,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var r=Ur;return new e({value:t.value,context:n,_event:r,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(t,n){var r=this;if(t===void 0&&(t=this.value),n===void 0&&(n="."),je(t))return[t];var i=Object.keys(t);return i.concat.apply(i,Je([],Ue(i.map(function(o){return r.toStrings(t[o],n).map(function(a){return o+n+a})})),!1))},e.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var n=t.tags;t.machine;var r=Nd(t,["configuration","transitions","tags","machine"]);return $($({},r),{tags:Array.from(n)})},e.prototype.matches=function(t){return Dd(t,this.value)},e.prototype.hasTag=function(t){return this.tags.has(t)},e.prototype.can=function(t){var n;DA(!!this.machine);var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,t);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(i){return i.target!==void 0||i.actions.length})},e}(),ak={deferEvents:!1},Ap=function(){function e(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=$($({},ak),t)}return e.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents){this.schedule(t);return}this.process(t)}this.flushEvents()},e.prototype.schedule=function(t){if(!this.initialized||this.processingEvent){this.queue.push(t);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},e.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},e}(),wc=new Map,sk=0,ao={bookId:function(){return"x:".concat(sk++)},register:function(e,t){return wc.set(e,t),e},get:function(e){return wc.get(e)},free:function(e){wc.delete(e)}};function Bd(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function lk(){var e=Bd();if(e&&"__xstate__"in e)return e.__xstate__}function ck(e){if(Bd()){var t=lk();t&&t.register(e)}}function uk(e,t){t===void 0&&(t={});var n=e.initialState,r=new Set,i=[],o=!1,a=function(){if(!o){for(o=!0;i.length>0;){var c=i.shift();n=e.transition(n,c,l),r.forEach(function(u){return u.next(n)})}o=!1}},s=ek({id:t.id,send:function(c){i.push(c),a()},getSnapshot:function(){return n},subscribe:function(c,u,d){var f=ss(c,u,d);return r.add(f),f.next(n),{unsubscribe:function(){r.delete(f)}}}}),l={parent:t.parent,self:s,id:t.id||"anonymous",observers:r};return n=e.start?e.start(l):n,s}var Cu={sync:!1,autoForward:!1},bt;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(bt||(bt={}));var dk=function(){function e(t,n){n===void 0&&(n=e.defaultOptions);var r=this;this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=bt.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(u,d){if(Bi(u))return r.batch(u),r.state;var f=It(El(u,d));if(r.status===bt.Stopped)return r.state;if(r.status!==bt.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(f.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(f.data)));return r.scheduler.schedule(function(){r.forward(f);var h=r._nextState(f);r.update(h,f)}),r._state},this.sendTo=function(u,d,f){var h=r.parent&&(d===yr.Parent||r.parent.id===d),p=h?r.parent:je(d)?d===yr.Internal?r:r.children.get(d)||ao.get(d):FA(d)?d:void 0;if(!p){if(!h)throw new Error("Unable to send event to child '".concat(d,"' from service '").concat(r.id,"'."));return}if("machine"in p){if(r.status!==bt.Stopped||r.parent!==p||r.state.done){var m=$($({},u),{name:u.name===Ld?"".concat(pi(r.id)):u.name,origin:r.sessionId});!f&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([p,m]):p.send(m)}}else!f&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([p,u.data]):p.send(u.data)},this._exec=function(u,d,f,h){h===void 0&&(h=r.machine.options.actions);var p=u.exec||As(u.type,h),m=Fe(p)?p:p?p.exec:u.exec;if(m)try{return m(d,f.data,r.machine.config.predictableActionArguments?{action:u,_event:f}:{action:u,state:r.state,_event:f})}catch(le){throw r.parent&&r.parent.send({type:"xstate.error",data:le}),le}switch(u.type){case Fi:{var y=u;r.defer(y);break}case oa:var g=u;if(typeof g.delay=="number"){r.defer(g);return}else g.to?r.sendTo(g._event,g.to,f===Ur):r.send(g._event);break;case Od:r.cancel(u.sendId);break;case Es:{if(r.status!==bt.Running)return;var v=u.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[v.id||v.type])break;if(v.type===ze.Invoke){var b=Dy(v.src),E=r.machine.options.services?r.machine.options.services[b.type]:void 0,C=v.id,x=v.data,O="autoForward"in v?v.autoForward:!!v.forward;if(!E)return;var U=x?xs(x,d,f):void 0;if(typeof E=="string")return;var H=Fe(E)?E(d,f.data,{data:U,src:b,meta:v.meta}):E;if(!H)return;var G=void 0;Ii(H)&&(H=U?H.withContext(U):H,G={autoForward:O}),r.spawn(H,C,G)}else r.spawnActivity(v);break}case bl:{r.stopChild(u.activity.id);break}case Sl:var q=u,z=q.label,Y=q.value;z?r.logger(z,Y):r.logger(Y);break}};var i=$($({},e.defaultOptions),n),o=i.clock,a=i.logger,s=i.parent,l=i.id,c=l!==void 0?l:t.id;this.id=c,this.logger=a,this.clock=o,this.parent=s,this.options=i,this.scheduler=new Ap({deferEvents:this.options.deferEvents}),this.sessionId=ao.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:hi(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(t,n){var r,i;try{for(var o=Me(t.actions),a=o.next();!a.done;a=o.next()){var s=a.value;this.exec(s,t,n)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.update=function(t,n){var r,i,o,a,s,l,c,u,d=this;if(t._sessionid=this.sessionId,this._state=t,(!this.machine.config.predictableActionArguments||n===Ur)&&this.options.execute)this.execute(this.state);else for(var f=void 0;f=this._outgoingQueue.shift();)f[0].send(f[1]);if(this.children.forEach(function(H){d.state.children[H.id]=H}),this.devTools&&this.devTools.send(n.data,t),t.event)try{for(var h=Me(this.eventListeners),p=h.next();!p.done;p=h.next()){var m=p.value;m(t.event)}}catch(H){r={error:H}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}try{for(var y=Me(this.listeners),g=y.next();!g.done;g=y.next()){var m=g.value;m(t,t.event)}}catch(H){o={error:H}}finally{try{g&&!g.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}try{for(var v=Me(this.contextListeners),b=v.next();!b.done;b=v.next()){var E=b.value;E(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(H){s={error:H}}finally{try{b&&!b.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}if(this.state.done){var C=t.configuration.find(function(H){return H.type==="final"&&H.parent===d.machine}),x=C&&C.doneData?xs(C.doneData,t.context,n):void 0;this._doneEvent=Mo(this.id,x);try{for(var O=Me(this.doneListeners),U=O.next();!U.done;U=O.next()){var m=U.value;m(this._doneEvent)}}catch(H){c={error:H}}finally{try{U&&!U.done&&(u=O.return)&&u.call(O)}finally{if(c)throw c.error}}this._stop(),this._stopChildren(),ao.free(this.sessionId)}},e.prototype.onTransition=function(t){return this.listeners.add(t),this.status===bt.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,n,r){var i=this,o=ss(t,n,r);this.listeners.add(o.next),this.status!==bt.NotStarted&&o.next(this.state);var a=function(){i.doneListeners.delete(a),i.stopListeners.delete(a),o.complete()};return this.status===bt.Stopped?o.complete():(this.onDone(a),this.onStop(a)),{unsubscribe:function(){i.listeners.delete(o.next),i.doneListeners.delete(a),i.stopListeners.delete(a)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.status===bt.Stopped&&this._doneEvent?t(this._doneEvent):this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var n=this;if(this.status===bt.Running)return this;this.machine._init(),ao.register(this.sessionId,this),this.initialized=!0,this.status=bt.Running;var r=t===void 0?this.initialState:hi(this,function(){return ik(t)?n.machine.resolveState(t):n.machine.resolveState(In.from(t,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,Ur)}),this},e.prototype._stopChildren=function(){this.children.forEach(function(t){Fe(t.stop)&&t.stop()}),this.children.clear()},e.prototype._stop=function(){var t,n,r,i,o,a,s,l,c,u;try{for(var d=Me(this.listeners),f=d.next();!f.done;f=d.next()){var h=f.value;this.listeners.delete(h)}}catch(O){t={error:O}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}try{for(var p=Me(this.stopListeners),m=p.next();!m.done;m=p.next()){var h=m.value;h(),this.stopListeners.delete(h)}}catch(O){r={error:O}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}try{for(var y=Me(this.contextListeners),g=y.next();!g.done;g=y.next()){var h=g.value;this.contextListeners.delete(h)}}catch(O){o={error:O}}finally{try{g&&!g.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}try{for(var v=Me(this.doneListeners),b=v.next();!b.done;b=v.next()){var h=b.value;this.doneListeners.delete(h)}}catch(O){s={error:O}}finally{try{b&&!b.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}if(!this.initialized)return this;this.initialized=!1,this.status=bt.Stopped,this._initialState=void 0;try{for(var E=Me(Object.keys(this.delayedEventsMap)),C=E.next();!C.done;C=E.next()){var x=C.value;this.clock.clearTimeout(this.delayedEventsMap[x])}}catch(O){c={error:O}}finally{try{C&&!C.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}this.scheduler.clear(),this.scheduler=new Ap({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var t=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r=It({type:"xstate.stop"}),i=hi(t,function(){var o=it(Je([],Ue(t.state.configuration),!1).sort(function(u,d){return d.order-u.order}).map(function(u){return qn(u.onExit,t.machine.options.actions)})),a=Ue(Ho(t.machine,t.state,t.state.context,r,[{type:"exit",actions:o}],t.machine.config.predictableActionArguments?t._exec:void 0,t.machine.config.predictableActionArguments||t.machine.config.preserveActionOrder),2),s=a[0],l=a[1],c=new In({value:t.state.value,context:l,_event:r,_sessionid:t.sessionId,historyValue:void 0,history:t.state,actions:s.filter(function(u){return!wu(u)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:t.state.done,tags:t.state.tags,machine:t.machine});return c.changed=!0,c});t.update(i,r),t._stopChildren(),ao.free(t.sessionId)}),this},e.prototype.batch=function(t){var n=this;if(!(this.status===bt.NotStarted&&this.options.deferEvents)){if(this.status!==bt.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(t.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,o,a=n.state,s=!1,l=[],c=function(h){var p=It(h);n.forward(p),a=hi(n,function(){return n.machine.transition(a,p,void 0,r||void 0)}),l.push.apply(l,Je([],Ue(n.machine.config.predictableActionArguments?a.actions:a.actions.map(function(m){return ok(m,a)})),!1)),s=s||!!a.changed};try{for(var u=Me(t),d=u.next();!d.done;d=u.next()){var f=d.value;c(f)}}catch(h){i={error:h}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}a.changed=s,a.actions=l,n.update(a,It(t[t.length-1]))})}},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype._nextState=function(t,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var i=It(t);if(i.name.indexOf(bu)===0&&!this.state.nextEvents.some(function(a){return a.indexOf(bu)===0}))throw i.data.data;var o=hi(this,function(){return r.machine.transition(r.state,i,void 0,n||void 0)});return o},e.prototype.nextState=function(t){return this._nextState(t,!1)},e.prototype.forward=function(t){var n,r;try{for(var i=Me(this.forwardTo),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.children.get(a);if(!s)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(a,"'."));s.send(t)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.defer=function(t){var n=this,r=this.clock.setTimeout(function(){"to"in t&&t.to?n.sendTo(t._event,t.to,!0):n.send(t._event)},t.delay);t.id&&(this.delayedEventsMap[t.id]=r)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(t,n.context,n._event,r)},e.prototype.removeChild=function(t){var n;this.children.delete(t),this.forwardTo.delete(t),(n=this.state)===null||n===void 0||delete n.children[t]},e.prototype.stopChild=function(t){var n=this.children.get(t);n&&(this.removeChild(t),Fe(n.stop)&&n.stop())},e.prototype.spawn=function(t,n,r){if(this.status!==bt.Running)return Fd(t,n);if(Cp(t))return this.spawnPromise(Promise.resolve(t),n);if(Fe(t))return this.spawnCallback(t,n);if(QA(t))return this.spawnActor(t,n);if(UA(t))return this.spawnObservable(t,n);if(Ii(t))return this.spawnMachine(t,$($({},r),{id:n}));if(NA(t))return this.spawnBehavior(t,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof t,'".'))},e.prototype.spawnMachine=function(t,n){var r=this;n===void 0&&(n={});var i=new e(t,$($({},this.options),{parent:this,id:n.id||t.id})),o=$($({},Cu),n);o.sync&&i.onTransition(function(s){r.send(wl,{state:s,id:i.id})});var a=i;return this.children.set(i.id,a),o.autoForward&&this.forwardTo.add(i.id),i.onDone(function(s){r.removeChild(i.id),r.send(It(s,{origin:i.id}))}).start(),a},e.prototype.spawnBehavior=function(t,n){var r=uk(t,{id:n,parent:this});return this.children.set(n,r),r},e.prototype.spawnPromise=function(t,n){var r,i=this,o=!1,a;t.then(function(l){o||(a=l,i.removeChild(n),i.send(It(Mo(n,l),{origin:n})))},function(l){if(!o){i.removeChild(n);var c=pi(n,l);try{i.send(It(c,{origin:n}))}catch{i.devTools&&i.devTools.send(c,i.state),i.machine.strict&&i.stop()}}});var s=(r={id:n,send:function(){},subscribe:function(l,c,u){var d=ss(l,c,u),f=!1;return t.then(function(h){f||(d.next(h),!f&&d.complete())},function(h){f||d.error(h)}),{unsubscribe:function(){return f=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return a}},r[ar]=function(){return this},r);return this.children.set(n,s),s},e.prototype.spawnCallback=function(t,n){var r,i=this,o=!1,a=new Set,s=new Set,l,c=function(f){l=f,s.forEach(function(h){return h(f)}),!o&&i.send(It(f,{origin:n}))},u;try{u=t(c,function(f){a.add(f)})}catch(f){this.send(pi(n,f))}if(Cp(u))return this.spawnPromise(u,n);var d=(r={id:n,send:function(f){return a.forEach(function(h){return h(f)})},subscribe:function(f){var h=ss(f);return s.add(h.next),{unsubscribe:function(){s.delete(h.next)}}},stop:function(){o=!0,Fe(u)&&u()},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},r[ar]=function(){return this},r);return this.children.set(n,d),d},e.prototype.spawnObservable=function(t,n){var r,i=this,o,a=t.subscribe(function(l){o=l,i.send(It(l,{origin:n}))},function(l){i.removeChild(n),i.send(It(pi(n,l),{origin:n}))},function(){i.removeChild(n),i.send(It(Mo(n),{origin:n}))}),s=(r={id:n,send:function(){},subscribe:function(l,c,u){return t.subscribe(l,c,u)},stop:function(){return a.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},r[ar]=function(){return this},r);return this.children.set(n,s),s},e.prototype.spawnActor=function(t,n){return this.children.set(n,t),t},e.prototype.spawnActivity=function(t){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(n){var r=n(this.state.context,t);this.spawnEffect(t.id,r)}},e.prototype.spawnEffect=function(t,n){var r;this.children.set(t,(r={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},r[ar]=function(){return this},r))},e.prototype.attachDev=function(){var t=Bd();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect($($({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:$({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}ck(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[ar]=function(){return this},e.prototype.getSnapshot=function(){return this.status===bt.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,n){return setTimeout(t,n)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},e.interpret=t0,e}(),fk=function(e){return je(e)?$($({},Cu),{name:e}):$($($({},Cu),{name:BA()}),e)};function so(e,t){var n=fk(t);return JA(function(r){return r?r.spawn(e,n.name,n):Fd(e,n.name)})}function t0(e,t){var n=new dk(e,t);return n}function hk(e){if(typeof e=="string"){var t={type:e};return t.toString=function(){return e},t}return e}function La(e){return $($({type:Cs},e),{toJSON:function(){e.onDone,e.onError;var t=Nd(e,["onDone","onError"]);return $($({},t),{type:Cs,src:hk(e.src)})}})}var Da="",Iu="#",Ec="*",li={},ci=function(e){return e[0]===Iu},pk=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},mk=function(){function e(t,n,r,i){r===void 0&&(r="context"in t?t.context:void 0);var o=this,a;this.config=t,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(pk(),n),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:My),this.id=this.config.id||Je([this.machine.key],Ue(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(a=this.config.schema)!==null&&a!==void 0?a:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?mo(this.config.states,function(c,u){var d,f=new e(c,{},void 0,{parent:o,key:u});return Object.assign(o.idMap,$((d={},d[f.id]=f,d),f.idMap)),f}):li;var s=0;function l(c){var u,d;c.order=s++;try{for(var f=Me(Zy(c)),h=f.next();!h.done;h=f.next()){var p=h.value;l(p)}}catch(m){u={error:m}}finally{try{h&&!h.done&&(d=f.return)&&d.call(f)}finally{if(u)throw u.error}}}l(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(c){var u=c.event;return u===Da}):Da in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=mn(this.config.entry||this.config.onEntry).map(function(c){return xi(c)}),this.onExit=mn(this.config.exit||this.config.onExit).map(function(c){return xi(c)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=mn(this.config.invoke).map(function(c,u){var d,f;if(Ii(c)){var h=Oa(o.id,u);return o.machine.options.services=$((d={},d[h]=c,d),o.machine.options.services),La({src:h,id:h})}else if(je(c.src)){var h=c.id||Oa(o.id,u);return La($($({},c),{id:h,src:c.src}))}else if(Ii(c.src)||Fe(c.src)){var h=c.id||Oa(o.id,u);return o.machine.options.services=$((f={},f[h]=c.src,f),o.machine.options.services),La($($({id:h},c),{src:h}))}else{var p=c.src;return La($($({id:Oa(o.id,u)},c),{src:p}))}}),this.activities=mn(this.config.activities).concat(this.invoke).map(function(c){return Cl(c)}),this.transition=this.transition.bind(this),this.tags=mn(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||Xy(this).forEach(function(t){return t.on})},e.prototype.withConfig=function(t,n){var r=this.options,i=r.actions,o=r.activities,a=r.guards,s=r.services,l=r.delays;return new e(this.config,{actions:$($({},i),t.actions),activities:$($({},o),t.activities),guards:$($({},a),t.guards),services:$($({},s),t.services),delays:$($({},l),t.delays)},n??this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return Fe(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:mo(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var n=t===Da,r=this.transitions.filter(function(i){var o=i.eventType===t;return n?o:o||i.eventType===Ec});return this.__cache.candidates[t]=r,r},e.prototype.getDelayedTransitions=function(){var t=this,n=this.config.after;if(!n)return[];var r=function(o,a){var s=Fe(o)?"".concat(t.id,":delay[").concat(a,"]"):o,l=Ky(s,t.id);return t.onEntry.push(ji(l,{delay:o})),t.onExit.push(Hy(l)),l},i=Bi(n)?n.map(function(o,a){var s=r(o.delay,a);return $($({},o),{event:s})}):it(Object.keys(n).map(function(o,a){var s=n[o],l=je(s)?{target:s}:s,c=isNaN(+o)?o:+o,u=r(c,a);return mn(l).map(function(d){return $($({},d),{event:u,delay:c})})}));return i.map(function(o){var a=o.delay;return $($({},t.formatTransition(o)),{delay:a})})},e.prototype.getStateNodes=function(t){var n,r=this;if(!t)return[];var i=t instanceof In?t.value:To(t,this.delimiter);if(je(i)){var o=this.getStateNode(i).initial;return o!==void 0?this.getStateNodes((n={},n[i]=o,n)):[this,this.states[i]]}var a=Object.keys(i),s=[this];return s.push.apply(s,Je([],Ue(it(a.map(function(l){return r.getStateNode(l).getStateNodes(i[l])}))),!1)),s},e.prototype.handles=function(t){var n=Ry(t);return this.events.includes(n)},e.prototype.resolveState=function(t){var n=t instanceof In?t:In.create(t),r=Array.from(vo([],this.getStateNodes(n.value)));return new In($($({},n),{value:this.resolve(n.value),configuration:r,done:ls(r,this),tags:xp(r),machine:this.machine}))},e.prototype.transitionLeafNode=function(t,n,r){var i=this.getStateNode(t),o=i.next(n,r);return!o||!o.transitions.length?this.next(n,r):o},e.prototype.transitionCompoundNode=function(t,n,r){var i=Object.keys(t),o=this.getStateNode(i[0]),a=o._transition(t[i[0]],n,r);return!a||!a.transitions.length?this.next(n,r):a},e.prototype.transitionParallelNode=function(t,n,r){var i,o,a={};try{for(var s=Me(Object.keys(t)),l=s.next();!l.done;l=s.next()){var c=l.value,u=t[c];if(u){var d=this.getStateNode(c),f=d._transition(u,n,r);f&&(a[c]=f)}}}catch(g){i={error:g}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}var h=Object.keys(a).map(function(g){return a[g]}),p=it(h.map(function(g){return g.transitions})),m=h.some(function(g){return g.transitions.length>0});if(!m)return this.next(n,r);var y=it(Object.keys(a).map(function(g){return a[g].configuration}));return{transitions:p,exitSet:it(h.map(function(g){return g.exitSet})),configuration:y,source:n,actions:it(Object.keys(a).map(function(g){return a[g].actions}))}},e.prototype._transition=function(t,n,r){return je(t)?this.transitionLeafNode(t,n,r):Object.keys(t).length===1?this.transitionCompoundNode(t,n,r):this.transitionParallelNode(t,n,r)},e.prototype.getTransitionData=function(t,n){return this._transition(t.value,t,It(n))},e.prototype.next=function(t,n){var r,i,o=this,a=n.name,s=[],l=[],c;try{for(var u=Me(this.getCandidates(a)),d=u.next();!d.done;d=u.next()){var f=d.value,h=f.cond,p=f.in,m=t.context,y=p?je(p)&&ci(p)?t.matches(To(this.getStateNodeById(p).path,this.delimiter)):Dd(To(p,this.delimiter),MA(this.path.slice(0,-2))(t.value)):!0,g=!1;try{g=!h||Ly(this.machine,h,m,n,t)}catch(E){throw new Error("Unable to evaluate guard '".concat(h.name||h.type,"' in transition for event '").concat(a,"' in state node '").concat(this.id,`':
`).concat(E.message))}if(g&&y){f.target!==void 0&&(l=f.target),s.push.apply(s,Je([],Ue(f.actions),!1)),c=f;break}}}catch(E){r={error:E}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}if(c){if(!l.length)return{transitions:[c],exitSet:[],configuration:t.value?[this]:[],source:t,actions:s};var v=it(l.map(function(E){return o.getRelativeStateNodes(E,t.historyValue)})),b=!!c.internal;return{transitions:[c],exitSet:b?[]:it(l.map(function(E){return o.getPotentiallyReenteringNodes(E)})),configuration:v,source:t,actions:s}}},e.prototype.getPotentiallyReenteringNodes=function(t){if(this.order<t.order)return[this];for(var n=[],r=this,i=t;r&&r!==i;)n.push(r),r=r.parent;return r!==i?[]:(n.push(i),n)},e.prototype.getActions=function(t,n,r,i,o,a,s){var l,c,u,d,f=this,h=a?vo([],this.getStateNodes(a.value)):[],p=new Set;try{for(var m=Me(Array.from(t).sort(function(q,z){return q.order-z.order})),y=m.next();!y.done;y=m.next()){var g=y.value;(!yo(h,g)||yo(r.exitSet,g)||g.parent&&p.has(g.parent))&&p.add(g)}}catch(q){l={error:q}}finally{try{y&&!y.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}try{for(var v=Me(h),b=v.next();!b.done;b=v.next()){var g=b.value;(!yo(t,g)||yo(r.exitSet,g.parent))&&r.exitSet.push(g)}}catch(q){u={error:q}}finally{try{b&&!b.done&&(d=v.return)&&d.call(v)}finally{if(u)throw u.error}}r.exitSet.sort(function(q,z){return z.order-q.order});var E=Array.from(p).sort(function(q,z){return q.order-z.order}),C=new Set(r.exitSet),x=it(E.map(function(q){var z=[];if(q.type!=="final")return z;var Y=q.parent;if(!Y.parent)return z;z.push(go(q.id,q.doneData),go(Y.id,q.doneData?xs(q.doneData,i,o):void 0));var le=Y.parent;return le.type==="parallel"&&qo(le).every(function(Be){return ls(r.configuration,Be)})&&z.push(go(le.id)),z})),O=E.map(function(q){var z=q.onEntry,Y=q.activities.map(function(le){return qy(le)});return{type:"entry",actions:qn(s?Je(Je([],Ue(z),!1),Ue(Y),!1):Je(Je([],Ue(Y),!1),Ue(z),!1),f.machine.options.actions)}}).concat({type:"state_done",actions:x.map(function(q){return Uy(q)})}),U=Array.from(C).map(function(q){return{type:"exit",actions:qn(Je(Je([],Ue(q.onExit),!1),Ue(q.activities.map(function(z){return zy(z)})),!1),f.machine.options.actions)}}),H=U.concat({type:"transition",actions:qn(r.actions,this.machine.options.actions)}).concat(O);if(n){var G=qn(it(Je([],Ue(t),!1).sort(function(q,z){return z.order-q.order}).map(function(q){return q.onExit})),this.machine.options.actions).filter(function(q){return!wu(q)});return H.concat({type:"stop",actions:G})}return H},e.prototype.transition=function(t,n,r,i){t===void 0&&(t=this.initialState);var o=It(n),a;if(t instanceof In)a=r===void 0?t:this.resolveState(In.from(t,r));else{var s=je(t)?this.resolve(Is(this.getResolvedPath(t))):this.resolve(t),l=r??this.machine.context;a=this.resolveState(In.from(s,l))}if(this.strict&&!this.events.includes(o.name)&&!PA(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var c=this._transition(a.value,a,o)||{transitions:[],configuration:[],exitSet:[],source:a,actions:[]},u=vo([],this.getStateNodes(a.value)),d=c.configuration.length?vo(u,c.configuration):u;return c.configuration=Je([],Ue(d),!1),this.resolveTransition(c,a,a.context,i,o)},e.prototype.resolveRaisedTransition=function(t,n,r,i){var o,a=t.actions;return t=this.transition(t,n,void 0,i),t._event=r,t.event=r.data,(o=t.actions).unshift.apply(o,Je([],Ue(a),!1)),t},e.prototype.resolveTransition=function(t,n,r,i,o){var a,s,l,c,u=this;o===void 0&&(o=Ur);var d=t.configuration,f=!n||t.transitions.length>0,h=f?t.configuration:n?n.configuration:[],p=ls(h,this),m=f?tk(this.machine,d):void 0,y=n?n.historyValue?n.historyValue:t.source?this.machine.historyValue(n.value):void 0:void 0,g=this.getActions(new Set(h),p,t,r,o,n,i),v=n?$({},n.activities):{};try{for(var b=Me(g),E=b.next();!E.done;E=b.next()){var C=E.value;try{for(var x=(l=void 0,Me(C.actions)),O=x.next();!O.done;O=x.next()){var U=O.value;U.type===Es?v[U.activity.id||U.activity.type]=U:U.type===bl&&(v[U.activity.id||U.activity.type]=!1)}}catch(Pe){l={error:Pe}}finally{try{O&&!O.done&&(c=x.return)&&c.call(x)}finally{if(l)throw l.error}}}}catch(Pe){a={error:Pe}}finally{try{E&&!E.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}var H=Ue(Ho(this,n,r,o,g,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),G=H[0],q=H[1],z=Ue(OA(G,wu),2),Y=z[0],le=z[1],Be=G.filter(function(Pe){var st;return Pe.type===Es&&((st=Pe.activity)===null||st===void 0?void 0:st.type)===Cs}),L=Be.reduce(function(Pe,st){return Pe[st.activity.id]=ZA(st.activity,u.machine,q,o),Pe},n?$({},n.children):{}),k=new In({value:m||n.value,context:q,_event:o,_sessionid:n?n._sessionid:null,historyValue:m?y?LA(y,m):void 0:n?n.historyValue:void 0,history:!m||t.source?n:void 0,actions:m?le:[],activities:m?v:n?n.activities:{},events:[],configuration:h,transitions:t.transitions,children:L,done:p,tags:xp(h),machine:this}),N=r!==q;k.changed=o.name===wl||N;var ee=k.history;ee&&delete ee.history;var se=!p&&(this._transient||d.some(function(Pe){return Pe._transient}));if(!f&&(!se||o.name===Da))return k;var J=k;if(!p)for(se&&(J=this.resolveRaisedTransition(J,{type:xy},o,i));Y.length;){var K=Y.shift();J=this.resolveRaisedTransition(J,K._event,o,i)}var rt=J.changed||(ee?!!J.actions.length||N||typeof ee.value!=typeof J.value||!e0(J.value,ee.value):void 0);return J.changed=rt,J.history=ee,J},e.prototype.getStateNode=function(t){if(ci(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[t];if(!n)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return n},e.prototype.getStateNodeById=function(t){var n=ci(t)?t.slice(Iu.length):t;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},e.prototype.getStateNodeByPath=function(t){if(typeof t=="string"&&ci(t))try{return this.getStateNodeById(t.slice(1))}catch{}for(var n=Su(t,this.delimiter).slice(),r=this;n.length;){var i=n.shift();if(!i.length)break;r=r.getStateNode(i)}return r},e.prototype.resolve=function(t){var n,r=this;if(!t)return this.initialStateValue||li;switch(this.type){case"parallel":return mo(this.initialStateValue,function(o,a){return o?r.getStateNode(a).resolve(t[a]||o):li});case"compound":if(je(t)){var i=this.getStateNode(t);return i.type==="parallel"||i.type==="compound"?(n={},n[t]=i.initialStateValue,n):t}return Object.keys(t).length?mo(t,function(o,a){return o?r.getStateNode(a).resolve(o):li}):this.initialStateValue||{};default:return t||li}},e.prototype.getResolvedPath=function(t){if(ci(t)){var n=this.machine.idMap[t.slice(Iu.length)];if(!n)throw new Error("Unable to find state node '".concat(t,"'"));return n.path}return Su(t,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=Ep(this.states,function(r){return r.initialStateValue||li},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Ts(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(t,n){this._init();var r=this.getStateNodes(t);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var t;if(this.type==="history"){var n=this.config;je(n.target)?t=ci(n.target)?Is(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:t=n.target}return t},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(t,n,r){return r===void 0&&(r=!0),r?t.type==="history"?t.resolveHistory(n):t.initialStateNodes:[t]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var t=this;if(Ts(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=as(this.initialStateValue);return it(n.map(function(r){return t.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var n=Ue(t),r=n[0],i=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var o=this.getStateNode(r);if(o.type==="history")return o.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(i)},e.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:Ep(this.states,function(n,r){if(!t)return n.historyValue();var i=je(t)?void 0:t[r];return n.historyValue(i||n.initialStateValue)},function(n){return!n.history})}},e.prototype.resolveHistory=function(t){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!t){var i=this.target;return i?it(as(i).map(function(a){return r.getFromRelativePath(a)})):r.initialStateNodes}var o=RA(r.path,"states")(t).current;return je(o)?[r.getStateNode(o)]:it(as(o).map(function(a){return n.history==="deep"?r.getFromRelativePath(a):[r.states[a[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var t=this,n=it(Object.keys(this.states).map(function(r){return t.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var t,n,r,i;if(this.__cache.events)return this.__cache.events;var o=this.states,a=new Set(this.ownEvents);if(o)try{for(var s=Me(Object.keys(o)),l=s.next();!l.done;l=s.next()){var c=l.value,u=o[c];if(u.states)try{for(var d=(r=void 0,Me(u.events)),f=d.next();!f.done;f=d.next()){var h=f.value;a.add("".concat(h))}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(t)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(t){var n=this;if(t!==void 0)return t.map(function(r){if(!je(r))return r;var i=r[0]===n.delimiter;if(i&&!n.parent)return n.getStateNodeByPath(r.slice(1));var o=i?n.key+r:r;if(n.parent)try{var a=n.parent.getStateNodeByPath(o);return a}catch(s){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(s.message))}else return n.getStateNodeByPath(o)})},e.prototype.formatTransition=function(t){var n=this,r=jA(t.target),i="internal"in t?t.internal:r?r.some(function(l){return je(l)&&l[0]===n.delimiter}):!0,o=this.machine.options.guards,a=this.resolveTarget(r),s=$($({},t),{actions:qn(mn(t.actions)),cond:Oy(t.cond,o),target:a,source:this,internal:i,eventType:t.event,toJSON:function(){return $($({},s),{target:s.target?s.target.map(function(l){return"#".concat(l.id)}):void 0,source:"#".concat(n.id)})}});return s},e.prototype.formatTransitions=function(){var t,n,r=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var o=this.config.on,a=Ec,s=o[a],l=s===void 0?[]:s,c=Nd(o,[typeof a=="symbol"?a:a+""]);i=it(Object.keys(c).map(function(v){var b=si(v,c[v]);return b}).concat(si(Ec,l)))}var u=this.config.always?si("",this.config.always):[],d=this.config.onDone?si(String(go(this.id)),this.config.onDone):[],f=it(this.invoke.map(function(v){var b=[];return v.onDone&&b.push.apply(b,Je([],Ue(si(String(Mo(v.id)),v.onDone)),!1)),v.onError&&b.push.apply(b,Je([],Ue(si(String(pi(v.id)),v.onError)),!1)),b})),h=this.after,p=it(Je(Je(Je(Je([],Ue(d),!1),Ue(f),!1),Ue(i),!1),Ue(u),!1).map(function(v){return mn(v).map(function(b){return r.formatTransition(b)})}));try{for(var m=Me(h),y=m.next();!y.done;y=m.next()){var g=y.value;p.push(g)}}catch(v){t={error:v}}finally{try{y&&!y.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}return p},e}();function $i(e,t){return new mk(e,t)}var jn=Wy,Il=jy,gk=Gy,Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function vk(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var r0=vk;function yk(){this.__data__=[],this.size=0}var bk=yk;function _k(e,t){return e===t||e!==e&&t!==t}var aa=_k,Sk=aa;function wk(e,t){for(var n=e.length;n--;)if(Sk(e[n][0],t))return n;return-1}var xl=wk,Ek=xl,Ck=Array.prototype,Ik=Ck.splice;function xk(e){var t=this.__data__,n=Ek(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Ik.call(t,n,1),--this.size,!0}var Ak=xk,kk=xl;function Tk(e){var t=this.__data__,n=kk(t,e);return n<0?void 0:t[n][1]}var Mk=Tk,Rk=xl;function Pk(e){return Rk(this.__data__,e)>-1}var Nk=Pk,Ok=xl;function Lk(e,t){var n=this.__data__,r=Ok(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Dk=Lk,Uk=bk,Fk=Ak,Bk=Mk,jk=Nk,$k=Dk;function Hi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hi.prototype.clear=Uk;Hi.prototype.delete=Fk;Hi.prototype.get=Bk;Hi.prototype.has=jk;Hi.prototype.set=$k;var Al=Hi,Hk=Al;function qk(){this.__data__=new Hk,this.size=0}var zk=qk;function Vk(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Wk=Vk;function Kk(e){return this.__data__.get(e)}var Gk=Kk;function Yk(e){return this.__data__.has(e)}var Jk=Yk,Zk=typeof Ua=="object"&&Ua&&Ua.Object===Object&&Ua,i0=Zk,Xk=i0,Qk=typeof self=="object"&&self&&self.Object===Object&&self,eT=Xk||Qk||Function("return this")(),Dn=eT,tT=Dn,nT=tT.Symbol,kl=nT,kp=kl,o0=Object.prototype,rT=o0.hasOwnProperty,iT=o0.toString,lo=kp?kp.toStringTag:void 0;function oT(e){var t=rT.call(e,lo),n=e[lo];try{e[lo]=void 0;var r=!0}catch{}var i=iT.call(e);return r&&(t?e[lo]=n:delete e[lo]),i}var aT=oT,sT=Object.prototype,lT=sT.toString;function cT(e){return lT.call(e)}var uT=cT,Tp=kl,dT=aT,fT=uT,hT="[object Null]",pT="[object Undefined]",Mp=Tp?Tp.toStringTag:void 0;function mT(e){return e==null?e===void 0?pT:hT:Mp&&Mp in Object(e)?dT(e):fT(e)}var qi=mT;function gT(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zn=gT,vT=qi,yT=Zn,bT="[object AsyncFunction]",_T="[object Function]",ST="[object GeneratorFunction]",wT="[object Proxy]";function ET(e){if(!yT(e))return!1;var t=vT(e);return t==_T||t==ST||t==bT||t==wT}var jd=ET,CT=Dn,IT=CT["__core-js_shared__"],xT=IT,Cc=xT,Rp=function(){var e=/[^.]+$/.exec(Cc&&Cc.keys&&Cc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function AT(e){return!!Rp&&Rp in e}var kT=AT,TT=Function.prototype,MT=TT.toString;function RT(e){if(e!=null){try{return MT.call(e)}catch{}try{return e+""}catch{}}return""}var a0=RT,PT=jd,NT=kT,OT=Zn,LT=a0,DT=/[\\^$.*+?()[\]{}|]/g,UT=/^\[object .+?Constructor\]$/,FT=Function.prototype,BT=Object.prototype,jT=FT.toString,$T=BT.hasOwnProperty,HT=RegExp("^"+jT.call($T).replace(DT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qT(e){if(!OT(e)||NT(e))return!1;var t=PT(e)?HT:UT;return t.test(LT(e))}var zT=qT;function VT(e,t){return e==null?void 0:e[t]}var WT=VT,KT=zT,GT=WT;function YT(e,t){var n=GT(e,t);return KT(n)?n:void 0}var Gr=YT,JT=Gr,ZT=Dn,XT=JT(ZT,"Map"),$d=XT,QT=Gr,eM=QT(Object,"create"),Tl=eM,Pp=Tl;function tM(){this.__data__=Pp?Pp(null):{},this.size=0}var nM=tM;function rM(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var iM=rM,oM=Tl,aM="__lodash_hash_undefined__",sM=Object.prototype,lM=sM.hasOwnProperty;function cM(e){var t=this.__data__;if(oM){var n=t[e];return n===aM?void 0:n}return lM.call(t,e)?t[e]:void 0}var uM=cM,dM=Tl,fM=Object.prototype,hM=fM.hasOwnProperty;function pM(e){var t=this.__data__;return dM?t[e]!==void 0:hM.call(t,e)}var mM=pM,gM=Tl,vM="__lodash_hash_undefined__";function yM(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gM&&t===void 0?vM:t,this}var bM=yM,_M=nM,SM=iM,wM=uM,EM=mM,CM=bM;function zi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}zi.prototype.clear=_M;zi.prototype.delete=SM;zi.prototype.get=wM;zi.prototype.has=EM;zi.prototype.set=CM;var IM=zi,Np=IM,xM=Al,AM=$d;function kM(){this.size=0,this.__data__={hash:new Np,map:new(AM||xM),string:new Np}}var TM=kM;function MM(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var RM=MM,PM=RM;function NM(e,t){var n=e.__data__;return PM(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ml=NM,OM=Ml;function LM(e){var t=OM(this,e).delete(e);return this.size-=t?1:0,t}var DM=LM,UM=Ml;function FM(e){return UM(this,e).get(e)}var BM=FM,jM=Ml;function $M(e){return jM(this,e).has(e)}var HM=$M,qM=Ml;function zM(e,t){var n=qM(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var VM=zM,WM=TM,KM=DM,GM=BM,YM=HM,JM=VM;function Vi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Vi.prototype.clear=WM;Vi.prototype.delete=KM;Vi.prototype.get=GM;Vi.prototype.has=YM;Vi.prototype.set=JM;var Hd=Vi,ZM=Al,XM=$d,QM=Hd,eR=200;function tR(e,t){var n=this.__data__;if(n instanceof ZM){var r=n.__data__;if(!XM||r.length<eR-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new QM(r)}return n.set(e,t),this.size=n.size,this}var nR=tR,rR=Al,iR=zk,oR=Wk,aR=Gk,sR=Jk,lR=nR;function Wi(e){var t=this.__data__=new rR(e);this.size=t.size}Wi.prototype.clear=iR;Wi.prototype.delete=oR;Wi.prototype.get=aR;Wi.prototype.has=sR;Wi.prototype.set=lR;var qd=Wi,cR="__lodash_hash_undefined__";function uR(e){return this.__data__.set(e,cR),this}var dR=uR;function fR(e){return this.__data__.has(e)}var hR=fR,pR=Hd,mR=dR,gR=hR;function Ms(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new pR;++t<n;)this.add(e[t])}Ms.prototype.add=Ms.prototype.push=mR;Ms.prototype.has=gR;var vR=Ms;function yR(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var bR=yR;function _R(e,t){return e.has(t)}var SR=_R,wR=vR,ER=bR,CR=SR,IR=1,xR=2;function AR(e,t,n,r,i,o){var a=n&IR,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,h=n&xR?new wR:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],m=t[d];if(r)var y=a?r(m,p,d,t,e,o):r(p,m,d,e,t,o);if(y!==void 0){if(y)continue;f=!1;break}if(h){if(!ER(t,function(g,v){if(!CR(h,v)&&(p===g||i(p,g,n,r,o)))return h.push(v)})){f=!1;break}}else if(!(p===m||i(p,m,n,r,o))){f=!1;break}}return o.delete(e),o.delete(t),f}var s0=AR,kR=Dn,TR=kR.Uint8Array,l0=TR;function MR(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var RR=MR;function PR(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var NR=PR,Op=kl,Lp=l0,OR=aa,LR=s0,DR=RR,UR=NR,FR=1,BR=2,jR="[object Boolean]",$R="[object Date]",HR="[object Error]",qR="[object Map]",zR="[object Number]",VR="[object RegExp]",WR="[object Set]",KR="[object String]",GR="[object Symbol]",YR="[object ArrayBuffer]",JR="[object DataView]",Dp=Op?Op.prototype:void 0,Ic=Dp?Dp.valueOf:void 0;function ZR(e,t,n,r,i,o,a){switch(n){case JR:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case YR:return!(e.byteLength!=t.byteLength||!o(new Lp(e),new Lp(t)));case jR:case $R:case zR:return OR(+e,+t);case HR:return e.name==t.name&&e.message==t.message;case VR:case KR:return e==t+"";case qR:var s=DR;case WR:var l=r&FR;if(s||(s=UR),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=BR,a.set(e,t);var u=LR(s(e),s(t),r,i,o,a);return a.delete(e),u;case GR:if(Ic)return Ic.call(e)==Ic.call(t)}return!1}var XR=ZR;function QR(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var c0=QR,e4=Array.isArray,Xn=e4,t4=c0,n4=Xn;function r4(e,t,n){var r=t(e);return n4(e)?r:t4(r,n(e))}var u0=r4;function i4(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}var o4=i4;function a4(){return[]}var d0=a4,s4=o4,l4=d0,c4=Object.prototype,u4=c4.propertyIsEnumerable,Up=Object.getOwnPropertySymbols,d4=Up?function(e){return e==null?[]:(e=Object(e),s4(Up(e),function(t){return u4.call(e,t)}))}:l4,f0=d4;function f4(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var h4=f4;function p4(e){return e!=null&&typeof e=="object"}var Yr=p4,m4=qi,g4=Yr,v4="[object Arguments]";function y4(e){return g4(e)&&m4(e)==v4}var b4=y4,Fp=b4,_4=Yr,h0=Object.prototype,S4=h0.hasOwnProperty,w4=h0.propertyIsEnumerable,E4=Fp(function(){return arguments}())?Fp:function(e){return _4(e)&&S4.call(e,"callee")&&!w4.call(e,"callee")},zd=E4,Rs={exports:{}};function C4(){return!1}var I4=C4;Rs.exports;(function(e,t){var n=Dn,r=I4,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;e.exports=c})(Rs,Rs.exports);var Vd=Rs.exports,x4=9007199254740991,A4=/^(?:0|[1-9]\d*)$/;function k4(e,t){var n=typeof e;return t=t??x4,!!t&&(n=="number"||n!="symbol"&&A4.test(e))&&e>-1&&e%1==0&&e<t}var Rl=k4,T4=9007199254740991;function M4(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=T4}var Wd=M4,R4=qi,P4=Wd,N4=Yr,O4="[object Arguments]",L4="[object Array]",D4="[object Boolean]",U4="[object Date]",F4="[object Error]",B4="[object Function]",j4="[object Map]",$4="[object Number]",H4="[object Object]",q4="[object RegExp]",z4="[object Set]",V4="[object String]",W4="[object WeakMap]",K4="[object ArrayBuffer]",G4="[object DataView]",Y4="[object Float32Array]",J4="[object Float64Array]",Z4="[object Int8Array]",X4="[object Int16Array]",Q4="[object Int32Array]",e3="[object Uint8Array]",t3="[object Uint8ClampedArray]",n3="[object Uint16Array]",r3="[object Uint32Array]",Ze={};Ze[Y4]=Ze[J4]=Ze[Z4]=Ze[X4]=Ze[Q4]=Ze[e3]=Ze[t3]=Ze[n3]=Ze[r3]=!0;Ze[O4]=Ze[L4]=Ze[K4]=Ze[D4]=Ze[G4]=Ze[U4]=Ze[F4]=Ze[B4]=Ze[j4]=Ze[$4]=Ze[H4]=Ze[q4]=Ze[z4]=Ze[V4]=Ze[W4]=!1;function i3(e){return N4(e)&&P4(e.length)&&!!Ze[R4(e)]}var o3=i3;function a3(e){return function(t){return e(t)}}var s3=a3,Ps={exports:{}};Ps.exports;(function(e,t){var n=i0,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=s})(Ps,Ps.exports);var l3=Ps.exports,c3=o3,u3=s3,Bp=l3,jp=Bp&&Bp.isTypedArray,d3=jp?u3(jp):c3,Kd=d3,f3=h4,h3=zd,p3=Xn,m3=Vd,g3=Rl,v3=Kd,y3=Object.prototype,b3=y3.hasOwnProperty;function _3(e,t){var n=p3(e),r=!n&&h3(e),i=!n&&!r&&m3(e),o=!n&&!r&&!i&&v3(e),a=n||r||i||o,s=a?f3(e.length,String):[],l=s.length;for(var c in e)(t||b3.call(e,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||g3(c,l)))&&s.push(c);return s}var p0=_3,S3=Object.prototype;function w3(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||S3;return e===n}var Gd=w3;function E3(e,t){return function(n){return e(t(n))}}var m0=E3,C3=m0,I3=C3(Object.keys,Object),x3=I3,A3=Gd,k3=x3,T3=Object.prototype,M3=T3.hasOwnProperty;function R3(e){if(!A3(e))return k3(e);var t=[];for(var n in Object(e))M3.call(e,n)&&n!="constructor"&&t.push(n);return t}var P3=R3,N3=jd,O3=Wd;function L3(e){return e!=null&&O3(e.length)&&!N3(e)}var Pl=L3,D3=p0,U3=P3,F3=Pl;function B3(e){return F3(e)?D3(e):U3(e)}var g0=B3,j3=u0,$3=f0,H3=g0;function q3(e){return j3(e,H3,$3)}var z3=q3,$p=z3,V3=1,W3=Object.prototype,K3=W3.hasOwnProperty;function G3(e,t,n,r,i,o){var a=n&V3,s=$p(e),l=s.length,c=$p(t),u=c.length;if(l!=u&&!a)return!1;for(var d=l;d--;){var f=s[d];if(!(a?f in t:K3.call(t,f)))return!1}var h=o.get(e),p=o.get(t);if(h&&p)return h==t&&p==e;var m=!0;o.set(e,t),o.set(t,e);for(var y=a;++d<l;){f=s[d];var g=e[f],v=t[f];if(r)var b=a?r(v,g,f,t,e,o):r(g,v,f,e,t,o);if(!(b===void 0?g===v||i(g,v,n,r,o):b)){m=!1;break}y||(y=f=="constructor")}if(m&&!y){var E=e.constructor,C=t.constructor;E!=C&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof C=="function"&&C instanceof C)&&(m=!1)}return o.delete(e),o.delete(t),m}var Y3=G3,J3=Gr,Z3=Dn,X3=J3(Z3,"DataView"),Q3=X3,eP=Gr,tP=Dn,nP=eP(tP,"Promise"),rP=nP,iP=Gr,oP=Dn,aP=iP(oP,"Set"),sP=aP,lP=Gr,cP=Dn,uP=lP(cP,"WeakMap"),dP=uP,xu=Q3,Au=$d,ku=rP,Tu=sP,Mu=dP,v0=qi,Ki=a0,Hp="[object Map]",fP="[object Object]",qp="[object Promise]",zp="[object Set]",Vp="[object WeakMap]",Wp="[object DataView]",hP=Ki(xu),pP=Ki(Au),mP=Ki(ku),gP=Ki(Tu),vP=Ki(Mu),Mr=v0;(xu&&Mr(new xu(new ArrayBuffer(1)))!=Wp||Au&&Mr(new Au)!=Hp||ku&&Mr(ku.resolve())!=qp||Tu&&Mr(new Tu)!=zp||Mu&&Mr(new Mu)!=Vp)&&(Mr=function(e){var t=v0(e),n=t==fP?e.constructor:void 0,r=n?Ki(n):"";if(r)switch(r){case hP:return Wp;case pP:return Hp;case mP:return qp;case gP:return zp;case vP:return Vp}return t});var yP=Mr,xc=qd,bP=s0,_P=XR,SP=Y3,Kp=yP,Gp=Xn,Yp=Vd,wP=Kd,EP=1,Jp="[object Arguments]",Zp="[object Array]",Fa="[object Object]",CP=Object.prototype,Xp=CP.hasOwnProperty;function IP(e,t,n,r,i,o){var a=Gp(e),s=Gp(t),l=a?Zp:Kp(e),c=s?Zp:Kp(t);l=l==Jp?Fa:l,c=c==Jp?Fa:c;var u=l==Fa,d=c==Fa,f=l==c;if(f&&Yp(e)){if(!Yp(t))return!1;a=!0,u=!1}if(f&&!u)return o||(o=new xc),a||wP(e)?bP(e,t,n,r,i,o):_P(e,t,l,n,r,i,o);if(!(n&EP)){var h=u&&Xp.call(e,"__wrapped__"),p=d&&Xp.call(t,"__wrapped__");if(h||p){var m=h?e.value():e,y=p?t.value():t;return o||(o=new xc),i(m,y,n,r,o)}}return f?(o||(o=new xc),SP(e,t,n,r,i,o)):!1}var xP=IP,AP=xP,Qp=Yr;function y0(e,t,n,r,i){return e===t?!0:e==null||t==null||!Qp(e)&&!Qp(t)?e!==e&&t!==t:AP(e,t,n,r,y0,i)}var b0=y0,kP=qd,TP=b0,MP=1,RP=2;function PP(e,t,n,r){var i=n.length,o=i,a=!r;if(e==null)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var l=s[0],c=e[l],u=s[1];if(a&&s[2]){if(c===void 0&&!(l in e))return!1}else{var d=new kP;if(r)var f=r(c,u,l,e,t,d);if(!(f===void 0?TP(u,c,MP|RP,r,d):f))return!1}}return!0}var NP=PP,OP=Zn;function LP(e){return e===e&&!OP(e)}var _0=LP,DP=_0,UP=g0;function FP(e){for(var t=UP(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,DP(i)]}return t}var BP=FP;function jP(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var S0=jP,$P=NP,HP=BP,qP=S0;function zP(e){var t=HP(e);return t.length==1&&t[0][2]?qP(t[0][0],t[0][1]):function(n){return n===e||$P(n,e,t)}}var VP=zP,WP=qi,KP=Yr,GP="[object Symbol]";function YP(e){return typeof e=="symbol"||KP(e)&&WP(e)==GP}var Yd=YP,JP=Xn,ZP=Yd,XP=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,QP=/^\w*$/;function eN(e,t){if(JP(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ZP(e)?!0:QP.test(e)||!XP.test(e)||t!=null&&e in Object(t)}var Jd=eN,w0=Hd,tN="Expected a function";function Zd(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(tN);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Zd.Cache||w0),n}Zd.Cache=w0;var nN=Zd,rN=nN,iN=500;function oN(e){var t=rN(e,function(r){return n.size===iN&&n.clear(),r}),n=t.cache;return t}var aN=oN,sN=aN,lN=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cN=/\\(\\)?/g,uN=sN(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(lN,function(n,r,i,o){t.push(i?o.replace(cN,"$1"):r||n)}),t}),dN=uN,em=kl,fN=r0,hN=Xn,pN=Yd,mN=1/0,tm=em?em.prototype:void 0,nm=tm?tm.toString:void 0;function E0(e){if(typeof e=="string")return e;if(hN(e))return fN(e,E0)+"";if(pN(e))return nm?nm.call(e):"";var t=e+"";return t=="0"&&1/e==-mN?"-0":t}var gN=E0,vN=gN;function yN(e){return e==null?"":vN(e)}var bN=yN,_N=Xn,SN=Jd,wN=dN,EN=bN;function CN(e,t){return _N(e)?e:SN(e,t)?[e]:wN(EN(e))}var Nl=CN,IN=Yd,xN=1/0;function AN(e){if(typeof e=="string"||IN(e))return e;var t=e+"";return t=="0"&&1/e==-xN?"-0":t}var sa=AN,kN=Nl,TN=sa;function MN(e,t){t=kN(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[TN(t[n++])];return n&&n==r?e:void 0}var Xd=MN,RN=Xd;function PN(e,t,n){var r=e==null?void 0:RN(e,t);return r===void 0?n:r}var NN=PN;function ON(e,t){return e!=null&&t in Object(e)}var LN=ON,DN=Nl,UN=zd,FN=Xn,BN=Rl,jN=Wd,$N=sa;function HN(e,t,n){t=DN(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=$N(t[r]);if(!(o=e!=null&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&jN(i)&&BN(a,i)&&(FN(e)||UN(e)))}var qN=HN,zN=LN,VN=qN;function WN(e,t){return e!=null&&VN(e,t,zN)}var KN=WN,GN=b0,YN=NN,JN=KN,ZN=Jd,XN=_0,QN=S0,e6=sa,t6=1,n6=2;function r6(e,t){return ZN(e)&&XN(t)?QN(e6(e),t):function(n){var r=YN(n,e);return r===void 0&&r===t?JN(n,e):GN(t,r,t6|n6)}}var i6=r6;function o6(e){return e}var Qd=o6;function a6(e){return function(t){return t==null?void 0:t[e]}}var s6=a6,l6=Xd;function c6(e){return function(t){return l6(t,e)}}var u6=c6,d6=s6,f6=u6,h6=Jd,p6=sa;function m6(e){return h6(e)?d6(p6(e)):f6(e)}var g6=m6,v6=VP,y6=i6,b6=Qd,_6=Xn,S6=g6;function w6(e){return typeof e=="function"?e:e==null?b6:typeof e=="object"?_6(e)?y6(e[0],e[1]):v6(e):S6(e)}var E6=w6,C6=Gr,I6=function(){try{var e=C6(Object,"defineProperty");return e({},"",{}),e}catch{}}(),C0=I6,rm=C0;function x6(e,t,n){t=="__proto__"&&rm?rm(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var ef=x6,A6=ef,k6=aa,T6=Object.prototype,M6=T6.hasOwnProperty;function R6(e,t,n){var r=e[t];(!(M6.call(e,t)&&k6(r,n))||n===void 0&&!(t in e))&&A6(e,t,n)}var I0=R6,P6=I0,N6=Nl,O6=Rl,im=Zn,L6=sa;function D6(e,t,n,r){if(!im(e))return e;t=N6(t,e);for(var i=-1,o=t.length,a=o-1,s=e;s!=null&&++i<o;){var l=L6(t[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=a){var u=s[l];c=r?r(u,l,s):void 0,c===void 0&&(c=im(u)?u:O6(t[i+1])?[]:{})}P6(s,l,c),s=s[l]}return e}var U6=D6,F6=Xd,B6=U6,j6=Nl;function $6(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=F6(e,a);n(s,a)&&B6(o,j6(a,e),s)}return o}var H6=$6,q6=m0,z6=q6(Object.getPrototypeOf,Object),tf=z6,V6=c0,W6=tf,K6=f0,G6=d0,Y6=Object.getOwnPropertySymbols,J6=Y6?function(e){for(var t=[];e;)V6(t,K6(e)),e=W6(e);return t}:G6,Z6=J6;function X6(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Q6=X6,e5=Zn,t5=Gd,n5=Q6,r5=Object.prototype,i5=r5.hasOwnProperty;function o5(e){if(!e5(e))return n5(e);var t=t5(e),n=[];for(var r in e)r=="constructor"&&(t||!i5.call(e,r))||n.push(r);return n}var a5=o5,s5=p0,l5=a5,c5=Pl;function u5(e){return c5(e)?s5(e,!0):l5(e)}var nf=u5,d5=u0,f5=Z6,h5=nf;function p5(e){return d5(e,h5,f5)}var m5=p5,g5=r0,v5=E6,y5=H6,b5=m5;function _5(e,t){if(e==null)return{};var n=g5(b5(e),function(r){return[r]});return t=v5(t),y5(e,n,function(r,i){return t(r,i[0])})}var S5=_5;const w5=n0(S5),E5=!0,C5="",Ol=(e,t)=>`${e}${t}`.replace(/[^A-Z0-9+]/gi,""),I5=(e,t)=>{switch(t){case"address":case"birthdate":case"email":case"family_name":case"gender":case"given_name":case"locale":case"middle_name":case"name":case"nickname":case"phone_number":case"picture":case"preferred_username":case"profile":case"updated_at":case"website":case"zoneinfo":return!0;default:return t.startsWith("custom:")}},x5=e=>{const{phone_number:t,...n}=w5(e,I5);if(Sy(t)&&t!==C5){const{country_code:r}=e;return{...n,phone_number:Ol(r,t)}}return n},A5=(e,t,n)=>{const{password:r,...i}=t,o=x5(i),a={autoSignIn:E5,userAttributes:{...n==="phone_number"?{...o,phone_number:e}:o}};return{username:e,password:r,options:a}},k5=({formValues:e,loginMechanisms:t})=>{const n=t[0];if(n==="phone_number"){const{country_code:r,phone_number:i}=e;return Ol(r,i)}return e[n]},{assign:He}=Yy,T5=He({actorDoneData:void 0}),M5=He({challengeName:void 0}),R5=He({missingAttributes:void 0}),P5=He({remoteError:void 0}),N5=He({formValues:{}}),O5=He({touched:{}}),L5=He({user:void 0}),D5=He({validationError:{}}),U5=He({totpSecretCode:(e,{data:t})=>{var n;const{sharedSecret:r}=((n=t.nextStep)==null?void 0:n.totpSetupDetails)??{};return r}}),F5=He({step:"SIGN_IN"}),B5=He({step:"SHOULD_CONFIRM_USER_ATTRIBUTE"}),j5=He({step:"CONFIRM_ATTRIBUTE_COMPLETE"}),$5=He({challengeName:(e,{data:t})=>{const{signInStep:n}=t.nextStep;return n==="CONFIRM_SIGN_IN_WITH_SMS_CODE"?"SMS_MFA":n==="CONFIRM_SIGN_IN_WITH_TOTP_CODE"?"SOFTWARE_TOKEN_MFA":void 0}}),H5=He({username:({formValues:e,loginMechanisms:t})=>{const n=t[0],{username:r,country_code:i}=e;return n==="phone_number"?Ol(i,r):r}}),q5=He({username:k5}),z5=He({username:({formValues:e,loginMechanisms:t})=>{const n=t[0],{username:r,country_code:i}=e;return n==="phone_number"?Ol(i,r):r}}),V5=He({step:(e,{data:t})=>t.nextStep.signInStep==="DONE"?"SIGN_IN_COMPLETE":t.nextStep.signInStep}),W5=He({step:(e,{data:t})=>t.nextStep.signUpStep==="DONE"?"SIGN_UP_COMPLETE":t.nextStep.signUpStep}),K5=He({step:(e,{data:t})=>t.nextStep.resetPasswordStep==="DONE"?"RESET_PASSWORD_COMPLETE":t.nextStep.resetPasswordStep}),G5=He({missingAttributes:(e,{data:t})=>{var n;return(n=t.nextStep)==null?void 0:n.missingAttributes}}),Y5=He({validationError:(e,{data:t})=>t}),J5=He({remoteError:(e,{data:t})=>t.name==="NoUserPoolError"?"Configuration error (see console) – please contact the administrator":(t==null?void 0:t.message)||t}),Z5=He({user:(e,{data:t})=>t}),om=e=>({Destination:e.destination,DeliveryMedium:e.deliveryMedium,AttributeName:e.attributName}),X5=He({codeDeliveryDetails:(e,{data:t})=>{var n;return(n=t==null?void 0:t.nextStep)!=null&&n.codeDeliveryDetails?om(t.nextStep.codeDeliveryDetails):om(t)}}),Q5=He({formValues:(e,{data:t})=>{const{name:n,value:r}=t;return{...e.formValues,[n]:r}}}),eO=He({formValues:(e,{data:t})=>tA({...e.formValues,...t},"password")}),tO=He({touched:(e,{data:t})=>({...e.touched,[t.name]:!0})}),nO=He({unverifiedUserAttributes:(e,{data:t})=>{const{email:n,phone_number:r}=t;return{...n&&{email:n},...r&&{phone_number:r}}}}),rO=He({selectedUserAttribute:void 0}),iO=He({selectedUserAttribute:e=>{var t;return(t=e.formValues)==null?void 0:t.unverifiedAttr}}),oO=He({step:"CONFIRM_SIGN_UP"}),la={clearActorDoneData:T5,clearChallengeName:M5,clearError:P5,clearFormValues:N5,clearMissingAttributes:R5,clearSelectedUserAttribute:rO,clearTouched:O5,clearUser:L5,clearValidationError:D5,handleBlur:tO,handleInput:Q5,handleSubmit:eO,setChallengeName:$5,setCodeDeliveryDetails:X5,setFieldErrors:Y5,setMissingAttributes:G5,setNextResetPasswordStep:K5,setNextSignInStep:V5,setNextSignUpStep:W5,setRemoteError:J5,setConfirmAttributeCompleteStep:j5,setConfirmSignUpSignUpStep:oO,setShouldVerifyUserAttributeStep:B5,setSelectedUserAttribute:iO,setSignInStep:F5,setTotpSecretCode:U5,setUser:Z5,setUnverifiedUserAttributes:nO,setUsernameForgotPassword:H5,setUsernameSignIn:z5,setUsernameSignUp:q5},aO=["CONFIRM_SIGN_IN_WITH_SMS_CODE","CONFIRM_SIGN_IN_WITH_TOTP_CODE"],sO=(e,{data:t})=>(t==null?void 0:t.nextStep.signInStep)==="CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",lO=(e,{data:t})=>{var n;return((n=t==null?void 0:t.nextStep)==null?void 0:n.signInStep)==="RESET_PASSWORD"},cO=(e,{data:t})=>(t==null?void 0:t.nextStep.signInStep)==="CONFIRM_SIGN_UP",uO=(e,{data:t})=>(t==null?void 0:t.nextStep.signUpStep)==="COMPLETE_AUTO_SIGN_IN",dO=(e,{data:t})=>(t==null?void 0:t.nextStep.signInStep)==="DONE",fO=(e,{data:t})=>(t==null?void 0:t.nextStep.signUpStep)==="DONE",hO=(e,{data:t})=>(t==null?void 0:t.nextStep.resetPasswordStep)==="DONE",pO=(e,{data:t})=>(t==null?void 0:t.step)==="CONFIRM_ATTRIBUTE_COMPLETE",mO=(e,{data:t})=>(t==null?void 0:t.step)==="CONFIRM_ATTRIBUTE_WITH_CODE",gO=(e,{data:t})=>(t==null?void 0:t.step)==="SHOULD_CONFIRM_USER_ATTRIBUTE",vO=(e,{data:t})=>(t==null?void 0:t.step)==="RESET_PASSWORD",yO=(e,{data:t})=>(t==null?void 0:t.step)==="CONFIRM_SIGN_UP",bO=({step:e})=>aO.includes(e),_O=({step:e})=>e==="CONTINUE_SIGN_IN_WITH_TOTP_SETUP",SO=({step:e})=>e==="RESET_PASSWORD",wO=({step:e})=>e==="CONFIRM_RESET_PASSWORD_WITH_CODE",EO=({step:e})=>e==="CONFIRM_SIGN_UP",CO=(e,{data:t})=>{const{phone_number_verified:n,email_verified:r}=t;return(r===void 0||r==="false")&&(n===void 0||n==="false")},IO=(e,{data:t})=>t.message==="User is already confirmed.",Ll={hasCompletedAttributeConfirmation:pO,hasCompletedResetPassword:hO,hasCompletedSignIn:dO,hasCompletedSignUp:fO,isConfirmSignUpStep:yO,isConfirmUserAttributeStep:mO,isResetPasswordStep:vO,isShouldConfirmUserAttributeStep:gO,isUserAlreadyConfirmed:IO,shouldAutoSignIn:uO,shouldConfirmResetPassword:wO,shouldConfirmSignIn:bO,shouldConfirmSignInWithNewPassword:sO,shouldConfirmSignUp:EO,shouldConfirmSignUpFromSignIn:cO,shouldResetPassword:SO,shouldResetPasswordFromSignIn:lO,shouldSetupTotp:_O,shouldVerifyAttribute:CO};var xO=ef,AO=aa;function kO(e,t,n){(n!==void 0&&!AO(e[t],n)||n===void 0&&!(t in e))&&xO(e,t,n)}var x0=kO;function TO(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(n(o[l],l,o)===!1)break}return t}}var MO=TO,RO=MO,PO=RO(),NO=PO,Ns={exports:{}};Ns.exports;(function(e,t){var n=Dn,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,a=o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,f=s?s(d):new c.constructor(d);return c.copy(f),f}e.exports=l})(Ns,Ns.exports);var OO=Ns.exports,am=l0;function LO(e){var t=new e.constructor(e.byteLength);return new am(t).set(new am(e)),t}var DO=LO,UO=DO;function FO(e,t){var n=t?UO(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var BO=FO;function jO(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var $O=jO,HO=Zn,sm=Object.create,qO=function(){function e(){}return function(t){if(!HO(t))return{};if(sm)return sm(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),zO=qO,VO=zO,WO=tf,KO=Gd;function GO(e){return typeof e.constructor=="function"&&!KO(e)?VO(WO(e)):{}}var YO=GO,JO=Pl,ZO=Yr;function XO(e){return ZO(e)&&JO(e)}var QO=XO,e8=qi,t8=tf,n8=Yr,r8="[object Object]",i8=Function.prototype,o8=Object.prototype,A0=i8.toString,a8=o8.hasOwnProperty,s8=A0.call(Object);function l8(e){if(!n8(e)||e8(e)!=r8)return!1;var t=t8(e);if(t===null)return!0;var n=a8.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&A0.call(n)==s8}var c8=l8;function u8(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var k0=u8,d8=I0,f8=ef;function h8(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;l===void 0&&(l=e[s]),i?f8(n,s,l):d8(n,s,l)}return n}var p8=h8,m8=p8,g8=nf;function v8(e){return m8(e,g8(e))}var y8=v8,lm=x0,b8=OO,_8=BO,S8=$O,w8=YO,cm=zd,um=Xn,E8=QO,C8=Vd,I8=jd,x8=Zn,A8=c8,k8=Kd,dm=k0,T8=y8;function M8(e,t,n,r,i,o,a){var s=dm(e,n),l=dm(t,n),c=a.get(l);if(c){lm(e,n,c);return}var u=o?o(s,l,n+"",e,t,a):void 0,d=u===void 0;if(d){var f=um(l),h=!f&&C8(l),p=!f&&!h&&k8(l);u=l,f||h||p?um(s)?u=s:E8(s)?u=S8(s):h?(d=!1,u=b8(l,!0)):p?(d=!1,u=_8(l,!0)):u=[]:A8(l)||cm(l)?(u=s,cm(s)?u=T8(s):(!x8(s)||I8(s))&&(u=w8(l))):d=!1}d&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),lm(e,n,u)}var R8=M8,P8=qd,N8=x0,O8=NO,L8=R8,D8=Zn,U8=nf,F8=k0;function T0(e,t,n,r,i){e!==t&&O8(t,function(o,a){if(i||(i=new P8),D8(o))L8(e,t,a,n,T0,r,i);else{var s=r?r(F8(e,a),o,a+"",e,t,i):void 0;s===void 0&&(s=o),N8(e,a,s)}},U8)}var B8=T0;function j8(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var $8=j8,H8=$8,fm=Math.max;function q8(e,t,n){return t=fm(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=fm(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),H8(e,this,s)}}var z8=q8;function V8(e){return function(){return e}}var W8=V8,K8=W8,hm=C0,G8=Qd,Y8=hm?function(e,t){return hm(e,"toString",{configurable:!0,enumerable:!1,value:K8(t),writable:!0})}:G8,J8=Y8,Z8=800,X8=16,Q8=Date.now;function eL(e){var t=0,n=0;return function(){var r=Q8(),i=X8-(r-n);if(n=r,i>0){if(++t>=Z8)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var tL=eL,nL=J8,rL=tL,iL=rL(nL),oL=iL,aL=Qd,sL=z8,lL=oL;function cL(e,t){return lL(sL(e,t,aL),e+"")}var uL=cL,dL=aa,fL=Pl,hL=Rl,pL=Zn;function mL(e,t,n){if(!pL(n))return!1;var r=typeof t;return(r=="number"?fL(n)&&hL(t,n.length):r=="string"&&t in n)?dL(n[t],e):!1}var gL=mL,vL=uL,yL=gL;function bL(e){return vL(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&yL(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}var _L=bL,SL=B8,wL=_L,EL=wL(function(e,t,n){SL(e,t,n)}),CL=EL;const IL=n0(CL),Dl=async(e,t,n,r)=>{const i=await Promise.all(r.map(a=>a(e,t,n))),o=IL({},...i);return wy(o)?Promise.resolve():Promise.reject(o)},xL=8,AL=e=>Array.isArray(e),kL=e=>{if(e)return AL(e)?Object.entries(e).map(([t,n])=>Object.keys(n)[0]):Object.keys(e)},br={async getAmplifyConfig(){var e,t,n,r;const i=gl.getConfig(),o=(e=i.Auth)==null?void 0:e.Cognito,{loginWith:a,userAttributes:s}=((t=i.Auth)==null?void 0:t.Cognito)??{},l=a?Object.entries(a).filter(([d,f])=>d!=="oauth").filter(([d,f])=>!!f).map(d=>d[0]==="phone"?"phone_number":d[0]):void 0,c=kL(s),u=(n=a==null?void 0:a.oauth)!=null&&n.providers?(r=a.oauth.providers)==null?void 0:r.map(d=>d.toString().toLowerCase()):void 0;return{...o,loginMechanisms:l,signUpAttributes:c,socialProviders:u}},getCurrentUser:ul,handleSignIn:xd,handleSignUp:L2,handleConfirmSignIn:hy,handleConfirmSignUp:U2,handleForgotPasswordSubmit:D2,handleForgotPassword:dy,async validateCustomSignUp(e,t){},async validateFormPassword(e,t,n){const{password:r}=e,{password:i}=t;if(!i||!n)return null;const o=[],a=n.minLength??xL;return r.length<a&&o.push(`Password must have at least ${a} characters`),n.requireLowercase&&!/[a-z]/.test(r)&&o.push("Password must have lower case letters"),n.requireUppercase&&!/[A-Z]/.test(r)&&o.push("Password must have upper case letters"),n.requireNumbers&&!/[0-9]/.test(r)&&o.push("Password must have numbers"),n.requireSpecialCharacters&&!Qx(r)&&o.push("Password must have special characters"),o.length!==0?{password:o}:null},async validateConfirmPassword(e,t){const{password:n,confirm_password:r}=e,{confirm_password:i,password:o}=t;if(!n&&!r)return null;if((n||r)&&n!==r&&(i&&o||(n==null?void 0:n.length)>=6&&(r==null?void 0:r.length)>=6))return{confirm_password:"Your passwords must match"}},async validatePreferredUsername(e,t){}};function TL({services:e}){return $i({id:"forgotPasswordActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldResetPassword",target:"confirmResetPassword"},{cond:"shouldConfirmResetPassword",target:"confirmResetPassword"},{target:"forgotPassword"}]},forgotPassword:{initial:"edit",entry:"sendUpdate",exit:["clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"}}},submit:{tags:"pending",entry:["sendUpdate","clearError","setUsernameForgotPassword"],invoke:{src:"handleResetPassword",onDone:{actions:["setCodeDeliveryDetails","setNextResetPasswordStep"],target:"#forgotPasswordActor.confirmResetPassword"},onError:{actions:"setRemoteError",target:"edit"}}}}},confirmResetPassword:{type:"parallel",exit:["clearFormValues","clearError","clearTouched"],states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateFields",onDone:{target:"valid",actions:"clearValidationError"},onError:{target:"invalid",actions:"setFieldErrors"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{CHANGE:{actions:"handleInput",target:".pending"},BLUR:{actions:"handleBlur",target:".pending"}}},submission:{initial:"idle",states:{idle:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"validate"},RESEND:"resendCode",CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"}}},validate:{entry:"sendUpdate",invoke:{src:"validateFields",onDone:{target:"pending",actions:"clearValidationError"},onError:{target:"idle",actions:"setFieldErrors"}}},resendCode:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"handleResetPassword",onDone:{target:"idle"},onError:{actions:"setRemoteError",target:"idle"}}},pending:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"handleConfirmResetPassword",onDone:[{cond:"hasCompletedResetPassword",actions:"setNextResetPasswordStep",target:"#forgotPasswordActor.resolved"},{actions:"setSignInStep",target:"#forgotPasswordActor.resolved"}],onError:{actions:"setRemoteError",target:"idle"}}}}}}},resolved:{type:"final",data:({step:t})=>({step:t})}}},{actions:{...la,sendUpdate:Il()},guards:Ll,services:{handleResetPassword({username:t}){return e.handleForgotPassword({username:t})},handleConfirmResetPassword({formValues:t,username:n}){const{confirmation_code:r,password:i}=t;return e.handleForgotPasswordSubmit({confirmationCode:r,newPassword:i,username:n})},validateFields(t){return Dl(t.formValues,t.touched,t.passwordSettings,[br.validateFormPassword,br.validateConfirmPassword])}}})}const M0=e=>({entry:["sendUpdate","clearError"],invoke:{src:"signInWithRedirect",onDone:{target:e},onError:{actions:"setRemoteError",target:e}}}),Ba={onDone:[{cond:"hasCompletedSignIn",actions:"setNextSignInStep",target:"#signInActor.fetchUserAttributes"},{cond:"shouldConfirmSignInWithNewPassword",actions:["setMissingAttributes","setNextSignInStep"],target:"#signInActor.forceChangePassword"},{cond:"shouldResetPasswordFromSignIn",actions:"setNextSignInStep",target:"#signInActor.resetPassword"},{cond:"shouldConfirmSignUpFromSignIn",actions:"setNextSignInStep",target:"#signInActor.resendSignUpCode"},{actions:["setChallengeName","setMissingAttributes","setNextSignInStep","setTotpSecretCode"],target:"#signInActor.init"}],onError:{actions:"setRemoteError",target:"edit"}},ML={onDone:[{cond:"shouldVerifyAttribute",actions:["setShouldVerifyUserAttributeStep","setUnverifiedUserAttributes"],target:"#signInActor.resolved"},{actions:"setConfirmAttributeCompleteStep",target:"#signInActor.resolved"}],onError:{actions:"setConfirmAttributeCompleteStep",target:"#signInActor.resolved"}};function RL({services:e}){return $i({id:"signInActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldConfirmSignIn",target:"confirmSignIn"},{cond:"shouldSetupTotp",target:"setupTotp"},{cond:({step:t})=>t==="CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",actions:"setActorDoneData",target:"forceChangePassword"},{target:"signIn"}]},federatedSignIn:M0("signIn"),fetchUserAttributes:{invoke:{src:"fetchUserAttributes",...ML}},resendSignUpCode:{invoke:{src:"handleResendSignUpCode",onDone:{actions:"setCodeDeliveryDetails",target:"#signInActor.resolved"},onError:{actions:"setRemoteError",target:"#signInActor.signIn"}}},resetPassword:{invoke:{src:"resetPassword",onDone:[{actions:"setCodeDeliveryDetails",target:"#signInActor.resolved"}],onError:{actions:["setRemoteError","sendUpdate"]}}},signIn:{initial:"edit",exit:"clearTouched",states:{edit:{entry:"sendUpdate",on:{CHANGE:{actions:"handleInput"},FEDERATED_SIGN_IN:{target:"#signInActor.federatedSignIn"},SUBMIT:{actions:"handleSubmit",target:"submit"}}},submit:{tags:"pending",entry:["clearError","sendUpdate","setUsernameSignIn"],exit:"clearFormValues",invoke:{src:"handleSignIn",...Ba}}}},confirmSignIn:{initial:"edit",exit:["clearChallengeName","clearFormValues","clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SIGN_IN:"#signInActor.signIn",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"confirmSignIn",...Ba}}}},forceChangePassword:{entry:"sendUpdate",type:"parallel",exit:["clearFormValues","clearError","clearTouched"],states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateFields",onDone:{target:"valid",actions:"clearValidationError"},onError:{target:"invalid",actions:"setFieldErrors"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{SIGN_IN:{actions:"setSignInStep",target:"#signInActor.resolved"},CHANGE:{actions:"handleInput",target:".pending"},BLUR:{actions:"handleBlur",target:".pending"}}},submit:{initial:"edit",entry:"clearError",states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"validate"}}},validate:{entry:"sendUpdate",invoke:{src:"validateFields",onDone:{actions:"clearValidationError",target:"pending"},onError:{actions:"setFieldErrors",target:"edit"}}},pending:{tags:"pending",entry:["sendUpdate","clearError"],invoke:{src:"handleForceChangePassword",...Ba}}}}}},setupTotp:{initial:"edit",exit:["clearFormValues","clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SIGN_IN:"#signInActor.signIn",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["sendUpdate","clearError"],invoke:{src:"confirmSignIn",...Ba}}}},resolved:{type:"final",data:t=>({codeDeliveryDetails:t.codeDeliveryDetails,remoteError:t.remoteError,step:t.step,unverifiedUserAttributes:t.unverifiedUserAttributes,username:t.username})}}},{actions:{...la,sendUpdate:Il()},guards:Ll,services:{async fetchUserAttributes(){return by()},resetPassword({username:t}){return dy({username:t})},handleResendSignUpCode({username:t}){return fy({username:t})},handleSignIn({formValues:t,username:n}){const{password:r}=t;return e.handleSignIn({username:n,password:r})},confirmSignIn({formValues:t}){const{confirmation_code:n}=t;return e.handleConfirmSignIn({challengeResponse:n})},async handleForceChangePassword({formValues:t}){let{password:n,phone_number:r,country_code:i,confirm_password:o,...a}=t,s;return r&&(s=`${i}${r}`.replace(/[^A-Z0-9+]/gi,""),a={...a,phone_number:s}),hy({challengeResponse:n,options:{userAttributes:a}})},signInWithRedirect(t,{data:n}){return yy(n)},async validateFields(t){return Dl(t.formValues,t.touched,t.passwordSettings,[br.validateFormPassword,br.validateConfirmPassword])}}})}const PL={onDone:[{actions:"setCodeDeliveryDetails",target:"#signUpActor.resolved"}],onError:{actions:["setRemoteError","sendUpdate"]}},NL={onDone:[{cond:"hasCompletedSignIn",actions:"setNextSignInStep",target:"#signUpActor.fetchUserAttributes"},{cond:"shouldConfirmSignInWithNewPassword",actions:"setNextSignInStep",target:"#signUpActor.resolved"},{cond:"shouldResetPasswordFromSignIn",actions:"setNextSignInStep",target:"#signUpActor.resetPassword"},{cond:"shouldConfirmSignUpFromSignIn",actions:"setNextSignInStep",target:"#signUpActor.resendSignUpCode"},{actions:["setNextSignInStep","setChallengeName","setMissingAttributes","setTotpSecretCode"],target:"#signUpActor.resolved"}],onError:{actions:"setRemoteError",target:"#signUpActor.resolved"}},OL={onDone:[{cond:"shouldVerifyAttribute",actions:["setShouldVerifyUserAttributeStep","setUnverifiedUserAttributes"],target:"#signUpActor.resolved"},{actions:"setConfirmAttributeCompleteStep",target:"#signUpActor.resolved"}],onError:{actions:"setConfirmAttributeCompleteStep",target:"#signUpActor.resolved"}};function LL({services:e}){return $i({id:"signUpActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldConfirmSignUp",target:"confirmSignUp"},{target:"signUp"}]},autoSignIn:{tags:"pending",invoke:{src:"autoSignIn",...NL}},fetchUserAttributes:{invoke:{src:"fetchUserAttributes",...OL}},federatedSignIn:M0("signUp"),resetPassword:{invoke:{src:"resetPassword",...PL}},resendSignUpCode:{tags:"pending",entry:"sendUpdate",exit:"sendUpdate",invoke:{src:"resendSignUpCode",onDone:{actions:["setCodeDeliveryDetails","sendUpdate"],target:"#signUpActor.confirmSignUp"},onError:[{cond:"isUserAlreadyConfirmed",target:"#signUpActor.resolved"},{actions:["setRemoteError","sendUpdate"]}]}},signUp:{type:"parallel",exit:"clearTouched",on:{FEDERATED_SIGN_IN:{target:"federatedSignIn"}},states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateSignUp",onDone:{actions:"clearValidationError",target:"valid"},onError:{actions:"setFieldErrors",target:"invalid"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{BLUR:{actions:"handleBlur",target:".pending"},CHANGE:{actions:"handleInput",target:".pending"}}},submission:{initial:"idle",states:{idle:{entry:["sendUpdate"],on:{SUBMIT:{actions:"handleSubmit",target:"validate"}}},validate:{entry:"sendUpdate",invoke:{src:"validateSignUp",onDone:{target:"handleSignUp",actions:"clearValidationError"},onError:{actions:"setFieldErrors",target:"idle"}}},handleSignUp:{tags:"pending",entry:["setUsernameSignUp","clearError"],exit:"sendUpdate",invoke:{src:"handleSignUp",onDone:[{cond:"hasCompletedSignUp",actions:"setNextSignUpStep",target:"#signUpActor.resolved"},{cond:"shouldAutoSignIn",actions:"setNextSignUpStep",target:"#signUpActor.autoSignIn"},{actions:["setCodeDeliveryDetails","setNextSignUpStep"],target:"#signUpActor.init"}],onError:{actions:["sendUpdate","setRemoteError"],target:"idle"}}}}}}},confirmSignUp:{initial:"edit",entry:"sendUpdate",states:{edit:{on:{SUBMIT:{actions:"handleSubmit",target:"submit"},CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"},RESEND:"#signUpActor.resendSignUpCode"}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"confirmSignUp",onDone:[{cond:"shouldAutoSignIn",actions:["setNextSignUpStep","clearFormValues"],target:"#signUpActor.autoSignIn"},{actions:"setNextSignUpStep",target:"#signUpActor.init"}],onError:{actions:["setRemoteError","sendUpdate"],target:"edit"}}}}},resolved:{type:"final",data:t=>({challengeName:t.challengeName,missingAttributes:t.missingAttributes,remoteError:t.remoteError,step:t.step,totpSecretCode:t.totpSecretCode,username:t.username,unverifiedUserAttributes:t.unverifiedUserAttributes})}}},{actions:{...la,sendUpdate:Il()},guards:Ll,services:{autoSignIn(){return Ad()},async fetchUserAttributes(){return by()},confirmSignUp({formValues:t,username:n}){const{confirmation_code:r}=t,i={username:n,confirmationCode:r};return e.handleConfirmSignUp(i)},resendSignUpCode({username:t}){return fy({username:t})},signInWithRedirect(t,{data:n}){return yy(n)},handleSignUp(t){const{formValues:n,loginMechanisms:r,username:i}=t,o=r[0],a=A5(i,n,o);return e.handleSignUp(a)},async validateSignUp(t){return Dl(t.formValues,t.touched,t.passwordSettings,[e.validateFormPassword,e.validateConfirmPassword,e.validatePreferredUsername,e.validateCustomSignUp])}}})}const DL=()=>$i({initial:"pending",id:"signOutActor",predictableActionArguments:!0,states:{pending:{tags:"pending",invoke:{src:"signOut",onDone:"resolved",onError:"rejected"}},resolved:{type:"final"},rejected:{type:"final"}}},{services:{signOut:()=>dx()}});function UL(){return $i({id:"verifyUserAttributesActor",initial:"selectUserAttributes",predictableActionArguments:!0,states:{selectUserAttributes:{initial:"edit",exit:["clearError","clearTouched","sendUpdate"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SKIP:{target:"#verifyUserAttributesActor.resolved"},CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"sendUserAttributeVerificationCode",onDone:{actions:["setSelectedUserAttribute","setCodeDeliveryDetails"],target:"#verifyUserAttributesActor.confirmVerifyUserAttribute"},onError:{actions:"setRemoteError",target:"edit"}}}}},confirmVerifyUserAttribute:{initial:"edit",exit:["clearError","clearFormValues","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SKIP:"#verifyUserAttributesActor.resolved",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"confirmVerifyUserAttribute",onDone:{actions:["setConfirmAttributeCompleteStep","clearSelectedUserAttribute"],target:"#verifyUserAttributesActor.resolved"},onError:{actions:"setRemoteError",target:"edit"}}}}},resolved:{type:"final",data:({step:e})=>({step:e})}}},{actions:{...la,sendUpdate:Il()},services:{sendUserAttributeVerificationCode({formValues:{unverifiedAttr:e}}){return px({userAttributeKey:e})},async confirmVerifyUserAttribute({formValues:{confirmation_code:e},selectedUserAttribute:t}){return F2({confirmationCode:e,userAttributeKey:t})},async validateFields(e){return Dl(e.formValues,e.touched,e.passwordSettings,[br.validateFormPassword,br.validateConfirmPassword])}}})}const ja=(e,t)=>{var n,r,i,o,a,s;return{...e.actorDoneData,step:((n=e==null?void 0:e.actorDoneData)==null?void 0:n.step)??t,formValues:{},touched:{},validationError:{},formFields:(r=e.config)==null?void 0:r.formFields,loginMechanisms:(i=e.config)==null?void 0:i.loginMechanisms,passwordSettings:(o=e.config)==null?void 0:o.passwordSettings,signUpAttributes:(a=e.config)==null?void 0:a.signUpAttributes,socialProviders:(s=e.config)==null?void 0:s.socialProviders}},{choose:FL,stop:BL}=Yy,co=e=>BL(e),jL={on:{INIT:{actions:"configure",target:"getConfig"},SIGN_OUT:"#authenticator.signOut"}},$L={always:{actions:"configure",target:"getConfig"}};function HL(e){const{useNextWaitConfig:t,...n}={};return $i({id:"authenticator",initial:"idle",context:{user:void 0,config:{},services:br,actorRef:void 0,hasSetup:!1},predictableActionArguments:!0,states:{idle:{invoke:{src:"handleGetCurrentUser",onDone:{actions:"setUser",target:"setup"},onError:{target:"setup"}}},setup:{initial:"initConfig",states:{initConfig:t?$L:jL,getConfig:{invoke:{src:"getAmplifyConfig",onDone:[{actions:["applyAmplifyConfig","setHasSetup"],cond:"hasUser",target:"#authenticator.authenticated"},{actions:["applyAmplifyConfig","setHasSetup"],target:"goToInitialState"}]}},goToInitialState:{always:[{cond:"isInitialStateSignUp",target:"#authenticator.signUpActor"},{cond:"isInitialStateResetPassword",target:"#authenticator.forgotPasswordActor"},{target:"#authenticator.signInActor"}]}}},getCurrentUser:{invoke:{src:"handleGetCurrentUser",onDone:{actions:"setUser",target:"#authenticator.authenticated"},onError:{target:"#authenticator.setup"}}},signInActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignInActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:co("signInActor")}},on:{FORGOT_PASSWORD:"forgotPasswordActor",SIGN_IN:"signInActor",SIGN_UP:"signUpActor","done.invoke.signInActor":[{cond:"hasCompletedAttributeConfirmation",target:"#authenticator.getCurrentUser"},{cond:"isShouldConfirmUserAttributeStep",actions:"setActorDoneData",target:"#authenticator.verifyUserAttributesActor"},{cond:"isResetPasswordStep",actions:"setActorDoneData",target:"#authenticator.forgotPasswordActor"},{cond:"isConfirmSignUpStep",actions:"setActorDoneData",target:"#authenticator.signUpActor"}]}},signUpActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignUpActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:co("signUpActor")}},on:{SIGN_IN:"signInActor","done.invoke.signUpActor":[{cond:"hasCompletedAttributeConfirmation",target:"#authenticator.getCurrentUser"},{cond:"isShouldConfirmUserAttributeStep",actions:"setActorDoneData",target:"#authenticator.verifyUserAttributesActor"},{cond:"isConfirmUserAttributeStep",target:"#authenticator.verifyUserAttributesActor"},{actions:"setActorDoneData",target:"#authenticator.signInActor"}]}},forgotPasswordActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnForgotPasswordActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:co("forgotPasswordActor")}},on:{SIGN_IN:"signInActor","done.invoke.forgotPasswordActor":[{target:"#authenticator.signInActor"}]}},verifyUserAttributesActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnVerifyUserAttributesActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:co("verifyUserAttributesActor")}},on:{"done.invoke.verifyUserAttributesActor":[{actions:"setActorDoneData",target:"#authenticator.getCurrentUser"}]}},authenticated:{initial:"idle",states:{idle:{on:{TOKEN_REFRESH:"refreshUser"}},refreshUser:{invoke:{src:"#authenticator.getCurrentUser",onDone:{actions:"setUser",target:"idle"},onError:{target:"#authenticator.signOut"}}}},on:{SIGN_OUT:"signOut"}},signOut:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignOutActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:co("signOutActor")}},on:{"done.invoke.signOutActor":{actions:"clearUser",target:"setup.getConfig"}}}},on:{SIGN_IN_WITH_REDIRECT:{target:"#authenticator.getCurrentUser"},CHANGE:{actions:"forwardToActor"},BLUR:{actions:"forwardToActor"},SUBMIT:{actions:"forwardToActor"},FEDERATED_SIGN_IN:{actions:"forwardToActor"},RESEND:{actions:"forwardToActor"},SIGN_IN:{actions:"forwardToActor"},SKIP:{actions:"forwardToActor"}}},{actions:{...la,forwardToActor:FL([{cond:"hasActor",actions:gk(({actorRef:r})=>r)}]),setActorDoneData:jn({actorDoneData:(r,i)=>({challengeName:i.data.challengeName,codeDeliveryDetails:i.data.codeDeliveryDetails,missingAttributes:i.data.missingAttributes,remoteError:i.data.remoteError,username:i.data.username,step:i.data.step,totpSecretCode:i.data.totpSecretCode,unverifiedUserAttributes:i.data.unverifiedUserAttributes})}),applyAmplifyConfig:jn({config(r,{data:i}){const{loginMechanisms:o=i.loginMechanisms??[],signUpAttributes:a=i.signUpAttributes??[],socialProviders:s=i.socialProviders??[],initialState:l,formFields:c,passwordSettings:u=i.passwordFormat??{}}=r.config;return o.length===0&&o.push("username"),{formFields:qL(c)??{},initialState:l,loginMechanisms:o,passwordSettings:u,signUpAttributes:a,socialProviders:s}}}),spawnSignInActor:jn({actorRef:(r,i)=>{const{services:o}=r,a=RL({services:o}).withContext(ja(r,"SIGN_IN"));return so(a,{name:"signInActor"})}}),spawnSignUpActor:jn({actorRef:(r,i)=>{const{services:o}=r,a=LL({services:o}).withContext(ja(r,"SIGN_UP"));return so(a,{name:"signUpActor"})}}),spawnForgotPasswordActor:jn({actorRef:(r,i)=>{const{services:o}=r,a=TL({services:o}).withContext(ja(r,"FORGOT_PASSWORD"));return so(a,{name:"forgotPasswordActor"})}}),spawnVerifyUserAttributesActor:jn({actorRef:r=>{const i=UL().withContext(ja(r));return so(i,{name:"verifyUserAttributesActor"})}}),spawnSignOutActor:jn({actorRef:r=>{const i=DL().withContext({user:r==null?void 0:r.user});return so(i,{name:"signOutActor"})}}),configure:jn((r,i)=>{const{services:o,...a}=Ox(n)?i.data??{}:n;return{services:{...br,...o},config:a}}),setHasSetup:jn({hasSetup:!0})},guards:{...Ll,hasActor:({actorRef:r})=>!!r,isInitialStateSignUp:({config:r})=>r.initialState==="signUp",isInitialStateResetPassword:({config:r})=>r.initialState==="forgotPassword",shouldSetup:({hasSetup:r})=>!r,hasUser:({user:r})=>!!r},services:{getAmplifyConfig:({services:r})=>r.getAmplifyConfig(),handleGetCurrentUser:({services:r})=>r.getCurrentUser()}})}function qL(e){return e&&Object.keys(e).forEach(t=>{Object.keys(e[t]).forEach(n=>{let r=e[t][n];r.required=r.isRequired})}),e}const Ot={Accordion:"amplify-accordion",AccordionItem:"amplify-accordion__item",AccordionItemTrigger:"amplify-accordion__item__trigger",AccordionItemContent:"amplify-accordion__item__content",AccordionItemIcon:"amplify-accordion__item__icon",Alert:"amplify-alert",AlertIcon:"amplify-alert__icon",AlertHeading:"amplify-alert__heading",AlertBody:"amplify-alert__body",AlertDismiss:"amplify-alert__dismiss",Autocomplete:"amplify-autocomplete",AutocompleteMenu:"amplify-autocomplete__menu",AutocompleteMenuEmpty:"amplify-autocomplete__menu--empty",AutocompleteMenuFooter:"amplify-autocomplete__menu__footer",AutocompleteMenuHeader:"amplify-autocomplete__menu__header",AutocompleteMenuLoading:"amplify-autocomplete__menu--loading",AutocompleteMenuOption:"amplify-autocomplete__menu__option",AutocompleteMenuOptions:"amplify-autocomplete__menu__options",Badge:"amplify-badge",Breadcrumbs:"amplify-breadcrumbs",BreadcrumbsList:"amplify-breadcrumbs__list",BreadcrumbsItem:"amplify-breadcrumbs__item",BreadcrumbsSeparator:"amplify-breadcrumbs__separator",BreadcrumbsLink:"amplify-breadcrumbs__link",Button:"amplify-button",ButtonGroup:"amplify-buttongroup",ButtonLoaderWrapper:"amplify-button__loader-wrapper",Card:"amplify-card",Checkbox:"amplify-checkbox",CheckboxButton:"amplify-checkbox__button",CheckboxIcon:"amplify-checkbox__icon",CheckboxInput:"amplify-checkbox__input",CheckboxLabel:"amplify-checkbox__label",CheckboxField:"amplify-checkboxfield",Collection:"amplify-collection",CollectionItems:"amplify-collection-items",CollectionSearch:"amplify-collection-search",CollectionPagination:"amplify-collection-pagination",CountryCodeSelect:"amplify-countrycodeselect",DialCodeSelect:"amplify-dialcodeselect",Divider:"amplify-divider",DividerLabel:"amplify-divider--label",DropZone:"amplify-dropzone",Field:"amplify-field",FieldDescription:"amplify-field__description",FieldErrorMessage:"amplify-field__error-message",FieldGroup:"amplify-field-group",FieldGroupControl:"amplify-field-group__control",FieldGroupOuterEnd:"amplify-field-group__outer-end",FieldGroupOuterStart:"amplify-field-group__outer-start",FieldGroupInnerEnd:"amplify-field-group__inner-end",FieldGroupInnerStart:"amplify-field-group__inner-start",FieldGroupIcon:"amplify-field-group__icon",FieldGroupIconButton:"amplify-field-group__icon-button",FieldGroupHasInnerEnd:"amplify-field-group--has-inner-end",FieldGroupHasInnerStart:"amplify-field-group--has-inner-start",FieldShowPassword:"amplify-field__show-password",FieldGroupFieldWrapper:"amplify-field-group__field-wrapper",Fieldset:"amplify-fieldset",FieldsetLegend:"amplify-fieldset__legend",Flex:"amplify-flex",Grid:"amplify-grid",Heading:"amplify-heading",HighlightMatch:"amplify-highlightmatch",HighlightMatchHighlighted:"amplify-highlightmatch__highlighted",Icon:"amplify-icon",Image:"amplify-image",Input:"amplify-input",Label:"amplify-label",Link:"amplify-link",Loader:"amplify-loader",LoaderLabel:"amplify-loader__label",MenuContent:"amplify-menu__content",MenuItem:"amplify-menu__content__item",MenuTrigger:"amplify-menu__trigger",MenuWrapper:"amplify-menu__wrapper",Message:"amplify-message",MessageIcon:"amplify-message__icon",MessageHeading:"amplify-message__heading",MessageBody:"amplify-message__body",MessageContent:"amplify-message__content",MessageDismiss:"amplify-message__dismiss",Pagination:"amplify-pagination",PaginationItem:"amplify-pagination__item",PasswordField:"amplify-passwordfield",PhoneNumberField:"amplify-phonenumberfield",Placeholder:"amplify-placeholder",Radio:"amplify-radio",RadioButton:"amplify-radio__button",RadioInput:"amplify-radio__input",RadioLabel:"amplify-radio__label",RadioGroupField:"amplify-radiogroupfield",RadioGroup:"amplify-radiogroup",Rating:"amplify-rating",RatingItem:"amplify-rating__item",RatingIcon:"amplify-rating__icon",RatingLabel:"amplify-rating__label",ScrollView:"amplify-scrollview",SearchField:"amplify-searchfield",SearchFieldClear:"amplify-searchfield__clear",SearchFieldSearch:"amplify-searchfield__search",Select:"amplify-select",SelectField:"amplify-selectfield",SelectWrapper:"amplify-select__wrapper",SelectIcon:"amplify-select__icon",SliderField:"amplify-sliderfield",SliderFieldGroup:"amplify-sliderfield__group",SliderFieldLabel:"amplify-sliderfield__label",SliderFieldRange:"amplify-sliderfield__range",SliderFieldRoot:"amplify-sliderfield__root",SliderFieldThumb:"amplify-sliderfield__thumb",SliderFieldTrack:"amplify-sliderfield__track",StepperField:"amplify-stepperfield",StepperFieldButtonDecrease:"amplify-stepperfield__button--decrease",StepperFieldButtonIncrease:"amplify-stepperfield__button--increase",StepperFieldInput:"amplify-stepperfield__input",StorageImage:"amplify-storageimage",StorageManager:"amplify-storagemanager",StorageManagerDropZone:"amplify-storagemanager__dropzone",StorageManagerDropZoneIcon:"amplify-storagemanager__dropzone__icon",StorageManagerDropZoneText:"amplify-storagemanager__dropzone__text",StorageManagerFilePicker:"amplify-storagemanager__file__picker",StorageManagerFile:"amplify-storagemanager__file",StorageManagerFileWrapper:"amplify-storagemanager__file__wrapper",StorageManagerFileList:"amplify-storagemanager__file__list",StorageManagerFileName:"amplify-storagemanager__file__name",StorageManagerFileSize:"amplify-storagemanager__file__size",StorageManagerFileInfo:"amplify-storagemanager__file__info",StorageManagerFileImage:"amplify-storagemanager__file__image",StorageManagerFileMain:"amplify-storagemanager__file__main",StorageManagerFileStatus:"amplify-storagemanager__file__status",StorageManagerLoader:"amplify-storagemanager__loader",StorageManagerPreviewer:"amplify-storagemanager__previewer",StorageManagerPreviewerText:"amplify-storagemanager__previewer__text",StorageManagerPreviewerActions:"amplify-storagemanager__previewer__actions",StorageManagerPreviewerFooter:"amplify-storagemanager__previewer__footer",SwitchField:"amplify-switchfield",SwitchLabel:"amplify-switch__label",SwitchThumb:"amplify-switch__thumb",SwitchTrack:"amplify-switch__track",SwitchWrapper:"amplify-switch__wrapper",Table:"amplify-table",TableCaption:"amplify-table__caption",TableBody:"amplify-table__body",TableTd:"amplify-table__td",TableTh:"amplify-table__th",TableFoot:"amplify-table__foot",TableHead:"amplify-table__head",TableRow:"amplify-table__row",Tabs:"amplify-tabs",TabsList:"amplify-tabs__list",TabsItem:"amplify-tabs__item",TabsPanel:"amplify-tabs__panel",Text:"amplify-text",Textarea:"amplify-textarea",TextAreaField:"amplify-textareafield",TextField:"amplify-textfield",ToggleButton:"amplify-togglebutton",ToggleButtonGroup:"amplify-togglebuttongroup",VisuallyHidden:"amplify-visually-hidden"},zL=({componentName:e,packageName:t,version:n})=>{const r=[`ui-${t}`,n];switch(e){case"Authenticator":{ai({...Ax,additionalDetails:[[e],r]});break}case"ChangePassword":case"DeleteUser":{ai({...xx,additionalDetails:[["AccountSettings"],r]});break}case"InAppMessaging":{ai({...kx,additionalDetails:[[e],r]});break}case"LocationSearch":{ai({...Tx,additionalDetails:[[e],r]});break}case"MapView":{ai({...Mx,additionalDetails:[[e],r]});break}case"StorageManager":{ai({...Rx,additionalDetails:[[e],r]});break}}return Dx},VL={key:0,class:"amplify-flex amplify-alert amplify-alert--error amplify-authenticator__base","data-variation":"error",role:"alert"},WL={class:"amplify-flex amplify-authenticator__icon-wrapper"},KL=te("svg",{xmlns:"http://www.w3.org/2000/svg",class:"amplify-icon","aria-hidden":"true",viewBox:"0 0 24 24",fill:"currentColor"},[te("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})],-1),GL=te("svg",{xmlns:"http://www.w3.org/2000/svg",class:"amplify-icon","aria-hidden":"true",viewBox:"0 0 24 24",fill:"currentColor"},[te("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1),Un=We({__name:"base-alert",setup(e){const t=ot(!0),n=ae("Dismiss alert");function r(){t.value=!1}return(i,o)=>{const a=un;return t.value?(re(),Qe("div",VL,[te("div",WL,[KL,te("div",null,[V(i.$slots,"default")])]),R(a,{class:"amplify-field-group__control amplify-alert__dismiss","aria-label":w(n),fullwidth:!1,variation:"link",type:"button",onClick:r},{default:A(()=>[GL]),_:1},8,["aria-label"])])):Oe("",!0)}}}),Fn=We({__name:"base-field-set",setup(e){const t=sd();return(n,r)=>V(n.$slots,"fieldSetI",nn(n.$attrs,{slotData:w(t).default&&w(t).default()}),()=>[te("fieldset",nn(n.$attrs,{"data-amplify-fieldset":""}),[V(n.$slots,"default")],16)])}});function YL(e){return _g()?(Sg(e),!0):!1}function R0(e){let t=0,n,r;const i=()=>{t-=1,r&&t<=0&&(r.stop(),n=void 0,r=void 0)};return(...o)=>(t+=1,n||(r=X1(!0),n=r.run(()=>e(...o))),YL(i),n)}function JL(e){return"state"in e}var pm=function(){};function ZL(e){return"getSnapshot"in e?e.getSnapshot():JL(e)?e.state:void 0}function XL(e,t){t===void 0&&(t=ZL);var n=Rt(e)?e:Bf(e),r=Bf(t(n.value)),i=function(o){n.value.send(o)};return Ja(n,function(o,a,s){r.value=t(o);var l=o.subscribe({next:function(c){return r.value=c},error:pm,complete:pm}).unsubscribe;s(function(){return l()})},{immediate:!0}),{state:r,send:i}}const QL=e=>{var t,n,r;return{...(r=(n=(t=Rd(e))==null?void 0:t.formFields)==null?void 0:n.setupTotp)==null?void 0:r.QR}},rf=R0(()=>{const e=HL(),t=t0(e).start(),n=ot("configuring"),{state:r,send:i}=XL(t),o=()=>{n.value="authenticated"},a=()=>{n.value="unauthenticated"},s=Ux(t,(l,c)=>Ey(l,c,{onSignIn:o,onSignOut:a}));return ul().then(()=>{n.value="authenticated"}).catch(()=>{n.value="unauthenticated"}),Sg(()=>{s()}),{authStatus:n,service:t,send:i,state:r}}),Kt=R0(()=>{const{authStatus:e,state:t,send:n}=rf(),r=Zo({});return Wb(()=>{const i=qx({send:n,state:t.value});for(const a of Object.keys(i))r[a]=i[a];const o=i.route==="setupTotp"?QL(t.value):null;r.QRFields=o,r.authStatus=e.value,r.send=n,r.state=t}),r});let e9=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=n[e]&63;r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r<63?t+="_":t+="-"}return t};const of=We({__name:"base-input",emits:["update:modelValue"],setup(e,{emit:t}){const n=r=>{t("update:modelValue",r.target.value)};return(r,i)=>(re(),Qe("input",{onChange:i[0]||(i[0]=o=>n(o)),"data-amplify-input":""},null,32))}}),t9={},n9={"data-amplify-label":""};function r9(e,t){return re(),Qe("label",n9,[V(e.$slots,"default")])}const af=vl(t9,[["render",r9]]),i9=["aria-label","aria-checked"],o9=te("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},null,-1),a9=[o9],s9=te("path",{d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z",fill:"none"},null,-1),l9=te("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},null,-1),c9=[s9,l9],u9={inheritAttrs:!1},d9=We({...u9,__name:"password-control",props:{name:null,label:null,autocomplete:{default:"new-password"},hasError:{type:Boolean,default:!1},labelHidden:{type:Boolean},placeholder:null,required:{type:Boolean,default:!0},describedBy:null},setup(e){const t=e,n=ae("Show password"),r=ae("Hide password"),i=ot("password"),o=ot(n),a=Math.floor(Math.random()*999999),{name:s,label:l,autocomplete:c,hasError:u,labelHidden:d,placeholder:f,required:h}=lt(t),p=ot("");function m(){o.value=o.value===n?r:n,i.value=i.value==="password"?"text":"password"}const y=ae((f==null?void 0:f.value)??l.value),g=ae(l.value);return(v,b)=>{const E=af,C=of,x=Wt;return re(),Se(x,{class:Xt([w(Ot).Flex,w(Ot).Field,w(Ot).TextField,w(Ot).PasswordField])},{default:A(()=>[R(E,{class:Xt(["amplify-label",{"amplify-visually-hidden":w(d)}]),for:"amplify-field-"+w(a)},{default:A(()=>[me(ue(w(g)),1)]),_:1},8,["class","for"]),R(x,{class:Xt([w(Ot).Flex,w(Ot).FieldGroup])},{default:A(()=>[R(x,{class:Xt(w(Ot).FieldGroupFieldWrapper)},{default:A(()=>[R(C,nn(v.$attrs,{modelValue:p.value,"onUpdate:modelValue":b[0]||(b[0]=O=>p.value=O),class:[w(Ot).Input,w(Ot).FieldGroupControl],id:"amplify-field-"+w(a),"data-amplify-password":"true",name:w(s),autocomplete:w(c),required:w(h)??!0,placeholder:w(y),type:i.value,"aria-invalid":w(u),"aria-describedBy":e.describedBy,autocapitalize:"off"}),null,16,["modelValue","class","id","name","autocomplete","required","placeholder","type","aria-invalid","aria-describedBy"])]),_:1},8,["class"]),R(x,{class:Xt(w(Ot).FieldGroupOuterEnd)},{default:A(()=>[te("button",{"aria-label":o.value,"aria-checked":i.value!=="password",class:Xt([w(Ot).Button,w(Ot).FieldGroupControl,w(Ot).FieldShowPassword]),"data-fullwidth":"false",type:"button",role:"switch",onClick:m},[i.value==="password"?(re(),Qe("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",class:Xt(w(Ot).Icon)},a9,2)):(re(),Qe("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",class:Xt(w(Ot).Icon)},c9,2))],10,i9)]),_:1},8,["class"])]),_:1},8,["class"])]),_:1},8,["class"])}}}),f9=["value","selected"],h9=We({__name:"base-select",props:{selectValue:{default:""},options:null},emits:["update:selectValue"],setup(e,{emit:t}){const n=e,{options:r,selectValue:i}=lt(n),o=a=>{t("update:selectValue",a.target.value)};return(a,s)=>(re(),Qe("select",{onChange:s[0]||(s[0]=l=>o(l))},[(re(!0),Qe(mt,null,Xs(w(r),(l,c)=>(re(),Qe("option",{key:c,value:l,selected:l==w(i)?!0:void 0},ue(l),9,f9))),128))],32))}}),p9=te("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",class:"amplify-icon"},[te("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})],-1),m9=We({__name:"alias-control",props:{label:{default:"Username"},name:{default:"username"},placeholder:{default:""},autocomplete:{default:""},labelHidden:{type:Boolean},required:{type:Boolean,default:!0},dialCode:null,dialCodeList:null,type:{default:"text"},hasError:{type:Boolean},describedBy:null},setup(e){const t=e,{label:n,name:r,placeholder:i,autocomplete:o,labelHidden:a,required:s,dialCode:l,dialCodeList:c}=lt(t),u=Math.floor(Math.random()*999999),d=Math.floor(Math.random()*999999);return(f,h)=>{const p=af,m=h9,y=Wt,g=of;return re(),Se(y,{class:"amplify-flex amplify-field amplify-textfield amplify-phonenumberfield"},{default:A(()=>[R(p,nn({for:"amplify-field-"+w(u),class:["amplify-label",{"amplify-visually-hidden":w(a)}]},f.$attrs),{default:A(()=>[me(ue(w(n)),1)]),_:1},16,["for","class"]),R(y,{class:"amplify-flex amplify-field-group"},{default:A(()=>[R(y,{class:"amplify-field-group__outer-start"},{default:A(()=>[e.type==="tel"?(re(),Se(y,{key:0,class:"amplify-flex amplify-field amplify-selectfield amplify-countrycodeselect amplify-dialcodeselect amplify-authenticator__column"},{default:A(()=>[R(p,nn({for:"amplify-field-"+w(d),class:"amplify-label amplify-visually-hidden"},f.$attrs),{default:A(()=>[me(ue("Country Code"))]),_:1},16,["for"]),R(y,{class:"amplify-select__wrapper"},{default:A(()=>[R(m,{class:"amplify-select amplify-field-group__control",id:"amplify-field-"+w(d),autocomplete:"tel-country-code","aria-label":"country code",name:"country_code",options:w(c),"select-value":w(l)},null,8,["id","options","select-value"]),R(y,{class:"amplify-flex amplify-select__icon"},{default:A(()=>[p9]),_:1})]),_:1})]),_:1})):Oe("",!0)]),_:1}),R(y,{class:"amplify-field-group__field-wrapper"},{default:A(()=>[R(g,{class:"amplify-input amplify-field-group__control",id:"amplify-field-"+w(u),autocomplete:w(o),name:w(r),required:w(s)??!0,type:e.type,placeholder:w(i),"aria-invalid":e.hasError,"aria-describedBy":e.describedBy,autocapitalize:"off"},null,8,["id","autocomplete","name","required","type","placeholder","aria-invalid","aria-describedBy"])]),_:1})]),_:1})]),_:1})}}}),g9=["id"],v9=We({__name:"base-form-field",props:{name:{default:""},formField:{default:()=>({})}},setup(e){const t=e,{name:n,formField:r}=lt(t),{validationErrors:i}=lt(Kt()),{type:o}=r.value,a=o==="password",s=e9(12),l=ye(()=>Gx(i.value[n.value])),c=ye(()=>{var d;return((d=l.value)==null?void 0:d.length)>0}),u=ye(()=>c.value?s:void 0);return(d,f)=>(re(),Qe(mt,null,[a?(re(),Se(d9,{key:0,name:w(n),label:w(r).label,placeholder:w(r).placeholder,required:w(r).isRequired,"label-hidden":w(r).labelHidden,autocomplete:w(r).autocomplete,hasError:w(c),describedBy:w(u)},null,8,["name","label","placeholder","required","label-hidden","autocomplete","hasError","describedBy"])):(re(),Se(m9,{key:1,name:w(n),label:w(r).label,placeholder:w(r).placeholder,required:w(r).isRequired,"label-hidden":w(r).labelHidden,autocomplete:w(r).autocomplete,"dial-code":w(r).dialCode,"dial-code-list":w(r).dialCodeList,type:w(r).type,hasError:w(c),describedBy:w(u)},null,8,["name","label","placeholder","required","label-hidden","autocomplete","dial-code","dial-code-list","type","hasError","describedBy"])),w(c)?(re(),Qe("div",{key:2,id:w(u)},[(re(!0),Qe(mt,null,Xs(w(l),(h,p)=>(re(),Qe("p",{key:p,role:"alert","data-variation":"error",class:"amplify-text amplify-text--error"},ue(w(ae)(h)),1))),128))],8,g9)):Oe("",!0)],64))}}),Qn=We({__name:"base-form-fields",props:{route:null},setup(e){const t=e,{route:n}=lt(t),{state:r}=rf();let i=[];return Yg(()=>{i=yA(n.value,r.value)}),(o,a)=>(re(!0),Qe(mt,null,Xs(w(i),([s,l])=>(re(),Se(v9,{name:s,key:s,formField:l},null,8,["name","formField"]))),128))}}),$a=We({__name:"federated-sign-in-button",props:{provider:null},setup(e){const t=e,{provider:n}=lt(t),{toFederatedSignIn:r}=Kt(),i=()=>{r({provider:n.value})};return(o,a)=>{const s=un;return re(),Se(s,{class:"amplify-authenticator__federated-button",type:"button",onClick:i},{default:A(()=>[V(o.$slots,"default")]),_:3})}}}),y9=te("svg",{"aria-label":"Amazon icon",class:"amplify-icon",viewBox:"0 0 248 268"},[te("path",{d:"M139.056521,147.024612 C133.548808,156.744524 124.782731,162.726926 115.087401,162.726926 C101.790721,162.726926 93.9937779,152.612964 93.9937779,137.68681 C93.9937779,108.224571 120.447551,102.879017 145.533369,102.879017 L145.533369,110.365976 C145.533369,123.831358 145.876354,135.063787 139.056521,147.024612 M207.206992,162.579655 C209.400505,165.692256 209.887066,169.437725 207.063416,171.770186 C199.996315,177.653081 187.429476,188.590967 180.513926,194.716661 L180.46208,194.621133 C178.176838,196.663031 174.862638,196.810303 172.27828,195.445057 C160.780281,185.9162 158.686473,181.494078 152.405048,172.403055 C133.405233,191.751331 119.909143,197.534719 95.309886,197.534719 C66.1281801,197.534719 43.4791563,179.599451 43.4791563,143.669212 C43.4791563,115.616003 58.6782107,96.5105248 80.4019706,87.1727225 C99.2063636,78.9096034 125.464714,77.4528107 145.533369,75.1641337 L145.533369,70.694248 C145.533369,62.4749122 146.167493,52.7510201 141.297893,45.6541312 C137.110277,39.2856386 129.018206,36.6586354 121.859376,36.6586354 C108.658413,36.6586354 96.9171331,43.4171982 94.0416364,57.4199213 C93.4593582,60.532522 91.1701278,63.5933787 88.003492,63.7406501 L54.4387473,60.1424518 C51.6150972,59.5095829 48.4484614,57.2248862 49.2740201,52.8982915 C56.9712583,12.2553679 93.7983558,0 126.732964,0 C143.587124,0 165.606011,4.47386604 178.902691,17.2148315 C195.760839,32.917146 194.149604,53.8694866 194.149604,76.6726704 L194.149604,130.542157 C194.149604,146.734049 200.87372,153.830938 207.206992,162.579655 Z M233.826346,208.038962 C230.467669,203.683255 211.550709,205.9821 203.056405,206.998432 C200.470662,207.321077 200.076227,205.042397 202.406981,203.404973 C217.475208,192.664928 242.201125,195.766353 245.081698,199.363845 C247.966255,202.981502 244.336653,228.071183 230.172839,240.049379 C228.001452,241.888455 225.929671,240.904388 226.89783,238.468418 C230.077218,230.430525 237.204944,212.418868 233.826346,208.038962 Z M126.768855,264 C74.0234043,264 42.0764048,241.955028 17.7852554,217.541992 C12.9733903,212.705982 6.71799208,206.295994 3.31151296,200.690918 C1.90227474,198.372135 5.59096074,195.021875 8.0442063,196.84375 C38.2390146,219.267578 82.1011654,239.538304 125.529506,239.538304 C154.819967,239.538304 191.046475,227.469543 220.66851,214.867659 C225.146771,212.966167 225.146771,219.180222 224.511585,221.060516 C224.183264,222.03242 209.514625,236.221149 189.247207,247.047411 C170.304273,257.166172 146.397132,264 126.768855,264 Z",fill:"#FF9900"})],-1),b9={class:"amplify-text"},_9=te("svg",{"aria-label":"Apple icon",class:"amplify-icon",fill:"#000",preserveAspectRatio:"xMidYMid",stroke:"#000",strokeWidth:"0",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[te("path",{d:"M747.4 535.7c-.4-68.2 30.5-119.6 92.9-157.5-34.9-50-87.7-77.5-157.3-82.8-65.9-5.2-138 38.4-164.4 38.4-27.9 0-91.7-36.6-141.9-36.6C273.1 298.8 163 379.8 163 544.6c0 48.7 8.9 99 26.7 150.8 23.8 68.2 109.6 235.3 199.1 232.6 46.8-1.1 79.9-33.2 140.8-33.2 59.1 0 89.7 33.2 141.9 33.2 90.3-1.3 167.9-153.2 190.5-221.6-121.1-57.1-114.6-167.2-114.6-170.7zm-105.1-305c50.7-60.2 46.1-115 44.6-134.7-44.8 2.6-96.6 30.5-126.1 64.8-32.5 36.8-51.6 82.3-47.5 133.6 48.4 3.7 92.6-21.2 129-63.7z"})],-1),S9={class:"amplify-text"},w9=te("svg",{"aria-label":"Facebook icon",class:"amplify-icon",viewBox:"0 0 279 538"},[te("path",{d:"M82.3409742,538 L82.3409742,292.936652 L0,292.936652 L0,196.990154 L82.2410458,196.990154 L82.2410458,126.4295 C82.2410458,44.575144 132.205229,0 205.252865,0 C240.227794,0 270.306232,2.59855099 279,3.79788222 L279,89.2502322 L228.536175,89.2502322 C188.964542,89.2502322 181.270057,108.139699 181.270057,135.824262 L181.270057,196.89021 L276.202006,196.89021 L263.810888,292.836708 L181.16913,292.836708 L181.16913,538 L82.3409742,538 Z",fill:"#1877F2"})],-1),E9={class:"amplify-text"},C9=te("svg",{"aria-label":"Google icon",class:"amplify-icon",viewBox:"0 0 256 262",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},[te("path",{d:"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027",fill:"#4285F4"}),te("path",{d:"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1",fill:"#34A853"}),te("path",{d:"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782",fill:"#FBBC05"}),te("path",{d:"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251",fill:"#EB4335"})],-1),I9={class:"amplify-text"},x9=["data-label"],P0=We({__name:"federated-sign-in",setup(e){const t=Kt(),{route:n,socialProviders:r}=t,i=r==null?void 0:r.includes("amazon"),o=r==null?void 0:r.includes("apple"),a=r==null?void 0:r.includes("facebook"),s=r==null?void 0:r.includes("google"),l=a||s||i||o,{getSignInWithFederationText:c,getOrText:u}=dn,d=ye(()=>yu),f=ye(()=>c(n,"amazon")),h=ye(()=>c(n,"apple")),p=ye(()=>c(n,"facebook")),m=ye(()=>c(n,"google")),y=ye(()=>u());return(g,v)=>{const b=Wt;return w(l)?(re(),Se(b,{key:0,class:"amplify-flex amplify-authenticator__federated-buttons"},{default:A(()=>[w(i)?(re(),Se($a,{key:0,provider:w(d).Amazon},{default:A(()=>[y9,te("span",b9,ue(w(f)),1)]),_:1},8,["provider"])):Oe("",!0),w(o)?(re(),Se($a,{key:1,provider:w(d).Apple},{default:A(()=>[_9,te("span",S9,ue(w(h)),1)]),_:1},8,["provider"])):Oe("",!0),w(a)?(re(),Se($a,{key:2,provider:w(d).Facebook},{default:A(()=>[w9,te("span",E9,ue(w(p)),1)]),_:1},8,["provider"])):Oe("",!0),w(s)?(re(),Se($a,{key:3,provider:w(d).Google},{default:A(()=>[C9,te("span",I9,ue(w(m)),1)]),_:1},8,["provider"])):Oe("",!0),te("hr",{class:"amplify-divider amplify-divider--horizontal amplify-divider--small","aria-orientation":"horizontal","data-label":w(y)},null,8,x9)]),_:1})):Oe("",!0)}}}),A9=te("legend",{class:"amplify-visually-hidden"},"Sign in",-1),k9={"data-amplify-footer":""},T9=We({__name:"sign-in",setup(e){const t=Kt(),{submitForm:n,updateForm:r,toForgotPassword:i}=t,{error:o,isPending:a}=lt(t),{getForgotPasswordText:s,getSignInText:l,getSigningInText:c}=dn,u=ye(()=>s()),d=ye(()=>l()),f=ye(()=>c()),h=y=>{const{name:g,value:v}=y.target;r({name:g,value:v})},p=y=>{n(Ln(y))},m=()=>{i()};return(y,g)=>{const v=Fn,b=Un,E=un,C=Wt,x=On,O=Nn;return V(y.$slots,"signInSlotI",pt(ct(y.$attrs)),()=>[V(y.$slots,"header"),R(C,pt(ct(y.$attrs)),{default:A(()=>[R(x,{"data-amplify-authenticator-signin":"",onInput:h,onSubmit:Et(p,["prevent"]),method:"post"},{formt:A(({slotData:U})=>[V(y.$slots,"form",{info:U,onSignInSubmit:p,onInput:h,onForgotPasswordClicked:m})]),default:A(()=>[R(P0),R(C,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[R(v,{disabled:w(a),class:"amplify-flex amplify-authenticator__column"},{fieldSetI:A(({slotData:U})=>[V(y.$slots,"signin-fields",{info:U})]),default:A(()=>[A9,R(Qn,{route:"signIn"})]),_:3},8,["disabled"]),w(o)?(re(),Se(b,{key:0},{default:A(()=>[me(ue(w(ae)(w(o))),1)]),_:1})):Oe("",!0),R(E,{disabled:w(a),class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!0,loading:!1,variation:"primary"},{default:A(()=>[me(ue(w(a)?w(f):w(d)),1)]),_:1},8,["disabled"])]),_:3})]),_:3},8,["onSubmit"])]),_:3},16),R(O,null,{default:A(()=>[V(y.$slots,"footer",{},()=>[te("div",k9,[R(E,{onClick:m,class:"amplify-field-group__control amplify-authenticator__font",variation:"link",fullwidth:!0,size:"small",style:{"font-weight":"normal"},type:"button"},{default:A(()=>[me(ue(w(u)),1)]),_:1})])])]),_:3})])}}}),M9=We({__name:"authenticator-sign-up-form-fields",setup(e){return(t,n)=>(re(),Se(Qn,{route:"signUp"}))}}),R9=We({__name:"sign-up",setup(e){const t=Kt(),{submitForm:n,updateBlur:r,updateForm:i}=t,{error:o,hasValidationErrors:a,isPending:s}=lt(t),{getCreateAccountText:l}=dn,c=ye(()=>l()),u=h=>{const{checked:p,name:m,type:y,value:g}=h.target;i({name:m,value:y==="checkbox"&&!p?void 0:g})};function d(h){const{name:p}=h.target;r({name:p})}const f=h=>{n(Ln(h))};return(h,p)=>{const m=Fn,y=Un,g=un,v=Wt,b=On,E=Nn;return V(h.$slots,"signUpSlotI",pt(ct(h.$attrs)),()=>[V(h.$slots,"header"),R(v,pt(ct(h.$attrs)),{default:A(()=>[R(b,{onInput:u,onBlurCapture:d,onSubmit:Et(f,["prevent"])},{default:A(()=>[R(P0),R(v,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[R(m,{class:"amplify-flex amplify-authenticator__column",disabled:w(s)},{fieldSetI:A(({slotData:C})=>[V(h.$slots,"signup-fields",{info:C})]),default:A(()=>[R(M9)]),_:3},8,["disabled"]),w(o)?(re(),Se(y,{key:0},{default:A(()=>[me(ue(w(ae)(w(o))),1)]),_:1})):Oe("",!0),R(g,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!0,loading:!1,variation:"primary",style:{"border-radius":"0px","font-weight":"normal"},disabled:w(s)||w(a)},{default:A(()=>[me(ue(w(c)),1)]),_:1},8,["disabled"])]),_:3})]),_:3},8,["onSubmit"])]),_:3},16),R(E,null,{default:A(()=>[V(h.$slots,"footer")]),_:3})])}}}),P9={};function N9(e,t){const n=Wt;return re(),Se(n,{tabindex:"0","aria-orientation":"horizontal","data-orientation":"horizontal",class:"amplify-authenticator__tabs amplify-tabs"},{default:A(()=>[R(n,{class:"amplify-tabs__list amplify-tabs__list--top amplify-tabs__list--equal amplify-authenticator__tabs-wrapper",role:"tablist"},{default:A(()=>[V(e.$slots,"default")]),_:3})]),_:3})}const O9=vl(P9,[["render",N9]]),L9=["tabindex","aria-selected","id","aria-controls"],D9=We({__name:"base-two-tab-item",props:{label:null,id:null,active:{type:Boolean,default:!1}},setup(e){const t=e,{active:n,id:r,label:i}=lt(t);return(o,a)=>(re(),Qe("button",{tabindex:w(n)?0:-1,"aria-selected":w(n)?"true":"false",class:Xt([{"amplify-tabs__item--active":w(n)},"amplify-tabs__item"]),id:`${w(r)}-tab`,"aria-controls":`${w(r)}-panel`,role:"tab"},ue(w(i)),11,L9))}}),U9="4.2.8",F9={};function B9(e,t){return V(e.$slots,"textI",pt(ct(e.$attrs)),()=>[te("span",nn(e.$attrs,{"data-amplify-text":""}),[V(e.$slots,"default")],16)])}const N0=vl(F9,[["render",B9]]),Er=We({props:{level:{type:Number,default:1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n}){var r,i;const o=t.default?t.default():[],a=t.headingI?t.headingI():[],s=`${n.class||""} amplify-heading--${e.level}`;if(((i=(r=a[0])==null?void 0:r.children)==null?void 0:i.length)===0)a[0].children=[xa(`h${e.level}`,{...n,class:s},[o])];else return()=>xa(`h${e.level}`,{"data-amplify-heading":"",...n,class:s},[a[0]?xa(a[0].children[0]):xa(o[0])]);return()=>a}}),j9=We({__name:"confirm-sign-up",setup(e){const t=Kt(),{codeDeliveryDetails:n,error:r,isPending:i}=lt(t),{resendCode:o,submitForm:a,updateForm:s}=t,{getDeliveryMethodText:l,getDeliveryMessageText:c,getResendCodeText:u,getConfirmText:d}=dn,f=ye(()=>l(n.value)),h=ye(()=>u()),p=ye(()=>d()),m=ye(()=>c(n.value)),y=E=>{const{name:C,value:x}=E.target;s({name:C,value:x})},g=E=>{v(E)},v=E=>{a(Ln(E))},b=()=>{o()};return(E,C)=>{const x=Er,O=N0,U=Fn,H=Un,G=un,q=Nn,z=Wt,Y=On;return V(E.$slots,"confirmSignUpSlotI",pt(ct(E.$attrs)),()=>[R(z,pt(ct(E.$attrs)),{default:A(()=>[R(Y,{onInput:y,onSubmit:Et(g,["prevent"])},{default:A(()=>[R(z,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[V(E.$slots,"header",{},()=>[R(x,{class:"amplify-heading amplify-authenticator__heading",level:3},{default:A(()=>[me(ue(w(f)),1)]),_:1})]),R(O,{class:"amplify-authenticator__subtitle"},{default:A(()=>[me(ue(w(m)),1)]),_:1}),R(U,{class:"amplify-flex amplify-authenticator__column",disabled:w(i)},{default:A(()=>[R(Qn,{route:"confirmSignUp"})]),_:1},8,["disabled"]),R(q,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[w(r)?(re(),Se(H,{key:0},{default:A(()=>[me(ue(w(ae)(w(r))),1)]),_:1})):Oe("",!0),R(G,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,loading:!1,variation:"primary",type:"submit",disabled:w(i)},{default:A(()=>[me(ue(w(p)),1)]),_:1},8,["disabled"]),R(G,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,variation:"default",style:{"font-weight":"normal"},type:"button",onClick:Et(b,["prevent"])},{default:A(()=>[me(ue(w(h)),1)]),_:1},8,["onClick"]),V(E.$slots,"footer")]),_:3})]),_:3})]),_:3},8,["onSubmit"])]),_:3},16)])}}}),$9=We({__name:"confirm-sign-in",setup(e){const t=Kt(),{submitForm:n,toSignIn:r,updateForm:i}=t,{error:o,isPending:a,challengeName:s}=lt(t),l=ye(()=>s.value),{getBackToSignInText:c,getConfirmText:u,getChallengeText:d}=dn,f=ye(()=>d(l.value)),h=ye(()=>c()),p=ye(()=>u()),m=v=>{const{name:b,value:E}=v.target;i({name:b,value:E})},y=v=>{n(Ln(v))},g=()=>{r()};return(v,b)=>{const E=Er,C=Wt,x=Un,O=un,U=Nn,H=Fn,G=On;return V(v.$slots,"confirmSignInSlotI",pt(ct(v.$attrs)),()=>[R(C,pt(ct(v.$attrs)),{default:A(()=>[R(G,{"data-amplify-authenticator-confirmsignin":"",onInput:m,onSubmit:Et(y,["prevent"])},{default:A(()=>[R(H,{class:"amplify-flex amplify-authenticator__column",disabled:w(a)},{default:A(()=>[V(v.$slots,"header",{},()=>[R(E,{level:3,class:"amplify-heading"},{default:A(()=>[me(ue(w(f)),1)]),_:1})]),R(C,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[R(Qn,{route:"confirmSignIn"})]),_:1}),R(U,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[w(o)?(re(),Se(x,{key:0},{default:A(()=>[me(ue(w(ae)(w(o))),1)]),_:1})):Oe("",!0),R(O,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,loading:!1,variation:"primary",style:{"font-weight":"normal"},disabled:w(a)},{default:A(()=>[me(ue(w(p)),1)]),_:1},8,["disabled"]),R(O,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,size:"small",variation:"link",style:{"font-weight":"normal"},type:"button",onClick:Et(g,["prevent"])},{default:A(()=>[me(ue(w(h)),1)]),_:1},8,["onClick"]),V(v.$slots,"footer")]),_:3})]),_:3},8,["disabled"])]),_:3},8,["onSubmit"])]),_:3},16)])}}});var ca={},H9=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},O0={},on={};let sf;const q9=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];on.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};on.getSymbolTotalCodewords=function(e){return q9[e]};on.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};on.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');sf=e};on.isKanjiModeEnabled=function(){return typeof sf<"u"};on.toSJIS=function(e){return sf(e)};var Ul={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,r){if(e.isValid(n))return n;try{return t(n)}catch{return r}}})(Ul);function L0(){this.buffer=[],this.length=0}L0.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var z9=L0;function ua(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}ua.prototype.set=function(e,t,n,r){const i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)};ua.prototype.get=function(e,t){return this.data[e*this.size+t]};ua.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};ua.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var V9=ua,D0={};(function(e){const t=on.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const r=Math.floor(n/7)+2,i=t(n),o=i===145?26:Math.ceil((i-13)/(2*r-2))*2,a=[i-7];for(let s=1;s<r-1;s++)a[s]=a[s-1]-o;return a.push(6),a.reverse()},e.getPositions=function(n){const r=[],i=e.getRowColCoords(n),o=i.length;for(let a=0;a<o;a++)for(let s=0;s<o;s++)a===0&&s===0||a===0&&s===o-1||a===o-1&&s===0||r.push([i[a],i[s]]);return r}})(D0);var U0={};const W9=on.getSymbolSize,mm=7;U0.getPositions=function(e){const t=W9(e);return[[0,0],[t-mm,0],[0,t-mm]]};var F0={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},e.from=function(r){return e.isValid(r)?parseInt(r,10):void 0},e.getPenaltyN1=function(r){const i=r.size;let o=0,a=0,s=0,l=null,c=null;for(let u=0;u<i;u++){a=s=0,l=c=null;for(let d=0;d<i;d++){let f=r.get(u,d);f===l?a++:(a>=5&&(o+=t.N1+(a-5)),l=f,a=1),f=r.get(d,u),f===c?s++:(s>=5&&(o+=t.N1+(s-5)),c=f,s=1)}a>=5&&(o+=t.N1+(a-5)),s>=5&&(o+=t.N1+(s-5))}return o},e.getPenaltyN2=function(r){const i=r.size;let o=0;for(let a=0;a<i-1;a++)for(let s=0;s<i-1;s++){const l=r.get(a,s)+r.get(a,s+1)+r.get(a+1,s)+r.get(a+1,s+1);(l===4||l===0)&&o++}return o*t.N2},e.getPenaltyN3=function(r){const i=r.size;let o=0,a=0,s=0;for(let l=0;l<i;l++){a=s=0;for(let c=0;c<i;c++)a=a<<1&2047|r.get(l,c),c>=10&&(a===1488||a===93)&&o++,s=s<<1&2047|r.get(c,l),c>=10&&(s===1488||s===93)&&o++}return o*t.N3},e.getPenaltyN4=function(r){let i=0;const o=r.data.length;for(let a=0;a<o;a++)i+=r.data[a];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function n(r,i,o){switch(r){case e.Patterns.PATTERN000:return(i+o)%2===0;case e.Patterns.PATTERN001:return i%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(i+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return i*o%2+i*o%3===0;case e.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case e.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(r,i){const o=i.size;for(let a=0;a<o;a++)for(let s=0;s<o;s++)i.isReserved(s,a)||i.xor(s,a,n(r,s,a))},e.getBestMask=function(r,i){const o=Object.keys(e.Patterns).length;let a=0,s=1/0;for(let l=0;l<o;l++){i(l),e.applyMask(l,r);const c=e.getPenaltyN1(r)+e.getPenaltyN2(r)+e.getPenaltyN3(r)+e.getPenaltyN4(r);e.applyMask(l,r),c<s&&(s=c,a=l)}return a}})(F0);var Fl={};const sr=Ul,Ha=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],qa=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Fl.getBlocksCount=function(e,t){switch(t){case sr.L:return Ha[(e-1)*4+0];case sr.M:return Ha[(e-1)*4+1];case sr.Q:return Ha[(e-1)*4+2];case sr.H:return Ha[(e-1)*4+3];default:return}};Fl.getTotalCodewordsCount=function(e,t){switch(t){case sr.L:return qa[(e-1)*4+0];case sr.M:return qa[(e-1)*4+1];case sr.Q:return qa[(e-1)*4+2];case sr.H:return qa[(e-1)*4+3];default:return}};var B0={},Bl={};const Ro=new Uint8Array(512),Os=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Ro[t]=e,Os[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Ro[t]=Ro[t-255]})();Bl.log=function(e){if(e<1)throw new Error("log("+e+")");return Os[e]};Bl.exp=function(e){return Ro[e]};Bl.mul=function(e,t){return e===0||t===0?0:Ro[Os[e]+Os[t]]};(function(e){const t=Bl;e.mul=function(n,r){const i=new Uint8Array(n.length+r.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<r.length;a++)i[o+a]^=t.mul(n[o],r[a]);return i},e.mod=function(n,r){let i=new Uint8Array(n);for(;i.length-r.length>=0;){const o=i[0];for(let s=0;s<r.length;s++)i[s]^=t.mul(r[s],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},e.generateECPolynomial=function(n){let r=new Uint8Array([1]);for(let i=0;i<n;i++)r=e.mul(r,new Uint8Array([1,t.exp(i)]));return r}})(B0);const j0=B0;function lf(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}lf.prototype.initialize=function(e){this.degree=e,this.genPoly=j0.generateECPolynomial(this.degree)};lf.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=j0.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){const i=new Uint8Array(this.degree);return i.set(n,r),i}return n};var K9=lf,$0={},Cr={},cf={};cf.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Bn={};const H0="[0-9]+",G9="[A-Z $%*+\\-./:]+";let zo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";zo=zo.replace(/u/g,"\\u");const Y9="(?:(?![A-Z0-9 $%*+\\-./:]|"+zo+`)(?:.|[\r
]))+`;Bn.KANJI=new RegExp(zo,"g");Bn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Bn.BYTE=new RegExp(Y9,"g");Bn.NUMERIC=new RegExp(H0,"g");Bn.ALPHANUMERIC=new RegExp(G9,"g");const J9=new RegExp("^"+zo+"$"),Z9=new RegExp("^"+H0+"$"),X9=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Bn.testKanji=function(e){return J9.test(e)};Bn.testNumeric=function(e){return Z9.test(e)};Bn.testAlphanumeric=function(e){return X9.test(e)};(function(e){const t=cf,n=Bn;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return n.testNumeric(i)?e.NUMERIC:n.testAlphanumeric(i)?e.ALPHANUMERIC:n.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+i)}}e.from=function(i,o){if(e.isValid(i))return i;try{return r(i)}catch{return o}}})(Cr);(function(e){const t=on,n=Fl,r=Ul,i=Cr,o=cf,a=7973,s=t.getBCHDigit(a);function l(f,h,p){for(let m=1;m<=40;m++)if(h<=e.getCapacity(m,p,f))return m}function c(f,h){return i.getCharCountIndicator(f,h)+4}function u(f,h){let p=0;return f.forEach(function(m){const y=c(m.mode,h);p+=y+m.getBitsLength()}),p}function d(f,h){for(let p=1;p<=40;p++)if(u(f,p)<=e.getCapacity(p,h,i.MIXED))return p}e.from=function(f,h){return o.isValid(f)?parseInt(f,10):h},e.getCapacity=function(f,h,p){if(!o.isValid(f))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=i.BYTE);const m=t.getSymbolTotalCodewords(f),y=n.getTotalCodewordsCount(f,h),g=(m-y)*8;if(p===i.MIXED)return g;const v=g-c(p,f);switch(p){case i.NUMERIC:return Math.floor(v/10*3);case i.ALPHANUMERIC:return Math.floor(v/11*2);case i.KANJI:return Math.floor(v/13);case i.BYTE:default:return Math.floor(v/8)}},e.getBestVersionForData=function(f,h){let p;const m=r.from(h,r.M);if(Array.isArray(f)){if(f.length>1)return d(f,m);if(f.length===0)return 1;p=f[0]}else p=f;return l(p.mode,p.getLength(),m)},e.getEncodedBits=function(f){if(!o.isValid(f)||f<7)throw new Error("Invalid QR Code version");let h=f<<12;for(;t.getBCHDigit(h)-s>=0;)h^=a<<t.getBCHDigit(h)-s;return f<<12|h}})($0);var q0={};const Ru=on,z0=1335,Q9=21522,gm=Ru.getBCHDigit(z0);q0.getEncodedBits=function(e,t){const n=e.bit<<3|t;let r=n<<10;for(;Ru.getBCHDigit(r)-gm>=0;)r^=z0<<Ru.getBCHDigit(r)-gm;return(n<<10|r)^Q9};var V0={};const eD=Cr;function Ai(e){this.mode=eD.NUMERIC,this.data=e.toString()}Ai.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ai.prototype.getLength=function(){return this.data.length};Ai.prototype.getBitsLength=function(){return Ai.getBitsLength(this.data.length)};Ai.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const i=this.data.length-t;i>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,i*3+1))};var tD=Ai;const nD=Cr,Ac=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ki(e){this.mode=nD.ALPHANUMERIC,this.data=e}ki.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ki.prototype.getLength=function(){return this.data.length};ki.prototype.getBitsLength=function(){return ki.getBitsLength(this.data.length)};ki.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=Ac.indexOf(this.data[t])*45;n+=Ac.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(Ac.indexOf(this.data[t]),6)};var rD=ki,iD=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319&&n>r+1){var o=e.charCodeAt(r+1);o>=56320&&o<=57343&&(i=(i-55296)*1024+o-56320+65536,r+=1)}if(i<128){t.push(i);continue}if(i<2048){t.push(i>>6|192),t.push(i&63|128);continue}if(i<55296||i>=57344&&i<65536){t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128);continue}if(i>=65536&&i<=1114111){t.push(i>>18|240),t.push(i>>12&63|128),t.push(i>>6&63|128),t.push(i&63|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer};const oD=iD,aD=Cr;function Ti(e){this.mode=aD.BYTE,this.data=new Uint8Array(oD(e))}Ti.getBitsLength=function(e){return e*8};Ti.prototype.getLength=function(){return this.data.length};Ti.prototype.getBitsLength=function(){return Ti.getBitsLength(this.data.length)};Ti.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var sD=Ti;const lD=Cr,cD=on;function Mi(e){this.mode=lD.KANJI,this.data=e}Mi.getBitsLength=function(e){return e*13};Mi.prototype.getLength=function(){return this.data.length};Mi.prototype.getBitsLength=function(){return Mi.getBitsLength(this.data.length)};Mi.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=cD.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var uD=Mi,W0={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,i){var o={},a={};a[r]=0;var s=t.PriorityQueue.make();s.push(r,0);for(var l,c,u,d,f,h,p,m,y;!s.empty();){l=s.pop(),c=l.value,d=l.cost,f=n[c]||{};for(u in f)f.hasOwnProperty(u)&&(h=f[u],p=d+h,m=a[u],y=typeof a[u]>"u",(y||m>p)&&(a[u]=p,s.push(u,p),o[u]=c))}if(typeof i<"u"&&typeof a[i]>"u"){var g=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(g)}return o},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],o=r;o;)i.push(o),n[o],o=n[o];return i.reverse(),i},find_path:function(n,r,i){var o=t.single_source_shortest_paths(n,r,i);return t.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,i={},o;n=n||{};for(o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(W0);var dD=W0.exports;(function(e){const t=Cr,n=tD,r=rD,i=sD,o=uD,a=Bn,s=on,l=dD;function c(g){return unescape(encodeURIComponent(g)).length}function u(g,v,b){const E=[];let C;for(;(C=g.exec(b))!==null;)E.push({data:C[0],index:C.index,mode:v,length:C[0].length});return E}function d(g){const v=u(a.NUMERIC,t.NUMERIC,g),b=u(a.ALPHANUMERIC,t.ALPHANUMERIC,g);let E,C;return s.isKanjiModeEnabled()?(E=u(a.BYTE,t.BYTE,g),C=u(a.KANJI,t.KANJI,g)):(E=u(a.BYTE_KANJI,t.BYTE,g),C=[]),v.concat(b,E,C).sort(function(x,O){return x.index-O.index}).map(function(x){return{data:x.data,mode:x.mode,length:x.length}})}function f(g,v){switch(v){case t.NUMERIC:return n.getBitsLength(g);case t.ALPHANUMERIC:return r.getBitsLength(g);case t.KANJI:return o.getBitsLength(g);case t.BYTE:return i.getBitsLength(g)}}function h(g){return g.reduce(function(v,b){const E=v.length-1>=0?v[v.length-1]:null;return E&&E.mode===b.mode?(v[v.length-1].data+=b.data,v):(v.push(b),v)},[])}function p(g){const v=[];for(let b=0;b<g.length;b++){const E=g[b];switch(E.mode){case t.NUMERIC:v.push([E,{data:E.data,mode:t.ALPHANUMERIC,length:E.length},{data:E.data,mode:t.BYTE,length:E.length}]);break;case t.ALPHANUMERIC:v.push([E,{data:E.data,mode:t.BYTE,length:E.length}]);break;case t.KANJI:v.push([E,{data:E.data,mode:t.BYTE,length:c(E.data)}]);break;case t.BYTE:v.push([{data:E.data,mode:t.BYTE,length:c(E.data)}])}}return v}function m(g,v){const b={},E={start:{}};let C=["start"];for(let x=0;x<g.length;x++){const O=g[x],U=[];for(let H=0;H<O.length;H++){const G=O[H],q=""+x+H;U.push(q),b[q]={node:G,lastCount:0},E[q]={};for(let z=0;z<C.length;z++){const Y=C[z];b[Y]&&b[Y].node.mode===G.mode?(E[Y][q]=f(b[Y].lastCount+G.length,G.mode)-f(b[Y].lastCount,G.mode),b[Y].lastCount+=G.length):(b[Y]&&(b[Y].lastCount=G.length),E[Y][q]=f(G.length,G.mode)+4+t.getCharCountIndicator(G.mode,v))}}C=U}for(let x=0;x<C.length;x++)E[C[x]].end=0;return{map:E,table:b}}function y(g,v){let b;const E=t.getBestModeForData(g);if(b=t.from(v,E),b!==t.BYTE&&b.bit<E.bit)throw new Error('"'+g+'" cannot be encoded with mode '+t.toString(b)+`.
 Suggested mode is: `+t.toString(E));switch(b===t.KANJI&&!s.isKanjiModeEnabled()&&(b=t.BYTE),b){case t.NUMERIC:return new n(g);case t.ALPHANUMERIC:return new r(g);case t.KANJI:return new o(g);case t.BYTE:return new i(g)}}e.fromArray=function(g){return g.reduce(function(v,b){return typeof b=="string"?v.push(y(b,null)):b.data&&v.push(y(b.data,b.mode)),v},[])},e.fromString=function(g,v){const b=d(g,s.isKanjiModeEnabled()),E=p(b),C=m(E,v),x=l.find_path(C.map,"start","end"),O=[];for(let U=1;U<x.length-1;U++)O.push(C.table[x[U]].node);return e.fromArray(h(O))},e.rawSplit=function(g){return e.fromArray(d(g,s.isKanjiModeEnabled()))}})(V0);const jl=on,kc=Ul,fD=z9,hD=V9,pD=D0,mD=U0,Pu=F0,Nu=Fl,gD=K9,Ls=$0,vD=q0,yD=Cr,Tc=V0;function bD(e,t){const n=e.size,r=mD.getPositions(t);for(let i=0;i<r.length;i++){const o=r[i][0],a=r[i][1];for(let s=-1;s<=7;s++)if(!(o+s<=-1||n<=o+s))for(let l=-1;l<=7;l++)a+l<=-1||n<=a+l||(s>=0&&s<=6&&(l===0||l===6)||l>=0&&l<=6&&(s===0||s===6)||s>=2&&s<=4&&l>=2&&l<=4?e.set(o+s,a+l,!0,!0):e.set(o+s,a+l,!1,!0))}}function _D(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function SD(e,t){const n=pD.getPositions(t);for(let r=0;r<n.length;r++){const i=n[r][0],o=n[r][1];for(let a=-2;a<=2;a++)for(let s=-2;s<=2;s++)a===-2||a===2||s===-2||s===2||a===0&&s===0?e.set(i+a,o+s,!0,!0):e.set(i+a,o+s,!1,!0)}}function wD(e,t){const n=e.size,r=Ls.getEncodedBits(t);let i,o,a;for(let s=0;s<18;s++)i=Math.floor(s/3),o=s%3+n-8-3,a=(r>>s&1)===1,e.set(i,o,a,!0),e.set(o,i,a,!0)}function Mc(e,t,n){const r=e.size,i=vD.getEncodedBits(t,n);let o,a;for(o=0;o<15;o++)a=(i>>o&1)===1,o<6?e.set(o,8,a,!0):o<8?e.set(o+1,8,a,!0):e.set(r-15+o,8,a,!0),o<8?e.set(8,r-o-1,a,!0):o<9?e.set(8,15-o-1+1,a,!0):e.set(8,15-o-1,a,!0);e.set(r-8,8,1,!0)}function ED(e,t){const n=e.size;let r=-1,i=n-1,o=7,a=0;for(let s=n-1;s>0;s-=2)for(s===6&&s--;;){for(let l=0;l<2;l++)if(!e.isReserved(i,s-l)){let c=!1;a<t.length&&(c=(t[a]>>>o&1)===1),e.set(i,s-l,c),o--,o===-1&&(a++,o=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function CD(e,t,n){const r=new fD;n.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),yD.getCharCountIndicator(l.mode,e)),l.write(r)});const i=jl.getSymbolTotalCodewords(e),o=Nu.getTotalCodewordsCount(e,t),a=(i-o)*8;for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const s=(a-r.getLengthInBits())/8;for(let l=0;l<s;l++)r.put(l%2?17:236,8);return ID(r,e,t)}function ID(e,t,n){const r=jl.getSymbolTotalCodewords(t),i=Nu.getTotalCodewordsCount(t,n),o=r-i,a=Nu.getBlocksCount(t,n),s=r%a,l=a-s,c=Math.floor(r/a),u=Math.floor(o/a),d=u+1,f=c-u,h=new gD(f);let p=0;const m=new Array(a),y=new Array(a);let g=0;const v=new Uint8Array(e.buffer);for(let O=0;O<a;O++){const U=O<l?u:d;m[O]=v.slice(p,p+U),y[O]=h.encode(m[O]),p+=U,g=Math.max(g,U)}const b=new Uint8Array(r);let E=0,C,x;for(C=0;C<g;C++)for(x=0;x<a;x++)C<m[x].length&&(b[E++]=m[x][C]);for(C=0;C<f;C++)for(x=0;x<a;x++)b[E++]=y[x][C];return b}function xD(e,t,n,r){let i;if(Array.isArray(e))i=Tc.fromArray(e);else if(typeof e=="string"){let c=t;if(!c){const u=Tc.rawSplit(e);c=Ls.getBestVersionForData(u,n)}i=Tc.fromString(e,c||40)}else throw new Error("Invalid data");const o=Ls.getBestVersionForData(i,n);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const a=CD(t,n,i),s=jl.getSymbolSize(t),l=new hD(s);return bD(l,t),_D(l),SD(l,t),Mc(l,n,0),t>=7&&wD(l,t),ED(l,a),isNaN(r)&&(r=Pu.getBestMask(l,Mc.bind(null,l,n))),Pu.applyMask(r,l),Mc(l,n,r),{modules:l,version:t,errorCorrectionLevel:n,maskPattern:r,segments:i}}O0.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let n=kc.M,r,i;return typeof t<"u"&&(n=kc.from(t.errorCorrectionLevel,kc.M),r=Ls.from(t.version),i=Pu.from(t.maskPattern),t.toSJISFunc&&jl.setToSJISFunction(t.toSJISFunc)),xD(e,r,n,i)};var K0={},uf={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(o){return[o,o]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const r=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:r,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,r){return r.width&&r.width>=n+r.margin*2?r.width/(n+r.margin*2):r.scale},e.getImageWidth=function(n,r){const i=e.getScale(n,r);return Math.floor((n+r.margin*2)*i)},e.qrToImageData=function(n,r,i){const o=r.modules.size,a=r.modules.data,s=e.getScale(o,i),l=Math.floor((o+i.margin*2)*s),c=i.margin*s,u=[i.color.light,i.color.dark];for(let d=0;d<l;d++)for(let f=0;f<l;f++){let h=(d*l+f)*4,p=i.color.light;if(d>=c&&f>=c&&d<l-c&&f<l-c){const m=Math.floor((d-c)/s),y=Math.floor((f-c)/s);p=u[a[m*o+y]?1:0]}n[h++]=p.r,n[h++]=p.g,n[h++]=p.b,n[h]=p.a}}})(uf);(function(e){const t=uf;function n(i,o,a){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,a){let s=a,l=o;typeof s>"u"&&(!o||!o.getContext)&&(s=o,o=void 0),o||(l=r()),s=t.getOptions(s);const c=t.getImageWidth(i.modules.size,s),u=l.getContext("2d"),d=u.createImageData(c,c);return t.qrToImageData(d.data,i,s),n(u,l,c),u.putImageData(d,0,0),l},e.renderToDataURL=function(i,o,a){let s=a;typeof s>"u"&&(!o||!o.getContext)&&(s=o,o=void 0),s||(s={});const l=e.render(i,o,s),c=s.type||"image/png",u=s.rendererOpts||{};return l.toDataURL(c,u.quality)}})(K0);var G0={};const AD=uf;function vm(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Rc(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function kD(e,t,n){let r="",i=0,o=!1,a=0;for(let s=0;s<e.length;s++){const l=Math.floor(s%t),c=Math.floor(s/t);!l&&!o&&(o=!0),e[s]?(a++,s>0&&l>0&&e[s-1]||(r+=o?Rc("M",l+n,.5+c+n):Rc("m",i,0),i=0,o=!1),l+1<t&&e[s+1]||(r+=Rc("h",a),a=0)):i++}return r}G0.render=function(e,t,n){const r=AD.getOptions(t),i=e.modules.size,o=e.modules.data,a=i+r.margin*2,s=r.color.light.a?"<path "+vm(r.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+vm(r.color.dark,"stroke")+' d="'+kD(o,i,r.margin)+'"/>',c='viewBox="0 0 '+a+" "+a+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+c+' shape-rendering="crispEdges">'+s+l+`</svg>
`;return typeof n=="function"&&n(null,u),u};const TD=H9,Ou=O0,Y0=K0,MD=G0;function df(e,t,n,r,i){const o=[].slice.call(arguments,1),a=o.length,s=typeof o[a-1]=="function";if(!s&&!TD())throw new Error("Callback required as last argument");if(s){if(a<2)throw new Error("Too few arguments provided");a===2?(i=n,n=t,t=r=void 0):a===3&&(t.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=t,t=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(n=t,t=r=void 0):a===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(l,c){try{const u=Ou.create(n,r);l(e(u,t,r))}catch(u){c(u)}})}try{const l=Ou.create(n,r);i(null,e(l,t,r))}catch(l){i(l)}}ca.create=Ou.create;ca.toCanvas=df.bind(null,Y0.render);ca.toDataURL=df.bind(null,Y0.renderToDataURL);ca.toString=df.bind(null,function(e,t,n){return MD.render(e,n)});const RD={key:0},PD=["src"],ND={"data-amplify-copy-tooltip":""},OD=te("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[te("path",{d:"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z"})],-1),LD=We({__name:"setup-totp",setup(e){const t=new kt("SetupTotp-logger"),n=Kt(),{updateForm:r,submitForm:i,toSignIn:o,totpSecretCode:a,username:s,QRFields:l}=n,{error:c,isPending:u}=lt(n),{totpIssuer:d="AWSCognito",totpUsername:f=s}=l??{},h=eA(d,f,a),p=Zo({qrCodeImageSource:"",isLoading:!0}),{getCopyText:m,getCopiedText:y,getBackToSignInText:g,getConfirmText:v}=dn,b=ot(m());function E(){a&&navigator.clipboard.writeText(a),b.value=y()}od(async()=>{try{p.qrCodeImageSource=await ca.toDataURL(h)}catch(G){t.error(G)}finally{p.isLoading=!1}});const C=ye(()=>g()),x=ye(()=>v()),O=G=>{const{name:q,value:z}=G.target;r({name:q,value:z})},U=G=>{i(Ln(G))},H=()=>{o()};return(G,q)=>{const z=Er,Y=Wt,le=Un,Be=un,L=Nn,k=Fn,N=On;return V(G.$slots,"confirmSetupTotpI",pt(ct(G.$attrs)),()=>[R(Y,pt(ct(G.$attrs)),{default:A(()=>[R(N,{"data-amplify-authenticator-setup-totp":"",onInput:O,onSubmit:Et(U,["prevent"])},{default:A(()=>[R(k,{class:"amplify-flex amplify-authenticator__column",disabled:w(u)},{default:A(()=>[R(Y,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[V(G.$slots,"header",{},()=>[R(z,{class:"amplify-heading",level:3},{default:A(()=>[me(" Setup TOTP ")]),_:1})]),R(Y,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[p.isLoading?(re(),Qe("p",RD,"Loading...")):(re(),Qe("img",{key:1,class:"amplify-image","data-amplify-qrcode":"",src:p.qrCodeImageSource,alt:"qr code",width:"228",height:"228"},null,8,PD)),R(Y,{class:"amplify-flex","data-amplify-copy":""},{default:A(()=>[te("div",null,ue(w(a)),1),R(Y,{"data-amplify-copy-svg":"",onClick:E},{default:A(()=>[te("div",ND,ue(b.value),1),OD]),_:1})]),_:1}),R(Qn,{route:"setupTotp"})]),_:1}),R(L,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[w(c)?(re(),Se(le,{key:0},{default:A(()=>[me(ue(w(ae)(w(c))),1)]),_:1})):Oe("",!0),R(Be,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,loading:!1,variation:"primary",type:"submit",disabled:w(u)},{default:A(()=>[me(ue(w(x)),1)]),_:1},8,["disabled"]),R(Be,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,size:"small",variation:"link",style:{"font-weight":"normal"},type:"button",onClick:Et(H,["prevent"])},{default:A(()=>[me(ue(w(C)),1)]),_:1},8,["onClick"]),V(G.$slots,"footer")]),_:3})]),_:3})]),_:3},8,["disabled"])]),_:3},8,["onSubmit"])]),_:3},16)])}}}),DD=We({__name:"authenticator-force-new-password-form-fields",setup(e){return(t,n)=>(re(),Se(Qn,{route:"forceNewPassword"}))}}),UD=We({__name:"force-new-password",setup(e){const t=Kt(),{submitForm:n,toSignIn:r,updateBlur:i,updateForm:o}=t,{error:a,isPending:s}=lt(t),{getChangePasswordText:l,getChangingText:c,getBackToSignInText:u}=dn,d=ye(()=>l()),f=ye(()=>c()),h=ye(()=>u()),p=()=>{r()},m=b=>{y(b)},y=b=>{n(Ln(b))},g=b=>{const{name:E,value:C}=b.target;o({name:E,value:C})};function v(b){const{name:E}=b.target;i({name:E})}return(b,E)=>{const C=Er,x=Wt,O=Un,U=un,H=Nn,G=Fn,q=On;return V(b.$slots,"forceNewPasswordI",pt(ct(b.$attrs)),()=>[R(x,pt(ct(b.$attrs)),{default:A(()=>[R(q,{"data-amplify-authenticator-forcenewpassword":"",onInput:g,onBlurCapture:v,onSubmit:Et(m,["prevent"])},{default:A(()=>[R(G,{class:"amplify-flex amplify-authenticator__column",disabled:w(s)},{default:A(()=>[V(b.$slots,"header",{},()=>[R(C,{level:3,class:"amplify-heading"},{default:A(()=>[me(ue(w(d)),1)]),_:1})]),R(x,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[V(b.$slots,"force-new-password-form-fields",{},()=>[R(DD)])]),_:3}),R(H,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[w(a)?(re(),Se(O,{key:0,"data-ui-error":""},{default:A(()=>[me(ue(w(ae)(w(a))),1)]),_:1})):Oe("",!0),R(U,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,loading:!1,variation:"primary",style:{"font-weight":"normal"},disabled:w(s)},{default:A(()=>[me(ue(w(s)?w(f)+"…":w(d)),1)]),_:1},8,["disabled"]),R(U,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,size:"small",variation:"link",style:{"font-weight":"normal"},type:"button",onClick:Et(p,["prevent"])},{default:A(()=>[me(ue(w(h)),1)]),_:1},8,["onClick"]),V(b.$slots,"footer",{onHaveAccountClicked:p,onForceNewPasswordSubmit:m})]),_:3})]),_:3},8,["disabled"])]),_:3},8,["onSubmit"])]),_:3},16)])}}}),FD=We({__name:"forgot-password",setup(e){const t=Kt(),{submitForm:n,toSignIn:r,updateForm:i}=t,{error:o,isPending:a}=lt(t),{getBackToSignInText:s,getResetYourPasswordText:l,getSendCodeText:c}=dn,u=ye(()=>s()),d=ye(()=>l()),f=ye(()=>c()),h=y=>{n(Ln(y))},p=y=>{const{name:g,value:v}=y.target;i({name:g,value:v})},m=()=>{r()};return(y,g)=>{const v=Er,b=Fn,E=Un,C=un,x=Nn,O=Wt,U=On;return V(y.$slots,"forgotPasswordSlotI",pt(ct(y.$attrs)),()=>[R(U,nn(y.$attrs,{"data-amplify-authenticator-forgotpassword":"",onInput:p,onSubmit:Et(h,["prevent"])}),{default:A(()=>[R(O,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[V(y.$slots,"header",{},()=>[R(v,{class:"amplify-heading",level:3},{default:A(()=>[me(ue(w(d)),1)]),_:1})]),R(b,{class:"amplify-flex amplify-authenticator__column",disabled:w(a)},{default:A(()=>[R(Qn,{route:"forgotPassword"})]),_:1},8,["disabled"]),R(x,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[w(o)?(re(),Se(E,{key:0},{default:A(()=>[me(ue(w(ae)(w(o))),1)]),_:1})):Oe("",!0),R(C,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,variation:"primary",type:"submit",disabled:w(a)},{default:A(()=>[me(ue(w(f)),1)]),_:1},8,["disabled"]),R(C,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,size:"small",variation:"link",style:{"font-weight":"normal"},type:"button",onClick:Et(m,["prevent"])},{default:A(()=>[me(ue(w(u)),1)]),_:1},8,["onClick"]),V(y.$slots,"footer",{onBackToSignInClicked:m,onResetPasswordSubmit:h})]),_:3})]),_:3})]),_:3},16,["onSubmit"])])}}}),BD=We({__name:"confirm-reset-password",setup(e){const t=Kt(),{resendCode:n,submitForm:r,updateBlur:i,updateForm:o}=t,{error:a,isPending:s}=lt(t),{getResendCodeText:l,getResetYourPasswordText:c,getSubmitText:u}=dn,d=ye(()=>l()),f=ye(()=>c()),h=ye(()=>u()),p=b=>{m(b)},m=b=>{r(Ln(b))},y=()=>{n()},g=b=>{const{name:E,value:C}=b.target;o({name:E,value:C})};function v(b){const{name:E}=b.target;i({name:E})}return(b,E)=>{const C=Er,x=Wt,O=Un,U=un,H=Nn,G=Fn,q=On;return V(b.$slots,"confirmResetPasswordSlotI",pt(ct(b.$attrs)),()=>[R(x,pt(ct(b.$attrs)),{default:A(()=>[R(q,{"data-amplify-authenticator-confirmResetpassword":"",onInput:g,onBlurCapture:v,onSubmit:Et(p,["prevent"])},{default:A(()=>[R(G,{class:"amplify-flex amplify-authenticator__column",disabled:w(s)},{default:A(()=>[V(b.$slots,"header",{},()=>[R(C,{class:"amplify-heading",level:3},{default:A(()=>[me(ue(w(f)),1)]),_:1})]),R(x,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[R(Qn,{route:"confirmResetPassword"})]),_:1}),R(H,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[w(a)?(re(),Se(O,{key:0},{default:A(()=>[me(ue(w(ae)(w(a))),1)]),_:1})):Oe("",!0),R(U,{class:"amplify-field-group__control amplify-authenticator__font",variation:"primary",fullwidth:!1,type:"submit",disabled:w(s)},{default:A(()=>[me(ue(w(h)),1)]),_:1},8,["disabled"]),R(U,{class:"amplify-field-group__control amplify-authenticator__font",variation:"link",fullwidth:!1,size:"small",type:"button",onClick:Et(y,["prevent"])},{default:A(()=>[me(ue(w(d)),1)]),_:1},8,["onClick"]),V(b.$slots,"footer")]),_:3})]),_:3},8,["disabled"])]),_:3},8,["onSubmit"])]),_:3},16)])}}}),jD=We({__name:"verify-user",setup(e){const t=Kt(),{isPending:n,unverifiedUserAttributes:r,error:i}=lt(t),{skipVerification:o,submitForm:a,updateForm:s}=t,{getAccountRecoveryInfoText:l,getSkipText:c,getVerifyText:u,getVerifyContactText:d}=dn,f=ye(()=>l()),h=ye(()=>c()),p=ye(()=>u()),m=ye(()=>d()),y=E=>{const{name:C,value:x}=E.target;s({name:C,value:x})},g=E=>{v(E)},v=E=>{a(Ln(E))},b=()=>{o()};return(E,C)=>{const x=Er,O=af,U=N0,H=of,G=Wt,q=Un,z=un,Y=Nn,le=Fn,Be=On;return V(E.$slots,"verifyUserSlotI",{},()=>[R(G,null,{default:A(()=>[R(Be,{onInput:y,onSubmit:Et(g,["prevent"])},{default:A(()=>[R(le,{disabled:w(n),class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[V(E.$slots,"header",{},()=>[R(x,{class:"amplify-heading",level:3},{default:A(()=>[me(ue(w(f)),1)]),_:1})]),R(G,{class:"amplify-flex amplify-field amplify-radiogroupfield amplify-authenticator__column"},{default:A(()=>[R(O,{class:"amplify-visually-hidden amplify-label",id:"amplify-field-493c"},{default:A(()=>[me(ue(w(m)),1)]),_:1}),R(G,{class:"amplify-flex amplify-field amplify-radiogroupfield amplify-authenticator__column","aria-labelledby":"amplify-field-493c"},{default:A(()=>[(re(!0),Qe(mt,null,Xs(w(r),(L,k)=>(re(),Qe(mt,{key:L},[L?(re(),Se(O,{key:0,class:"amplify-flex amplify-radio","data-amplify-verify-label":""},{default:A(()=>[R(U,{class:"amplify-text amplify-radio__label"},{default:A(()=>[me(ue(w(ae)(w($o)[k].label))+": "+ue(w(Xx)(w($o)[k].label,L)),1)]),_:2},1024),R(H,{class:"amplify-input amplify-field-group__control amplify-visually-hidden amplify-radio__input","aria-invalid":"false","data-amplify-verify-input":"",name:"unverifiedAttr",type:"radio",value:k},null,8,["value"]),R(U,{class:"amplify-flex amplify-radio__button","aria-hidden":"true"})]),_:2},1024)):Oe("",!0)],64))),128))]),_:1})]),_:1}),R(Y,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[w(i)?(re(),Se(q,{key:0},{default:A(()=>[me(ue(w(ae)(w(i))),1)]),_:1})):Oe("",!0),R(z,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,variation:"primary",type:"submit",disabled:w(n)},{default:A(()=>[me(ue(w(p)),1)]),_:1},8,["disabled"]),R(z,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,size:"small",variation:"link",style:{"font-weight":"normal"},type:"button",onClick:Et(b,["prevent"])},{default:A(()=>[me(ue(w(h)),1)]),_:1},8,["onClick"]),V(E.$slots,"footer")]),_:3})]),_:3},8,["disabled"])]),_:3},8,["onSubmit"])]),_:3})])}}}),$D=We({__name:"confirm-verify-user",setup(e){const t=Kt(),{error:n,isPending:r}=lt(t),{skipVerification:i,submitForm:o,updateForm:a}=t,{getAccountRecoveryInfoText:s,getSkipText:l,getSubmitText:c}=dn,u=ye(()=>s()),d=ye(()=>l()),f=ye(()=>c()),h=g=>{const{name:v,value:b}=g.target;a({name:v,value:b})},p=g=>{m(g)},m=g=>{o(Ln(g))},y=()=>{i()};return(g,v)=>{const b=Er,E=Wt,C=Un,x=un,O=Nn,U=Fn,H=On;return V(g.$slots,"confirmVerifyUserSlotI",pt(ct(g.$attrs)),()=>[R(E,pt(ct(g.$attrs)),{default:A(()=>[R(H,{onInput:h,onSubmit:Et(p,["prevent"])},{default:A(()=>[R(U,{class:"amplify-flex amplify-authenticator__column",disabled:w(r)},{default:A(()=>[V(g.$slots,"header",{},()=>[R(b,{level:3,class:"amplify-heading"},{default:A(()=>[me(ue(w(u)),1)]),_:1})]),R(E,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[R(Qn,{route:"confirmVerifyUser"})]),_:1}),R(O,{class:"amplify-flex amplify-authenticator__column"},{default:A(()=>[w(n)?(re(),Se(C,{key:0},{default:A(()=>[me(ue(w(ae)(w(n))),1)]),_:1})):Oe("",!0),R(x,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,variation:"primary",type:"submit",disabled:w(r)},{default:A(()=>[me(ue(w(f)),1)]),_:1},8,["disabled"]),R(x,{class:"amplify-field-group__control amplify-authenticator__font",fullwidth:!1,size:"small",variation:"link",style:{"font-weight":"normal"},type:"button",onClick:Et(y,["prevent"])},{default:A(()=>[me(ue(w(d)),1)]),_:1},8,["onClick"]),V(g.$slots,"footer")]),_:3})]),_:3},8,["disabled"])]),_:3},8,["onSubmit"])]),_:3},16)])}}}),HD=["data-variation"],qD={"data-amplify-container":""},zD=["data-amplify-router-content"],VD={key:1,"data-amplify-router-content":""},WD=We({__name:"authenticator",props:{hideSignUp:{type:Boolean},initialState:null,loginMechanisms:null,services:null,signUpAttributes:null,variation:{default:"default"},socialProviders:null,formFields:null},setup(e){const t=e,{initialState:n,loginMechanisms:r,variation:i,services:o,signUpAttributes:a,socialProviders:s,hideSignUp:l,formFields:c}=lt(t);let u;const d=ot(!1),{service:f,send:h,state:p}=rf(),m=f.subscribe(K=>{K.matches("setup")&&!d.value&&(h({type:"INIT",data:{initialState:n.value,loginMechanisms:r.value,socialProviders:s.value,signUpAttributes:a.value,services:o.value,formFields:c.value}}),d.value=!0)}).unsubscribe,y=Kt(),{route:g,signOut:v,toSignIn:b,toSignUp:E,user:C}=lt(y);od(()=>{u=zL({componentName:"Authenticator",packageName:"vue",version:U9})}),ad(()=>{u(),m()});const x=ot(),O=ot(),U=ot(),H=ot(),G=ot(),q=ot(),z=ot(),Y=ot(),le=ot(),Be=ot(),{getSignInTabText:L,getSignUpTabText:k}=dn,N=ye(()=>L()),ee=ye(()=>k()),se=ye(()=>g.value==="signIn"||g.value==="signUp"),J=ye(()=>["confirmResetPassword","confirmSignIn","confirmSignUp","confirmVerifyUser","forceNewPassword","forgotPassword","setupTotp","signIn","signUp","verifyUser"].includes(g.value));return(K,rt)=>{const Pe=D9,st=O9;return re(),Qe(mt,null,[w(J)?(re(),Qe("div",nn({key:0},K.$attrs,{"data-amplify-authenticator":"","data-variation":w(i)}),[te("div",qD,[V(K.$slots,"header"),te("div",{"data-amplify-router":"","data-amplify-router-content":w(se)?void 0:""},[w(se)&&!w(l)?(re(),Se(st,{key:0},{default:A(()=>[R(Pe,{active:w(g)==="signIn",id:"signIn",label:w(N),onClick:w(b)},null,8,["active","label","onClick"]),R(Pe,{active:w(g)==="signUp",id:"signUp",label:w(ee),onClick:w(E)},null,8,["active","label","onClick"])]),_:1})):Oe("",!0),w(se)?(re(),Qe("div",VD,[w(g)==="signIn"?(re(),Se(T9,{key:0,id:"signIn-panel",role:"tabpanel",class:"amplify-tabs__panel amplify-tabs__panel--active","aria-labelledby":"signIn-tab",ref_key:"signInComponent",ref:x},{signInSlotI:A(()=>[V(K.$slots,"sign-in")]),form:A(({info:Ye,onSignInSubmit:Ct,onForgotPasswordClicked:er,onInput:Ir})=>[V(K.$slots,"sign-in-form",{info:Ye,onInput:Ir,onSignInSubmit:Ct,onForgotPasswordClicked:er})]),header:A(()=>[V(K.$slots,"sign-in-header")]),footer:A(()=>[V(K.$slots,"sign-in-footer")]),_:3},512)):Oe("",!0),w(g)==="signUp"&&!w(l)?(re(),Se(R9,{key:1,id:"signUp-panel",class:"amplify-tabs__panel amplify-tabs__panel--active",role:"tabpanel","aria-labelledby":"signUp-tab",ref_key:"signUpComponent",ref:O},{signUpSlotI:A(()=>[V(K.$slots,"sign-up")]),header:A(()=>[V(K.$slots,"sign-up-header")]),"signup-fields":A(({info:Ye})=>[V(K.$slots,"sign-up-fields",{info:Ye})]),footer:A(()=>[V(K.$slots,"sign-up-footer")]),_:3},512)):Oe("",!0)])):Oe("",!0),w(g)==="confirmSignUp"?(re(),Se(j9,{key:2,ref_key:"confirmSignUpComponent",ref:U},{confirmSignUpSlotI:A(()=>[V(K.$slots,"confirm-sign-up")]),header:A(()=>[V(K.$slots,"confirm-sign-up-header")]),footer:A(()=>[V(K.$slots,"confirm-sign-up-footer")]),_:3},512)):Oe("",!0),w(g)==="forgotPassword"?(re(),Se(FD,{key:3,ref_key:"ForgotPasswordComponent",ref:z},{forgotPasswordSlotI:A(()=>[V(K.$slots,"forgot-password")]),header:A(()=>[V(K.$slots,"forgot-password-header")]),footer:A(()=>[V(K.$slots,"forgot-password-footer")]),_:3},512)):Oe("",!0),w(g)==="confirmResetPassword"?(re(),Se(BD,{key:4,ref_key:"confirmResetPasswordComponent",ref:Y},{confirmResetPasswordSlotI:A(()=>[V(K.$slots,"confirm-reset-password")]),header:A(()=>[V(K.$slots,"confirm-reset-password-header")]),footer:A(()=>[V(K.$slots,"confirm-reset-password-footer")]),_:3},512)):Oe("",!0),w(g)==="confirmSignIn"?(re(),Se($9,{key:5,ref_key:"confirmSignInComponent",ref:H},{confirmSignInSlotI:A(()=>[V(K.$slots,"confirm-sign-in")]),header:A(()=>[V(K.$slots,"confirm-sign-in-header")]),footer:A(()=>[V(K.$slots,"confirm-sign-in-footer")]),_:3},512)):Oe("",!0),w(g)==="setupTotp"?(re(),Se(LD,{key:6,ref_key:"confirmSetupTotpComponent",ref:G},{confirmSetupTotpI:A(()=>[V(K.$slots,"setup-totp")]),header:A(()=>[V(K.$slots,"setup-totp-header")]),footer:A(()=>[V(K.$slots,"setup-totp-footer")]),_:3},512)):Oe("",!0),w(g)==="forceNewPassword"?(re(),Se(UD,{key:7,ref_key:"forceNewPasswordComponent",ref:q},{forceNewPasswordI:A(()=>[V(K.$slots,"force-new-password")]),header:A(()=>[V(K.$slots,"force-new-password-header")]),"force-new-password-form-fields":A(()=>[V(K.$slots,"force-new-password-form-fields")]),footer:A(()=>[V(K.$slots,"force-new-password-footer")]),_:3},512)):Oe("",!0),w(g)==="verifyUser"?(re(),Se(jD,{key:8,ref_key:"verifyUserComponent",ref:le},{verifyUserSlotI:A(()=>[V(K.$slots,"verify-user")]),header:A(()=>[V(K.$slots,"verify-user-header")]),footer:A(()=>[V(K.$slots,"verify-user-footer")]),_:3},512)):Oe("",!0),w(g)==="confirmVerifyUser"?(re(),Se($D,{key:9,ref_key:"confirmVerifyUserComponent",ref:Be},{confirmVerifyUserSlotI:A(()=>[V(K.$slots,"confirm-verify-user")]),header:A(()=>[V(K.$slots,"confirm-verify-user-header")]),footer:A(()=>[V(K.$slots,"confirm-verify-user-footer")]),_:3},512)):Oe("",!0)],8,zD),V(K.$slots,"footer")])],16,HD)):Oe("",!0),w(g)==="authenticated"?V(K.$slots,"default",{key:1,user:w(C),state:w(p),signOut:w(v),send:w(h)}):Oe("",!0)],64)}}}),$l=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},KD={},GD=e=>(zg("data-v-c88aee20"),e=e(),Vg(),e),YD=GD(()=>te("div",{class:"logo"},null,-1)),JD={class:"session-login-info"};function ZD(e,t){return re(),Qe(mt,null,[YD,te("span",JD,[V(e.$slots,"default",{},void 0,!0)])],64)}const XD=$l(KD,[["render",ZD],["__scopeId","data-v-c88aee20"]]);class jr extends _s{constructor(t){super(t),this.constructor=jr,Object.setPrototypeOf(this,jr.prototype)}}class Ds extends jr{constructor(t={}){super({name:"CanceledError",message:"Request is canceled by user",...t}),this.constructor=Ds,Object.setPrototypeOf(this,Ds.prototype)}}var _i;(function(e){e.InvalidApiName="InvalidApiName"})(_i||(_i={}));const J0={[_i.InvalidApiName]:{message:"API name is invalid.",recoverySuggestion:"Check if the API name matches the one in your configuration or `aws-exports.js`"}},Z0=async e=>{var n;if(!e)return;const t=await Oi(QD(e));if(t){const r=await((n=e.body)==null?void 0:n.text());return eU(t,{statusCode:e.statusCode,headers:e.headers,body:r})}},QD=e=>{let t;const n=new Proxy(e.body,{get(i,o,a){return o==="json"?async()=>{t||(t=i.text());try{return JSON.parse(await t)}catch{return{}}}:o==="text"?async()=>(t||(t=i.text()),t):Reflect.get(i,o,a)}});return new Proxy(e,{get(i,o,a){return o==="body"?n:Reflect.get(i,o,a)}})},eU=(e,t)=>{const n=new jr({name:e==null?void 0:e.name,message:e.message,underlyingError:e,response:t});return Object.assign(n,{$metadata:e.$metadata})},Us=new kt("RestApis");function tU(e,t){const n=s=>!!t,r=new AbortController,i=r.signal;let o;const a=async()=>{try{const s=await(n(e)?e():e(i));if(s.statusCode>=300)throw await Z0(s);return s}catch(s){const l=i,c=o??l.reason;if(s.name==="AbortError"||(l==null?void 0:l.aborted)===!0){const u=new Ds({...c&&{message:c},underlyingError:s,recoverySuggestion:"The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously."});throw Us.debug(s),u}throw Us.debug(s),s}};{const s=l=>{i.aborted!==!0&&(r.abort(l),l&&i.reason!==l&&(o=l))};return{response:a(),cancel:s}}}const ym="execute-api",nU="us-east-1",rU=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/,X0=(e,t)=>{var s,l,c;const{service:n=ym,region:r=nU}=((c=(l=(s=t==null?void 0:t.amplify.getConfig())==null?void 0:s.API)==null?void 0:l.REST)==null?void 0:c[t==null?void 0:t.apiName])??{},{hostname:i}=e,[,o,a]=rU.exec(i)??[];return o===ym?{service:o,region:a??r}:o==="appsync-api"?{service:"appsync",region:a??r}:{service:n,region:r}};function iU(e,t){const{message:n,recoverySuggestion:r}=J0[t];if(!e)throw new jr({name:t,message:n,recoverySuggestion:r})}const oU=(e,t,n,r)=>{var o,a,s,l;const i=(l=(s=(a=(o=e.getConfig())==null?void 0:o.API)==null?void 0:a.REST)==null?void 0:s[t])==null?void 0:l.endpoint;iU(!!i,_i.InvalidApiName);try{const c=new mr(i+n);if(r){const u=new kh(c.searchParams);Object.entries(r).forEach(([d,f])=>{u.set(d,f)}),c.search=new kh(u).toString()}return c}catch{throw new jr({name:_i.InvalidApiName,...J0[_i.InvalidApiName],recoverySuggestion:`Please make sure the REST endpoint URL is a valid URL string. Got ${i}`})}},aU=(e,t)=>{const n={};for(const r in e)n[r.toLowerCase()]=e[r];return t&&(n["content-type"]="application/json; charset=UTF-8",t instanceof FormData&&delete n["content-type"]),n},sU=async(e,t,n)=>{const{url:r,method:i,headers:o,body:a,withCredentials:s,abortSignal:l}=t,c=a?a instanceof FormData?a:JSON.stringify(a??""):void 0,u=aU(o,a),d={url:r,headers:u,method:i,body:c},f={retryDecider:vd(Z0),computeDelay:gd,withCrossDomainCredentials:s,abortSignal:l},h=lU(d,n);let p;const m=await cU(e);if(h&&m){const y=X0(r),g=(n==null?void 0:n.service)??y.service,v=(n==null?void 0:n.region)??y.region;p=await xE(d,{...f,credentials:m,region:v,service:g})}else p=await md(d,{...f});return{statusCode:p.statusCode,headers:p.headers,body:p.body}},lU=({headers:e},t)=>!e.authorization&&!e["x-api-key"]&&!!t,cU=async e=>{try{const{credentials:t}=await e.Auth.fetchAuthSession();if(t)return t}catch{Us.debug("No credentials available, the request will be unsigned.")}return null},uU=(e,t,n)=>tU(async r=>{var f,h,p,m;const{apiName:i,options:o={},path:a}=t,s=oU(e,i,a,o==null?void 0:o.queryParams),l=await((m=(p=(h=(f=e.libraryOptions)==null?void 0:f.API)==null?void 0:h.REST)==null?void 0:p.headers)==null?void 0:m.call(p,{apiName:i})),{headers:c={}}=o,u={...l,...c},d=X0(s,{amplify:e,apiName:i});return Us.debug(n,s,u,`IAM signing options: ${JSON.stringify(d)}`),sU(e,{...o,url:s,method:n,headers:u,abortSignal:r},d)}),dU=(e,t)=>uU(e,t,"GET"),fU=e=>dU(qe,e),Gi=e=>(zg("data-v-841bbef9"),e=e(),Vg(),e),hU={class:"config-area"},pU={class:"input-group"},mU=Gi(()=>te("label",null,"Model ID:",-1)),gU={class:"input-group"},vU=Gi(()=>te("label",null,[me("Parameters: "),te("a",{href:"https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters.html",rel:"noopener noreferrer",target:"_blank"}," Check model inference parameters ")],-1)),yU=Gi(()=>te("label",null,[me("System: "),te("a",{href:"https://docs.aws.amazon.com/bedrock/latest/userguide/conversation-inference.html",rel:"noopener noreferrer",target:"_blank"},"Check model support")],-1)),bU=Gi(()=>te("label",null,"Messages to Sample:",-1)),_U=Gi(()=>te("label",null,"content_tag:",-1)),SU=Gi(()=>te("label",null,"Custom Params (Used in Workflow):",-1)),wU={__name:"AssistantConfig",setup(e,{expose:t}){async function n(){const c=await Or.getTokens().then(u=>u.accessToken.toString());console.log(c);try{const d=await fU({apiName:"AssistantConfigApi",path:"/accounts/4234234234/workflows/",options:{headers:{Authorization:c}}}).response;console.log("GET call succeeded: ",d)}catch(u){console.log("GET call failed: ",JSON.parse(u.response.body))}}const r=n();console.log(r);const i=ot("https://drox7dv77yuvy.cloudfront.net/bedrock_converse_api");ot(!0);const o=ot({bedrock_converse_parameters:{model_id:"anthropic.claude-3-sonnet-20240229-v1:0",inference_config:`temperature=0.7
topP=0.9
maxTokens=2000`,system_prompts:[{text:`Você é um excelente assistente de médico homeapata, sempre busque resposta de acordo com as fontes contidas dentro da tag xml documento. 
Não invente respostas, apenas as informações baseada no documento são utilizadas para responder ao usuário. Sempre faça as referencias dos PDFs utilizados como fonte que estão dentro da tag documento no campo source do json.`}]},assistant_parameters:{messages_to_sample:5,content_tag:"documento",state_machine_custom_params:"hello = state_machine"}}),a=c=>{const u={};if(typeof c=="string")c.trim().split(`
`).forEach(f=>{const[h,p]=f.split("=");u[h.trim()]=isNaN(p)?p.trim():Number(p)});else return null;return u};return t({assistantConfigData:()=>{try{const{bedrock_converse_parameters:c,assistant_parameters:u}=JSON.parse(JSON.stringify(o.value));return c.inference_config=a(c.inference_config),u.state_machine_custom_params=a(u.state_machine_custom_params),{assistant_url:i.value,bedrock_converse_parameters:c,assistant_parameters:u}}catch(c){console.log(c)}}}),(c,u)=>(re(),Qe("div",hU,[te("div",pU,[mU,ii(te("input",{"onUpdate:modelValue":u[0]||(u[0]=d=>o.value.bedrock_converse_parameters.model_id=d),placeholder:"Enter model ID",type:"text"},null,512),[[oi,o.value.bedrock_converse_parameters.model_id]])]),te("div",gU,[vU,ii(te("textarea",{id:"parameters-input","onUpdate:modelValue":u[1]||(u[1]=d=>o.value.bedrock_converse_parameters.inference_config=d),placeholder:`
 Enter de model inference parameters:
 temperature=0.7
 top_p=0.999
 top_k=250
 max_tokens=1028`},null,512),[[oi,o.value.bedrock_converse_parameters.inference_config]]),yU,ii(te("textarea",{id:"parameters-input","onUpdate:modelValue":u[2]||(u[2]=d=>o.value.bedrock_converse_parameters.system_prompts[0].text=d),placeholder:"Be a nice agent"},null,512),[[oi,o.value.bedrock_converse_parameters.system_prompts[0].text]]),bU,ii(te("input",{"onUpdate:modelValue":u[3]||(u[3]=d=>o.value.assistant_parameters.messages_to_sample=d),placeholder:"The last N messages that will be forwarded to Workflow",type:"text"},null,512),[[oi,o.value.assistant_parameters.messages_to_sample]]),_U,ii(te("input",{"onUpdate:modelValue":u[4]||(u[4]=d=>o.value.assistant_parameters.content_tag=d),placeholder:"The tag where the workflow output will be wrapped",type:"text"},null,512),[[oi,o.value.assistant_parameters.content_tag]]),SU,ii(te("textarea",{"onUpdate:modelValue":u[5]||(u[5]=d=>o.value.assistant_parameters.state_machine_custom_params=d),placeholder:"Additional parameters that will be sent to workflow"},null,512),[[oi,o.value.assistant_parameters.state_machine_custom_params]])])]))}},EU=$l(wU,[["__scopeId","data-v-841bbef9"]]);function Q0(e){return xU(e)||IU(e)||e1(e)||CU()}function CU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xU(e){if(Array.isArray(e))return Lu(e)}function AU(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=e1(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,s;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return o=c.done,c},e:function(c){a=!0,s=c},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}}}function e1(e,t){if(e){if(typeof e=="string")return Lu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lu(e,t)}}function Lu(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Du(e){var t=typeof Map=="function"?new Map:void 0;return Du=function(r){if(r===null||!TU(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return kU(r,arguments,Vo(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Wo(i,r)},Du(e)}function kU(e,t,n){if(ff())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&Wo(i,n.prototype),i}function TU(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function he(e,t,n){return t=Vo(t),MU(e,ff()?Reflect.construct(t,n||[],Vo(e).constructor):t.apply(e,n))}function MU(e,t){if(t&&(fe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qt(e)}function Qt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ff(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ff=function(){return!!e})()}function Vo(e){return Vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vo(e)}function pe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wo(e,t)}function Wo(e,t){return Wo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Wo(e,t)}function _(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(L,k,N){L[k]=N.value},o=typeof Symbol=="function"?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(L,k,N){return Object.defineProperty(L,k,{value:N,enumerable:!0,configurable:!0,writable:!0}),L[k]}try{c({},"")}catch{c=function(N,ee,se){return N[ee]=se}}function u(L,k,N,ee){var se=k&&k.prototype instanceof g?k:g,J=Object.create(se.prototype),K=new le(ee||[]);return i(J,"_invoke",{value:G(L,N,K)}),J}function d(L,k,N){try{return{type:"normal",arg:L.call(k,N)}}catch(ee){return{type:"throw",arg:ee}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",y={};function g(){}function v(){}function b(){}var E={};c(E,a,function(){return this});var C=Object.getPrototypeOf,x=C&&C(C(Be([])));x&&x!==n&&r.call(x,a)&&(E=x);var O=b.prototype=g.prototype=Object.create(E);function U(L){["next","throw","return"].forEach(function(k){c(L,k,function(N){return this._invoke(k,N)})})}function H(L,k){function N(se,J,K,rt){var Pe=d(L[se],L,J);if(Pe.type!=="throw"){var st=Pe.arg,Ye=st.value;return Ye&&fe(Ye)=="object"&&r.call(Ye,"__await")?k.resolve(Ye.__await).then(function(Ct){N("next",Ct,K,rt)},function(Ct){N("throw",Ct,K,rt)}):k.resolve(Ye).then(function(Ct){st.value=Ct,K(st)},function(Ct){return N("throw",Ct,K,rt)})}rt(Pe.arg)}var ee;i(this,"_invoke",{value:function(J,K){function rt(){return new k(function(Pe,st){N(J,K,Pe,st)})}return ee=ee?ee.then(rt,rt):rt()}})}function G(L,k,N){var ee=f;return function(se,J){if(ee===p)throw new Error("Generator is already running");if(ee===m){if(se==="throw")throw J;return{value:e,done:!0}}for(N.method=se,N.arg=J;;){var K=N.delegate;if(K){var rt=q(K,N);if(rt){if(rt===y)continue;return rt}}if(N.method==="next")N.sent=N._sent=N.arg;else if(N.method==="throw"){if(ee===f)throw ee=m,N.arg;N.dispatchException(N.arg)}else N.method==="return"&&N.abrupt("return",N.arg);ee=p;var Pe=d(L,k,N);if(Pe.type==="normal"){if(ee=N.done?m:h,Pe.arg===y)continue;return{value:Pe.arg,done:N.done}}Pe.type==="throw"&&(ee=m,N.method="throw",N.arg=Pe.arg)}}}function q(L,k){var N=k.method,ee=L.iterator[N];if(ee===e)return k.delegate=null,N==="throw"&&L.iterator.return&&(k.method="return",k.arg=e,q(L,k),k.method==="throw")||N!=="return"&&(k.method="throw",k.arg=new TypeError("The iterator does not provide a '"+N+"' method")),y;var se=d(ee,L.iterator,k.arg);if(se.type==="throw")return k.method="throw",k.arg=se.arg,k.delegate=null,y;var J=se.arg;return J?J.done?(k[L.resultName]=J.value,k.next=L.nextLoc,k.method!=="return"&&(k.method="next",k.arg=e),k.delegate=null,y):J:(k.method="throw",k.arg=new TypeError("iterator result is not an object"),k.delegate=null,y)}function z(L){var k={tryLoc:L[0]};1 in L&&(k.catchLoc=L[1]),2 in L&&(k.finallyLoc=L[2],k.afterLoc=L[3]),this.tryEntries.push(k)}function Y(L){var k=L.completion||{};k.type="normal",delete k.arg,L.completion=k}function le(L){this.tryEntries=[{tryLoc:"root"}],L.forEach(z,this),this.reset(!0)}function Be(L){if(L||L===""){var k=L[a];if(k)return k.call(L);if(typeof L.next=="function")return L;if(!isNaN(L.length)){var N=-1,ee=function se(){for(;++N<L.length;)if(r.call(L,N))return se.value=L[N],se.done=!1,se;return se.value=e,se.done=!0,se};return ee.next=ee}}throw new TypeError(fe(L)+" is not iterable")}return v.prototype=b,i(O,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(L){var k=typeof L=="function"&&L.constructor;return!!k&&(k===v||(k.displayName||k.name)==="GeneratorFunction")},t.mark=function(L){return Object.setPrototypeOf?Object.setPrototypeOf(L,b):(L.__proto__=b,c(L,l,"GeneratorFunction")),L.prototype=Object.create(O),L},t.awrap=function(L){return{__await:L}},U(H.prototype),c(H.prototype,s,function(){return this}),t.AsyncIterator=H,t.async=function(L,k,N,ee,se){se===void 0&&(se=Promise);var J=new H(u(L,k,N,ee),se);return t.isGeneratorFunction(k)?J:J.next().then(function(K){return K.done?K.value:J.next()})},U(O),c(O,l,"Generator"),c(O,a,function(){return this}),c(O,"toString",function(){return"[object Generator]"}),t.keys=function(L){var k=Object(L),N=[];for(var ee in k)N.push(ee);return N.reverse(),function se(){for(;N.length;){var J=N.pop();if(J in k)return se.value=J,se.done=!1,se}return se.done=!0,se}},t.values=Be,le.prototype={constructor:le,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Y),!k)for(var N in this)N.charAt(0)==="t"&&r.call(this,N)&&!isNaN(+N.slice(1))&&(this[N]=e)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var N=this;function ee(st,Ye){return K.type="throw",K.arg=k,N.next=st,Ye&&(N.method="next",N.arg=e),!!Ye}for(var se=this.tryEntries.length-1;se>=0;--se){var J=this.tryEntries[se],K=J.completion;if(J.tryLoc==="root")return ee("end");if(J.tryLoc<=this.prev){var rt=r.call(J,"catchLoc"),Pe=r.call(J,"finallyLoc");if(rt&&Pe){if(this.prev<J.catchLoc)return ee(J.catchLoc,!0);if(this.prev<J.finallyLoc)return ee(J.finallyLoc)}else if(rt){if(this.prev<J.catchLoc)return ee(J.catchLoc,!0)}else{if(!Pe)throw new Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return ee(J.finallyLoc)}}}},abrupt:function(k,N){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var se=this.tryEntries[ee];if(se.tryLoc<=this.prev&&r.call(se,"finallyLoc")&&this.prev<se.finallyLoc){var J=se;break}}J&&(k==="break"||k==="continue")&&J.tryLoc<=N&&N<=J.finallyLoc&&(J=null);var K=J?J.completion:{};return K.type=k,K.arg=N,J?(this.method="next",this.next=J.finallyLoc,y):this.complete(K)},complete:function(k,N){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&N&&(this.next=N),y},finish:function(k){for(var N=this.tryEntries.length-1;N>=0;--N){var ee=this.tryEntries[N];if(ee.finallyLoc===k)return this.complete(ee.completion,ee.afterLoc),Y(ee),y}},catch:function(k){for(var N=this.tryEntries.length-1;N>=0;--N){var ee=this.tryEntries[N];if(ee.tryLoc===k){var se=ee.completion;if(se.type==="throw"){var J=se.arg;Y(ee)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(k,N,ee){return this.delegate={iterator:Be(k),resultName:N,nextLoc:ee},this.method==="next"&&(this.arg=e),y}},t}function bm(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){n(c);return}s.done?t(l):Promise.resolve(l).then(r,i)}function D(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(l){bm(o,r,i,a,s,"next",l)}function s(l){bm(o,r,i,a,s,"throw",l)}a(void 0)})}}function _m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_m(Object(n),!0).forEach(function(r){t1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_m(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t1(e,t,n){return t=n1(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n1(r.key),r)}}function M(e,t,n){return t&&Sm(e.prototype,t),n&&Sm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n1(e){var t=RU(e,"string");return fe(t)=="symbol"?t:String(t)}function RU(e,t){if(fe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var PU=function(){function e(){T(this,e)}return M(e,null,[{key:"render",value:function(n,r){var i=document.createElement("div");i.id="error-view",i.innerText=r,n.replaceChildren(i)}}]),e}(),NU=function(){function e(){T(this,e)}return M(e,null,[{key:"onLoad",value:function(n){n.innerHTML='<div id="large-loading-ring"></div>'}},{key:"createElements",value:function(){var n=document.createElement("div");return n.id="validate-property-key-view",n}},{key:"render",value:function(n,r,i){var o=e.createElements(),a={onSuccess:r,onFail:PU.render.bind(this,n,"Your 'key' has failed authentication"),onLoad:e.onLoad.bind(this,o)};i.key&&i.verifyKey(i.key,a),n.replaceChildren(o)}}]),e}(),xt=function(){function e(){T(this,e)}return M(e,null,[{key:"unsetStyle",value:function(n,r){var i=Object.keys(r).reduce(function(o,a){return o[a]="",o},{});Object.assign(n.style,i)}},{key:"unsetActivityCSSMouseStates",value:function(n,r){r.click&&e.unsetStyle(n,r.click),r.hover&&e.unsetStyle(n,r.hover)}},{key:"unsetAllCSSMouseStates",value:function(n,r){e.unsetActivityCSSMouseStates(n,r),r.default&&e.unsetStyle(n,r.default)}},{key:"processStateful",value:function(n,r,i){var o=n.default||{},a=Object.assign(JSON.parse(JSON.stringify(Ne(Ne({},o),r))),n==null?void 0:n.hover),s=Object.assign(JSON.parse(JSON.stringify(Ne(Ne({},a),i))),n==null?void 0:n.click);return{default:o,hover:a,click:s}}},{key:"mergeStatefulStyles",value:function(n){var r={default:{},hover:{},click:{}};return n.forEach(function(i){r.default=Object.assign(r.default,i.default),r.hover=Object.assign(r.hover,i.hover),r.click=Object.assign(r.click,i.click)}),r}},{key:"overwriteDefaultWithAlreadyApplied",value:function(n,r){Object.keys(n.default||[]).forEach(function(i){var o,a=i;r.style[a]&&(o=n.default)!=null&&o[a]&&(n.default[i]=r.style[a])})}},{key:"applyToStyleIfNotDefined",value:function(n,r){for(var i in r){var o=r[i];n[i]===""&&o&&(n[i]=o)}}}]),e}(),r1=function(){function e(){T(this,e)}return M(e,null,[{key:"apply",value:function(n,r){if(r)try{e.applyStyleSheet(n,r)}catch{e.addStyleElement(n,r)}}},{key:"applyStyleSheet",value:function(n,r){var i=new CSSStyleSheet;i.replaceSync(n),r.adoptedStyleSheets.push(i)}},{key:"addStyleElement",value:function(n,r){var i=document.createElement("style");i.innerHTML=n,r.appendChild(i)}},{key:"applyDefaultStyleToComponent",value:function(n,r){r&&xt.applyToStyleIfNotDefined(n,r),xt.applyToStyleIfNotDefined(n,e.DEFAULT_COMPONENT_STYLE)}}]),e}();r1.DEFAULT_COMPONENT_STYLE={height:"350px",width:"320px",border:"1px solid #cacaca",fontFamily:"'Inter', sans-serif, Avenir, Helvetica, Arial",fontSize:"0.9rem",backgroundColor:"white",position:"relative",overflow:"hidden"};var Pc=r1,_t=function(e){return e.ESCAPE="Escape",e.ENTER="Enter",e.TAB="Tab",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_RIGHT="ArrowRight",e.ARROW_LEFT="ArrowLeft",e.BACKSPACE="Backspace",e.DELETE="Delete",e.META="Meta",e.CONTROL="Control",e}(_t||{}),dr=M(function e(){T(this,e)});dr.IS_SAFARI=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);dr.IS_CHROMIUM=window.chrome;var i1=function(){function e(){T(this,e)}return M(e,null,[{key:"add",value:function(n,r,i){r!==void 0&&n.addEventListener("keydown",e.onKeyDown.bind(this,r)),n.oninput=e.onInput.bind(this,r,i)}},{key:"onKeyDown",value:function(n,r){var i=r.target.textContent;i&&i.length>=n&&!e.PERMITTED_KEYS.has(r.key)&&!e.isKeyCombinationPermitted(r)&&r.preventDefault()}},{key:"isKeyCombinationPermitted",value:function(n){return n.key==="a"?n.ctrlKey||n.metaKey:!1}},{key:"onInput",value:function(n,r,i){var o=i.target,a=o.textContent||"";n!==void 0&&a.length>n&&(o.textContent=a.substring(0,n),a1.focusEndOfInput(o)),r==null||r()}}]),e}();i1.PERMITTED_KEYS=new Set([_t.BACKSPACE,_t.DELETE,_t.ARROW_RIGHT,_t.ARROW_LEFT,_t.ARROW_DOWN,_t.ARROW_UP,_t.META,_t.CONTROL,_t.ENTER]);var OU=i1,LU=function(){function e(){T(this,e)}return M(e,null,[{key:"sanitizePastedTextContent",value:function(n){var r,i;n.preventDefault();var o=(r=n.clipboardData)==null?void 0:r.getData("text/plain");(i=document.execCommand)==null||i.call(document,"insertText",!1,o)}}]),e}(),o1=function(){function e(t,n){var r=this;T(this,e);var i,o=e.processConfig(n,t.textInput);this.elementRef=e.createContainerElement((i=o==null?void 0:o.styles)==null?void 0:i.container),this.inputElementRef=this.createInputElement(o),this._config=o,this.elementRef.appendChild(this.inputElementRef),setTimeout(function(){var a;OU.add(r.inputElementRef,(a=t.textInput)==null?void 0:a.characterLimit,t._validationHandler)})}return M(e,[{key:"createInputElement",value:function(n){var r,i,o,a=document.createElement("div");return a.id=e.TEXT_INPUT_ID,a.classList.add("text-input-styling","text-input-placeholder"),a.innerText=((r=n==null?void 0:n.placeholder)==null?void 0:r.text)||"Ask me anything!",dr.IS_CHROMIUM&&e.preventAutomaticScrollUpOnNewLine(a),typeof(n==null?void 0:n.disabled)=="boolean"&&n.disabled===!0?(a.contentEditable="false",a.classList.add("text-input-disabled")):(a.contentEditable="true",this.addEventListeners(a,n)),Object.assign(a.style,(i=n==null?void 0:n.styles)==null?void 0:i.text),Object.assign(a.style,(o=n==null?void 0:n.placeholder)==null?void 0:o.style),a}},{key:"removeTextIfPlaceholder",value:function(){var n,r,i,o;this.inputElementRef.classList.contains("text-input-placeholder")&&!this.inputElementRef.classList.contains("text-input-disabled")&&((n=this._config.placeholder)!=null&&n.style&&(xt.unsetStyle(this.inputElementRef,(r=this._config.placeholder)==null?void 0:r.style),Object.assign(this.inputElementRef.style,(o=(i=this._config)==null?void 0:i.styles)==null?void 0:o.text)),e.clear(this.inputElementRef),this.inputElementRef.classList.remove("text-input-placeholder"))}},{key:"addEventListeners",value:function(n,r){var i,o,a;n.onfocus=this.onFocus.bind(this,(i=r==null?void 0:r.styles)==null?void 0:i.focus),(o=r==null?void 0:r.styles)!=null&&o.focus&&(n.onblur=this.onBlur.bind(this,r.styles.focus,(a=r==null?void 0:r.styles)==null?void 0:a.container)),n.addEventListener("keydown",this.onKeydown.bind(this)),n.onpaste=LU.sanitizePastedTextContent}},{key:"onFocus",value:function(n){var r=this;dr.IS_SAFARI?setTimeout(function(){r.removeTextIfPlaceholder()}):this.removeTextIfPlaceholder(),Object.assign(this.elementRef.style,n)}},{key:"onBlur",value:function(n,r){xt.unsetStyle(this.elementRef,n),r&&Object.assign(this.elementRef.style,r)}},{key:"onKeydown",value:function(n){var r;n.key===_t.ENTER&&!n.ctrlKey&&!n.shiftKey&&(n.preventDefault(),(r=this.submit)==null||r.call(this))}}],[{key:"processConfig",value:function(n,r){var i,o,a,s,l;return(i=r)!==null&&i!==void 0||(r={}),(o=r.disabled)!==null&&o!==void 0||(r.disabled=n.isTextInputDisabled),(a=r.placeholder)!==null&&a!==void 0||(r.placeholder={}),(s=(l=r.placeholder).text)!==null&&s!==void 0||(l.text=n.textInputPlaceholderText),r}},{key:"preventAutomaticScrollUpOnNewLine",value:function(n){var r;n.addEventListener("keydown",function(){r=window.scrollY}),n.addEventListener("input",function(){r!==window.scrollY&&window.scrollTo({top:r})})}},{key:"clear",value:function(n){var r=window.scrollY;n.classList.contains("text-input-disabled")||(n.textContent=""),dr.IS_CHROMIUM&&window.scrollTo({top:r})}},{key:"toggleEditability",value:function(n,r){n.contentEditable=r?"true":"false"}},{key:"createContainerElement",value:function(n){var r=document.createElement("div");return r.id="text-input-container",Object.assign(r.style,n),r}}]),e}();o1.TEXT_INPUT_ID="text-input";var hf=o1,a1=function(){function e(){T(this,e)}return M(e,null,[{key:"focusEndOfInput",value:function(n){var r=document.createRange();r.selectNodeContents(n),r.collapse(!1);var i=window.getSelection();i==null||i.removeAllRanges(),i==null||i.addRange(r)}},{key:"focusFromParentElement",value:function(n){var r=n.querySelector("#".concat(hf.TEXT_INPUT_ID));r&&e.focusEndOfInput(r)}}]),e}();function wm(e){return e.charAt(0).toUpperCase()+e.slice(1)}function DU(e){return e&&JSON.stringify(e)}function pf(e,t,n,r){var i=`
`.concat(wm(t)," message: ").concat(JSON.stringify(e),` 
`),o=n?"".concat(wm(t)," message after interceptor: ").concat(DU(r),` 
`):"";return i+o}function UU(e,t,n,r){return"".concat(pf(e,t,n,r),"Make sure the ").concat(t,` message is using the Response format: https://deepchat.dev/docs/connect/#Response 
You can also augment it using the responseInterceptor property: https://deepchat.dev/docs/interceptors#responseInterceptor`)}function FU(e,t,n){var r="response";return"".concat(pf(e,r,t,n),"Make sure the ").concat(r,' message is using the {text: string} format, e.g: {text: "Model Response"}')}function BU(e,t){var n="request";return"".concat(pf(e,n,t),"Make sure the ").concat(n,' message is using the {body: {text: string}} format, e.g: {body: {text: "Model Response"}}')}var Em=`Make sure the events are using {text: string} or {html: string} format.
You can also augment them using the responseInterceptor property: https://deepchat.dev/docs/interceptors#responseInterceptor`,at={INVALID_KEY:"Invalid API Key",CONNECTION_FAILED:"Failed to connect",INVALID_RESPONSE:UU,INVALID_MODEL_REQUEST:BU,INVALID_MODEL_RESPONSE:FU,INVALID_STREAM_EVENT:Em,INVALID_STREAM_EVENT_MIX:"Cannot mix {text: string} and {html: string} responses.",NO_VALID_STREAM_EVENTS_SENT:`No valid stream events were sent.
`.concat(Em)},s1=function(){function e(){T(this,e)}return M(e,null,[{key:"addElements",value:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];i.forEach(function(a){return n.appendChild(a)})}},{key:"isScrollbarAtBottomOfElement",value:function(n){var r=n.scrollHeight,i=n.clientHeight,o=n.scrollTop,a=r-i;return o>=a-e.CODE_SNIPPET_GENERATION_JUMP}},{key:"cloneElement",value:function(n){var r=n.cloneNode(!0);return n.parentNode.replaceChild(r,n),r}},{key:"scrollToBottom",value:function(n){n.scrollTop=n.scrollHeight}},{key:"scrollToTop",value:function(n){n.scrollTop=0}}]),e}();s1.CODE_SNIPPET_GENERATION_JUMP=.5;var en=s1,l1=function(){function e(){T(this,e)}return M(e,null,[{key:"speak",value:function(n,r){if(window.SpeechSynthesisUtterance){var i=new SpeechSynthesisUtterance(n);Object.assign(i,r),speechSynthesis.speak(i)}}},{key:"processConfig",value:function(n,r){var i={};setTimeout(function(){if(fe(n)=="object"&&(n.lang&&(i.lang=n.lang),n.pitch&&(i.pitch=n.pitch),n.rate&&(i.rate=n.rate),n.volume&&(i.volume=n.volume),n.voiceName)){var o=window.speechSynthesis.getVoices().find(function(a){var s;return a.name.toLocaleLowerCase()===((s=n.voiceName)==null?void 0:s.toLocaleLowerCase())});o&&(i.voice=o)}r(i)},e.LOAD_VOICES_MS)}}]),e}();l1.LOAD_VOICES_MS=200;var cs=l1,$r=function(){function e(){T(this,e)}return M(e,null,[{key:"checkForContainerStyles",value:function(n,r){var i=n.containerStyle;i&&(Object.assign(r.style,i),console.error("The containerStyle property is deprecated since version 1.3.14."),console.error("Please change to using the style property instead: https://deepchat.dev/docs/styles#style"))}},{key:"handleResponseProperty",value:function(n){return console.error("The {result: ....} response object type is deprecated since version 1.3.0."),console.error("Please change to using the new response object: https://deepchat.dev/docs/connect#Response"),n.result}},{key:"processInitialMessageFile",value:function(n){var r=n.file;r&&(console.error("The file property in MessageContent is deprecated since version 1.3.17."),console.error("Please change to using the files array property: https://deepchat.dev/docs/messages/#MessageContent"),n.files=[r])}},{key:"processValidateInput",value:function(n){var r=n.validateMessageBeforeSending;if(r)return console.error("The validateMessageBeforeSending property is deprecated since version 1.3.24."),console.error("Please change to using validateInput: https://deepchat.dev/docs/interceptors#validateInput"),r}},{key:"processSubmitUserMessage",value:function(n){return console.error("The submitUserMessage(text: string) argument string type is deprecated since version 1.4.4."),console.error("Please change to using the new argument type: https://deepchat.dev/docs/methods#submitUserMessage"),{text:n}}},{key:"flagHTMLUpdateClass",value:function(n){var r;(r=n.children[0])!=null&&r.classList.contains("deep-chat-update-message")&&(console.error('The "deep-chat-update-message" html class is deprecated since version 1.4.4.'),console.error("Please change to using {..., overwrite: true} object: https://deepchat.dev/docs/connect#Response"))}}]),e}(),jU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8c3ZnIGZpbGw9IiMwMDAwMDAiIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIAoJCXZpZXdCb3g9IjAgMCAzMiAzMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+Cgk8cGF0aCBkPSJNMjMsMzAuMzZIOWMtMi40MDQsMC00LjM2LTEuOTU2LTQuMzYtNC4zNlYxNWMwLTIuNDA0LDEuOTU2LTQuMzYsNC4zNi00LjM2aDMuNjU5CgkJYzAuMTY3LTEuNTY2LDEuNDE1LTIuODEzLDIuOTgxLTIuOTgxVjUuMzMzYy0xLjEzMS0wLjE3NC0yLTEuMTU0LTItMi4zMzNjMC0xLjMwMSwxLjA1OS0yLjM2LDIuMzYtMi4zNgoJCWMxLjMwMiwwLDIuMzYsMS4wNTksMi4zNiwyLjM2YzAsMS4xNzktMC44NjksMi4xNTktMiwyLjMzM1Y3LjY2YzEuNTY2LDAuMTY3LDIuODE0LDEuNDE1LDIuOTgxLDIuOTgxSDIzCgkJYzIuNDA0LDAsNC4zNiwxLjk1Niw0LjM2LDQuMzZ2MTFDMjcuMzYsMjguNDA0LDI1LjQwNCwzMC4zNiwyMywzMC4zNnogTTksMTEuMzZjLTIuMDA3LDAtMy42NCwxLjYzMy0zLjY0LDMuNjR2MTEKCQljMCwyLjAwNywxLjYzMywzLjY0LDMuNjQsMy42NGgxNGMyLjAwNywwLDMuNjQtMS42MzMsMy42NC0zLjY0VjE1YzAtMi4wMDctMS42MzMtMy42NC0zLjY0LTMuNjRIOXogTTEzLjM4NCwxMC42NGg1LjIzMQoJCUMxOC40MzksOS4zNTQsMTcuMzM0LDguMzYsMTYsOC4zNkMxNC42NjcsOC4zNiwxMy41NjEsOS4zNTQsMTMuMzg0LDEwLjY0eiBNMTYsMS4zNmMtMC45MDQsMC0xLjY0LDAuNzM2LTEuNjQsMS42NAoJCVMxNS4wOTYsNC42NCwxNiw0LjY0YzAuOTA0LDAsMS42NC0wLjczNiwxLjY0LTEuNjRTMTYuOTA0LDEuMzYsMTYsMS4zNnogTTIwLDI3LjM2aC04Yy0xLjMwMSwwLTIuMzYtMS4wNTktMi4zNi0yLjM2CgkJczEuMDU5LTIuMzYsMi4zNi0yLjM2aDhjMS4zMDIsMCwyLjM2LDEuMDU5LDIuMzYsMi4zNlMyMS4zMDIsMjcuMzYsMjAsMjcuMzZ6IE0xMiwyMy4zNmMtMC45MDQsMC0xLjY0LDAuNzM1LTEuNjQsMS42NAoJCXMwLjczNiwxLjY0LDEuNjQsMS42NGg4YzAuOTA0LDAsMS42NC0wLjczNSwxLjY0LTEuNjRzLTAuNzM1LTEuNjQtMS42NC0xLjY0SDEyeiBNMzEsMjMuODZoLTJjLTAuMTk5LDAtMC4zNi0wLjE2MS0wLjM2LTAuMzZWMTUKCQljMC0wLjE5OSwwLjE2MS0wLjM2LDAuMzYtMC4zNmgyYzAuMTk5LDAsMC4zNiwwLjE2MSwwLjM2LDAuMzZ2OC41QzMxLjM2LDIzLjY5OSwzMS4xOTksMjMuODYsMzEsMjMuODZ6IE0yOS4zNiwyMy4xNGgxLjI3OXYtNy43OAoJCUgyOS4zNlYyMy4xNHogTTMsMjMuODZIMWMtMC4xOTksMC0wLjM2LTAuMTYxLTAuMzYtMC4zNlYxNWMwLTAuMTk5LDAuMTYxLTAuMzYsMC4zNi0wLjM2aDJjMC4xOTksMCwwLjM2LDAuMTYxLDAuMzYsMC4zNnY4LjUKCQlDMy4zNiwyMy42OTksMy4xOTksMjMuODYsMywyMy44NnogTTEuMzYsMjMuMTRoMS4yOHYtNy43OEgxLjM2VjIzLjE0eiBNMjAsMjAuMzZjLTEuMzAyLDAtMi4zNi0xLjA1OS0yLjM2LTIuMzYKCQlzMS4wNTktMi4zNiwyLjM2LTIuMzZzMi4zNiwxLjA1OSwyLjM2LDIuMzZDMjIuMzYsMTkuMzAyLDIxLjMwMiwyMC4zNiwyMCwyMC4zNnogTTIwLDE2LjM2Yy0wLjkwNCwwLTEuNjQsMC43MzYtMS42NCwxLjY0CgkJczAuNzM1LDEuNjQsMS42NCwxLjY0czEuNjQtMC43MzUsMS42NC0xLjY0UzIwLjkwNCwxNi4zNiwyMCwxNi4zNnogTTEyLDIwLjM2Yy0xLjMwMSwwLTIuMzYtMS4wNTktMi4zNi0yLjM2czEuMDU5LTIuMzYsMi4zNi0yLjM2CgkJczIuMzYsMS4wNTksMi4zNiwyLjM2QzE0LjM2LDE5LjMwMiwxMy4zMDEsMjAuMzYsMTIsMjAuMzZ6IE0xMiwxNi4zNmMtMC45MDQsMC0xLjY0LDAuNzM2LTEuNjQsMS42NHMwLjczNiwxLjY0LDEuNjQsMS42NAoJCXMxLjY0LTAuNzM1LDEuNjQtMS42NFMxMi45MDQsMTYuMzYsMTIsMTYuMzZ6Ii8+Cgk8cmVjdCBzdHlsZT0iZmlsbDpub25lOyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIi8+Cjwvc3ZnPg==",$U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAMAAAC/MqoPAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAADNQTFRF////9vX18vLy/Pz86enp4+Li2tnZ1tbWzczM+fn57Ozs4N/f09LS0M/P5uXl7+/v3dzcwtncCAAAAAFiS0dEAIgFHUgAAAAJcEhZcwAAAEgAAABIAEbJaz4AAAZNSURBVHja7d3bdtsqEABQYABZSLH9/3+ZpnUsIcF5iOM6PfElNoMHMfPQdq3GmL0GkLhEUqLaUExnOtOZznSmM53pTGc605nOdKYznelMZzrTmV4LXSqllKyJDkob26xWq8Zae/iH0QoWTm9d1xur4WuypQJtTd+5dqn0VjcxzNO5/57mEBvdLo8Oron6aseWOjYOFkVvjQs3DmgyONMuht52EfztP+4hdu0i6LCO808/M8c1lE/fuPGej41uUzgdtoO/75N+2ELJ9I3b3//hPXbiMenm3pR/Jt4USgcLBIp4Bh10gqKVhvLo0klCxeSky96nKcj3siw6pJIL4XsoiQ7apyvMY/V3HHrSRioLopvEhSpTCn2TPEuwKYMOIX0tAxRBf/Hpa+lfSqBv9gi1FPsNfTrMAiVmIE/vJhz61FGnQxRIEYE4vfNYdN8Rp6MlHaHotHTn8ejekaZPAjEmyvQWdZFTtYTpXqCGJ0zvcek9Yfoel76nS0ffv1NMp1ca+pkgyfRCGind4L7OWWc605l+cxjsyhqy9AGbPpClc1/nvl5VX0c/3Alk6RU3+Am7shNZ+h6bvidLr7jBB+zKBrL0irOOudmIUDzTmf5gIP+iEuXtRuTVaEmY/oZLfyNMrzjryPc0gerMTdpVg0tvjJUU6bLPcGOoUv46SLL6Wi8yhLf06C7TUyekI0efRaaYqdFltkeNpPumRPSMDxgBYvSM035FrKAmH72hRW99PrpvSdEHkTEGUvSsK3yKVDkuJ92RohcZaehzzirPpOg+J92Tolfc4Cumx5xVXpGiZ34+ICX6W84qv5GiR5NPbiIpOv6BCoSvSkTX+eiaGP092zINvBOj4x8mSf9FqejvNo/cvpOji19ZbmviL0GPLsYMFzgzCor0+Bv/ePDvSJKOb9dJ5UlnbnEHiHgzv6cdTpJOWuc/u3FEucLDOL75xGtBiefrcwgoC9NDSH/jkH6pAuXmBqPQ9HSUPVdZBH1GGOrMXAQdYxcKZfxAoK+KKBKFLosoEoX+u4giUehz8jlcnAuhp78I46yDYNAd+QLR6K+pr+yvxdBTHyVDubQh0UfSxaHSd0lbvNkVRE87JGOtc+PQd2QLQ6fHhJkKsSh6yg13tO08JPprsgrrXWH0dJd2vH1MLPprot4eXoujpzrdhngiD40ek2y92lggPcnWa8qN1Yz0BFuvZhRl0uOfR0v4Ewuli/Bg4Qr3lArqGdndQ3UPO1EunXYwnelMZzrTmc50pjOd6UxnOtOZznSmM53pTGf6kuj6oedFKV0s3fX6sX1S3bsi6a4PD7+/YAqYeBw6pIB/4qEgOqxdSPbGiim4NRRCbzs3Jj0L4UfXtQXQVRfn5IdA/Bw7RZzurEV6EtdsLeGXkIPuA+K1UoVeA0l62zmN/LqfSSft9KkepmoRuvi3nd5uKNFB9zbbXEANqdr941XO0NJx2v2jdJenpf+/3bvn0ts16ph+sd6hX7dPo2+2cZzE02Ia43bzDHqr+2Evnhz74ZHU30ffbKOeng1/NPV30Ns1gYQnSP2P6e65Pfxc6h02XZqXQCjhJ6kPL6bFo4NrGvAU4UII4SE2P1vQuZkuOxckVfehisF1MjUddN/MZBN+kvq5uf0O/xa66gyNS9ktMWlz44rO1Z8C19i5FPdHzPamXn+F3hryPfxMr78+4F+kq22kO6Rf6fUQt+puuustyWv4rbG3l/duztFB96GYoe1cTBdXMr+nw9qVM6ZfxOvzezff0nXi/ZOndvrR6Zvpm0c3h6nhdb+5iS7tsIim/qXZD9+97/Jf+rpZ5BET1ayv0GUzLhEuhBBjIy/RdVPgndutIRt9nt7p5cKFEEJ3Z+jQFDZL+XnMDXxHB73gxn5s9Kc3d3/pFciFkN/QTSXHJpX5l66gDrkQoP6hL3xsPw39la4qOiV8tH78XeSbue6N9mvWa6J/ybpc1CT1Wnh5Qq9meP8IOKH3ddH7E/ri1iYux/SXDrXR4UiPdck/wUpU+FtPf6/orja6O9KL3l56LOvVxe5Ib2qjN0d6Vbex4ghWlU3bPqI90If66MNng680FNpbJijH6kCvaF3uMzQ3+IrpFerV4Y9dffQdN3im10ivbuImhD3Qq5u4HdZkua8znelMZ/pS4z9CPVKkxowNxgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wMy0yN1QxNTo0NToxNSswMDowMN1xSg4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDMtMjdUMTU6NDU6MTUrMDA6MDCsLPKyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",c1=function(){function e(){T(this,e)}return M(e,null,[{key:"hide",value:function(n){n.getElementsByClassName(e.CONTAINER_CLASS)[0].style.visibility="hidden"}},{key:"applyCustomStylesToElements",value:function(n,r,i){Object.assign(n.style,i.container),Object.assign(r.style,i.avatar)}},{key:"applyCustomStyles",value:function(n,r,i,o){var a,s,l,c;if((a=i.default)!=null&&a.styles&&e.applyCustomStylesToElements(n,r,i.default.styles),o===_e.USER_ROLE)(s=i.user)!=null&&s.styles&&e.applyCustomStylesToElements(n,r,i.user.styles);else{(l=i.ai)!=null&&l.styles&&e.applyCustomStylesToElements(n,r,i.ai.styles);var u=(c=i[o])==null?void 0:c.styles;u&&e.applyCustomStylesToElements(n,r,u)}}},{key:"createAvatar",value:function(n,r){var i,o,a,s,l,c=document.createElement("img");n===_e.USER_ROLE?c.src=((i=r==null?void 0:r.user)==null?void 0:i.src)||((o=r==null?void 0:r.default)==null?void 0:o.src)||$U:c.src=((a=r==null?void 0:r[n])==null?void 0:a.src)||((s=r==null?void 0:r.ai)==null?void 0:s.src)||((l=r==null?void 0:r.default)==null?void 0:l.src)||jU,c.classList.add("avatar");var u=document.createElement("div");return u.classList.add(e.CONTAINER_CLASS),u.appendChild(c),r&&e.applyCustomStyles(u,c,r,n),u}},{key:"getPosition",value:function(n,r){var i,o,a,s,l,c,u,d,f,h=(l=(s=r==null?void 0:r[n])==null?void 0:s.styles)==null?void 0:l.position;return n!==_e.USER_ROLE&&((i=h)!==null&&i!==void 0||(h=(u=(c=r==null?void 0:r.ai)==null?void 0:c.styles)==null?void 0:u.position)),(o=h)!==null&&o!==void 0||(h=(f=(d=r==null?void 0:r.default)==null?void 0:d.styles)==null?void 0:f.position),(a=h)!==null&&a!==void 0||(h=n===_e.USER_ROLE?"right":"left"),h}},{key:"add",value:function(n,r,i){var o=typeof i=="boolean"?void 0:i,a=e.createAvatar(r,o),s=e.getPosition(r,o);a.classList.add(s==="left"?"left-item-position":"right-item-position"),n.insertAdjacentElement(s==="left"?"beforebegin":"afterend",a)}}]),e}();c1.CONTAINER_CLASS="avatar-container";var Cm=c1,u1=function(){function e(){T(this,e)}return M(e,null,[{key:"hide",value:function(n){n.getElementsByClassName(e.NAME_CLASS)[0].style.visibility="hidden"}},{key:"getPosition",value:function(n,r){var i,o,a,s,l,c,u=(s=r==null?void 0:r[n])==null?void 0:s.position;return n!==_e.USER_ROLE&&((i=u)!==null&&i!==void 0||(u=(l=r==null?void 0:r.ai)==null?void 0:l.position)),(o=u)!==null&&o!==void 0||(u=(c=r==null?void 0:r.default)==null?void 0:c.position),(a=u)!==null&&a!==void 0||(u=n===_e.USER_ROLE?"right":"left"),u}},{key:"applyStyle",value:function(n,r,i){var o,a,s,l;Object.assign(n.style,(o=i.default)==null?void 0:o.style),r===_e.USER_ROLE?Object.assign(n.style,(a=i.user)==null?void 0:a.style):(Object.assign(n.style,(s=i.ai)==null?void 0:s.style),Object.assign(n.style,(l=i[r])==null?void 0:l.style))}},{key:"getNameText",value:function(n,r){var i,o,a,s,l,c;return n===_e.USER_ROLE?((i=r.user)==null?void 0:i.text)||((o=r.default)==null?void 0:o.text)||"User":n===_e.AI_ROLE?((a=r.ai)==null?void 0:a.text)||((s=r.default)==null?void 0:s.text)||"AI":((l=r[n])==null?void 0:l.text)||((c=r.default)==null?void 0:c.text)||n}},{key:"createName",value:function(n,r){var i=document.createElement("div");return i.classList.add(e.NAME_CLASS),i.textContent=e.getNameText(n,r),e.applyStyle(i,n,r),i}},{key:"add",value:function(n,r,i){var o=typeof i=="boolean"?{}:i,a=e.createName(r,o),s=e.getPosition(r,o);a.classList.add(s==="left"?"left-item-position":"right-item-position"),n.insertAdjacentElement(s==="left"?"beforebegin":"afterend",a)}}]),e}();u1.NAME_CLASS="name";var Im=u1,Hl=function(){function e(){T(this,e)}return M(e,null,[{key:"getLastElementsByClass",value:function(n,r,i){for(var o=function(){var c=n[s];if(c.bubbleElement.classList.contains(r[0])&&!r.slice(1).find(function(u){return!c.bubbleElement.classList.contains(u)}))if(i){if(!i.find(function(u){return c.bubbleElement.classList.contains(u)}))return{v:c}}else return{v:c}},a,s=n.length-1;s>=0;s-=1)if(a=o(),a)return a.v}},{key:"getLastMessage",value:function(n,r,i){for(var o=n.length-1;o>=0;o-=1)if(n[o].role===r)if(i){if(n[o][i])return n[o]}else return n[o]}},{key:"getLastTextToElement",value:function(n,r){for(var i=n.length-1;i>=0;i-=1)if(n[i][0]===r)return n[i]}},{key:"overwriteMessage",value:function(n,r,i,o,a,s){var l=e.getLastElementsByClass(r,[e.getRoleClass(o),s],["loading-message-text"]),c=e.getLastMessage(n,o,a);return c&&(c[a]=i),l}},{key:"getRoleClass",value:function(n){return"".concat(n,"-message")}},{key:"fillEmptyMessageElement",value:function(n,r){r.trim().length===0&&(n.classList.add(e.EMPTY_MESSAGE_CLASS),n.innerHTML='<div style="color:#00000000">.</div>')}},{key:"unfillEmptyMessageElement",value:function(n,r){n.classList.contains(e.EMPTY_MESSAGE_CLASS)&&r.trim().length>0&&n.replaceChildren()}},{key:"getLastMessageBubbleElement",value:function(n){var r,i,o;return Array.from(((o=(i=(r=e.getLastMessageElement(n))==null?void 0:r.children)==null?void 0:i[0])==null?void 0:o.children)||[]).find(function(a){return a.classList.contains("message-bubble")})}},{key:"getLastMessageElement",value:function(n){return n.children[n.children.length-1]}},{key:"addRoleElements",value:function(n,r,i,o){i&&Cm.add(n,r,i),o&&Im.add(n,r,o)}},{key:"hideRoleElements",value:function(n,r,i){var o=n[n.length-1].innerContainer;r&&Cm.hide(o),i&&Im.hide(o)}}]),e}();Hl.AI_ROLE="ai";Hl.USER_ROLE="user";Hl.EMPTY_MESSAGE_CLASS="empty-message";var _e=Hl,d1=function(){function e(){T(this,e)}return M(e,null,[{key:"mouseUp",value:function(n,r){xt.unsetAllCSSMouseStates(n,r),Object.assign(n.style,r.default),Object.assign(n.style,r.hover)}},{key:"mouseDown",value:function(n,r){Object.assign(n.style,r.click)}},{key:"mouseLeave",value:function(n,r){xt.unsetAllCSSMouseStates(n,r),Object.assign(n.style,r.default)}},{key:"mouseEnter",value:function(n,r){Object.assign(n.style,r.hover)}},{key:"add",value:function(n,r){n.addEventListener("mouseenter",e.mouseEnter.bind(this,n,r)),n.addEventListener("mouseleave",e.mouseLeave.bind(this,n,r)),n.addEventListener("mousedown",e.mouseDown.bind(this,n,r)),n.addEventListener("mouseup",e.mouseUp.bind(this,n,r))}}]),e}(),HU="deep-chat-temporary-message",qU="deep-chat-suggestion-button",Uu={"deep-chat-button":{styles:{default:{backgroundColor:"white",padding:"5px",paddingLeft:"7px",paddingRight:"7px",border:"1px solid #c2c2c2",borderRadius:"6px",cursor:"pointer"},hover:{backgroundColor:"#fafafa"},click:{backgroundColor:"#f1f1f1"}}}},xm=Object.keys(Uu),Fs=function(){function e(){T(this,e)}return M(e,null,[{key:"applySuggestionEvent",value:function(n,r){setTimeout(function(){r.addEventListener("click",function(){var i,o;(o=n.submitUserMessage)==null||o.call(n,{text:((i=r.textContent)==null?void 0:i.trim())||""})})})}},{key:"isElementTemporary",value:function(n){var r;return n?(r=n.bubbleElement.children[0])==null?void 0:r.classList.contains(HU):!1}},{key:"doesElementContainDeepChatClass",value:function(n){return xm.find(function(r){return n.classList.contains(r)})}},{key:"applyEvents",value:function(n,r){var i=Uu[r].events;Object.keys(i||[]).forEach(function(o){n.addEventListener(o,i==null?void 0:i[o])})}},{key:"getProcessedStyles",value:function(n,r,i){var o=Array.from(r.classList).reduce(function(c,u){var d,f=(d=n[u])==null?void 0:d.styles;return f&&n[u].styles&&c.push(f),c},[]),a=Uu[i].styles;if(a){var s=JSON.parse(JSON.stringify(a));s.default&&xt.overwriteDefaultWithAlreadyApplied(s,r),o.unshift(s)}var l=xt.mergeStatefulStyles(o);return xt.processStateful(l,{},{})}},{key:"applyDeepChatUtilities",value:function(n,r,i){xm.forEach(function(a){var s=i.getElementsByClassName(a);Array.from(s||[]).forEach(function(l){var c=e.getProcessedStyles(r,l,a);Ko.applyStylesToElement(l,c),e.applyEvents(l,a)})});var o=i.getElementsByClassName(qU);Array.from(o).forEach(function(a){return e.applySuggestionEvent(n,a)})}}]),e}(),Ko=function(){function e(){T(this,e)}return M(e,null,[{key:"applyStylesToElement",value:function(n,r){var i=xt.processStateful(r,{},{});d1.add(n,i),Object.assign(n.style,i.default)}},{key:"applyEventsToElement",value:function(n,r){Object.keys(r).forEach(function(i){var o=r[i];o&&n.addEventListener(i,o)})}},{key:"applyClassUtilitiesToElement",value:function(n,r){var i=r.events,o=r.styles;i&&e.applyEventsToElement(n,i),o&&!Fs.doesElementContainDeepChatClass(n)&&e.applyStylesToElement(n,o)}},{key:"applyCustomClassUtilities",value:function(n,r){Object.keys(n).forEach(function(i){var o=r.getElementsByClassName(i);Array.from(o).forEach(function(a){n[i]&&e.applyClassUtilitiesToElement(a,n[i])})})}},{key:"apply",value:function(n,r){Fs.applyDeepChatUtilities(n,n.htmlClassUtilities,r),e.applyCustomClassUtilities(n.htmlClassUtilities,r)}}]),e}(),Fu=function(){function e(){T(this,e)}return M(e,null,[{key:"addElement",value:function(n,r){n.elementRef.appendChild(r),n.elementRef.scrollTop=n.elementRef.scrollHeight}},{key:"createElements",value:function(n,r,i){var o=n.createNewMessageElement("",i);return o.bubbleElement.classList.add("html-message"),o.bubbleElement.innerHTML=r,o}},{key:"overwrite",value:function(n,r,i,o){var a=n.messages,s=_e.overwriteMessage(a,o,r,i,"html","html-message");return s&&(s.bubbleElement.innerHTML=r,Ko.apply(n,s.outerContainer),$r.flagHTMLUpdateClass(s.bubbleElement)),s}},{key:"add",value:function(n,r,i,o,a){var s;if(a!=null&&a.status){var l=this.overwrite(n,r,i,o);if(l)return l;a.status=!1}var c=e.createElements(n,r,i);return _e.fillEmptyMessageElement(c.bubbleElement,r),Ko.apply(n,c.outerContainer),$r.flagHTMLUpdateClass(c.bubbleElement),n.applyCustomStyles(c,i,!1,(s=n.messageStyles)==null?void 0:s.html),e.addElement(n,c.outerContainer),c}}]),e}(),za;function f1(e){return za=za||document.createElement("textarea"),za.innerHTML="&"+e+";",za.value}var zU=Object.prototype.hasOwnProperty;function VU(e,t){return e?zU.call(e,t):!1}function h1(e){var t=[].slice.call(arguments,1);return t.forEach(function(n){if(n){if(fe(n)!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}var WU=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Go(e){return e.indexOf("\\")<0?e:e.replace(WU,"$1")}function p1(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Bu(e){if(e>65535){e-=65536;var t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}var KU=/&([a-z#][a-z0-9]{1,31});/gi,GU=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function YU(e,t){var n=0,r=f1(t);return t!==r?r:t.charCodeAt(0)===35&&GU.test(t)&&(n=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10),p1(n))?Bu(n):e}function Hr(e){return e.indexOf("&")<0?e:e.replace(KU,YU)}var JU=/[&<>"]/,ZU=/[&<>"]/g,XU={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function QU(e){return XU[e]}function Bt(e){return JU.test(e)?e.replace(ZU,QU):e}var oe={};oe.blockquote_open=function(){return`<blockquote>
`};oe.blockquote_close=function(e,t){return"</blockquote>"+Jr(e,t)};oe.code=function(e,t){return e[t].block?"<pre><code>"+Bt(e[t].content)+"</code></pre>"+Jr(e,t):"<code>"+Bt(e[t].content)+"</code>"};oe.fence=function(e,t,n,r,i){var o=e[t],a="",s=n.langPrefix,l="",c,u,d;if(o.params){if(c=o.params.split(/\s+/g),u=c.join(" "),VU(i.rules.fence_custom,c[0]))return i.rules.fence_custom[c[0]](e,t,n,r,i);l=Bt(Hr(Go(u))),a=' class="'+s+l+'"'}return n.highlight?d=n.highlight.apply(n.highlight,[o.content].concat(c))||Bt(o.content):d=Bt(o.content),"<pre><code"+a+">"+d+"</code></pre>"+Jr(e,t)};oe.fence_custom={};oe.heading_open=function(e,t){return"<h"+e[t].hLevel+">"};oe.heading_close=function(e,t){return"</h"+e[t].hLevel+`>
`};oe.hr=function(e,t,n){return(n.xhtmlOut?"<hr />":"<hr>")+Jr(e,t)};oe.bullet_list_open=function(){return`<ul>
`};oe.bullet_list_close=function(e,t){return"</ul>"+Jr(e,t)};oe.list_item_open=function(){return"<li>"};oe.list_item_close=function(){return`</li>
`};oe.ordered_list_open=function(e,t){var n=e[t],r=n.order>1?' start="'+n.order+'"':"";return"<ol"+r+`>
`};oe.ordered_list_close=function(e,t){return"</ol>"+Jr(e,t)};oe.paragraph_open=function(e,t){return e[t].tight?"":"<p>"};oe.paragraph_close=function(e,t){var n=!(e[t].tight&&t&&e[t-1].type==="inline"&&!e[t-1].content);return(e[t].tight?"":"</p>")+(n?Jr(e,t):"")};oe.link_open=function(e,t,n){var r=e[t].title?' title="'+Bt(Hr(e[t].title))+'"':"",i=n.linkTarget?' target="'+n.linkTarget+'"':"";return'<a href="'+Bt(e[t].href)+'"'+r+i+">"};oe.link_close=function(){return"</a>"};oe.image=function(e,t,n){var r=' src="'+Bt(e[t].src)+'"',i=e[t].title?' title="'+Bt(Hr(e[t].title))+'"':"",o=' alt="'+(e[t].alt?Bt(Hr(Go(e[t].alt))):"")+'"',a=n.xhtmlOut?" /":"";return"<img"+r+o+i+a+">"};oe.table_open=function(){return`<table>
`};oe.table_close=function(){return`</table>
`};oe.thead_open=function(){return`<thead>
`};oe.thead_close=function(){return`</thead>
`};oe.tbody_open=function(){return`<tbody>
`};oe.tbody_close=function(){return`</tbody>
`};oe.tr_open=function(){return"<tr>"};oe.tr_close=function(){return`</tr>
`};oe.th_open=function(e,t){var n=e[t];return"<th"+(n.align?' style="text-align:'+n.align+'"':"")+">"};oe.th_close=function(){return"</th>"};oe.td_open=function(e,t){var n=e[t];return"<td"+(n.align?' style="text-align:'+n.align+'"':"")+">"};oe.td_close=function(){return"</td>"};oe.strong_open=function(){return"<strong>"};oe.strong_close=function(){return"</strong>"};oe.em_open=function(){return"<em>"};oe.em_close=function(){return"</em>"};oe.del_open=function(){return"<del>"};oe.del_close=function(){return"</del>"};oe.ins_open=function(){return"<ins>"};oe.ins_close=function(){return"</ins>"};oe.mark_open=function(){return"<mark>"};oe.mark_close=function(){return"</mark>"};oe.sub=function(e,t){return"<sub>"+Bt(e[t].content)+"</sub>"};oe.sup=function(e,t){return"<sup>"+Bt(e[t].content)+"</sup>"};oe.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};oe.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};oe.text=function(e,t){return Bt(e[t].content)};oe.htmlblock=function(e,t){return e[t].content};oe.htmltag=function(e,t){return e[t].content};oe.abbr_open=function(e,t){return'<abbr title="'+Bt(Hr(e[t].title))+'">'};oe.abbr_close=function(){return"</abbr>"};oe.footnote_ref=function(e,t){var n=Number(e[t].id+1).toString(),r="fnref"+n;return e[t].subId>0&&(r+=":"+e[t].subId),'<sup class="footnote-ref"><a href="#fn'+n+'" id="'+r+'">['+n+"]</a></sup>"};oe.footnote_block_open=function(e,t,n){var r=n.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`;return r+`<section class="footnotes">
<ol class="footnotes-list">
`};oe.footnote_block_close=function(){return`</ol>
</section>
`};oe.footnote_open=function(e,t){var n=Number(e[t].id+1).toString();return'<li id="fn'+n+'"  class="footnote-item">'};oe.footnote_close=function(){return`</li>
`};oe.footnote_anchor=function(e,t){var n=Number(e[t].id+1).toString(),r="fnref"+n;return e[t].subId>0&&(r+=":"+e[t].subId),' <a href="#'+r+'" class="footnote-backref">↩</a>'};oe.dl_open=function(){return`<dl>
`};oe.dt_open=function(){return"<dt>"};oe.dd_open=function(){return"<dd>"};oe.dl_close=function(){return`</dl>
`};oe.dt_close=function(){return`</dt>
`};oe.dd_close=function(){return`</dd>
`};function m1(e,t){return++t>=e.length-2?t:e[t].type==="paragraph_open"&&e[t].tight&&e[t+1].type==="inline"&&e[t+1].content.length===0&&e[t+2].type==="paragraph_close"&&e[t+2].tight?m1(e,t+2):t}var Jr=oe.getBreak=function(e,t){return t=m1(e,t),t<e.length&&e[t].type==="list_item_close"?"":`
`};function mf(){this.rules=h1({},oe),this.getBreak=oe.getBreak}mf.prototype.renderInline=function(e,t,n){for(var r=this.rules,i=e.length,o=0,a="";i--;)a+=r[e[o].type](e,o++,t,n,this);return a};mf.prototype.render=function(e,t,n){for(var r=this.rules,i=e.length,o=-1,a="";++o<i;)e[o].type==="inline"?a+=this.renderInline(e[o].children,t,n):a+=r[e[o].type](e,o,t,n,this);return a};function an(){this.__rules__=[],this.__cache__=null}an.prototype.__find__=function(e){for(var t=this.__rules__.length,n=-1;t--;)if(this.__rules__[++n].name===e)return n;return-1};an.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};an.prototype.at=function(e,t,n){var r=this.__find__(e),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null};an.prototype.before=function(e,t,n,r){var i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};an.prototype.after=function(e,t,n,r){var i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};an.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};an.prototype.enable=function(e,t){e=Array.isArray(e)?e:[e],t&&this.__rules__.forEach(function(n){n.enabled=!1}),e.forEach(function(n){var r=this.__find__(n);if(r<0)throw new Error("Rules manager: invalid rule name "+n);this.__rules__[r].enabled=!0},this),this.__cache__=null};an.prototype.disable=function(e){e=Array.isArray(e)?e:[e],e.forEach(function(t){var n=this.__find__(t);if(n<0)throw new Error("Rules manager: invalid rule name "+t);this.__rules__[n].enabled=!1},this),this.__cache__=null};an.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function e7(e){e.inlineMode?e.tokens.push({type:"inline",content:e.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):e.block.parse(e.src,e.options,e.env,e.tokens)}function Zr(e,t,n,r,i){this.src=e,this.env=r,this.options=n,this.parser=t,this.tokens=i,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}Zr.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""};Zr.prototype.push=function(e){this.pending&&this.pushPending(),this.tokens.push(e),this.pendingLevel=this.level};Zr.prototype.cacheSet=function(e,t){for(var n=this.cache.length;n<=e;n++)this.cache.push(0);this.cache[e]=t};Zr.prototype.cacheGet=function(e){return e<this.cache.length?this.cache[e]:0};function Yo(e,t){var n,r,i,o=-1,a=e.posMax,s=e.pos,l=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=t+1,e.isInLabel=!0,n=1;e.pos<a;){if(i=e.src.charCodeAt(e.pos),i===91)n++;else if(i===93&&(n--,n===0)){r=!0;break}e.parser.skipToken(e)}return r?(o=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=n-1,e.pos=s,e.isInLabel=l,o}function t7(e,t,n,r){var i,o,a,s,l,c;if(e.charCodeAt(0)!==42||e.charCodeAt(1)!==91||e.indexOf("]:")===-1||(i=new Zr(e,t,n,r,[]),o=Yo(i,1),o<0||e.charCodeAt(o+1)!==58))return-1;for(s=i.posMax,a=o+2;a<s&&i.src.charCodeAt(a)!==10;a++);return l=e.slice(2,o),c=e.slice(o+2,a).trim(),c.length===0?-1:(r.abbreviations||(r.abbreviations={}),fe(r.abbreviations[":"+l])>"u"&&(r.abbreviations[":"+l]=c),a)}function n7(e){var t=e.tokens,n,r,i,o;if(!e.inlineMode){for(n=1,r=t.length-1;n<r;n++)if(t[n-1].type==="paragraph_open"&&t[n].type==="inline"&&t[n+1].type==="paragraph_close"){for(i=t[n].content;i.length&&(o=t7(i,e.inline,e.options,e.env),!(o<0));)i=i.slice(o).trim();t[n].content=i,i.length||(t[n-1].tight=!0,t[n+1].tight=!0)}}}function ju(e){var t=Hr(e);try{t=decodeURI(t)}catch{}return encodeURI(t)}function g1(e,t){var n,r,i,o=t,a=e.posMax;if(e.src.charCodeAt(t)===60){for(t++;t<a;){if(n=e.src.charCodeAt(t),n===10)return!1;if(n===62)return i=ju(Go(e.src.slice(o+1,t))),e.parser.validateLink(i)?(e.pos=t+1,e.linkContent=i,!0):!1;if(n===92&&t+1<a){t+=2;continue}t++}return!1}for(r=0;t<a&&(n=e.src.charCodeAt(t),!(n===32||n<32||n===127));){if(n===92&&t+1<a){t+=2;continue}if(n===40&&(r++,r>1)||n===41&&(r--,r<0))break;t++}return o===t||(i=Go(e.src.slice(o,t)),!e.parser.validateLink(i))?!1:(e.linkContent=i,e.pos=t,!0)}function v1(e,t){var n,r=t,i=e.posMax,o=e.src.charCodeAt(t);if(o!==34&&o!==39&&o!==40)return!1;for(t++,o===40&&(o=41);t<i;){if(n=e.src.charCodeAt(t),n===o)return e.pos=t+1,e.linkContent=Go(e.src.slice(r+1,t)),!0;if(n===92&&t+1<i){t+=2;continue}t++}return!1}function y1(e){return e.trim().replace(/\s+/g," ").toUpperCase()}function r7(e,t,n,r){var i,o,a,s,l,c,u,d,f;if(e.charCodeAt(0)!==91||e.indexOf("]:")===-1||(i=new Zr(e,t,n,r,[]),o=Yo(i,0),o<0||e.charCodeAt(o+1)!==58))return-1;for(s=i.posMax,a=o+2;a<s&&(l=i.src.charCodeAt(a),!(l!==32&&l!==10));a++);if(!g1(i,a))return-1;for(u=i.linkContent,a=i.pos,c=a,a=a+1;a<s&&(l=i.src.charCodeAt(a),!(l!==32&&l!==10));a++);for(a<s&&c!==a&&v1(i,a)?(d=i.linkContent,a=i.pos):(d="",a=c);a<s&&i.src.charCodeAt(a)===32;)a++;return a<s&&i.src.charCodeAt(a)!==10?-1:(f=y1(e.slice(1,o)),fe(r.references[f])>"u"&&(r.references[f]={title:d,href:u}),a)}function i7(e){var t=e.tokens,n,r,i,o;if(e.env.references=e.env.references||{},!e.inlineMode){for(n=1,r=t.length-1;n<r;n++)if(t[n].type==="inline"&&t[n-1].type==="paragraph_open"&&t[n+1].type==="paragraph_close"){for(i=t[n].content;i.length&&(o=r7(i,e.inline,e.options,e.env),!(o<0));)i=i.slice(o).trim();t[n].content=i,i.length||(t[n-1].tight=!0,t[n+1].tight=!0)}}}function o7(e){var t=e.tokens,n,r,i;for(r=0,i=t.length;r<i;r++)n=t[r],n.type==="inline"&&e.inline.parse(n.content,e.options,e.env,n.children)}function a7(e){var t,n,r,i,o,a,s,l,c,u=0,d=!1,f={};if(e.env.footnotes&&(e.tokens=e.tokens.filter(function(h){return h.type==="footnote_reference_open"?(d=!0,l=[],c=h.label,!1):h.type==="footnote_reference_close"?(d=!1,f[":"+c]=l,!1):(d&&l.push(h),!d)}),!!e.env.footnotes.list)){for(a=e.env.footnotes.list,e.tokens.push({type:"footnote_block_open",level:u++}),t=0,n=a.length;t<n;t++){for(e.tokens.push({type:"footnote_open",id:t,level:u++}),a[t].tokens?(s=[],s.push({type:"paragraph_open",tight:!1,level:u++}),s.push({type:"inline",content:"",level:u,children:a[t].tokens}),s.push({type:"paragraph_close",tight:!1,level:--u})):a[t].label&&(s=f[":"+a[t].label]),e.tokens=e.tokens.concat(s),e.tokens[e.tokens.length-1].type==="paragraph_close"?o=e.tokens.pop():o=null,i=a[t].count>0?a[t].count:1,r=0;r<i;r++)e.tokens.push({type:"footnote_anchor",id:t,subId:r,level:u});o&&e.tokens.push(o),e.tokens.push({type:"footnote_close",level:--u})}e.tokens.push({type:"footnote_block_close",level:--u})}}var Am=` 
()[]'".,!?-`;function Nc(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function s7(e){var t,n,r,i,o,a,s,l,c,u,d,f,h=e.tokens;if(e.env.abbreviations){for(e.env.abbrRegExp||(f="(^|["+Am.split("").map(Nc).join("")+"])("+Object.keys(e.env.abbreviations).map(function(p){return p.substr(1)}).sort(function(p,m){return m.length-p.length}).map(Nc).join("|")+")($|["+Am.split("").map(Nc).join("")+"])",e.env.abbrRegExp=new RegExp(f,"g")),u=e.env.abbrRegExp,n=0,r=h.length;n<r;n++)if(h[n].type==="inline"){for(i=h[n].children,t=i.length-1;t>=0;t--)if(o=i[t],o.type==="text"){for(l=0,a=o.content,u.lastIndex=0,c=o.level,s=[];d=u.exec(a);)u.lastIndex>l&&s.push({type:"text",content:a.slice(l,d.index+d[1].length),level:c}),s.push({type:"abbr_open",title:e.env.abbreviations[":"+d[2]],level:c++}),s.push({type:"text",content:d[2],level:c}),s.push({type:"abbr_close",level:--c}),l=u.lastIndex-d[3].length;s.length&&(l<a.length&&s.push({type:"text",content:a.slice(l),level:c}),h[n].children=i=[].concat(i.slice(0,t),s,i.slice(t+1)))}}}}var l7=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,c7=/\((c|tm|r|p)\)/ig,u7={c:"©",r:"®",p:"§",tm:"™"};function d7(e){return e.indexOf("(")<0?e:e.replace(c7,function(t,n){return u7[n.toLowerCase()]})}function f7(e){var t,n,r,i,o;if(e.options.typographer){for(o=e.tokens.length-1;o>=0;o--)if(e.tokens[o].type==="inline")for(i=e.tokens[o].children,t=i.length-1;t>=0;t--)n=i[t],n.type==="text"&&(r=n.content,r=d7(r),l7.test(r)&&(r=r.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1—$2").replace(/(^|\s)--(\s|$)/mg,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1–$2")),n.content=r)}}var h7=/['"]/,km=/['"]/g,p7=/[-\s()\[\]]/,Tm="’";function Mm(e,t){return t<0||t>=e.length?!1:!p7.test(e[t])}function ui(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}function m7(e){var t,n,r,i,o,a,s,l,c,u,d,f,h,p,m,y,g;if(e.options.typographer){for(g=[],m=e.tokens.length-1;m>=0;m--)if(e.tokens[m].type==="inline"){for(y=e.tokens[m].children,g.length=0,t=0;t<y.length;t++)if(n=y[t],!(n.type!=="text"||h7.test(n.text))){for(s=y[t].level,h=g.length-1;h>=0&&!(g[h].level<=s);h--);g.length=h+1,r=n.content,o=0,a=r.length;e:for(;o<a&&(km.lastIndex=o,i=km.exec(r),!!i);){if(l=!Mm(r,i.index-1),o=i.index+1,p=i[0]==="'",c=!Mm(r,o),!c&&!l){p&&(n.content=ui(n.content,i.index,Tm));continue}if(d=!c,f=!l,f){for(h=g.length-1;h>=0&&(u=g[h],!(g[h].level<s));h--)if(u.single===p&&g[h].level===s){u=g[h],p?(y[u.token].content=ui(y[u.token].content,u.pos,e.options.quotes[2]),n.content=ui(n.content,i.index,e.options.quotes[3])):(y[u.token].content=ui(y[u.token].content,u.pos,e.options.quotes[0]),n.content=ui(n.content,i.index,e.options.quotes[1])),g.length=h;continue e}}d?g.push({token:t,pos:i.index,single:p,level:s}):f&&p&&(n.content=ui(n.content,i.index,Tm))}}}}}var Oc=[["block",e7],["abbr",n7],["references",i7],["inline",o7],["footnote_tail",a7],["abbr2",s7],["replacements",f7],["smartquotes",m7]];function b1(){this.options={},this.ruler=new an;for(var e=0;e<Oc.length;e++)this.ruler.push(Oc[e][0],Oc[e][1])}b1.prototype.process=function(e){var t,n,r;for(r=this.ruler.getRules(""),t=0,n=r.length;t<n;t++)r[t](e)};function Xr(e,t,n,r,i){var o,a,s,l,c,u,d;for(this.src=e,this.parser=t,this.options=n,this.env=r,this.tokens=i,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",a=this.src,u=0,d=!1,s=l=u=0,c=a.length;l<c;l++){if(o=a.charCodeAt(l),!d)if(o===32){u++;continue}else d=!0;(o===10||l===c-1)&&(o!==10&&l++,this.bMarks.push(s),this.eMarks.push(l),this.tShift.push(u),d=!1,u=0,s=l+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}Xr.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Xr.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Xr.prototype.skipSpaces=function(e){for(var t=this.src.length;e<t&&this.src.charCodeAt(e)===32;e++);return e};Xr.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e};Xr.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e};Xr.prototype.getLines=function(e,t,n,r){var i,o,a,s,l,c=e;if(e>=t)return"";if(c+1===t)return o=this.bMarks[c]+Math.min(this.tShift[c],n),a=r?this.eMarks[c]+1:this.eMarks[c],this.src.slice(o,a);for(s=new Array(t-e),i=0;c<t;c++,i++)l=this.tShift[c],l>n&&(l=n),l<0&&(l=0),o=this.bMarks[c]+l,c+1<t||r?a=this.eMarks[c]+1:a=this.eMarks[c],s[i]=this.src.slice(o,a);return s.join("")};function g7(e,t,n){var r,i;if(e.tShift[t]-e.blkIndent<4)return!1;for(i=r=t+1;r<n;){if(e.isEmpty(r)){r++;continue}if(e.tShift[r]-e.blkIndent>=4){r++,i=r;continue}break}return e.line=r,e.tokens.push({type:"code",content:e.getLines(t,i,4+e.blkIndent,!0),block:!0,lines:[t,e.line],level:e.level}),!0}function v7(e,t,n,r){var i,o,a,s,l,c=!1,u=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(u+3>d||(i=e.src.charCodeAt(u),i!==126&&i!==96)||(l=u,u=e.skipChars(u,i),o=u-l,o<3)||(a=e.src.slice(u,d).trim(),a.indexOf("`")>=0))return!1;if(r)return!0;for(s=t;s++,!(s>=n||(u=l=e.bMarks[s]+e.tShift[s],d=e.eMarks[s],u<d&&e.tShift[s]<e.blkIndent));)if(e.src.charCodeAt(u)===i&&!(e.tShift[s]-e.blkIndent>=4)&&(u=e.skipChars(u,i),!(u-l<o)&&(u=e.skipSpaces(u),!(u<d)))){c=!0;break}return o=e.tShift[t],e.line=s+(c?1:0),e.tokens.push({type:"fence",params:a,content:e.getLines(t+1,s,o,!0),lines:[t,e.line],level:e.level}),!0}function y7(e,t,n,r){var i,o,a,s,l,c,u,d,f,h,p,m=e.bMarks[t]+e.tShift[t],y=e.eMarks[t];if(m>y||e.src.charCodeAt(m++)!==62||e.level>=e.options.maxNesting)return!1;if(r)return!0;for(e.src.charCodeAt(m)===32&&m++,l=e.blkIndent,e.blkIndent=0,s=[e.bMarks[t]],e.bMarks[t]=m,m=m<y?e.skipSpaces(m):m,o=m>=y,a=[e.tShift[t]],e.tShift[t]=m-e.bMarks[t],d=e.parser.ruler.getRules("blockquote"),i=t+1;i<n&&(m=e.bMarks[i]+e.tShift[i],y=e.eMarks[i],!(m>=y));i++){if(e.src.charCodeAt(m++)===62){e.src.charCodeAt(m)===32&&m++,s.push(e.bMarks[i]),e.bMarks[i]=m,m=m<y?e.skipSpaces(m):m,o=m>=y,a.push(e.tShift[i]),e.tShift[i]=m-e.bMarks[i];continue}if(o)break;for(p=!1,f=0,h=d.length;f<h;f++)if(d[f](e,i,n,!0)){p=!0;break}if(p)break;s.push(e.bMarks[i]),a.push(e.tShift[i]),e.tShift[i]=-1337}for(c=e.parentType,e.parentType="blockquote",e.tokens.push({type:"blockquote_open",lines:u=[t,0],level:e.level++}),e.parser.tokenize(e,t,i),e.tokens.push({type:"blockquote_close",level:--e.level}),e.parentType=c,u[1]=e.line,f=0;f<a.length;f++)e.bMarks[f+t]=s[f],e.tShift[f+t]=a[f];return e.blkIndent=l,!0}function b7(e,t,n,r){var i,o,a,s=e.bMarks[t],l=e.eMarks[t];if(s+=e.tShift[t],s>l||(i=e.src.charCodeAt(s++),i!==42&&i!==45&&i!==95))return!1;for(o=1;s<l;){if(a=e.src.charCodeAt(s++),a!==i&&a!==32)return!1;a===i&&o++}return o<3?!1:(r||(e.line=t+1,e.tokens.push({type:"hr",lines:[t,e.line],level:e.level})),!0)}function Rm(e,t){var n,r,i;return r=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],r>=i||(n=e.src.charCodeAt(r++),n!==42&&n!==45&&n!==43)||r<i&&e.src.charCodeAt(r)!==32?-1:r}function Pm(e,t){var n,r=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(r+1>=i||(n=e.src.charCodeAt(r++),n<48||n>57))return-1;for(;;){if(r>=i)return-1;if(n=e.src.charCodeAt(r++),!(n>=48&&n<=57)){if(n===41||n===46)break;return-1}}return r<i&&e.src.charCodeAt(r)!==32?-1:r}function _7(e,t){var n,r,i=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===i&&e.tokens[n].type==="paragraph_open"&&(e.tokens[n+2].tight=!0,e.tokens[n].tight=!0,n+=2)}function S7(e,t,n,r){var i,o,a,s,l,c,u,d,f,h,p,m,y,g,v,b,E,C,x=!0,O,U,H,G;if((d=Pm(e,t))>=0)y=!0;else if((d=Rm(e,t))>=0)y=!1;else return!1;if(e.level>=e.options.maxNesting)return!1;if(m=e.src.charCodeAt(d-1),r)return!0;for(v=e.tokens.length,y?(u=e.bMarks[t]+e.tShift[t],p=Number(e.src.substr(u,d-u-1)),e.tokens.push({type:"ordered_list_open",order:p,lines:E=[t,0],level:e.level++})):e.tokens.push({type:"bullet_list_open",lines:E=[t,0],level:e.level++}),i=t,b=!1,O=e.parser.ruler.getRules("list");i<n&&(g=e.skipSpaces(d),f=e.eMarks[i],g>=f?h=1:h=g-d,h>4&&(h=1),h<1&&(h=1),o=d-e.bMarks[i]+h,e.tokens.push({type:"list_item_open",lines:C=[t,0],level:e.level++}),s=e.blkIndent,l=e.tight,a=e.tShift[t],c=e.parentType,e.tShift[t]=g-e.bMarks[t],e.blkIndent=o,e.tight=!0,e.parentType="list",e.parser.tokenize(e,t,n,!0),(!e.tight||b)&&(x=!1),b=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=s,e.tShift[t]=a,e.tight=l,e.parentType=c,e.tokens.push({type:"list_item_close",level:--e.level}),i=t=e.line,C[1]=i,g=e.bMarks[t],!(i>=n||e.isEmpty(i)||e.tShift[i]<e.blkIndent));){for(G=!1,U=0,H=O.length;U<H;U++)if(O[U](e,i,n,!0)){G=!0;break}if(G)break;if(y){if(d=Pm(e,i),d<0)break}else if(d=Rm(e,i),d<0)break;if(m!==e.src.charCodeAt(d-1))break}return e.tokens.push({type:y?"ordered_list_close":"bullet_list_close",level:--e.level}),E[1]=i,e.line=i,x&&_7(e,v),!0}function w7(e,t,n,r){var i,o,a,s,l,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(c+4>u||e.src.charCodeAt(c)!==91||e.src.charCodeAt(c+1)!==94||e.level>=e.options.maxNesting)return!1;for(s=c+2;s<u;s++){if(e.src.charCodeAt(s)===32)return!1;if(e.src.charCodeAt(s)===93)break}return s===c+2||s+1>=u||e.src.charCodeAt(++s)!==58?!1:(r||(s++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),l=e.src.slice(c+2,s-2),e.env.footnotes.refs[":"+l]=-1,e.tokens.push({type:"footnote_reference_open",label:l,level:e.level++}),i=e.bMarks[t],o=e.tShift[t],a=e.parentType,e.tShift[t]=e.skipSpaces(s)-s,e.bMarks[t]=s,e.blkIndent+=4,e.parentType="footnote",e.tShift[t]<e.blkIndent&&(e.tShift[t]+=e.blkIndent,e.bMarks[t]-=e.blkIndent),e.parser.tokenize(e,t,n,!0),e.parentType=a,e.blkIndent-=4,e.tShift[t]=o,e.bMarks[t]=i,e.tokens.push({type:"footnote_reference_close",level:--e.level})),!0)}function E7(e,t,n,r){var i,o,a,s=e.bMarks[t]+e.tShift[t],l=e.eMarks[t];if(s>=l||(i=e.src.charCodeAt(s),i!==35||s>=l))return!1;for(o=1,i=e.src.charCodeAt(++s);i===35&&s<l&&o<=6;)o++,i=e.src.charCodeAt(++s);return o>6||s<l&&i!==32?!1:(r||(l=e.skipCharsBack(l,32,s),a=e.skipCharsBack(l,35,s),a>s&&e.src.charCodeAt(a-1)===32&&(l=a),e.line=t+1,e.tokens.push({type:"heading_open",hLevel:o,lines:[t,e.line],level:e.level}),s<l&&e.tokens.push({type:"inline",content:e.src.slice(s,l).trim(),level:e.level+1,lines:[t,e.line],children:[]}),e.tokens.push({type:"heading_close",hLevel:o,level:e.level})),!0)}function C7(e,t,n){var r,i,o,a=t+1;return a>=n||e.tShift[a]<e.blkIndent||e.tShift[a]-e.blkIndent>3||(i=e.bMarks[a]+e.tShift[a],o=e.eMarks[a],i>=o)||(r=e.src.charCodeAt(i),r!==45&&r!==61)||(i=e.skipChars(i,r),i=e.skipSpaces(i),i<o)?!1:(i=e.bMarks[t]+e.tShift[t],e.line=a+1,e.tokens.push({type:"heading_open",hLevel:r===61?1:2,lines:[t,e.line],level:e.level}),e.tokens.push({type:"inline",content:e.src.slice(i,e.eMarks[t]).trim(),level:e.level+1,lines:[t,e.line-1],children:[]}),e.tokens.push({type:"heading_close",hLevel:r===61?1:2,level:e.level}),!0)}var _1={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach(function(e){_1[e]=!0});var I7=/^<([a-zA-Z]{1,15})[\s\/>]/,x7=/^<\/([a-zA-Z]{1,15})[\s>]/;function A7(e){var t=e|32;return t>=97&&t<=122}function k7(e,t,n,r){var i,o,a,s=e.bMarks[t],l=e.eMarks[t],c=e.tShift[t];if(s+=c,!e.options.html||c>3||s+2>=l||e.src.charCodeAt(s)!==60)return!1;if(i=e.src.charCodeAt(s+1),i===33||i===63){if(r)return!0}else if(i===47||A7(i)){if(i===47){if(o=e.src.slice(s,l).match(x7),!o)return!1}else if(o=e.src.slice(s,l).match(I7),!o)return!1;if(_1[o[1].toLowerCase()]!==!0)return!1;if(r)return!0}else return!1;for(a=t+1;a<e.lineMax&&!e.isEmpty(a);)a++;return e.line=a,e.tokens.push({type:"htmlblock",level:e.level,lines:[t,e.line],content:e.getLines(t,a,0,!0)}),!0}function Lc(e,t){var n=e.bMarks[t]+e.blkIndent,r=e.eMarks[t];return e.src.substr(n,r-n)}function T7(e,t,n,r){var i,o,a,s,l,c,u,d,f,h,p;if(t+2>n||(l=t+1,e.tShift[l]<e.blkIndent)||(a=e.bMarks[l]+e.tShift[l],a>=e.eMarks[l])||(i=e.src.charCodeAt(a),i!==124&&i!==45&&i!==58)||(o=Lc(e,t+1),!/^[-:| ]+$/.test(o))||(c=o.split("|"),c<=2))return!1;for(d=[],s=0;s<c.length;s++){if(f=c[s].trim(),!f){if(s===0||s===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(f))return!1;f.charCodeAt(f.length-1)===58?d.push(f.charCodeAt(0)===58?"center":"right"):f.charCodeAt(0)===58?d.push("left"):d.push("")}if(o=Lc(e,t).trim(),o.indexOf("|")===-1||(c=o.replace(/^\||\|$/g,"").split("|"),d.length!==c.length))return!1;if(r)return!0;for(e.tokens.push({type:"table_open",lines:h=[t,0],level:e.level++}),e.tokens.push({type:"thead_open",lines:[t,t+1],level:e.level++}),e.tokens.push({type:"tr_open",lines:[t,t+1],level:e.level++}),s=0;s<c.length;s++)e.tokens.push({type:"th_open",align:d[s],lines:[t,t+1],level:e.level++}),e.tokens.push({type:"inline",content:c[s].trim(),lines:[t,t+1],level:e.level,children:[]}),e.tokens.push({type:"th_close",level:--e.level});for(e.tokens.push({type:"tr_close",level:--e.level}),e.tokens.push({type:"thead_close",level:--e.level}),e.tokens.push({type:"tbody_open",lines:p=[t+2,0],level:e.level++}),l=t+2;l<n&&!(e.tShift[l]<e.blkIndent||(o=Lc(e,l).trim(),o.indexOf("|")===-1));l++){for(c=o.replace(/^\||\|$/g,"").split("|"),e.tokens.push({type:"tr_open",level:e.level++}),s=0;s<c.length;s++)e.tokens.push({type:"td_open",align:d[s],level:e.level++}),u=c[s].substring(c[s].charCodeAt(0)===124?1:0,c[s].charCodeAt(c[s].length-1)===124?c[s].length-1:c[s].length).trim(),e.tokens.push({type:"inline",content:u,level:e.level,children:[]}),e.tokens.push({type:"td_close",level:--e.level});e.tokens.push({type:"tr_close",level:--e.level})}return e.tokens.push({type:"tbody_close",level:--e.level}),e.tokens.push({type:"table_close",level:--e.level}),h[1]=p[1]=l,e.line=l,!0}function Va(e,t){var n,r,i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];return i>=o||(r=e.src.charCodeAt(i++),r!==126&&r!==58)||(n=e.skipSpaces(i),i===n)||n>=o?-1:n}function M7(e,t){var n,r,i=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===i&&e.tokens[n].type==="paragraph_open"&&(e.tokens[n+2].tight=!0,e.tokens[n].tight=!0,n+=2)}function R7(e,t,n,r){var i,o,a,s,l,c,u,d,f,h,p,m,y,g;if(r)return e.ddIndent<0?!1:Va(e,t)>=0;if(u=t+1,e.isEmpty(u)&&++u>n||e.tShift[u]<e.blkIndent||(i=Va(e,u),i<0)||e.level>=e.options.maxNesting)return!1;c=e.tokens.length,e.tokens.push({type:"dl_open",lines:l=[t,0],level:e.level++}),a=t,o=u;e:for(;;){for(g=!0,y=!1,e.tokens.push({type:"dt_open",lines:[a,a],level:e.level++}),e.tokens.push({type:"inline",content:e.getLines(a,a+1,e.blkIndent,!1).trim(),level:e.level+1,lines:[a,a],children:[]}),e.tokens.push({type:"dt_close",level:--e.level});;){if(e.tokens.push({type:"dd_open",lines:s=[u,0],level:e.level++}),m=e.tight,f=e.ddIndent,d=e.blkIndent,p=e.tShift[o],h=e.parentType,e.blkIndent=e.ddIndent=e.tShift[o]+2,e.tShift[o]=i-e.bMarks[o],e.tight=!0,e.parentType="deflist",e.parser.tokenize(e,o,n,!0),(!e.tight||y)&&(g=!1),y=e.line-o>1&&e.isEmpty(e.line-1),e.tShift[o]=p,e.tight=m,e.parentType=h,e.blkIndent=d,e.ddIndent=f,e.tokens.push({type:"dd_close",level:--e.level}),s[1]=u=e.line,u>=n||e.tShift[u]<e.blkIndent)break e;if(i=Va(e,u),i<0)break;o=u}if(u>=n||(a=u,e.isEmpty(a))||e.tShift[a]<e.blkIndent||(o=a+1,o>=n)||(e.isEmpty(o)&&o++,o>=n)||e.tShift[o]<e.blkIndent||(i=Va(e,o),i<0))break}return e.tokens.push({type:"dl_close",level:--e.level}),l[1]=u,e.line=u,g&&M7(e,c),!0}function P7(e,t){var n,r,i,o,a,s=t+1,l;if(n=e.lineMax,s<n&&!e.isEmpty(s)){for(l=e.parser.ruler.getRules("paragraph");s<n&&!e.isEmpty(s);s++)if(!(e.tShift[s]-e.blkIndent>3)){for(i=!1,o=0,a=l.length;o<a;o++)if(l[o](e,s,n,!0)){i=!0;break}if(i)break}}return r=e.getLines(t,s,e.blkIndent,!1).trim(),e.line=s,r.length&&(e.tokens.push({type:"paragraph_open",tight:!1,lines:[t,e.line],level:e.level}),e.tokens.push({type:"inline",content:r,level:e.level+1,lines:[t,e.line],children:[]}),e.tokens.push({type:"paragraph_close",tight:!1,level:e.level})),!0}var Wa=[["code",g7],["fences",v7,["paragraph","blockquote","list"]],["blockquote",y7,["paragraph","blockquote","list"]],["hr",b7,["paragraph","blockquote","list"]],["list",S7,["paragraph","blockquote"]],["footnote",w7,["paragraph"]],["heading",E7,["paragraph","blockquote"]],["lheading",C7],["htmlblock",k7,["paragraph","blockquote"]],["table",T7,["paragraph"]],["deflist",R7,["paragraph"]],["paragraph",P7]];function gf(){this.ruler=new an;for(var e=0;e<Wa.length;e++)this.ruler.push(Wa[e][0],Wa[e][1],{alt:(Wa[e][2]||[]).slice()})}gf.prototype.tokenize=function(e,t,n){for(var r=this.ruler.getRules(""),i=r.length,o=t,a=!1,s,l;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.tShift[o]<e.blkIndent));){for(l=0;l<i&&(s=r[l](e,o,n,!1),!s);l++);if(e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),o=e.line,o<n&&e.isEmpty(o)){if(a=!0,o++,o<n&&e.parentType==="list"&&e.isEmpty(o))break;e.line=o}}};var N7=/[\n\t]/g,O7=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,L7=/\u00a0/g;gf.prototype.parse=function(e,t,n,r){var i,o=0,a=0;if(!e)return[];e=e.replace(L7," "),e=e.replace(O7,`
`),e.indexOf("	")>=0&&(e=e.replace(N7,function(s,l){var c;return e.charCodeAt(l)===10?(o=l+1,a=0,s):(c="    ".slice((l-o-a)%4),a=l-o+1,c)})),i=new Xr(e,this,t,n,r),this.tokenize(i,i.line,i.lineMax)};function D7(e){switch(e){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}function U7(e,t){for(var n=e.pos;n<e.posMax&&!D7(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}function F7(e,t){var n,r,i=e.pos;if(e.src.charCodeAt(i)!==10)return!1;if(n=e.pending.length-1,r=e.posMax,!t)if(n>=0&&e.pending.charCodeAt(n)===32)if(n>=1&&e.pending.charCodeAt(n-1)===32){for(var o=n-2;o>=0;o--)if(e.pending.charCodeAt(o)!==32){e.pending=e.pending.substring(0,o+1);break}e.push({type:"hardbreak",level:e.level})}else e.pending=e.pending.slice(0,-1),e.push({type:"softbreak",level:e.level});else e.push({type:"softbreak",level:e.level});for(i++;i<r&&e.src.charCodeAt(i)===32;)i++;return e.pos=i,!0}var vf=[];for(var Nm=0;Nm<256;Nm++)vf.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){vf[e.charCodeAt(0)]=1});function B7(e,t){var n,r=e.pos,i=e.posMax;if(e.src.charCodeAt(r)!==92)return!1;if(r++,r<i){if(n=e.src.charCodeAt(r),n<256&&vf[n]!==0)return t||(e.pending+=e.src[r]),e.pos+=2,!0;if(n===10){for(t||e.push({type:"hardbreak",level:e.level}),r++;r<i&&e.src.charCodeAt(r)===32;)r++;return e.pos=r,!0}}return t||(e.pending+="\\"),e.pos++,!0}function j7(e,t){var n,r,i,o,a,s=e.pos,l=e.src.charCodeAt(s);if(l!==96)return!1;for(n=s,s++,r=e.posMax;s<r&&e.src.charCodeAt(s)===96;)s++;for(i=e.src.slice(n,s),o=a=s;(o=e.src.indexOf("`",a))!==-1;){for(a=o+1;a<r&&e.src.charCodeAt(a)===96;)a++;if(a-o===i.length)return t||e.push({type:"code",content:e.src.slice(s,o).replace(/[ \n]+/g," ").trim(),block:!1,level:e.level}),e.pos=a,!0}return t||(e.pending+=i),e.pos+=i.length,!0}function $7(e,t){var n,r,i,o=e.posMax,a=e.pos,s,l;if(e.src.charCodeAt(a)!==126||t||a+4>=o||e.src.charCodeAt(a+1)!==126||e.level>=e.options.maxNesting||(s=a>0?e.src.charCodeAt(a-1):-1,l=e.src.charCodeAt(a+2),s===126)||l===126||l===32||l===10)return!1;for(r=a+2;r<o&&e.src.charCodeAt(r)===126;)r++;if(r>a+3)return e.pos+=r-a,t||(e.pending+=e.src.slice(a,r)),!0;for(e.pos=a+2,i=1;e.pos+1<o;){if(e.src.charCodeAt(e.pos)===126&&e.src.charCodeAt(e.pos+1)===126&&(s=e.src.charCodeAt(e.pos-1),l=e.pos+2<o?e.src.charCodeAt(e.pos+2):-1,l!==126&&s!==126&&(s!==32&&s!==10?i--:l!==32&&l!==10&&i++,i<=0))){n=!0;break}e.parser.skipToken(e)}return n?(e.posMax=e.pos,e.pos=a+2,t||(e.push({type:"del_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"del_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=o,!0):(e.pos=a,!1)}function H7(e,t){var n,r,i,o=e.posMax,a=e.pos,s,l;if(e.src.charCodeAt(a)!==43||t||a+4>=o||e.src.charCodeAt(a+1)!==43||e.level>=e.options.maxNesting||(s=a>0?e.src.charCodeAt(a-1):-1,l=e.src.charCodeAt(a+2),s===43)||l===43||l===32||l===10)return!1;for(r=a+2;r<o&&e.src.charCodeAt(r)===43;)r++;if(r!==a+2)return e.pos+=r-a,t||(e.pending+=e.src.slice(a,r)),!0;for(e.pos=a+2,i=1;e.pos+1<o;){if(e.src.charCodeAt(e.pos)===43&&e.src.charCodeAt(e.pos+1)===43&&(s=e.src.charCodeAt(e.pos-1),l=e.pos+2<o?e.src.charCodeAt(e.pos+2):-1,l!==43&&s!==43&&(s!==32&&s!==10?i--:l!==32&&l!==10&&i++,i<=0))){n=!0;break}e.parser.skipToken(e)}return n?(e.posMax=e.pos,e.pos=a+2,t||(e.push({type:"ins_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"ins_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=o,!0):(e.pos=a,!1)}function q7(e,t){var n,r,i,o=e.posMax,a=e.pos,s,l;if(e.src.charCodeAt(a)!==61||t||a+4>=o||e.src.charCodeAt(a+1)!==61||e.level>=e.options.maxNesting||(s=a>0?e.src.charCodeAt(a-1):-1,l=e.src.charCodeAt(a+2),s===61)||l===61||l===32||l===10)return!1;for(r=a+2;r<o&&e.src.charCodeAt(r)===61;)r++;if(r!==a+2)return e.pos+=r-a,t||(e.pending+=e.src.slice(a,r)),!0;for(e.pos=a+2,i=1;e.pos+1<o;){if(e.src.charCodeAt(e.pos)===61&&e.src.charCodeAt(e.pos+1)===61&&(s=e.src.charCodeAt(e.pos-1),l=e.pos+2<o?e.src.charCodeAt(e.pos+2):-1,l!==61&&s!==61&&(s!==32&&s!==10?i--:l!==32&&l!==10&&i++,i<=0))){n=!0;break}e.parser.skipToken(e)}return n?(e.posMax=e.pos,e.pos=a+2,t||(e.push({type:"mark_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"mark_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=o,!0):(e.pos=a,!1)}function Om(e){return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122}function Lm(e,t){var n=t,r,i,o,a=!0,s=!0,l=e.posMax,c=e.src.charCodeAt(t);for(r=t>0?e.src.charCodeAt(t-1):-1;n<l&&e.src.charCodeAt(n)===c;)n++;return n>=l&&(a=!1),o=n-t,o>=4?a=s=!1:(i=n<l?e.src.charCodeAt(n):-1,(i===32||i===10)&&(a=!1),(r===32||r===10)&&(s=!1),c===95&&(Om(r)&&(a=!1),Om(i)&&(s=!1))),{can_open:a,can_close:s,delims:o}}function z7(e,t){var n,r,i,o,a,s,l,c=e.posMax,u=e.pos,d=e.src.charCodeAt(u);if(d!==95&&d!==42||t)return!1;if(l=Lm(e,u),n=l.delims,!l.can_open)return e.pos+=n,t||(e.pending+=e.src.slice(u,e.pos)),!0;if(e.level>=e.options.maxNesting)return!1;for(e.pos=u+n,s=[n];e.pos<c;){if(e.src.charCodeAt(e.pos)===d){if(l=Lm(e,e.pos),r=l.delims,l.can_close){for(o=s.pop(),a=r;o!==a;){if(a<o){s.push(o-a);break}if(a-=o,s.length===0)break;e.pos+=o,o=s.pop()}if(s.length===0){n=o,i=!0;break}e.pos+=r;continue}l.can_open&&s.push(r),e.pos+=r;continue}e.parser.skipToken(e)}return i?(e.posMax=e.pos,e.pos=u+n,t||((n===2||n===3)&&e.push({type:"strong_open",level:e.level++}),(n===1||n===3)&&e.push({type:"em_open",level:e.level++}),e.parser.tokenize(e),(n===1||n===3)&&e.push({type:"em_close",level:--e.level}),(n===2||n===3)&&e.push({type:"strong_close",level:--e.level})),e.pos=e.posMax+n,e.posMax=c,!0):(e.pos=u,!1)}var V7=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function W7(e,t){var n,r,i=e.posMax,o=e.pos;if(e.src.charCodeAt(o)!==126||t||o+2>=i||e.level>=e.options.maxNesting)return!1;for(e.pos=o+1;e.pos<i;){if(e.src.charCodeAt(e.pos)===126){n=!0;break}e.parser.skipToken(e)}return!n||o+1===e.pos||(r=e.src.slice(o+1,e.pos),r.match(/(^|[^\\])(\\\\)*\s/))?(e.pos=o,!1):(e.posMax=e.pos,e.pos=o+1,t||e.push({type:"sub",level:e.level,content:r.replace(V7,"$1")}),e.pos=e.posMax+1,e.posMax=i,!0)}var K7=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function G7(e,t){var n,r,i=e.posMax,o=e.pos;if(e.src.charCodeAt(o)!==94||t||o+2>=i||e.level>=e.options.maxNesting)return!1;for(e.pos=o+1;e.pos<i;){if(e.src.charCodeAt(e.pos)===94){n=!0;break}e.parser.skipToken(e)}return!n||o+1===e.pos||(r=e.src.slice(o+1,e.pos),r.match(/(^|[^\\])(\\\\)*\s/))?(e.pos=o,!1):(e.posMax=e.pos,e.pos=o+1,t||e.push({type:"sup",level:e.level,content:r.replace(K7,"$1")}),e.pos=e.posMax+1,e.posMax=i,!0)}function Y7(e,t){var n,r,i,o,a,s,l,c,u=!1,d=e.pos,f=e.posMax,h=e.pos,p=e.src.charCodeAt(h);if(p===33&&(u=!0,p=e.src.charCodeAt(++h)),p!==91||e.level>=e.options.maxNesting||(n=h+1,r=Yo(e,h),r<0))return!1;if(s=r+1,s<f&&e.src.charCodeAt(s)===40){for(s++;s<f&&(c=e.src.charCodeAt(s),!(c!==32&&c!==10));s++);if(s>=f)return!1;for(h=s,g1(e,s)?(o=e.linkContent,s=e.pos):o="",h=s;s<f&&(c=e.src.charCodeAt(s),!(c!==32&&c!==10));s++);if(s<f&&h!==s&&v1(e,s))for(a=e.linkContent,s=e.pos;s<f&&(c=e.src.charCodeAt(s),!(c!==32&&c!==10));s++);else a="";if(s>=f||e.src.charCodeAt(s)!==41)return e.pos=d,!1;s++}else{if(e.linkLevel>0)return!1;for(;s<f&&(c=e.src.charCodeAt(s),!(c!==32&&c!==10));s++);if(s<f&&e.src.charCodeAt(s)===91&&(h=s+1,s=Yo(e,s),s>=0?i=e.src.slice(h,s++):s=h-1),i||(fe(i)>"u"&&(s=r+1),i=e.src.slice(n,r)),l=e.env.references[y1(i)],!l)return e.pos=d,!1;o=l.href,a=l.title}return t||(e.pos=n,e.posMax=r,u?e.push({type:"image",src:o,title:a,alt:e.src.substr(n,r-n),level:e.level}):(e.push({type:"link_open",href:o,title:a,level:e.level++}),e.linkLevel++,e.parser.tokenize(e),e.linkLevel--,e.push({type:"link_close",level:--e.level}))),e.pos=s,e.posMax=f,!0}function J7(e,t){var n,r,i,o,a=e.posMax,s=e.pos;return s+2>=a||e.src.charCodeAt(s)!==94||e.src.charCodeAt(s+1)!==91||e.level>=e.options.maxNesting||(n=s+2,r=Yo(e,s+1),r<0)?!1:(t||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),i=e.env.footnotes.list.length,e.pos=n,e.posMax=r,e.push({type:"footnote_ref",id:i,level:e.level}),e.linkLevel++,o=e.tokens.length,e.parser.tokenize(e),e.env.footnotes.list[i]={tokens:e.tokens.splice(o)},e.linkLevel--),e.pos=r+1,e.posMax=a,!0)}function Z7(e,t){var n,r,i,o,a=e.posMax,s=e.pos;if(s+3>a||!e.env.footnotes||!e.env.footnotes.refs||e.src.charCodeAt(s)!==91||e.src.charCodeAt(s+1)!==94||e.level>=e.options.maxNesting)return!1;for(r=s+2;r<a;r++){if(e.src.charCodeAt(r)===32||e.src.charCodeAt(r)===10)return!1;if(e.src.charCodeAt(r)===93)break}return r===s+2||r>=a||(r++,n=e.src.slice(s+2,r-1),fe(e.env.footnotes.refs[":"+n])>"u")?!1:(t||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+n]<0?(i=e.env.footnotes.list.length,e.env.footnotes.list[i]={label:n,count:0},e.env.footnotes.refs[":"+n]=i):i=e.env.footnotes.refs[":"+n],o=e.env.footnotes.list[i].count,e.env.footnotes.list[i].count++,e.push({type:"footnote_ref",id:i,subId:o,level:e.level})),e.pos=r,e.posMax=a,!0)}var X7=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],Q7=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,eF=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function tF(e,t){var n,r,i,o,a,s=e.pos;return e.src.charCodeAt(s)!==60||(n=e.src.slice(s),n.indexOf(">")<0)?!1:(r=n.match(eF),r?X7.indexOf(r[1].toLowerCase())<0||(o=r[0].slice(1,-1),a=ju(o),!e.parser.validateLink(o))?!1:(t||(e.push({type:"link_open",href:a,level:e.level}),e.push({type:"text",content:o,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=r[0].length,!0):(i=n.match(Q7),i?(o=i[0].slice(1,-1),a=ju("mailto:"+o),e.parser.validateLink(a)?(t||(e.push({type:"link_open",href:a,level:e.level}),e.push({type:"text",content:o,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=i[0].length,!0):!1):!1))}function ql(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,e=e.replace(r,i),n):new RegExp(e,t)}}var nF=/[a-zA-Z_:][a-zA-Z0-9:._-]*/,rF=/[^"'=<>`\x00-\x20]+/,iF=/'[^']*'/,oF=/"[^"]*"/,aF=ql(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",rF)("single_quoted",iF)("double_quoted",oF)(),sF=ql(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",nF)("attr_value",aF)(),lF=ql(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",sF)(),cF=/<\/[A-Za-z][A-Za-z0-9]*\s*>/,uF=/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,dF=/<[?].*?[?]>/,fF=/<![A-Z]+\s+[^>]*>/,hF=/<!\[CDATA\[[\s\S]*?\]\]>/,pF=ql(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",lF)("close_tag",cF)("comment",uF)("processing",dF)("declaration",fF)("cdata",hF)();function mF(e){var t=e|32;return t>=97&&t<=122}function gF(e,t){var n,r,i,o=e.pos;return!e.options.html||(i=e.posMax,e.src.charCodeAt(o)!==60||o+2>=i)||(n=e.src.charCodeAt(o+1),n!==33&&n!==63&&n!==47&&!mF(n))||(r=e.src.slice(o).match(pF),!r)?!1:(t||e.push({type:"htmltag",content:e.src.slice(o,o+r[0].length),level:e.level}),e.pos+=r[0].length,!0)}var vF=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,yF=/^&([a-z][a-z0-9]{1,31});/i;function bF(e,t){var n,r,i,o=e.pos,a=e.posMax;if(e.src.charCodeAt(o)!==38)return!1;if(o+1<a){if(n=e.src.charCodeAt(o+1),n===35){if(i=e.src.slice(o).match(vF),i)return t||(r=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),e.pending+=p1(r)?Bu(r):Bu(65533)),e.pos+=i[0].length,!0}else if(i=e.src.slice(o).match(yF),i){var s=f1(i[1]);if(i[1]!==s)return t||(e.pending+=s),e.pos+=i[0].length,!0}}return t||(e.pending+="&"),e.pos++,!0}var Dc=[["text",U7],["newline",F7],["escape",B7],["backticks",j7],["del",$7],["ins",H7],["mark",q7],["emphasis",z7],["sub",W7],["sup",G7],["links",Y7],["footnote_inline",J7],["footnote_ref",Z7],["autolink",tF],["htmltag",gF],["entity",bF]];function zl(){this.ruler=new an;for(var e=0;e<Dc.length;e++)this.ruler.push(Dc[e][0],Dc[e][1]);this.validateLink=_F}zl.prototype.skipToken=function(e){var t=this.ruler.getRules(""),n=t.length,r=e.pos,i,o;if((o=e.cacheGet(r))>0){e.pos=o;return}for(i=0;i<n;i++)if(t[i](e,!0)){e.cacheSet(r,e.pos);return}e.pos++,e.cacheSet(r,e.pos)};zl.prototype.tokenize=function(e){for(var t=this.ruler.getRules(""),n=t.length,r=e.posMax,i,o;e.pos<r;){for(o=0;o<n&&(i=t[o](e,!1),!i);o++);if(i){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};zl.prototype.parse=function(e,t,n,r){var i=new Zr(e,this,t,n,r);this.tokenize(i)};function _F(e){var t=["vbscript","javascript","file","data"],n=e.trim().toLowerCase();return n=Hr(n),!(n.indexOf(":")!==-1&&t.indexOf(n.split(":")[0])!==-1)}var SF={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},wF={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},EF={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}},CF={default:SF,full:wF,commonmark:EF};function S1(e,t,n){this.src=t,this.env=n,this.options=e.options,this.tokens=[],this.inlineMode=!1,this.inline=e.inline,this.block=e.block,this.renderer=e.renderer,this.typographer=e.typographer}function Gn(e,t){typeof e!="string"&&(t=e,e="default"),t&&t.linkify!=null&&console.warn(`linkify option is removed. Use linkify plugin instead:

import Remarkable from 'remarkable';
import linkify from 'remarkable/linkify';
new Remarkable().use(linkify)
`),this.inline=new zl,this.block=new gf,this.core=new b1,this.renderer=new mf,this.ruler=new an,this.options={},this.configure(CF[e]),this.set(t||{})}Gn.prototype.set=function(e){h1(this.options,e)};Gn.prototype.configure=function(e){var t=this;if(!e)throw new Error("Wrong `remarkable` preset, check name/content");e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enable(e.components[n].rules,!0)})};Gn.prototype.use=function(e,t){return e(this,t),this};Gn.prototype.parse=function(e,t){var n=new S1(this,e,t);return this.core.process(n),n.tokens};Gn.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Gn.prototype.parseInline=function(e,t){var n=new S1(this,e,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Gn.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var $u=function(){function e(){T(this,e)}return M(e,null,[{key:"instantiate",value:function(){var n=window.hljs;return n?new Gn({highlight:function(i,o){if(o&&n.getLanguage(o))try{return n.highlight(o,i).value}catch{console.error("failed to setup the highlight dependency")}try{return n.highlightAuto(i).value}catch{console.error("failed to automatically highlight messages")}return""},html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"_blank",typographer:!0}):new Gn({linkTarget:"_blank"})}},{key:"createNew",value:function(){var n=e.instantiate();return n.inline.validateLink=function(){return!0},n}}]),e}(),w1=function(){function e(){T(this,e)}return M(e,null,[{key:"addMessage",value:function(n,r,i,o){var a;n.elementRef.appendChild(r.outerContainer),n.applyCustomStyles(r,o,!0,(a=n.messageStyles)==null?void 0:a[i]),n.elementRef.scrollTop=n.elementRef.scrollHeight}},{key:"wrapInLink",value:function(n,r,i){var o=document.createElement("a");return o.href=r,o.download=i||e.DEFAULT_FILE_NAME,o.target="_blank",o.appendChild(n),o}},{key:"isNonLinkableDataUrl",value:function(n,r){return!r.startsWith("data")||n==="image"?!1:n==="any"&&r.startsWith("data:text/javascript")||!r.startsWith("data:image")}},{key:"processContent",value:function(n,r,i,o){return!i||e.isNonLinkableDataUrl(n,i)?r:e.wrapInLink(r,i,o)}},{key:"waitToLoadThenScroll",value:function(n){setTimeout(function(){n.scrollTop=n.scrollHeight},60)}},{key:"scrollDownOnImageLoad",value:function(n,r){if(n.startsWith("data"))e.waitToLoadThenScroll(r);else try{fetch(n,{mode:"no-cors"}).catch(function(){}).finally(function(){e.waitToLoadThenScroll(r)})}catch{r.scrollTop=r.scrollHeight}}},{key:"reAddFileRefToObject",value:function(n,r){var i;(i=n.files)==null||i.forEach(function(o,a){var s;o.ref&&(s=r.message.files)!=null&&s[a]&&(r.message.files[a].ref=o.ref)})}},{key:"removeFileRef",value:function(n){var r=Ne({},n);return delete r.ref,r}}]),e}();w1.DEFAULT_FILE_NAME="file";var xn=w1,Bs=function(){function e(){T(this,e)}return M(e,null,[{key:"onNewMessage",value:function(n,r,i){var o,a=JSON.parse(JSON.stringify({message:r,isInitial:i}));xn.reAddFileRefToObject(r,a),(o=n.onNewMessage)==null||o.call(n,a),n.dispatchEvent(new CustomEvent("new-message",{detail:a}))}},{key:"onClearMessages",value:function(n){var r;(r=n.onClearMessages)==null||r.call(n),n.dispatchEvent(new CustomEvent("clear-messages"))}},{key:"onRender",value:function(n){var r;(r=n.onComponentRender)==null||r.call(n,n),n.dispatchEvent(new CustomEvent("render",{detail:n}))}},{key:"onError",value:function(n,r){var i;(i=n.onError)==null||i.call(n,r),n.dispatchEvent(new CustomEvent("error",{detail:r}))}}]),e}(),us=function(){function e(){T(this,e)}return M(e,null,[{key:"applyCustomStylesToElements",value:function(n,r,i){if(i&&(Object.assign(n.outerContainer.style,i.outerContainer),Object.assign(n.innerContainer.style,i.innerContainer),Object.assign(n.bubbleElement.style,i.bubble),r)){var o=n.bubbleElement.children[0],a=o.tagName.toLocaleLowerCase()!=="a"?o:o.children[0];Object.assign(a.style,i.media)}}},{key:"applySideStyles",value:function(n,r,i,o){o&&(e.applyCustomStylesToElements(n,i,o.shared),r===_e.USER_ROLE?e.applyCustomStylesToElements(n,i,o.user):(e.applyCustomStylesToElements(n,i,o.ai),e.applyCustomStylesToElements(n,i,o[r])))}},{key:"isMessageSideStyles",value:function(n){return!!(n.ai||n.shared||n.user)}},{key:"applyCustomStyles",value:function(n,r,i,o,a){var s;a&&n.default!==a?e.isMessageSideStyles(a)?(e.applySideStyles(r,i,o,n.default),e.applySideStyles(r,i,o,a)):(e.applyCustomStylesToElements(r,o,(s=n.default)==null?void 0:s.shared),e.applyCustomStylesToElements(r,o,a)):e.applySideStyles(r,i,o,n.default)}},{key:"extractParticularSharedStyles",value:function(n,r){if(r!=null&&r.shared){var i=r.shared,o={outerContainer:{},innerContainer:{},bubble:{},media:{}};return n.forEach(function(a){var s,l,c,u;o.outerContainer[a]=((s=i.outerContainer)==null?void 0:s[a])||"",o.innerContainer[a]=((l=i.innerContainer)==null?void 0:l[a])||"",o.bubble[a]=((c=i.bubble)==null?void 0:c[a])||"",o.media[a]=((u=i.media)==null?void 0:u[a])||""}),o}}}]),e}(),E1=function(){function e(t){var n=this;T(this,e),this.messageElementRefs=[],this.messages=[],this.htmlClassUtilities={},this.textElementsToText=[],this.elementRef=e.createContainerElement(),this.messageStyles=t.messageStyles,this._remarkable=$u.createNew(),this._avatars=t.avatars,this._names=t.names,this._onNewMessage=Bs.onNewMessage.bind(this,t),t.htmlClassUtilities&&(this.htmlClassUtilities=t.htmlClassUtilities),setTimeout(function(){n.submitUserMessage=t.submitUserMessage})}return M(e,[{key:"addNewTextMessage",value:function(n,r,i){if(i!=null&&i.status){var o=this.overwriteText(r,n,this.messageElementRefs);if(o)return o;i.status=!1}var a=this.createAndAppendNewMessageElement(n,r);return a.bubbleElement.classList.add("text-message"),this.applyCustomStyles(a,r,!1),_e.fillEmptyMessageElement(a.bubbleElement,n),this.textElementsToText.push([a,n]),a}},{key:"overwriteText",value:function(n,r,i){var o=_e.overwriteMessage(this.messages,i,r,n,"text","text-message");if(o){this.renderText(o.bubbleElement,r);var a=_e.getLastTextToElement(this.textElementsToText,o);a&&(a[1]=r)}return o}},{key:"createAndAppendNewMessageElement",value:function(n,r){var i=this,o=this.createNewMessageElement(n,r);return this.elementRef.appendChild(o.outerContainer),setTimeout(function(){return en.scrollToBottom(i.elementRef)}),o}},{key:"createNewMessageElement",value:function(n,r){var i;(i=this._introPanel)==null||i.hide();var o=this.messageElementRefs[this.messageElementRefs.length-1];return e.isTemporaryElement(o)&&(o.outerContainer.remove(),this.messageElementRefs.pop()),this.createMessageElements(n,r)}},{key:"createMessageElements",value:function(n,r){var i=e.createBaseElements(),o=i.outerContainer,a=i.innerContainer,s=i.bubbleElement;return o.appendChild(a),this.addInnerContainerElements(s,n,r),this.messageElementRefs.push(i),i}},{key:"addInnerContainerElements",value:function(n,r,i){var o;return((o=this.messages[this.messages.length-1])==null?void 0:o.role)===i&&!this.isLastMessageError()&&_e.hideRoleElements(this.messageElementRefs,!!this._avatars,!!this._names),n.classList.add("message-bubble",_e.getRoleClass(i),i===_e.USER_ROLE?"user-message-text":"ai-message-text"),this.renderText(n,r),_e.addRoleElements(n,i,this._avatars,this._names),{bubbleElement:n}}},{key:"applyCustomStyles",value:function(n,r,i,o){n&&this.messageStyles&&us.applyCustomStyles(this.messageStyles,n,r,i,o)}},{key:"removeLastMessage",value:function(){this.messageElementRefs[this.messageElementRefs.length-1].outerContainer.remove(),this.messageElementRefs.pop()}},{key:"isLastMessageError",value:function(){var n;return(n=_e.getLastMessageBubbleElement(this.elementRef))==null?void 0:n.classList.contains("error-message-text")}},{key:"sendClientUpdate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i;(i=this._onNewMessage)==null||i.call(this,n,r)}},{key:"renderText",value:function(n,r){n.innerHTML=this._remarkable.render(r),n.innerText.trim().length===0&&(n.innerText=r)}},{key:"refreshTextMessages",value:function(){var n=this;this._remarkable=$u.createNew(),this.textElementsToText.forEach(function(r){n.renderText(r[0].bubbleElement,r[1])})}}],[{key:"createContainerElement",value:function(){var n=document.createElement("div");return n.id="messages",n}},{key:"isTemporaryElement",value:function(n){return(n==null?void 0:n.bubbleElement.classList.contains("loading-message-text"))||Fs.isElementTemporary(n)}},{key:"createBaseElements",value:function(){var n=document.createElement("div"),r=document.createElement("div");r.classList.add("inner-message-container"),n.appendChild(r),n.classList.add("outer-message-container");var i=document.createElement("div");return i.classList.add("message-bubble"),r.appendChild(i),{outerContainer:n,innerContainer:r,bubbleElement:i}}},{key:"createMessageContent",value:function(n){var r=n.text,i=n.files,o=n.html,a=n._sessionId,s=n.role,l={role:s||_e.AI_ROLE};return r&&(l.text=r),i&&(l.files=i),o&&(l.html=o),!r&&!i&&!o&&(l.text=""),a&&(l._sessionId=a),l}}]),e}(),yf=function(){function e(t){T(this,e),this._fileAdded=!1,this._streamedContent="",this._streamType="",this._hasStreamEnded=!1,this._messages=t}return M(e,[{key:"upsertStreamedMessage",value:function(n){var r;if(!this._hasStreamEnded){if((n==null?void 0:n.text)===void 0&&(n==null?void 0:n.html)===void 0)return console.error(at.INVALID_STREAM_EVENT);var i=(n==null?void 0:n.text)||(n==null?void 0:n.html)||"",o=en.isScrollbarAtBottomOfElement(this._messages.elementRef),a=(n==null?void 0:n.text)!==void 0?"text":"html";if(!this._elements&&this._streamedContent==="")this.setInitialState(a,i,n==null?void 0:n.role);else{if(this._streamType!==a)return console.error(at.INVALID_STREAM_EVENT_MIX);this.updateBasedOnType(i,a,(r=this._elements)==null?void 0:r.bubbleElement,n==null?void 0:n.overwrite)}o&&en.scrollToBottom(this._messages.elementRef)}}},{key:"setInitialState",value:function(n,r,i){var o;this._streamType=n,(o=i)!==null&&o!==void 0||(i=_e.AI_ROLE),this._elements=n==="text"?this._messages.addNewTextMessage(r,i):Fu.add(this._messages,r,i,this._messages.messageElementRefs),this._elements.bubbleElement.classList.add(e.MESSAGE_CLASS),this._streamedContent=r,this._activeMessageRole=i,this._message=t1({role:this._activeMessageRole},n,this._streamedContent),this._messages.messages.push(this._message)}},{key:"updateBasedOnType",value:function(n,r,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;_e.unfillEmptyMessageElement(i,n),(r==="text"?this.updateText:this.updateHTML).bind(this)(n,i,o)}},{key:"updateText",value:function(n,r,i){this._streamedContent=i?n:this._streamedContent+n,this._messages.textElementsToText[this._messages.textElementsToText.length-1][1]=this._streamedContent,this._messages.renderText(r,this._streamedContent)}},{key:"updateHTML",value:function(n,r,i){if(i)this._streamedContent=n,r.innerHTML=n;else{var o=document.createElement("span");o.innerHTML=n,r.appendChild(o),this._streamedContent=e.HTML_CONTENT_PLACEHOLDER}}},{key:"finaliseStreamedMessage",value:function(){var n,r,i=this._messages.textElementsToText;if(!(this._fileAdded&&!this._elements)){if(!this._elements)throw Error(at.NO_VALID_STREAM_EVENTS_SENT);(n=this._elements.bubbleElement)!=null&&n.classList.contains(e.MESSAGE_CLASS)&&(this._streamType==="text"?(i[i.length-1][1]=this._streamedContent,this._message&&(this._message.text=this._streamedContent),this._messages.textToSpeech&&cs.speak(this._streamedContent,this._messages.textToSpeech)):this._streamType==="html"&&(this._streamedContent===e.HTML_CONTENT_PLACEHOLDER&&(this._streamedContent=((r=this._elements.bubbleElement)==null?void 0:r.innerHTML)||""),this._elements&&Ko.apply(this._messages,this._elements.outerContainer),this._message&&(this._message.html=this._streamedContent)),this._message&&this._messages.sendClientUpdate(E1.createMessageContent(this._message),!1),this._hasStreamEnded=!0)}}},{key:"markFileAded",value:function(){this._fileAdded=!0}}]),e}();yf.MESSAGE_CLASS="streamed-message";yf.HTML_CONTENT_PLACEHOLDER="htmlplaceholder";var qr=yf,C1=function(){function e(){T(this,e)}return M(e,null,[{key:"tempRemoveContentHeader",value:function(){var t=D(_().mark(function r(i,o,a){var s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i!=null&&i.headers){u.next=2;break}throw new Error("Request settings have not been set up");case 2:return s=i.headers[e.CONTENT_TYPE],delete i.headers[e.CONTENT_TYPE],u.prev=4,u.next=7,o(a);case 7:l=u.sent,u.next=13;break;case 10:throw u.prev=10,u.t0=u.catch(4),i.headers[e.CONTENT_TYPE]=s,u.t0;case 13:return u.abrupt("return",(i.headers[e.CONTENT_TYPE]=s,l));case 14:case"end":return u.stop()}},r,null,[[4,10]])}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"displayError",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Service error, please try again.";if(console.error(r),fe(r)=="object")return Object.keys(r).length===0?n.addNewErrorMessage("service",i):n.addNewErrorMessage("service",JSON.stringify(r));n.addNewErrorMessage("service",r)}},{key:"fetch",value:function(t){function n(r,i,o,a){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(t,n,r,i){var o,a,s={method:((o=t.requestSettings)==null?void 0:o.method)||"POST",headers:n};return s.method!=="GET"&&(s.body=r?JSON.stringify(i):i),t.requestSettings.credentials&&(s.credentials=t.requestSettings.credentials),fetch(((a=t.requestSettings)==null?void 0:a.url)||t.url||"",s)})},{key:"processResponseByType",value:function(n){var r=n.headers.get("content-type");return r!=null&&r.includes("application/json")?n.json():r!=null&&r.includes("text/plain")||!r?n:n.blob()}},{key:"processRequestInterceptor",value:function(){var t=D(_().mark(function r(i,o){var a,s,l,c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(a=i.requestInterceptor)==null?void 0:a.call(i,o);case 2:if(d.t0=d.sent,d.t0){d.next=5;break}d.t0=o;case 5:return s=d.t0,l=s,c=s,d.abrupt("return",{body:l.body,headers:l.headers,error:c.error});case 9:case"end":return d.stop()}},r)}));function n(r,i){return t.apply(this,arguments)}return n}()},{key:"validateResponseFormat",value:function(n){return n&&fe(n)=="object"&&(typeof n.error=="string"||typeof n.text=="string"||typeof n.html=="string"||Array.isArray(n.files))}},{key:"onInterceptorError",value:function(n,r,i){n.addNewErrorMessage("service",r),i==null||i()}}]),e}();C1.CONTENT_TYPE="Content-Type";var we=C1;function IF(e,t){return Hu.apply(this,arguments)}function Hu(){return Hu=D(_().mark(function e(t,n){var r,i;return _().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=t.getReader();case 1:return a.next=3,r.read();case 3:if((i=a.sent).done){a.next=7;break}n(i.value);case 5:a.next=1;break;case 7:case"end":return a.stop()}},e)})),Hu.apply(this,arguments)}function xF(e){var t,n,r,i=!1;return function(o){t===void 0?(t=o,n=0,r=-1):t=kF(t,o);for(var a=t.length,s=0;n<a;){i&&(t[n]===10&&(s=++n),i=!1);for(var l=-1;n<a&&l===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-s);break;case 13:i=!0;case 10:l=n;break}if(l===-1)break;e(t.subarray(s,l),r),s=n,r=-1}s===a?t=void 0:s!==0&&(t=t.subarray(s),n-=s)}}function AF(e,t,n){var r=Dm(),i=new TextDecoder;return function(o,a){if(o.length===0)n==null||n(r),r=Dm();else if(a>0){var s=i.decode(o.subarray(0,a)),l=a+(o[a+1]===32?2:1),c=i.decode(o.subarray(l));switch(s){case"data":r.data=r.data?r.data+`
`+c:c;break;case"event":r.event=c;break;case"id":e(r.id=c);break;case"retry":var u=parseInt(c,10);isNaN(u)||t(r.retry=u);break}}}}function kF(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Dm(){return{data:"",event:"",id:"",retry:void 0}}var TF=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},qu="text/event-stream",MF=1e3,Um="last-event-id";function RF(e,t){var n=t.signal,r=t.headers,i=t.onopen,o=t.onmessage,a=t.onclose,s=t.onerror,l=t.openWhenHidden,c=t.fetch,u=TF(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(function(d,f){var h=Object.assign({},r);h.accept||(h.accept=qu);var p;function m(){p.abort(),document.hidden||C()}l||document.addEventListener("visibilitychange",m);var y=MF,g=0;function v(){document.removeEventListener("visibilitychange",m),window.clearTimeout(g),p.abort()}n==null||n.addEventListener("abort",function(){v(),d()});var b=c??window.fetch,E=i??PF;function C(){return x.apply(this,arguments)}function x(){return x=D(_().mark(function O(){var U,H,G;return _().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return p=new AbortController,z.prev=1,z.next=4,b(e,Object.assign(Object.assign({},u),{headers:h,signal:p.signal}));case 4:return H=z.sent,z.next=7,E(H);case 7:return z.next=9,IF(H.body,xF(AF(function(Y){Y?h[Um]=Y:delete h[Um]},function(Y){y=Y},o)));case 9:a==null||a(),v(),d(),z.next=17;break;case 14:if(z.prev=14,z.t0=z.catch(1),!p.signal.aborted)try{G=(U=s==null?void 0:s(z.t0))!==null&&U!==void 0?U:y,window.clearTimeout(g),g=window.setTimeout(C,G)}catch(Y){v(),f(Y)}case 17:case"end":return z.stop()}},O,null,[[1,14]])})),x.apply(this,arguments)}C()})}function PF(e){var t=e.headers.get("content-type");if(!(t!=null&&t.startsWith(qu)))throw new Error("Expected content-type to be ".concat(qu,", Actual: ").concat(t))}var St=function(){function e(){T(this,e)}return M(e,null,[{key:"request",value:function(){var t=D(_().mark(function r(i,o,a){var s,l,c,u,d,f,h,p,m,y,g,v,b,E,C,x,O,U,H=arguments;return _().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return s=H.length>3&&H[3]!==void 0?H[3]:!0,p={body:o,headers:(l=i.requestSettings)==null?void 0:l.headers},q.next=4,we.processRequestInterceptor(i.deepChat,p);case 4:if(m=q.sent,y=m.body,g=m.headers,v=m.error,b=i.streamHandlers,E=b.onOpen,C=b.onClose,x=b.abortStream,!v){q.next=14;break}return q.abrupt("return",we.onInterceptorError(a,v,C));case 14:if(!((c=i.requestSettings)!=null&&c.handler)){q.next=16;break}return q.abrupt("return",bf.stream(i,y,a));case 16:if(((u=i.requestSettings)==null?void 0:u.url)!==fr.URL){q.next=18;break}return q.abrupt("return",fr.requestStream(a,i.streamHandlers));case 18:O=new qr(a),U=we.fetch.bind(this,i,g,s),RF(((d=i.requestSettings)==null?void 0:d.url)||i.url||"",{method:((f=i.requestSettings)==null?void 0:f.method)||"POST",headers:g,credentials:(h=i.requestSettings)==null?void 0:h.credentials,body:s?JSON.stringify(y):y,openWhenHidden:!0,onopen:function(Y){return D(_().mark(function le(){return _().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!Y.ok){L.next=2;break}return L.abrupt("return",E());case 2:return L.next=4,we.processResponseByType(Y);case 4:throw L.sent;case 5:case"end":return L.stop()}},le)}))()},onmessage:function(Y){return D(_().mark(function le(){var Be,L,k,N,ee;return _().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(JSON.stringify(Y.data)===JSON.stringify("[DONE]")){J.next=9;break}try{N=JSON.parse(Y.data)}catch{N={}}return J.next=4,(L=(Be=i.deepChat).responseInterceptor)==null?void 0:L.call(Be,N);case 4:if(J.t0=J.sent,J.t0){J.next=7;break}J.t0=N;case 7:ee=J.t0,(k=i.extractResultData)==null||k.call(i,ee,U,y).then(function(K){i.asyncCallInProgress&&K&&K.text!==""?(e.simulate(a,i.streamHandlers,K),C(),i.asyncCallInProgress=!1):e.upsertWFiles(a,O.upsertStreamedMessage.bind(O),O,K)}).catch(function(K){return we.displayError(a,K)});case 9:case"end":return J.stop()}},le)}))()},onerror:function(Y){throw C(),Y},onclose:function(){i.asyncCallInProgress||(O.finaliseStreamedMessage(),C())},signal:x.signal}).catch(function(z){var Y;a.isLastMessageError()||(Y=i.extractResultData)==null||Y.call(i,z).then(function(){we.displayError(a,z)}).catch(function(le){we.displayError(a,le)})});case 20:case"end":return q.stop()}},r,this)}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"simulate",value:function(n,r,i){var o=r;if((i.files||i.html)&&n.addNewMessage(Ne({sendUpdate:!1,ignoreText:!0},i),!1),i.text){r.onOpen();var a=i.text.split("");e.populateMessages(a,new qr(n),o)}}},{key:"populateMessages",value:function(n,r,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=n[o];if(a){r.upsertStreamedMessage({text:a});var s=setTimeout(function(){e.populateMessages(n,r,i,o+1)},i.simulationInterim||6);i.abortStream.abort=function(){e.abort(s,r,i.onClose)}}else r.finaliseStreamedMessage(),i.onClose()}},{key:"isSimulation",value:function(n){return fe(n)=="object"&&!!n.simulation}},{key:"isSimulatable",value:function(n,r){return e.isSimulation(n)&&r&&(r.text||r.html)}},{key:"abort",value:function(n,r,i){clearTimeout(n),r.finaliseStreamedMessage(),i()}},{key:"upsertWFiles",value:function(n,r,i,o){if(o!=null&&o.text||o!=null&&o.html){var a,s=r(o);(a=i)!==null&&a!==void 0||(i=s||void 0)}o!=null&&o.files&&(n.addNewMessage({files:o.files}),i==null||i.markFileAded())}}]),e}(),I1=function(){function e(){T(this,e)}return M(e,null,[{key:"generateResponse",value:function(n){var r=n.messages[n.messages.length-1];if(r.files&&r.files.length>0){if(r.files.length>1)return"These are interesting files!";var i=r.files[0];return i.src&&i.src.startsWith("data:image/gif")?"That is a nice gif!":i.type==="image"?"That is a nice image!":i.type==="audio"?"I like the sound of that!":"That is an interesting file!"}if(r.text){if(r.text.charAt(r.text.length-1)==="?")return"I'm sorry but I can't answer that question...";if(r.text.includes("updog"))return"What's updog?"}return"Hi there! This is a demo response!"}},{key:"getCustomResponse",value:function(n,r){return typeof n=="function"?n(r):n}},{key:"getResponse",value:function(n){return n.customDemoResponse?e.getCustomResponse(n.customDemoResponse,n.messages[n.messages.length-1]):{text:e.generateResponse(n)}}},{key:"request",value:function(n,r){var i=e.getResponse(r);setTimeout(D(_().mark(function o(){var a,s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(s=(a=n.deepChat).responseInterceptor)==null?void 0:s.call(a,i);case 2:if(u.t0=u.sent,u.t0){u.next=5;break}u.t0=i;case 5:l=u.t0,l.error?(r.addNewErrorMessage("service",l.error),n.completionsHandlers.onFinish()):St.isSimulatable(n.deepChat.stream,l)?St.simulate(r,n.streamHandlers,l):(r.addNewMessage(l),n.completionsHandlers.onFinish());case 7:case"end":return u.stop()}},o)})),400)}},{key:"requestStream",value:function(n,r){setTimeout(function(){var i=e.getResponse(n);St.simulate(n,r,i)},400)}}]),e}();I1.URL="deep-chat-demo";var fr=I1,Jo=function(){function e(){T(this,e)}return M(e,null,[{key:"setup",value:function(n){n.requestSettings.url!==fr.URL&&(n.permittedErrorPrefixes=["Connection error","Error in server message"],n.websocket="pending")}},{key:"createConnection",value:function(n,r){if(document.body.contains(n.deepChat)){var i=n.requestSettings.websocket;if(i){if(n.requestSettings.handler)return bf.websocket(n,r);try{var o=typeof i!="boolean"?i:void 0,a=new WebSocket(n.requestSettings.url||"",o);n.websocket=a,n.websocket.onopen=function(){var s,l;r.removeError(),n.websocket&&fe(n.websocket)=="object"&&e.assignListeners(n,a,r),(l=(s=n.deepChat)._validationHandler)==null||l.call(s)},n.websocket.onerror=function(s){console.error(s),e.retryConnection(n,r)}}catch(s){console.error(s),e.retryConnection(n,r)}}}}},{key:"retryConnection",value:function(n,r){var i,o;(o=(i=n.deepChat)._validationHandler)==null||o.call(i),document.body.contains(n.deepChat)&&(n.websocket="pending",r.isLastMessageError()||r.addNewErrorMessage("service","Connection error"),setTimeout(function(){e.createConnection(n,r)},5e3))}},{key:"assignListeners",value:function(n,r,i){var o=this,a={};r.onmessage=function(){var s=D(_().mark(function l(c){var u,d,f,h,p,m,y;return _().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!n.extractResultData){v.next=20;break}return v.prev=1,f=JSON.parse(c.data),v.next=5,(d=(u=n.deepChat).responseInterceptor)==null?void 0:d.call(u,f);case 5:if(v.t0=v.sent,v.t0){v.next=8;break}v.t0=f;case 8:return h=v.t0,v.next=11,n.extractResultData(h);case 11:if(p=v.sent,!(!p||fe(p)!="object")){v.next=14;break}throw Error(at.INVALID_RESPONSE(f,"server",!!n.deepChat.responseInterceptor,h));case 14:St.isSimulation(n.deepChat.stream)?(m=e.stream.bind(o,n,i,a),y=a[f.role||_e.AI_ROLE],St.upsertWFiles(i,m,y,p)):i.addNewMessage(p),v.next=20;break;case 17:v.prev=17,v.t1=v.catch(1),we.displayError(i,v.t1,"Error in server message");case 20:case"end":return v.stop()}},l,null,[[1,17]])}));return function(l){return s.apply(this,arguments)}}(),r.onclose=function(){console.error("Connection closed"),i.isLastMessageError()||i.addNewErrorMessage("service","Connection error"),n.deepChat.stream&&n.streamHandlers.abortStream.abort(),e.createConnection(n,i)}}},{key:"sendWebsocket",value:function(){var t=D(_().mark(function r(i,o,a){var s,l,c,u,d,f,h,p,m,y=arguments;return _().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(s=y.length>3&&y[3]!==void 0?y[3]:!0,u=i.websocket,!(!u||u==="pending")){v.next=4;break}return v.abrupt("return");case 4:return d={body:o,headers:(l=i.requestSettings)==null?void 0:l.headers},v.next=7,we.processRequestInterceptor(i.deepChat,d);case 7:if(f=v.sent,h=f.body,p=f.error,!p){v.next=12;break}return v.abrupt("return",a.addNewErrorMessage("service",p));case 12:if(e.isWebSocket(u)){v.next=14;break}return v.abrupt("return",u.newUserMessage.listener(h));case 14:if(m=s?JSON.stringify(h):h,((c=i.requestSettings)==null?void 0:c.url)!==fr.URL){v.next=17;break}return v.abrupt("return",fr.request(i,a));case 17:u.readyState===void 0||u.readyState!==u.OPEN?(console.error("Connection is not open"),a.isLastMessageError()||a.addNewErrorMessage("service","Connection error")):(u.send(JSON.stringify(m)),i.completionsHandlers.onFinish());case 18:case"end":return v.stop()}},r)}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"canSendMessage",value:function(n){return n?n==="pending"?!1:e.isWebSocket(n)?n.readyState!==void 0&&n.readyState===n.OPEN:n.isOpen:!0}},{key:"isWebSocket",value:function(n){return n.send!==void 0}},{key:"stream",value:function(n,r,i,o){if(o){var a=n.deepChat.stream.simulation;if(typeof a=="string"){var s,l=o.role||_e.AI_ROLE,c=i[l];o.text===a?(c==null||c.finaliseStreamedMessage(),delete i[l]):((s=i[l])!==null&&s!==void 0||(i[l]=new qr(r)),i[l].upsertStreamedMessage(o))}else St.simulate(r,n.streamHandlers,o)}}}]),e}(),bf=function(){function e(){T(this,e)}return M(e,null,[{key:"request",value:function(){var t=D(_().mark(function r(i,o,a){var s,l,c,u,d;return _().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:c=!0,u=function(){var p=D(_().mark(function m(y){var g,v,b;return _().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(c){C.next=2;break}return C.abrupt("return");case 2:return c=!1,C.next=5,(v=(g=i.deepChat).responseInterceptor)==null?void 0:v.call(g,y);case 5:if(C.t0=C.sent,C.t0){C.next=8;break}C.t0=y;case 8:b=C.t0,we.validateResponseFormat(b)?typeof b.error=="string"?(console.error(b.error),a.addNewErrorMessage("service",b.error),i.completionsHandlers.onFinish()):St.isSimulatable(i.deepChat.stream,b)?St.simulate(a,i.streamHandlers,b):(a.addNewMessage(b),i.completionsHandlers.onFinish()):(console.error(at.INVALID_RESPONSE(y,"server",!!i.deepChat.responseInterceptor,b)),a.addNewErrorMessage("service","Error in server message"),i.completionsHandlers.onFinish());case 10:case"end":return C.stop()}},m)}));return function(y){return p.apply(this,arguments)}}(),d=e.generateOptionalSignals(),(l=(s=i.requestSettings).handler)==null||l.call(s,o,Ne(Ne({},d),{},{onResponse:u}));case 3:case"end":return h.stop()}},r)}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"attemptToFinaliseStream",value:function(n,r){try{n.finaliseStreamedMessage()}catch(i){console.error(i),r.addNewErrorMessage("service",i)}}},{key:"stream",value:function(n,r,i){var o,a,s=!0,l=!1,c=new qr(i),u=function(){l||!s||(n.streamHandlers.onOpen(),l=!0)},d=function(){s&&(e.attemptToFinaliseStream(c,i),n.streamHandlers.onClose(),s=!1)},f=function(){var p=D(_().mark(function m(y){var g,v,b;return _().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(s){C.next=2;break}return C.abrupt("return");case 2:return C.next=4,(v=(g=n.deepChat).responseInterceptor)==null?void 0:v.call(g,y);case 4:if(C.t0=C.sent,C.t0){C.next=7;break}C.t0=y;case 7:b=C.t0,we.validateResponseFormat(b)?b.error?(console.error(b.error),c.finaliseStreamedMessage(),i.addNewErrorMessage("service",b.error),n.streamHandlers.onClose(),s=!1):St.upsertWFiles(i,c.upsertStreamedMessage.bind(c),c,b):console.error(at.INVALID_RESPONSE(y,"server",!!n.deepChat.responseInterceptor,b));case 9:case"end":return C.stop()}},m)}));return function(y){return p.apply(this,arguments)}}();n.streamHandlers.abortStream.abort=function(){e.attemptToFinaliseStream(c,i),n.streamHandlers.onClose(),s=!1};var h=e.generateOptionalSignals();(a=(o=n.requestSettings).handler)==null||a.call(o,r,Ne(Ne({},h),{},{onOpen:u,onResponse:f,onClose:d,stopClicked:n.streamHandlers.stopClicked}))}},{key:"websocket",value:function(n,r){var i=this,o,a,s={isOpen:!1,newUserMessage:{listener:function(){}},roleToStream:{}};n.websocket=s;var l=function(){r.removeError(),s.isOpen=!0},c=function(){s.isOpen=!1},u=function(){var f=D(_().mark(function h(p){var m,y,g,v,b;return _().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(s.isOpen){C.next=2;break}return C.abrupt("return");case 2:return C.next=4,(y=(m=n.deepChat).responseInterceptor)==null?void 0:y.call(m,p);case 4:if(C.t0=C.sent,C.t0){C.next=7;break}C.t0=p;case 7:g=C.t0,we.validateResponseFormat(g)?typeof g.error=="string"?(console.error(g.error),r.isLastMessageError()||r.addNewErrorMessage("service",g.error)):St.isSimulation(n.deepChat.stream)?(v=Jo.stream.bind(i,n,r,s.roleToStream),b=s.roleToStream[p.role||_e.AI_ROLE],St.upsertWFiles(r,v,b,p)):r.addNewMessage(g):(console.error(at.INVALID_RESPONSE(p,"server",!!n.deepChat.responseInterceptor,g)),r.addNewErrorMessage("service","Error in server message"));case 9:case"end":return C.stop()}},h)}));return function(p){return f.apply(this,arguments)}}(),d=e.generateOptionalSignals();(a=(o=n.requestSettings).handler)==null||a.call(o,void 0,Ne(Ne({},d),{},{onOpen:l,onResponse:u,onClose:c,newUserMessage:s.newUserMessage}))}},{key:"generateOptionalSignals",value:function(){return{onClose:function(){},onOpen:function(){},stopClicked:{listener:function(){}},newUserMessage:{listener:function(){}}}}}]),e}(),et=function(){function e(){T(this,e)}return M(e,null,[{key:"request",value:function(){var t=D(_().mark(function r(i,o,a){var s,l,c,u,d,f,h,p,m,y,g,v,b=arguments;return _().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return s=b.length>3&&b[3]!==void 0?b[3]:!0,d={body:o,headers:(l=i.requestSettings)==null?void 0:l.headers},C.next=4,we.processRequestInterceptor(i.deepChat,d);case 4:if(f=C.sent,h=f.body,p=f.headers,m=f.error,y=i.completionsHandlers.onFinish,!m){C.next=11;break}return C.abrupt("return",we.onInterceptorError(a,m,y));case 11:if(!((c=i.requestSettings)!=null&&c.handler)){C.next=13;break}return C.abrupt("return",bf.request(i,h,a));case 13:if(((u=i.requestSettings)==null?void 0:u.url)!==fr.URL){C.next=15;break}return C.abrupt("return",fr.request(i,a));case 15:g=!0,v=we.fetch.bind(this,i,p,s),v(h).then(function(x){return g=!!x.ok,x}).then(function(x){return we.processResponseByType(x)}).then(function(){var x=D(_().mark(function O(U){var H,G,q,z;return _().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(i.extractResultData){le.next=2;break}return le.abrupt("return");case 2:return le.next=4,(G=(H=i.deepChat).responseInterceptor)==null?void 0:G.call(H,U);case 4:if(le.t0=le.sent,le.t0){le.next=7;break}le.t0=U;case 7:return q=le.t0,le.next=10,i.extractResultData(q,v,h);case 10:if(z=le.sent,g){le.next=13;break}throw U;case 13:if(!(!z||fe(z)!="object")){le.next=15;break}throw Error(at.INVALID_RESPONSE(U,"response",!!i.deepChat.responseInterceptor,q));case 15:z.makingAnotherRequest||(St.isSimulatable(i.deepChat.stream,z)?St.simulate(a,i.streamHandlers,z):(a.addNewMessage(z),y()));case 16:case"end":return le.stop()}},O)}));return function(O){return x.apply(this,arguments)}}()).catch(function(x){we.displayError(a,x),y()});case 18:case"end":return C.stop()}},r,this)}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"executePollRequest",value:function(n,r,i,o){var a=n.completionsHandlers.onFinish;fetch(r,i).then(function(s){return s.json()}).then(function(){var s=D(_().mark(function l(c){var u,d,f;return _().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(n.extractPollResultData){p.next=2;break}return p.abrupt("return");case 2:return p.t0=n,p.next=5,(d=(u=n.deepChat).responseInterceptor)==null?void 0:d.call(u,c);case 5:if(p.t1=p.sent,p.t1){p.next=8;break}p.t1=c;case 8:return p.t2=p.t1,p.next=11,p.t0.extractPollResultData.call(p.t0,p.t2);case 11:f=p.sent,f.timeoutMS?setTimeout(function(){e.executePollRequest(n,r,i,o)},f.timeoutMS):St.isSimulatable(n.deepChat.stream,c)?St.simulate(o,n.streamHandlers,f):(o.addNewMessage(f),a());case 13:case"end":return p.stop()}},l)}));return function(l){return s.apply(this,arguments)}}()).catch(function(s){we.displayError(o,s),a()})}},{key:"poll",value:function(){var t=D(_().mark(function r(i,o,a){var s,l,c,u,d,f,h,p,m,y,g,v,b,E=arguments;return _().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return s=E.length>3&&E[3]!==void 0?E[3]:!0,d={body:o,headers:(l=i.requestSettings)==null?void 0:l.headers},x.next=4,we.processRequestInterceptor(i.deepChat,d);case 4:if(f=x.sent,h=f.body,p=f.headers,m=f.error,!m){x.next=10;break}return x.abrupt("return",we.onInterceptorError(a,m));case 10:y=((c=i.requestSettings)==null?void 0:c.url)||i.url||"",g=((u=i.requestSettings)==null?void 0:u.method)||"POST",v=s?JSON.stringify(h):h,b={method:g,body:v,headers:p},i.requestSettings.credentials&&(b.credentials=i.requestSettings.credentials),e.executePollRequest(i,y,b,a);case 12:case"end":return x.stop()}},r)}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"verifyKey",value:function(n,r,i,o,a,s,l,c,u){if(n==="")return s(at.INVALID_KEY);l(),fetch(r,{method:o,headers:i,body:u||null}).then(function(d){return we.processResponseByType(d)}).then(function(d){c(d,n,a,s)}).catch(function(d){s(at.CONNECTION_FAILED),console.error(d)})}}]),e}(),_f=function(){function e(){T(this,e)}return M(e,null,[{key:"getCharacterLimitMessages",value:function(n,r){var i;if(r===-1)return n;var o=0,a=n.length-1;for(a;a>=0;a-=1){var s=(i=n[a])==null?void 0:i.text;if(s!==void 0&&(o+=s.length,o>r)){n[a].text=s.substring(0,s.length-(o-r));break}}return n.slice(Math.max(a,0))}},{key:"getMaxMessages",value:function(n,r){return n.slice(Math.max(n.length-r,0))}},{key:"processMessages",value:function(n,r,i){return r!==void 0?r>0&&(n=e.getMaxMessages(n,r)):n=[n[n.length-1]],n=JSON.parse(JSON.stringify(n)),i===void 0?n:e.getCharacterLimitMessages(n,i)}}]),e}(),NF=function(){function e(){T(this,e)}return M(e,null,[{key:"parseConfig",value:function(n,r,i,o){var a,s={files:r};if(fe(o)=="object"){var l=o.files,c=o.request,u=o.button;l&&(l.infoModal&&(s.files.infoModal=l.infoModal,(a=l.infoModal)!=null&&a.textMarkDown&&(s.infoModalTextMarkUp=i.render(l.infoModal.textMarkDown))),l.acceptedFormats&&(s.files.acceptedFormats=l.acceptedFormats),l.maxNumberOfFiles&&(s.files.maxNumberOfFiles=l.maxNumberOfFiles)),s.button=u,c&&(c.headers||c.method||c.url||c.credentials||n.headers||n.method||n.url||n.credentials)&&(s.request={url:(c==null?void 0:c.url)||n.url,method:(c==null?void 0:c.method)||n.method,headers:(c==null?void 0:c.headers)||n.headers,credentials:(c==null?void 0:c.credentials)||n.credentials})}return s}},{key:"processMixedFiles",value:function(n,r,i){if(i){var o={acceptedFormats:""};n.fileTypes.mixedFiles=e.parseConfig(n.requestSettings,o,r,i)}}},{key:"processMicrophone",value:function(n,r,i,o){var a,s,l,c,u,d,f,h,p=Ne({acceptedFormats:"audio/*"},((l=n.fileTypes.audio)==null?void 0:l.files)||{});i&&(navigator.mediaDevices.getUserMedia!==void 0?(n.recordAudio=e.parseConfig(n.requestSettings,p,r,i),fe(i)=="object"&&i.files&&((a=(c=n.recordAudio).files)!==null&&a!==void 0||(c.files={}),n.recordAudio.files.format=(u=i.files)==null?void 0:u.format,n.recordAudio.files.maxDurationSeconds=(d=i.files)==null?void 0:d.maxDurationSeconds,(f=n.fileTypes.audio)!=null&&f.files&&((s=(h=n.fileTypes.audio.files).maxNumberOfFiles)!==null&&s!==void 0||(h.maxNumberOfFiles=i.files.maxNumberOfFiles)))):o||(n.fileTypes.audio=e.parseConfig(n.requestSettings,p,r,i)))}},{key:"processAudioConfig",value:function(n,r,i,o){if(!(!i&&!o)){var a=Ne({acceptedFormats:"audio/*"},(o==null?void 0:o.files)||{});n.fileTypes.audio=e.parseConfig(n.requestSettings,a,r,i)}}},{key:"processGifConfig",value:function(n,r,i,o){if(!(!i&&!o)){var a=Ne({acceptedFormats:"image/gif"},(o==null?void 0:o.files)||{});n.fileTypes.gifs=e.parseConfig(n.requestSettings,a,r,i)}}},{key:"processCamera",value:function(n,r,i,o){var a,s,l,c,u,d=Ne({acceptedFormats:"image/*"},((s=n.fileTypes.images)==null?void 0:s.files)||{});i&&(navigator.mediaDevices.getUserMedia!==void 0?(n.camera=e.parseConfig(n.requestSettings,d,r,i),fe(i)=="object"&&(n.camera.modalContainerStyle=i.modalContainerStyle,i.files&&((a=(l=n.camera).files)!==null&&a!==void 0||(l.files={}),n.camera.files.format=(c=i.files)==null?void 0:c.format,n.camera.files.dimensions=(u=i.files)==null?void 0:u.dimensions))):o||(n.fileTypes.images=e.parseConfig(n.requestSettings,d,r,i)))}},{key:"processImagesConfig",value:function(n,r,i,o){if(!(!i&&!o)){var a=Ne({acceptedFormats:"image/*"},(o==null?void 0:o.files)||{});n.fileTypes.images=e.parseConfig(n.requestSettings,a,r,i)}}},{key:"populateDefaultFileIO",value:function(n,r){var i,o,a,s,l;n&&((i=n.files)!==null&&i!==void 0||(n.files={}),(o=(s=n.files).acceptedFormats)!==null&&o!==void 0||(s.acceptedFormats=r),(a=(l=n.files).maxNumberOfFiles)!==null&&a!==void 0||(l.maxNumberOfFiles=1))}},{key:"set",value:function(n,r,i){e.populateDefaultFileIO(i==null?void 0:i.audio,".4a,.mp3,.webm,.mp4,.mpga,.wav,.mpeg,.m4a"),e.populateDefaultFileIO(i==null?void 0:i.images,".png,.jpg");var o=$u.createNew();e.processImagesConfig(r,o,n.images,i==null?void 0:i.images),e.processCamera(r,o,n.camera,n.images),e.processGifConfig(r,o,n.gifs,i==null?void 0:i.gifs),e.processAudioConfig(r,o,n.audio,i==null?void 0:i.audio),e.processMicrophone(r,o,n.microphone,n.audio),e.processMixedFiles(r,o,n.mixedFiles)}}]),e}(),js=function(){function e(t,n,r){var i;T(this,e);var o,a,s,l;this.rawBody={},this.validateConfigKey=!1,this.canSendMessage=e.canSendMessage,this.requestSettings={},this.fileTypes={},this.completionsHandlers={},this.streamHandlers={},this.deepChat=t,this.demo=r,Object.assign(this.rawBody,(o=t.request)==null?void 0:o.additionalBodyProps),this.totalMessagesMaxCharLength=(a=t==null?void 0:t.requestBodyLimits)==null?void 0:a.totalMessagesMaxCharLength,this.maxMessages=(s=t==null?void 0:t.requestBodyLimits)==null?void 0:s.maxMessages,NF.set(t,this,n),t.request&&(this.requestSettings=t.request),this.demo&&((i=(l=this.requestSettings).url)!==null&&i!==void 0||(l.url=fr.URL)),this.requestSettings.websocket&&Jo.setup(this)}return M(e,[{key:"verifyKey",value:function(n,r){}},{key:"getServiceIOByType",value:function(n){if(n.type.startsWith("audio")&&this.fileTypes.audio)return this.fileTypes.audio;if(n.type.startsWith("image")){if(this.fileTypes.gifs&&n.type.endsWith("/gif"))return this.fileTypes.gifs;if(this.fileTypes.images)return this.fileTypes.images;if(this.camera)return this.camera}return this.fileTypes.mixedFiles}},{key:"request",value:function(){var t=D(_().mark(function r(i,o){var a,s,l=arguments;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=l.length>2&&l[2]!==void 0?l[2]:!0,s=this.deepChat.stream,u.abrupt("return",s&&!St.isSimulation(s)?St.request(this,i,o):et.request(this,i,o,a));case 3:case"end":return u.stop()}},r,this)}));function n(r,i){return t.apply(this,arguments)}return n}()},{key:"callAPIWithText",value:function(){var t=D(_().mark(function r(i,o){var a,s,l,c,u,d,f,h;return _().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return f=Ne({messages:o},this.rawBody),h=!1,(l=this.requestSettings.headers)!=null&&l["Content-Type"]||((a=(c=this.requestSettings).headers)!==null&&a!==void 0||(c.headers={}),(s=(u=this.requestSettings.headers)["Content-Type"])!==null&&s!==void 0||(u["Content-Type"]="application/json"),h=!0),m.next=5,this.request(f,i);case 5:h&&((d=this.requestSettings.headers)==null||delete d["Content-Type"]);case 6:case"end":return m.stop()}},r,this)}));function n(r,i){return t.apply(this,arguments)}return n}()},{key:"callApiWithFiles",value:function(){var t=D(_().mark(function r(i,o,a){var s,l,c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=e.createCustomFormDataBody(this.rawBody,o,a),l=this.requestSettings,c=this.getServiceIOByType(a[0]),this.requestSettings=(c==null?void 0:c.request)||this.requestSettings,d.next=4,this.request(s,i,!1);case 4:this.requestSettings=l;case 5:case"end":return d.stop()}},r,this)}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"callServiceAPI",value:function(){var t=D(_().mark(function r(i,o,a){return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a?this.callApiWithFiles(i,o,a):this.callAPIWithText(i,o);case 1:case"end":return l.stop()}},r,this)}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"callAPI",value:function(){var t=D(_().mark(function r(i,o){var a,s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.requestSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:a=_f.processMessages(o.messages,this.maxMessages,this.totalMessagesMaxCharLength),this.requestSettings.websocket?(s=Ne({messages:a},this.rawBody),Jo.sendWebsocket(this,s,o,!1)):this.callServiceAPI(o,a,i.files);case 4:case"end":return c.stop()}},r,this)}));function n(r,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=D(_().mark(function r(i){return _().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!i.error){a.next=2;break}throw i.error;case 2:if(!i.result){a.next=4;break}return a.abrupt("return",$r.handleResponseProperty(i));case 4:if(!we.validateResponseFormat(i)){a.next=6;break}return a.abrupt("return",i);case 6:case"end":return a.stop()}},r)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"isDirectConnection",value:function(){return!1}},{key:"isWebModel",value:function(){return!1}}],[{key:"canSendMessage",value:function(n,r,i){return i?!0:!!(n&&n.trim()!=="")||!!(r&&r.length>0)}},{key:"createCustomFormDataBody",value:function(n,r,i){var o=new FormData;i.forEach(function(l){return o.append("files",l)}),Object.keys(n).forEach(function(l){return o.append(l,String(n[l]))});var a=0;r.slice(0,r.length-1).forEach(function(l){o.append("message".concat(a+=1),JSON.stringify(l))});var s=r[r.length-1];return s.text&&(delete s.files,o.append("message".concat(a+=1),JSON.stringify(s))),o}}]),e}(),$t=function(e){pe(t,e);function t(n,r,i,o,a){var s;T(this,t);var l;return s=he(this,t,[n,a]),s.insertKeyPlaceholderText="API Key",s.keyHelpUrl="",Object.assign(s.rawBody,(l=n.request)==null?void 0:l.additionalBodyProps),s.keyVerificationDetails=r,s.buildHeadersFunc=i,o&&s.setApiKeyProperties(o),s.requestSettings=s.buildRequestSettings(s.key||"",n.request),s}return M(t,[{key:"setApiKeyProperties",value:function(r){this.key=r.key,r.validateKeyProperty&&(this.validateConfigKey=r.validateKeyProperty)}},{key:"buildRequestSettings",value:function(r,i){var o,a=i??{};return(o=a.headers)!==null&&o!==void 0||(a.headers={}),Object.assign(a.headers,this.buildHeadersFunc(r)),a}},{key:"keyAuthenticated",value:function(r,i){this.requestSettings=this.buildRequestSettings(i,this.requestSettings),this.key=i,r()}},{key:"verifyKey",value:function(r,i){var o=this.keyVerificationDetails,a=o.url,s=o.method,l=o.handleVerificationResult,c=o.createHeaders,u=o.body,d=(c==null?void 0:c(r))||this.buildHeadersFunc(r);et.verifyKey(r,a,d,s,this.keyAuthenticated.bind(this,i.onSuccess),i.onFail,i.onLoad,l,u)}},{key:"isDirectConnection",value:function(){return!0}}]),t}(js),OF=function(){function e(){T(this,e)}return M(e,null,[{key:"waitForPropertiesToBeUpdatedBeforeRender",value:function(n){n._propUpdated_=!1,setTimeout(function(){n._propUpdated_?e.waitForPropertiesToBeUpdatedBeforeRender(n):(n._waitingToRender_=!1,n.onRender())})}},{key:"attemptRender",value:function(n){n._propUpdated_=!0,n._waitingToRender_||(n._waitingToRender_=!0,e.waitForPropertiesToBeUpdatedBeforeRender(n))}}]),e}(),Sf=function(e){pe(t,e);function t(){var n;return T(this,t),n=he(this,t),n._waitingToRender_=!1,n._propUpdated_=!1,Object.keys(t._attributeToProperty_).forEach(function(r){var i=t._attributeToProperty_[r];n.constructPropertyAccessors(i),n.hasOwnProperty(r)||n.constructPropertyAccessors(i,r)}),n}return M(t,[{key:"constructPropertyAccessors",value:function(r,i){var o;Object.defineProperty(this,i||r,{get:function(){return o},set:function(s){o=s,i?this[r]=s:OF.attemptRender(this)}})}},{key:"attributeChangedCallback",value:function(r,i,o){if(i!==o){var a=t._attributes_[r](o),s=t._attributeToProperty_[r];this[s]=a}}},{key:"onRender",value:function(){}}],[{key:"observedAttributes",get:function(){return Object.keys(t._attributes_)||[]}}]),t}(Du(HTMLElement));Sf._attributes_={};Sf._attributeToProperty_={};var LF=Sf,DF=`<?xml version="1.0" standalone="no"?>
<svg version="1.1"
	xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
	xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0.9em" height="0.9em"
	viewBox="0 0 1200 1200" enable-background="new 0 0 1200 1200">
		<path d="
			M669.727,273.516c-22.891-2.476-46.15-3.895-69.727-4.248c-103.025,0.457-209.823,25.517-310.913,73.536
			c-75.058,37.122-148.173,89.529-211.67,154.174C46.232,529.978,6.431,577.76,0,628.74c0.76,44.162,48.153,98.67,77.417,131.764
			c59.543,62.106,130.754,113.013,211.67,154.174c2.75,1.335,5.51,2.654,8.276,3.955l-75.072,131.102l102.005,60.286l551.416-960.033
			l-98.186-60.008L669.727,273.516z M902.563,338.995l-74.927,129.857c34.47,44.782,54.932,100.006,54.932,159.888
			c0,149.257-126.522,270.264-282.642,270.264c-6.749,0-13.29-0.728-19.922-1.172l-49.585,85.84c22.868,2.449,45.99,4.233,69.58,4.541
			c103.123-0.463,209.861-25.812,310.84-73.535c75.058-37.122,148.246-89.529,211.743-154.174
			c31.186-32.999,70.985-80.782,77.417-131.764c-0.76-44.161-48.153-98.669-77.417-131.763
			c-59.543-62.106-130.827-113.013-211.743-154.175C908.108,341.478,905.312,340.287,902.563,338.995L902.563,338.995z
			M599.927,358.478c6.846,0,13.638,0.274,20.361,0.732l-58.081,100.561c-81.514,16.526-142.676,85.88-142.676,168.897
			c0,20.854,3.841,40.819,10.913,59.325c0.008,0.021-0.008,0.053,0,0.074l-58.228,100.854
			c-34.551-44.823-54.932-100.229-54.932-160.182C317.285,479.484,443.808,358.477,599.927,358.478L599.927,358.478z M768.896,570.513
			L638.013,797.271c81.076-16.837,141.797-85.875,141.797-168.603C779.81,608.194,775.724,588.729,768.896,570.513L768.896,570.513z"
			/>
</svg>
`,UF=`<?xml version="1.0" standalone="no"?>
<svg version="1.1"
	xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
	xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0.9em" height="0.9em"
	viewBox="0 0 1200 1200" enable-background="new 0 0 1200 1200">
		<path id="path6686" inkscape:connector-curvature="0" d="M779.843,599.925c0,95.331-80.664,172.612-180.169,172.612
			c-99.504,0-180.168-77.281-180.168-172.612c0-95.332,80.664-172.612,180.168-172.612
			C699.179,427.312,779.843,504.594,779.843,599.925z M600,240.521c-103.025,0.457-209.814,25.538-310.904,73.557
			c-75.058,37.122-148.206,89.496-211.702,154.141C46.208,501.218,6.431,549,0,599.981c0.76,44.161,48.13,98.669,77.394,131.763
			c59.543,62.106,130.786,113.018,211.702,154.179c94.271,45.751,198.616,72.092,310.904,73.557
			c103.123-0.464,209.888-25.834,310.866-73.557c75.058-37.122,148.243-89.534,211.74-154.179
			c31.185-32.999,70.962-80.782,77.394-131.763c-0.76-44.161-48.13-98.671-77.394-131.764
			c-59.543-62.106-130.824-112.979-211.74-154.141C816.644,268.36,712.042,242.2,600,240.521z M599.924,329.769
			c156.119,0,282.675,120.994,282.675,270.251c0,149.256-126.556,270.25-282.675,270.25S317.249,749.275,317.249,600.02
			C317.249,450.763,443.805,329.769,599.924,329.769L599.924,329.769z"/>
</svg>
`,tn=function(){function e(){T(this,e)}return M(e,null,[{key:"createSVGElement",value:function(n){return new DOMParser().parseFromString(n,"image/svg+xml").documentElement}}]),e}(),x1=function(){function e(){T(this,e)}return M(e,null,[{key:"changeVisibility",value:function(n,r,i,o){o.target.id===e.VISIBLE_ICON_ID?(r.style.display="none",i.style.display="block",n.type="password"):(r.style.display="block",i.style.display="none",n.type="text")}},{key:"createIconElement",value:function(n,r){var i=tn.createSVGElement(n);return i.id=r,i.classList.add("visibility-icon"),i}},{key:"create",value:function(n){var r=document.createElement("div");r.id="visibility-icon-container";var i=e.createIconElement(UF,e.VISIBLE_ICON_ID);i.style.display="none",r.appendChild(i);var o=e.createIconElement(DF,"not-visible-icon");return r.appendChild(o),r.onclick=e.changeVisibility.bind(this,n,i,o),r}}]),e}();x1.VISIBLE_ICON_ID="visible-icon";var FF=x1,BF=function(){function e(){T(this,e)}return M(e,null,[{key:"createCautionText",value:function(){var n=document.createElement("a");return n.classList.add("insert-key-input-help-text"),n.innerText="Please exercise CAUTION when inserting your API key outside of deepchat.dev or localhost!!",n}},{key:"createHelpLink",value:function(n){var r=document.createElement("a");return r.classList.add("insert-key-input-help-text"),r.href=n,r.innerText="Find more info here",r.target="_blank",r}},{key:"createFailText",value:function(){var n=document.createElement("div");return n.id="insert-key-input-invalid-text",n.style.display="none",n}},{key:"createHelpTextContainer",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=document.createElement("div");i.id="insert-key-help-text-container";var o=document.createElement("div");o.id="insert-key-help-text-contents";var a=e.createFailText();if(o.appendChild(a),n){var s=e.createHelpLink(n);o.appendChild(s)}if(r===!0){var l=e.createCautionText();o.appendChild(l)}return i.appendChild(o),{helpTextContainerElement:i,failTextElement:a}}},{key:"onFail",value:function(n,r,i,o){n.classList.replace("insert-key-input-valid","insert-key-input-invalid"),i.innerText=o,i.style.display="block",r.innerText="Start",n.classList.remove("loading")}},{key:"onLoad",value:function(n,r){n.classList.add("loading"),r.innerHTML='<div id="loading-ring"></div>'}},{key:"verifyKey",value:function(n,r,i){var o=n.value.trim();i.verifyKey(o,r)}},{key:"addVerificationEvents",value:function(n,r,i,o,a){var s={onSuccess:o,onFail:e.onFail.bind(this,n,r,i),onLoad:e.onLoad.bind(this,n,r)},l=e.verifyKey.bind(this,n,s,a);r.onclick=l,n.onkeydown=function(c){!n.classList.contains("loading")&&c.key===_t.ENTER&&l()}}},{key:"createStartButton",value:function(){var n=document.createElement("div");return n.id="start-button",n.innerText="Start",n}},{key:"onInputFocus",value:function(n){n.target.classList.replace("insert-key-input-invalid","insert-key-input-valid")}},{key:"createInput",value:function(n){var r=document.createElement("div");r.id="insert-key-input-container";var i=document.createElement("input");return i.id="insert-key-input",i.placeholder=n||"API Key",i.type="password",i.classList.add("insert-key-input-valid"),i.onfocus=e.onInputFocus,r.appendChild(i),r}},{key:"createContents",value:function(n,r){var i,o=document.createElement("div");o.id="insert-key-contents";var a=e.createInput(r.insertKeyPlaceholderText),s=a.children[0],l=FF.create(s);a.appendChild(l),o.appendChild(a);var c=e.createStartButton(),u=e.createHelpTextContainer(r.keyHelpUrl,(i=r.deepChat._insertKeyViewStyles)==null?void 0:i.displayCautionText),d=u.helpTextContainerElement,f=u.failTextElement;return o.appendChild(c),o.appendChild(d),e.addVerificationEvents(s,c,f,n,r),o}},{key:"createElements",value:function(n,r){var i=document.createElement("div");i.id="insert-key-view";var o=e.createContents(n,r);return i.appendChild(o),i}},{key:"render",value:function(n,r,i){var o=e.createElements(r,i);n.replaceChildren(o)}}]),e}(),da=function(){function e(){T(this,e)}return M(e,null,[{key:"enableButtons",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;window.webLLM?(n&&(n.disabled=!1),r&&(r.disabled=!1)):i<wf.MODULE_SEARCH_LIMIT_S*4&&setTimeout(function(){return e.enableButtons(n,r,i+1)},250)}},{key:"setUpInitial",value:function(n,r,i,o){var a=(r==null?void 0:r.downloadClass)||e.DOWNLOAD_BUTTON_CLASS,s=(r==null?void 0:r.uploadClass)||e.UPLOAD_BUTTON_CLASS,l=(r==null?void 0:r.fileInputClass)||e.FILE_INPUT_CLASS;return setTimeout(function(){var c=i==null?void 0:i.getElementsByClassName(a)[0],u=i==null?void 0:i.getElementsByClassName(l)[0],d=i==null?void 0:i.getElementsByClassName(s)[0];c&&(c.onclick=function(){return n()}),u&&(u.onchange=function(){u.files&&u.files.length>0&&n(u.files)}),d&&(d.onclick=function(){return u.click()}),(c||d)&&e.enableButtons(c,d)}),(r==null?void 0:r.initialHtml)||`<div>
        Download or upload a web model that will run entirely on your browser: <br/> 
        <button disabled class="`.concat(a,` deep-chat-button deep-chat-web-model-button">Download</button>
        `).concat(o?"":'<input type="file" class="'.concat(l,`" hidden multiple />
          <button disabled class="`).concat(s,' deep-chat-button deep-chat-web-model-button">Upload</button>'),`
      </div>`)}},{key:"exportFile",value:function(n){for(var r=document.createElement("a"),i=4,o=function(l){setTimeout(function(){for(var c=l*i,u=c;u<Math.min(c+i,n.length);u+=1){var d=URL.createObjectURL(n[u]);r.href=d,r.download=n[u].name,document.body.appendChild(r),r.click(),URL.revokeObjectURL(d)}},500*l)},a=0;a<n.length/i;a+=1)o(a)}},{key:"setUpAfterLoad",value:function(n,r,i,o){var a=(r==null?void 0:r.exportFilesClass)||e.EXPORT_BUTTON_CLASS;return setTimeout(function(){var s=i==null?void 0:i.getElementsByClassName(a)[0];s&&(s.onclick=function(){return e.exportFile(n)})}),(r==null?void 0:r.afterLoadHtml)||`<div>
        Model loaded successfully and has been cached for future requests.
        `.concat(o?"":'<br/> <button style="margin-top: 5px" class="'.concat(a,' deep-chat-button">Export</button>'),`
      </div>`)}}]),e}();da.DOWNLOAD_BUTTON_CLASS="deep-chat-download-button";da.UPLOAD_BUTTON_CLASS="deep-chat-upload-button";da.FILE_INPUT_CLASS="deep-chat-file-input";da.EXPORT_BUTTON_CLASS="deep-chat-export-button";var Fm=da,Bm={model_list:[{model_url:"https://huggingface.co/mlc-ai/Llama-2-7b-chat-hf-q4f32_1-MLC/resolve/main/",local_id:"Llama-2-7b-chat-hf-q4f32_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-7b-chat-hf/Llama-2-7b-chat-hf-q4f32_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:9109.03,low_resource_required:!1},{model_url:"https://huggingface.co/mlc-ai/Llama-2-7b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-7b-chat-hf-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-7b-chat-hf/Llama-2-7b-chat-hf-q4f16_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:6749.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Llama-2-7b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-7b-chat-hf-q4f16_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-7b-chat-hf/Llama-2-7b-chat-hf-q4f16_1-ctx1k-webgpu.wasm",vram_required_MB:4618.52,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Llama-2-13b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-13b-chat-hf-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-13b-chat-hf/Llama-2-13b-chat-hf-q4f16_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:11814.09,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Llama-2-70b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-70b-chat-hf-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-70b-chat-hf/Llama-2-70b-chat-hf-q4f16_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:43729.05,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f16_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f16_1-ctx2k-webgpu.wasm",vram_required_MB:2972.09,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f32_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f32_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f32_1-ctx2k-webgpu.wasm",vram_required_MB:3928.09,low_resource_required:!1},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f16_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f16_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f16_1-ctx1k-webgpu.wasm",vram_required_MB:2041.09,low_resource_required:!0,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f32_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f32_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f32_1-ctx1k-webgpu.wasm",vram_required_MB:2558.09,low_resource_required:!0},{model_url:"https://huggingface.co/mlc-ai/WizardMath-7B-V1.1-q4f16_1-MLC/resolve/main/",local_id:"WizardMath-7B-V1.1-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Mistral-7B-Instruct-v0.2-q4f16_1-MLC/resolve/main/",local_id:"Mistral-7B-Instruct-v0.2-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/OpenHermes-2.5-Mistral-7B-q4f16_1-MLC/resolve/main/",local_id:"OpenHermes-2.5-Mistral-7B-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/NeuralHermes-2.5-Mistral-7B-q4f16_1-MLC/resolve/main/",local_id:"NeuralHermes-2.5-Mistral-7B-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q0f16-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q0f16",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q0f16-ctx2k-webgpu.wasm",vram_required_MB:5063.52,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q0f32-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q0f32",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q0f32-ctx2k-webgpu.wasm",vram_required_MB:5394.53,low_resource_required:!1},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q4f16_1-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q4f16_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q4f16_1-ctx1k-webgpu.wasm",vram_required_MB:899.11,low_resource_required:!0,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q4f32_1-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q4f32_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q4f32_1-ctx1k-webgpu.wasm",vram_required_MB:992.11,low_resource_required:!0}],use_web_worker:!0},Yi=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o;return r=he(this,t,[n]),r._isModelLoaded=!1,r._isModelLoading=!1,r._loadOnFirstMessage=!1,r._webModel={},r.permittedErrorPrefixes=[t.MULTIPLE_MODELS_ERROR,t.WEB_LLM_NOT_FOUND_ERROR,t.GENERIC_ERROR],r._conversationHistory=[],fe(n.webModel)=="object"&&(r._webModel=n.webModel),(i=r._webModel.load)!=null&&i.clearCache&&t.clearAllCache(),r.findModelInWindow(n),r.canSendMessage=r.canSubmit.bind(Qt(r)),r._chatEl=(o=n.shadowRoot)==null?void 0:o.children[0],n.initialMessages&&t.setUpHistory(r._conversationHistory,n.initialMessages),r}return M(t,[{key:"setUpMessages",value:function(r){var i=this;this._messages=r,this._removeIntro=function(){r.removeIntroductoryMessage(),i._removeIntro=void 0}}},{key:"findModelInWindow",value:function(r){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a;window.webLLM?this.configureInit(this.shouldAddInitialMessage(r.introMessage)):o>t.MODULE_SEARCH_LIMIT_S?((a=this._messages)==null||a.addNewErrorMessage("service",t.WEB_LLM_NOT_FOUND_ERROR),console.error("The deep-chat-web-llm module has not been attached to the window object. Please see the following guide:"),console.error("https://deepchat.dev/examples/externalModules")):setTimeout(function(){return i.findModelInWindow(r,o+1)},1e3)}},{key:"shouldAddInitialMessage",value:function(r){var i;return!r&&this._webModel&&((i=this._webModel.introMessage)==null?void 0:i.displayed)!==!1}},{key:"scrollToTop",value:function(r){var i=this,o;((o=this._webModel.introMessage)==null?void 0:o.autoScroll)!==!1&&setTimeout(function(){var a,s;(a=i._messages)!=null&&a.elementRef&&en.scrollToTop((s=i._messages)==null?void 0:s.elementRef)},r)}},{key:"getIntroMessage",value:function(r){if(!(!this.shouldAddInitialMessage(r)||!this._chatEl)){var i=Fm.setUpInitial(this.init.bind(this),this._webModel.introMessage,this._chatEl,!!this._webModel.worker);return this.scrollToTop(1),{role:_e.AI_ROLE,html:i,sendUpdate:!1}}}},{key:"configureInit",value:function(){var n=D(_().mark(function i(o){var a;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=this._webModel.load,!a){l.next=8;break}if(!a.onInit){l.next=5;break}return this.init(),l.abrupt("return");case 5:if(!a.onMessage){l.next=8;break}return this._loadOnFirstMessage=!0,l.abrupt("return");case 8:o||this.init();case 9:case"end":return l.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"init",value:function(){var n=D(_().mark(function i(o){var a,s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if((a=this._messages)==null||a.removeError(),s=this.attemptToCreateChat(),c.t0=s,!c.t0){c.next=6;break}return c.next=6,this.loadModel(s,o);case 6:case"end":return c.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"attemptToCreateChat",value:function(){var r;if(t.chat){(r=this._messages)==null||r.addNewErrorMessage("service",t.MULTIPLE_MODELS_ERROR),console.error(t.MULTIPLE_MODELS_ERROR);return}if(!(this._isModelLoaded||this._isModelLoading)){var i=this._webModel.worker;return Bm.use_web_worker&&i?new window.webLLM.ChatWorkerClient(i):new window.webLLM.ChatModule}}},{key:"getConfig",value:function(){var r,i=t.DEFAULT_MODEL;this._webModel.model&&(i=this._webModel.model);var o=JSON.parse(JSON.stringify(Bm));if(this._webModel.urls){var a=o.model_list.find(function(s){return s.local_id=i});a&&(this._webModel.urls.model&&(a.model_url=this._webModel.urls.model),this._webModel.urls.wasm&&(a.model_lib_url=this._webModel.urls.wasm))}return(r=this._webModel.load)!=null&&r.skipCache&&(o.use_cache=!1),{model:i,appConfig:o}}},{key:"loadModel",value:function(){var n=D(_().mark(function i(o,a){var s=this,l,c,u,d,f,h,p,m,y,g,v,b,E,C,x;return _().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return this.scrollToTop(),t.chat=o,this._isModelLoading=!0,m=((l=this._webModel.introMessage)==null?void 0:l.displayed)===!1,y=function(G){var q;(q=s._messages)==null||q.addNewMessage({html:"<div>".concat(G.text,"</div>"),overwrite:!0,sendUpdate:!1}),m&&(setTimeout(function(){var z;return en.scrollToBottom((z=s._messages)==null?void 0:z.elementRef)}),m=!1)},t.chat.setInitProgressCallback(y),U.prev=4,v=this.getConfig(),b=v.model,E=v.appConfig,C={},this._webModel.instruction&&(C.conv_config={system:this._webModel.instruction}),this._conversationHistory.length>0&&(C.conversation_history=this._conversationHistory),U.next=10,t.chat.reload(b,C,E,a);case 10:g=U.sent,U.next=16;break;case 13:return U.prev=13,U.t0=U.catch(4),U.abrupt("return",this.unloadChat(U.t0));case 16:(u=(c=this.deepChat)._validationHandler)==null||u.call(c),(d=this._webModel.introMessage)!=null&&d.removeAfterLoad?this._webModel.introMessage.displayed===!1?(h=this._messages)==null||h.removeLastMessage():(p=this._removeIntro)==null||p.call(this):(x=Fm.setUpAfterLoad(g,this._webModel.introMessage,this._chatEl,!!this._webModel.worker),(f=this._messages)==null||f.addNewMessage({html:x,overwrite:!0,sendUpdate:!1})),this._isModelLoaded=!0,this._isModelLoading=!1;case 18:case"end":return U.stop()}},i,this,[[4,13]])}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"unloadChat",value:function(){var n=D(_().mark(function i(o){var a;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if((a=this._messages)==null||a.addNewErrorMessage("service",t.GENERIC_ERROR),console.error(o),this._isModelLoaded=!1,this._isModelLoading=!1,l.t0=t.chat,!l.t0){l.next=9;break}return l.next=8,t.chat.unload();case 8:t.chat=void 0;case 9:case"end":return l.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"immediateResp",value:function(){var n=D(_().mark(function i(o,a,s){var l,c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,s.generate(a,void 0,0);case 2:return d.t0=d.sent,l={text:d.t0},d.next=6,t.processResponse(this.deepChat,o,l);case 6:c=d.sent,c&&o.addNewMessage(c),this.completionsHandlers.onFinish();case 8:case"end":return d.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"streamResp",value:function(){var n=D(_().mark(function i(o,a,s){var l=this,c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.streamHandlers.abortStream.abort=function(){s.interruptGenerate()},this.streamHandlers.onOpen(),c=new qr(o),d.next=4,s.generate(a,function(){var f=D(_().mark(function h(p,m){var y;return _().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,t.processResponse(l.deepChat,o,{text:m});case 2:y=v.sent,y&&c.upsertStreamedMessage({text:y.text,overwrite:!0});case 4:case"end":return v.stop()}},h)}));return function(h,p){return f.apply(this,arguments)}}());case 4:c.finaliseStreamedMessage(),this.streamHandlers.onClose();case 6:case"end":return d.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"generateRespByType",value:function(){var n=D(_().mark(function i(o,a,s,l){var c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(d.prev=0,!s){d.next=6;break}return d.next=4,this.streamResp(o,a,l);case 4:d.next=8;break;case 6:return d.next=8,this.immediateResp(o,a,l);case 8:d.next=13;break;case 10:d.prev=10,d.t0=d.catch(0),(c=this._messages)==null||c.addNewErrorMessage("service"),console.log(d.t0);case 13:case"end":return d.stop()}},i,this,[[0,10]])}));function r(i,o,a,s){return n.apply(this,arguments)}return r}()},{key:"generateResp",value:function(){var n=D(_().mark(function i(o,a,s){var l,c,u,d,f,h,p;return _().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return l=a[a.length-1].text,y.next=3,we.processRequestInterceptor(this.deepChat,{body:{text:l}});case 3:c=y.sent,u=c.body,d=c.error,f=!!this.deepChat.stream;try{d?(we.displayError(o,new Error(d)),(f?this.streamHandlers.onClose:this.completionsHandlers.onFinish)()):!u||!u.text?(h=at.INVALID_MODEL_REQUEST({body:u},!1),console.error(h),p=f?this.streamHandlers.onClose:this.completionsHandlers.onFinish,we.onInterceptorError(o,h,p)):this.generateRespByType(o,u.text,!!this.deepChat.stream,s)}catch(g){this.unloadChat(g)}case 8:case"end":return y.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a){var s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this._isModelLoaded){u.next=7;break}if(!this._loadOnFirstMessage){u.next=6;break}return u.next=4,this.init();case 4:u.next=7;break;case 6:return u.abrupt("return");case 7:!t.chat||this._isModelLoading||((s=this._webModel.introMessage)!=null&&s.removeAfterMessage&&((l=this._removeIntro)==null||l.call(this)),o.addLoadingMessage(),this.generateResp(o,a,t.chat));case 8:case"end":return u.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"canSubmit",value:function(r){return!(r!=null&&r.trim())||this._isModelLoading?!1:this._loadOnFirstMessage?!0:!!this._isModelLoaded}},{key:"isWebModel",value:function(){return!0}}],[{key:"setUpHistory",value:function(r,i){i.forEach(function(o,a){if(o.role===_e.USER_ROLE&&o.text){var s=i[a+1];s!=null&&s.text&&s.role!==_e.USER_ROLE&&r.push([o.text,s.text])}})}},{key:"processResponse",value:function(){var n=D(_().mark(function i(o,a,s){var l,c,u;return _().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(l=o.responseInterceptor)==null?void 0:l.call(o,s);case 2:if(f.t0=f.sent,f.t0){f.next=5;break}f.t0=s;case 5:if(c=f.t0,!c.error){f.next=11;break}return we.displayError(a,new Error(c.error)),f.abrupt("return");case 11:if(!(!c||!c.text)){f.next=15;break}return u=at.INVALID_MODEL_RESPONSE(s,!!o.responseInterceptor,c),we.displayError(a,new Error(u)),f.abrupt("return");case 15:return f.abrupt("return",c);case 16:case"end":return f.stop()}},i)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"clearAllCache",value:function(){t.clearCache("webllm/model"),t.clearCache("webllm/wasm")}},{key:"clearCache",value:function(r){caches.open(r).then(function(i){i.keys().then(function(o){o.forEach(function(a){i.delete(a)})})})}}]),t}(js);Yi.GENERIC_ERROR="Error, please check the [troubleshooting](https://deepchat.dev/docs/webModel#troubleshooting) section of documentation for help.";Yi.MULTIPLE_MODELS_ERROR="Cannot run multiple web models";Yi.WEB_LLM_NOT_FOUND_ERROR="WebLLM module not found";Yi.DEFAULT_MODEL="Llama-2-7b-chat-hf-q4f32_1";Yi.MODULE_SEARCH_LIMIT_S=5;var wf=Yi,jm=function(){function e(){T(this,e)}return M(e,null,[{key:"buildHeaders",value:function(n){return{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}},{key:"handleVerificationResult",value:function(n,r,i,o){var a=n;Array.isArray(a.error)&&a.error[0]==="Error in `parameters`: field required"?i(r):o(at.INVALID_KEY)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api-inference.huggingface.co/models/gpt2",method:"POST",handleVerificationResult:e.handleVerificationResult}}}]),e}(),A1=function(e){pe(t,e);function t(n,r,i,o,a,s){var l;return T(this,t),l=he(this,t,[n,jm.buildKeyVerificationDetails(),jm.buildHeaders,a,s]),l.insertKeyPlaceholderText="Hugging Face Token",l.keyHelpUrl="https://huggingface.co/settings/tokens",l.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Hugging Face</b></div>
    <p>First message may take an extented amount of time to complete as the model needs to be initialized.</p>`,l.permittedErrorPrefixes=["Authorization header"],l.url="".concat(t.URL_PREFIX).concat(i),l.textInputPlaceholderText=r,fe(o)=="object"&&(o.model&&(l.url="".concat(t.URL_PREFIX).concat(o.model)),o.options&&(l.rawBody.options=o.options),o.parameters&&(l.rawBody.parameters=o.parameters)),l}return M(t,[{key:"preprocessBody",value:function(r,i,o){var a,s=JSON.parse(JSON.stringify(r)),l=i[i.length-1].text;if(l)return(a=s.options)!==null&&a!==void 0||(s.options={}),s.options.wait_for_model=!0,Ne({inputs:l},s)}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a,s){var l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.requestSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:l=this.preprocessBody(this.rawBody,a,s),et.request(this,l,o);case 4:case"end":return u.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()}]),t}($t);A1.URL_PREFIX="https://api-inference.huggingface.co/models/";var Qr=A1,Ef=function(e){pe(t,e);function t(n,r,i,o,a,s){var l;return T(this,t),l=he(this,t,[n,r,i,o,a,s]),l.isTextInputDisabled=!0,l.canSendMessage=t.canSendFile,l}return M(t,[{key:"preprocessBody",value:function(r,i,o){return o[0]}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a,s){return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.requestSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:if(s!=null&&s[0]){c.next=4;break}throw new Error("No file was added");case 4:et.poll(this,s[0],o,!1);case 5:case"end":return c.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()}],[{key:"canSendFile",value:function(r,i){return!!(i!=null&&i[0])}}]),t}(Qr),jF=function(e){pe(t,e);function t(n){T(this,t);var r,i,o,a=(i=(r=n.directConnection)==null?void 0:r.huggingFace)==null?void 0:i.audioClassification,s=(o=n.directConnection)==null?void 0:o.huggingFace;return he(this,t,[n,"Attach an audio file","ehcalabres/wav2vec2-lg-xlsr-en-speech-emotion-recognition",a,s,{audio:{}}])}return M(t,[{key:"extractPollResultData",value:function(){var n=D(_().mark(function i(o){var a;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!o.estimated_time){l.next=2;break}return l.abrupt("return",{timeoutMS:(o.estimated_time+1)*1e3});case 2:if(!o.error){l.next=4;break}throw o.error;case 4:return l.abrupt("return",{text:((a=o[0])==null?void 0:a.label)||""});case 5:case"end":return l.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Ef),$F=function(e){pe(t,e);function t(n){T(this,t);var r,i,o,a=(i=(r=n.directConnection)==null?void 0:r.huggingFace)==null?void 0:i.imageClassification,s=(o=n.directConnection)==null?void 0:o.huggingFace;return he(this,t,[n,"Attach an image file","google/vit-base-patch16-224",a,s,{images:{}}])}return M(t,[{key:"extractPollResultData",value:function(){var n=D(_().mark(function i(o){var a;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!o.estimated_time){l.next=2;break}return l.abrupt("return",{timeoutMS:(o.estimated_time+1)*1e3});case 2:if(!o.error){l.next=4;break}throw o.error;case 4:return l.abrupt("return",{text:((a=o[0])==null?void 0:a.label)||""});case 5:case"end":return l.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Ef),fa="data:image/png;base64,",_r=function(){function e(){T(this,e)}return M(e,null,[{key:"buildHeaders",value:function(n){return{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}},{key:"handleVerificationResult",value:function(n,r,i,o){n.message?o(at.INVALID_KEY):i(r)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.stability.ai/v1/engines/list",method:"GET",handleVerificationResult:e.handleVerificationResult}}}]),e}(),Vl=function(e){pe(t,e);function t(n,r,i,o,a){var s;return T(this,t),s=he(this,t,[n,r,i,o,a]),s.insertKeyPlaceholderText="Stability AI API Key",s.keyHelpUrl="https://platform.stability.ai/docs/getting-started/authentication",s.permittedErrorPrefixes=["Incorrect","invalid_"],s}return M(t)}($t),HF=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o=JSON.parse(JSON.stringify(n.directConnection)),a=o==null?void 0:o.stabilityAI,s={images:{files:{acceptedFormats:".png",maxNumberOfFiles:1}}};r=he(this,t,[n,_r.buildKeyVerificationDetails(),_r.buildHeaders,a,s]),r.url="https://api.stability.ai/v1/generation/esrgan-v1-x2plus/image-to-image/upscale",r.textInputPlaceholderText="Describe image changes",r.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI</b></div>
    <div style="width: 100%; text-align: center; margin-left: -10px; margin-top: 5px"><b>Image to Image Upscale</b></div>
    <p>Upload an image to generate a new one with higher resolution.</p>
    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>`;var l=(i=o==null?void 0:o.stabilityAI)==null?void 0:i.imageToImageUpscale;return fe(l)=="object"&&(l.engine_id&&(r.url="https://api.stability.ai/v1/generation/".concat(l.engine_id,"/image-to-image/upscale")),t.cleanConfig(l),Object.assign(r.rawBody,l)),r.canSendMessage=t.canSendFileMessage,r}return M(t,[{key:"createFormDataBody",value:function(r,i){var o=new FormData;return o.append("image",i),Object.keys(r).forEach(function(a){o.append(a,String(r[a]))}),o}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a,s){var l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.requestSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:if(s){u.next=4;break}throw new Error("Image was not found");case 4:l=this.createFormDataBody(this.rawBody,s[0]),we.tempRemoveContentHeader(this.requestSettings,et.request.bind(this,this,l,o),!1);case 6:case"end":return u.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.message){s.next=2;break}throw o.message;case 2:return s.abrupt("return",{files:o.artifacts.map(function(l){return{src:"".concat(fa).concat(l.base64),type:"image"}})});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}],[{key:"cleanConfig",value:function(r){delete r.engine_id}},{key:"canSendFileMessage",value:function(r,i){return!!(i!=null&&i[0])}}]),t}(Vl),qF=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o=JSON.parse(JSON.stringify(n.directConnection)),a=o==null?void 0:o.stabilityAI,s={images:{files:{acceptedFormats:".png",maxNumberOfFiles:2}}};r=he(this,t,[n,_r.buildKeyVerificationDetails(),_r.buildHeaders,a,s]),r.url="https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/image-to-image/masking",r._maskSource="MASK_IMAGE_WHITE",r.textInputPlaceholderText="Describe image changes",r.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI</b></div>
    <div style="width: 100%; text-align: center; margin-left: -10px; margin-top: 5px"><b>Image to Image Masking</b></div>
    <p>Upload an image, its mask image to create a new one based on the changes you have described for the mask area.</p>
    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>`;var l=(i=o==null?void 0:o.stabilityAI)==null?void 0:i.imageToImageMasking;return fe(l)=="object"&&(l.engine_id&&(r.url="https://api.stability.ai/v1/generation/".concat(l.engine_id,"/image-to-image/masking")),l.weight!==void 0&&l.weight!==null&&(r._imageWeight=l.weight),l.mask_source!==void 0&&l.mask_source!==null&&(r._maskSource=l.mask_source),t.cleanConfig(l),Object.assign(r.rawBody,l)),r.canSendMessage=t.canSendFileTextMessage,r}return M(t,[{key:"createFormDataBody",value:function(r,i,o,a){var s=new FormData;return s.append("init_image",i),s.append("mask_source",String(this._maskSource)),s.append("mask_image",o),a&&a!==""&&s.append("text_prompts[0][text]",a),this._imageWeight!==void 0&&this._imageWeight!==null&&s.append("text_prompts[0][weight]",String(this._imageWeight)),Object.keys(r).forEach(function(l){s.append(l,String(r[l]))}),s.get("weight")===void 0&&s.append("weight",String(1)),s}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a,s){var l,c,u,d;return _().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.requestSettings){h.next=2;break}throw new Error("Request settings have not been set up");case 2:if(!(!s||!s[0]||!s[1])){h.next=4;break}throw new Error("Image was not found");case 4:u=(c=(l=a[a.length-1])==null?void 0:l.text)==null?void 0:c.trim(),d=this.createFormDataBody(this.rawBody,s[0],s[1],u),we.tempRemoveContentHeader(this.requestSettings,et.request.bind(this,this,d,o),!1);case 6:case"end":return h.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.message){s.next=2;break}throw o.message;case 2:return s.abrupt("return",{files:o.artifacts.map(function(l){return{src:"".concat(fa).concat(l.base64),type:"image"}})});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}],[{key:"cleanConfig",value:function(r){delete r.engine_id,delete r.weight}},{key:"canSendFileTextMessage",value:function(r,i){return!!(i!=null&&i[0])&&!!(r&&r.trim()!=="")}}]),t}(Vl),zF=function(e){pe(t,e);function t(n){T(this,t);var r,i,o,a=(i=(r=n.directConnection)==null?void 0:r.huggingFace)==null?void 0:i.audioSpeechRecognition,s=(o=n.directConnection)==null?void 0:o.huggingFace;return he(this,t,[n,"Attach an audio file","facebook/wav2vec2-large-960h-lv60-self",a,s,{audio:{}}])}return M(t,[{key:"extractPollResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.estimated_time){s.next=2;break}return s.abrupt("return",{timeoutMS:(o.estimated_time+1)*1e3});case 2:if(!o.error){s.next=4;break}throw o.error;case 4:return s.abrupt("return",{text:o.text||""});case 5:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Ef),VF=function(e){pe(t,e);function t(n){T(this,t);var r,i,o,a=(i=(r=n.directConnection)==null?void 0:r.huggingFace)==null?void 0:i.textGeneration,s=(o=n.directConnection)==null?void 0:o.huggingFace;return he(this,t,[n,"Once upon a time","gpt2",a,s])}return M(t,[{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.error){s.next=2;break}throw o.error;case 2:return s.abrupt("return",{text:o[0].generated_text||""});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Qr),WF=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o,a,s=(o=(i=n.directConnection)==null?void 0:i.huggingFace)==null?void 0:o.questionAnswer,l=(a=n.directConnection)==null?void 0:a.huggingFace;return r=he(this,t,[n,"Ask a question","bert-large-uncased-whole-word-masking-finetuned-squad",s,l]),r.permittedErrorPrefixes=["Authorization header","Error in"],r.context=s.context,r}return M(t,[{key:"preprocessBody",value:function(r,i){var o=i[i.length-1].text;if(o)return{inputs:{question:o,context:this.context,options:{wait_for_model:!0}}}}},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.error){s.next=2;break}throw o.error;case 2:return s.abrupt("return",{text:o.answer||""});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Qr),KF=function(e){pe(t,e);function t(n){T(this,t);var r,i,o,a=(i=(r=n.directConnection)==null?void 0:r.huggingFace)==null?void 0:i.summarization,s=(o=n.directConnection)==null?void 0:o.huggingFace;return he(this,t,[n,"Insert text to summarize","facebook/bart-large-cnn",a,s])}return M(t,[{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.error){s.next=2;break}throw o.error;case 2:return s.abrupt("return",{text:o[0].summary_text||""});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Qr),GF=function(e){pe(t,e);function t(n){var r,i;T(this,t);var o,a,s,l=(a=(o=n.directConnection)==null?void 0:o.huggingFace)==null?void 0:a.conversation,c=(s=n.directConnection)==null?void 0:s.huggingFace;return i=he(this,t,[n,"Ask me anything!","facebook/blenderbot-400M-distill",l,c]),(r=i.maxMessages)!==null&&r!==void 0||(i.maxMessages=-1),i}return M(t,[{key:"processMessages",value:function(r){var i=r.filter(function(c){return c.text}),o=i[i.length-1].text,a=i.slice(0,i.length-1);if(o){var s=a.filter(function(c){return c.role==="user"}).map(function(c){return c.text}),l=a.filter(function(c){return c.role==="ai"}).map(function(c){return c.text});return{past_user_inputs:s,generated_responses:l,mostRecentMessageText:o}}}},{key:"preprocessBody",value:function(r,i){var o,a=JSON.parse(JSON.stringify(r)),s=this.processMessages(i);if(s)return(o=a.options)!==null&&o!==void 0||(a.options={}),a.options.wait_for_model=!0,Ne({inputs:{past_user_inputs:s.past_user_inputs,generated_responses:s.generated_responses,text:s.mostRecentMessageText}},a)}},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.error){s.next=2;break}throw o.error;case 2:return s.abrupt("return",{text:o.generated_text||""});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Qr),YF=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o=JSON.parse(JSON.stringify(n.directConnection)),a=o.stabilityAI,s={images:{files:{acceptedFormats:".png",maxNumberOfFiles:1}}};r=he(this,t,[n,_r.buildKeyVerificationDetails(),_r.buildHeaders,a,s]),r.url="https://api.stability.ai/v1/generation/stable-diffusion-v1-6/image-to-image",r.textInputPlaceholderText="Describe image changes",r.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI: Image to Image</b></div>
    <p>Upload an image to create a new one with the changes you have described.</p>
    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>`;var l=(i=o.stabilityAI)==null?void 0:i.imageToImage;return fe(l)=="object"&&(l.engine_id&&(r.url="https://api.stability.ai/v1/generation/".concat(l.engine_id,"/text-to-image")),l.weight!==void 0&&l.weight!==null&&(r._imageWeight=l.weight),t.cleanConfig(l),Object.assign(r.rawBody,l)),r.canSendMessage=t.canSendFileTextMessage,r}return M(t,[{key:"createFormDataBody",value:function(r,i,o){var a=new FormData;return a.append("init_image",i),o&&o!==""&&a.append("text_prompts[0][text]",o),this._imageWeight!==void 0&&this._imageWeight!==null&&a.append("text_prompts[0][weight]",String(this._imageWeight)),Object.keys(r).forEach(function(s){a.append(s,String(r[s]))}),a.get("weight")===void 0&&a.append("weight",String(1)),a}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a,s){var l,c,u,d;return _().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.requestSettings){h.next=2;break}throw new Error("Request settings have not been set up");case 2:if(s){h.next=4;break}throw new Error("Image was not found");case 4:u=(c=(l=a[a.length-1])==null?void 0:l.text)==null?void 0:c.trim(),d=this.createFormDataBody(this.rawBody,s[0],u),we.tempRemoveContentHeader(this.requestSettings,et.request.bind(this,this,d,o),!1);case 6:case"end":return h.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.message){s.next=2;break}throw o.message;case 2:return s.abrupt("return",{files:o.artifacts.map(function(l){return{src:"".concat(fa).concat(l.base64),type:"image"}})});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}],[{key:"cleanConfig",value:function(r){delete r.engine_id,delete r.weight}},{key:"canSendFileTextMessage",value:function(r,i){return!!(i!=null&&i[0])&&!!(r&&r.trim()!=="")}}]),t}(Vl),JF=function(e){pe(t,e);function t(n){T(this,t);var r,i,o,a=(i=(r=n.directConnection)==null?void 0:r.huggingFace)==null?void 0:i.translation,s=(o=n.directConnection)==null?void 0:o.huggingFace;return he(this,t,[n,"Insert text to translate","Helsinki-NLP/opus-tatoeba-en-ja",a,s])}return M(t,[{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.error){s.next=2;break}throw o.error;case 2:return s.abrupt("return",{text:o[0].translation_text||""});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Qr),ZF=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o=JSON.parse(JSON.stringify(n.directConnection)),a=o.stabilityAI;r=he(this,t,[n,_r.buildKeyVerificationDetails(),_r.buildHeaders,a]),r.url="https://api.stability.ai/v1/generation/stable-diffusion-v1-6/text-to-image",r.textInputPlaceholderText="Describe an image",r.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI: Text to Image</b></div>
    <p>Insert text to generate an image.</p>
    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>`;var s=(i=o.stabilityAI)==null?void 0:i.textToImage;return fe(s)=="object"&&(s.engine_id&&(r.url="https://api.stability.ai/v1/generation/".concat(s.engine_id,"/text-to-image")),s.weight!==void 0&&s.weight!==null&&(r._imageWeight=s.weight),t.cleanConfig(s),Object.assign(r.rawBody,s)),r.canSendMessage=t.canSendTextMessage,r}return M(t,[{key:"preprocessBody",value:function(r,i){var o=JSON.parse(JSON.stringify(r)),a={text:i};return this._imageWeight&&(a.weight=this._imageWeight),o.text_prompts=[a],o}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a){var s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.requestSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:s=this.preprocessBody(this.rawBody,a[a.length-1].text),et.request(this,s,o);case 4:case"end":return c.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.message){s.next=2;break}throw o.message;case 2:return s.abrupt("return",{files:o.artifacts.map(function(l){return{src:"".concat(fa).concat(l.base64),type:"image"}})});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}],[{key:"cleanConfig",value:function(r){delete r.engine_id,delete r.weight}},{key:"canSendTextMessage",value:function(r){return!!(r&&r.trim()!=="")}}]),t}(Vl),XF=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o,a,s=(o=(i=n.directConnection)==null?void 0:i.huggingFace)==null?void 0:o.fillMask,l=(a=n.directConnection)==null?void 0:a.huggingFace;return r=he(this,t,[n,"The goal of life is [MASK].","bert-base-uncased",s,l]),r.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Hugging Face</b></div>
    <p>Insert a sentence with the word [MASK] and the model will try to fill it for you. E.g. I want [MASK].</p>
    <p>First message may take an extented amount of time to complete as the model needs to be initialized.</p>`,r.permittedErrorPrefixes=["Authorization header","No mask_token"],r}return M(t,[{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.error){s.next=2;break}throw o.error;case 2:return s.abrupt("return",{text:o[0].sequence||""});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Qr),$m=function(){function e(){T(this,e)}return M(e,null,[{key:"buildHeaders",value:function(n){return{Authorization:"Bearer ".concat(n),"Content-Type":"application/json",accept:"application/json"}}},{key:"handleVerificationResult",value:function(n,r,i,o){var a;(a=n.message)!=null&&a.includes("invalid request: prompt must be at least 1 token long")?i(r):o(at.INVALID_KEY)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.cohere.ai/v1/generate",method:"POST",handleVerificationResult:e.handleVerificationResult,body:JSON.stringify({prompt:""})}}}]),e}(),Cf=function(e){pe(t,e);function t(n,r,i,o,a){var s;return T(this,t),s=he(this,t,[n,$m.buildKeyVerificationDetails(),$m.buildHeaders,a]),s.insertKeyPlaceholderText="Cohere API Key",s.keyHelpUrl="https://dashboard.cohere.ai/api-keys",s.permittedErrorPrefixes=["invalid"],s.url=r,s.textInputPlaceholderText=i,o&&fe(o)=="object"&&Object.assign(s.rawBody,o),s}return M(t)}($t),QF=function(e){pe(t,e);function t(n){T(this,t);var r,i,o,a=(i=(r=n.directConnection)==null?void 0:r.cohere)==null?void 0:i.textGeneration,s=(o=n.directConnection)==null?void 0:o.cohere;return he(this,t,[n,"https://api.cohere.ai/v1/generate","Once upon a time",a,s])}return M(t,[{key:"preprocessBody",value:function(r,i){var o=JSON.parse(JSON.stringify(r)),a=i[i.length-1].text;if(a)return Ne({prompt:a},o)}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a){var s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.requestSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:s=this.preprocessBody(this.rawBody,a),et.request(this,s,o);case 4:case"end":return c.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){var a;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!o.message){l.next=2;break}throw o.message;case 2:return l.abrupt("return",{text:((a=o.generations)==null?void 0:a[0].text)||""});case 3:case"end":return l.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Cf),eB=function(e){pe(t,e);function t(n){T(this,t);var r,i,o,a=(i=(r=n.directConnection)==null?void 0:r.cohere)==null?void 0:i.summarization,s=(o=n.directConnection)==null?void 0:o.cohere;return he(this,t,[n,"https://api.cohere.ai/v1/summarize","Insert text to summarize",a,s])}return M(t,[{key:"preprocessBody",value:function(r,i){var o=JSON.parse(JSON.stringify(r)),a=i[i.length-1].text;if(a)return Ne({text:a},o)}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a){var s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.requestSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:s=this.preprocessBody(this.rawBody,a),et.request(this,s,o);case 4:case"end":return c.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.message){s.next=2;break}throw o.message;case 2:return s.abrupt("return",{text:o.summary||""});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Cf),Tt=function(){function e(){T(this,e)}return M(e,null,[{key:"buildHeaders",value:function(n){return{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}},{key:"handleVerificationResult",value:function(n,r,i,o){var a=n;a.error?a.error.code==="invalid_api_key"?o(at.INVALID_KEY):o(at.CONNECTION_FAILED):i(r)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.openai.com/v1/models",method:"GET",handleVerificationResult:e.handleVerificationResult}}},{key:"directFetch",value:function(){var t=D(_().mark(function r(i,o,a){var s,l,c=arguments;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=c.length>3&&c[3]!==void 0?c[3]:!0,i.requestSettings.method=a,d.next=4,we.fetch(i,i.requestSettings.headers,s,o).then(function(f){return we.processResponseByType(f)});case 4:if(l=d.sent,!l.error){d.next=7;break}throw l.error.message;case 7:return d.abrupt("return",l);case 8:case"end":return d.stop()}},r)}));function n(r,i,o){return t.apply(this,arguments)}return n}()}]),e}(),If=function(e){pe(t,e);function t(n){var r,i,o;T(this,t);var a,s,l,c=JSON.parse(JSON.stringify(n.directConnection)),u=c==null?void 0:c.openAI;o=he(this,t,[n,Tt.buildKeyVerificationDetails(),Tt.buildHeaders,u]),o.insertKeyPlaceholderText="OpenAI API Key",o.keyHelpUrl="https://platform.openai.com/account/api-keys",o.url="https://api.openai.com/v1/audio/speech",o.permittedErrorPrefixes=["Invalid"],o.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>OpenAI : Text To Speech</b></div>
    <p>Generate an audio file based on your text input.</p>
    <p>Click <a href="https://platform.openai.com/docs/guides/text-to-speech">here</a> for more information.</p>`;var d=(a=c==null?void 0:c.openAI)==null?void 0:a.textToSpeech;return fe(d)=="object"&&Object.assign(o.rawBody,d),(r=(s=o.rawBody).model)!==null&&r!==void 0||(s.model=t.DEFAULT_MODEL),(i=(l=o.rawBody).voice)!==null&&i!==void 0||(l.voice=t.DEFAULT_VOIDE),o.textInputPlaceholderText="Insert text to generate audio",o.rawBody.response_format="mp3",o}return M(t,[{key:"preprocessBody",value:function(r,i){var o,a,s=JSON.parse(JSON.stringify(r)),l=(a=(o=i[i.length-1])==null?void 0:o.text)==null?void 0:a.trim();return l&&l!==""&&(s.input=l),s}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a){var s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if((s=this.requestSettings)!=null&&s.headers){u.next=2;break}throw new Error("Request settings have not been set up");case 2:this.url=this.requestSettings.url||this.url,l=this.preprocessBody(this.rawBody,a),et.request(this,l,o);case 5:case"end":return u.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(o instanceof Blob)){s.next=2;break}return s.abrupt("return",new Promise(function(l){var c=new FileReader;c.readAsDataURL(o),c.onload=function(u){l({files:[{src:u.target.result,type:"audio"}]})}}));case 2:if(!o.error){s.next=4;break}throw o.error.message;case 4:return s.abrupt("return",{error:"error"});case 5:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}($t);If.DEFAULT_MODEL="tts-1";If.DEFAULT_VOIDE="alloy";var tB=If,Wl=function(e){pe(t,e);function t(n){var r,i;T(this,t);var o,a,s=JSON.parse(JSON.stringify(n.directConnection)),l=s==null?void 0:s.openAI;i=he(this,t,[n,Tt.buildKeyVerificationDetails(),Tt.buildHeaders,l,{audio:{}}]),i.insertKeyPlaceholderText="OpenAI API Key",i.keyHelpUrl="https://platform.openai.com/account/api-keys",i.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>OpenAI : Speech To Text</b></div>
    <p><b>Upload an audio file</b> to transcribe it into text. You can optionally provide text to guide the audio
      processing.
    <p>Click <a href="https://platform.openai.com/docs/guides/speech-to-text">here</a> for more info.</p>`,i.url="",i.permittedErrorPrefixes=["Invalid"],i.textInputPlaceholderText="Upload an audio file",i._service_url=t.AUDIO_TRANSCRIPTIONS_URL;var c=(o=s==null?void 0:s.openAI)==null?void 0:o.audio;return fe(c)=="object"&&(i.processConfig(c),t.cleanConfig(c),Object.assign(i.rawBody,c)),(r=(a=i.rawBody).model)!==null&&r!==void 0||(a.model=t.DEFAULT_MODEL),i.rawBody.response_format="json",i.canSendMessage=t.canSendFileMessage,i}return M(t,[{key:"processConfig",value:function(r){r!=null&&r.type&&r.type==="translation"&&(this._service_url=t.AUDIO_TRANSLATIONS_URL,delete r.language)}},{key:"preprocessBody",value:function(r,i){var o,a,s=JSON.parse(JSON.stringify(r)),l=(a=(o=i[i.length-1])==null?void 0:o.text)==null?void 0:a.trim();return l&&l!==""&&(s.prompt=l),s}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a,s){var l,c,u;return _().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if((l=this.requestSettings)!=null&&l.headers){f.next=2;break}throw new Error("Request settings have not been set up");case 2:if(s!=null&&s[0]){f.next=4;break}throw new Error("No file was added");case 4:this.url=this.requestSettings.url||this._service_url,c=this.preprocessBody(this.rawBody,a),u=t.createFormDataBody(c,s[0]),we.tempRemoveContentHeader(this.requestSettings,et.request.bind(this,this,u,o),!1);case 7:case"end":return f.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.error){s.next=2;break}throw o.error.message;case 2:return s.abrupt("return",{text:o.text});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}],[{key:"canSendFileMessage",value:function(r,i){return!!(i!=null&&i[0])}},{key:"cleanConfig",value:function(r){delete r.type}},{key:"createFormDataBody",value:function(r,i){var o=new FormData;return o.append("file",i),Object.keys(r).forEach(function(a){o.append(a,String(r[a]))}),o}}]),t}($t);Wl.AUDIO_TRANSCRIPTIONS_URL="https://api.openai.com/v1/audio/transcriptions";Wl.AUDIO_TRANSLATIONS_URL="https://api.openai.com/v1/audio/translations";Wl.DEFAULT_MODEL="whisper-1";var nB=Wl,zr=function(){function e(){T(this,e)}return M(e,null,[{key:"buildTextToSpeechHeaders",value:function(n,r){return{"Ocp-Apim-Subscription-Key":r,"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":n}}},{key:"buildSpeechToTextHeaders",value:function(n){return{"Ocp-Apim-Subscription-Key":n,Accept:"application/json"}}},{key:"handleSpeechVerificationResult",value:function(n,r,i,o){n.error?o(at.INVALID_KEY):i(r)}},{key:"buildSpeechKeyVerificationDetails",value:function(n){return{url:"https://".concat(n,".api.cognitive.microsoft.com/sts/v1.0/issuetoken"),method:"POST",createHeaders:function(i){return{"Ocp-Apim-Subscription-Key":"".concat(i)}},handleVerificationResult:e.handleSpeechVerificationResult}}},{key:"buildSummarizationHeader",value:function(n){return{"Ocp-Apim-Subscription-Key":n,"Content-Type":"application/json"}}},{key:"handleLanguageVerificationResult",value:function(n,r,i,o){var a;((a=n.error)==null?void 0:a.code)==="401"?o(at.INVALID_KEY):i(r)}},{key:"buildLanguageKeyVerificationDetails",value:function(n){return{url:"".concat(n,"/language/analyze-text/jobs?api-version=2022-10-01-preview"),method:"POST",createHeaders:function(i){return{"Ocp-Apim-Subscription-Key":"".concat(i)}},handleVerificationResult:e.handleLanguageVerificationResult}}},{key:"handleTranslationVerificationResult",value:function(n,r,i,o){n.json().then(function(a){!Array.isArray(a)&&a.error.code===401e3?o(at.INVALID_KEY):i(r)})}},{key:"buildTranslationKeyVerificationDetails",value:function(n){return{url:"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es",method:"POST",createHeaders:function(i){return e.buildTranslationHeaders(n,i)},handleVerificationResult:e.handleTranslationVerificationResult}}},{key:"buildTranslationHeaders",value:function(n,r){var i={"Ocp-Apim-Subscription-Key":r,"Content-Type":"application/json"};return n&&(i["Ocp-Apim-Subscription-Region"]=n),i}}]),e}(),rB=function(e){pe(t,e);function t(n,r,i,o,a){var s;return T(this,t),s=he(this,t,[n,zr.buildLanguageKeyVerificationDetails(i),r,o,a]),s.insertKeyPlaceholderText="Azure Language Subscription Key",s.keyHelpUrl="https://learn.microsoft.com/en-us/azure/api-management/api-management-subscriptions#create-and-manage-subscriptions-in-azure-portal",s.permittedErrorPrefixes=["Access"],s}return M(t)}($t),iB=function(e){pe(t,e);function t(n){var r,i;T(this,t);var o,a,s,l,c=(a=(o=n.directConnection)==null?void 0:o.azure)==null?void 0:a.summarization,u=(s=n.directConnection)==null?void 0:s.azure;return i=he(this,t,[n,zr.buildSummarizationHeader,c.endpoint,u]),i.url="",i.textInputPlaceholderText="Insert text to summarize",(r=(l=i.rawBody).language)!==null&&r!==void 0||(l.language="en"),Object.assign(i.rawBody,c),i.url="".concat(c.endpoint,"/language/analyze-text/jobs?api-version=2022-10-01-preview"),i}return M(t,[{key:"preprocessBody",value:function(r,i){var o=i[i.length-1].text;if(o)return{analysisInput:{documents:[{id:"1",language:r.language,text:o}]},tasks:[{kind:"ExtractiveSummarization"}]}}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a){var s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.requestSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:s=this.preprocessBody(this.rawBody,a),et.request(this,s,o),this.messages=o;case 4:case"end":return c.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){var a,s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!o.error){u.next=2;break}throw o.error.message;case 2:return this.messages&&this.completionsHandlers&&(s=o.headers.get("operation-location"),l={method:"GET",headers:(a=this.requestSettings)==null?void 0:a.headers},et.executePollRequest(this,s,l,this.messages)),u.abrupt("return",{makingAnotherRequest:!0});case 4:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"extractPollResultData",value:function(){var n=D(_().mark(function i(o){var a,s,l,c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!o.error){d.next=2;break}throw o.error;case 2:if(o.status!=="running"){d.next=4;break}return d.abrupt("return",{timeoutMS:2e3});case 4:if(!(o.errors.length>0)){d.next=6;break}throw o.errors[0];case 6:if(!(o.tasks.items[0].results.errors.length>0)){d.next=8;break}throw o.tasks.items[0].results.errors[0];case 8:a="",s=AU(o.tasks.items[0].results.documents[0].sentences);try{for(s.s();!(l=s.n()).done;)c=l.value,a+=c.text}catch(f){s.e(f)}finally{s.f()}return d.abrupt("return",{text:a||""});case 12:case"end":return d.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(rB),Uc=function(){function e(){T(this,e)}return M(e,null,[{key:"poll",value:function(){var t=D(_().mark(function r(i,o){var a,s,l,c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a={authorization:i,"content-type":"application/json"},d.t0="https://api.assemblyai.com/v2/transcript/",d.next=4,fetch("https://api.assemblyai.com/v2/transcript",{method:"POST",body:JSON.stringify({audio_url:o}),headers:a});case 4:return d.next=6,d.sent.json();case 6:d.t1=d.sent.id,s=d.t0.concat.call(d.t0,d.t1);case 8:if(l){d.next=24;break}return d.next=11,fetch(s,{headers:a});case 11:return d.next=13,d.sent.json();case 13:if(c=d.sent,c.status!=="completed"){d.next=18;break}l=c,d.next=22;break;case 18:if(c.status!=="error"){d.next=20;break}throw new Error("Transcription failed: ".concat(c.error));case 20:return d.next=22,new Promise(function(f){return setTimeout(f,3e3)});case 22:d.next=8;break;case 24:return d.abrupt("return",l);case 25:case"end":return d.stop()}},r)}));function n(r,i){return t.apply(this,arguments)}return n}()},{key:"buildHeaders",value:function(n){return{Authorization:n,"Content-Type":"application/octet-stream"}}},{key:"handleVerificationResult",value:function(n,r,i,o){var a=n;a.error?a.error.code==="invalid_api_key"?o(at.INVALID_KEY):o(at.CONNECTION_FAILED):i(r)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.assemblyai.com/v2/upload",method:"POST",handleVerificationResult:e.handleVerificationResult}}}]),e}(),oB=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o=(i=n.directConnection)==null?void 0:i.assemblyAI;return r=he(this,t,[n,Uc.buildKeyVerificationDetails(),Uc.buildHeaders,o,{audio:{}}]),r.insertKeyPlaceholderText="AssemblyAI API Key",r.keyHelpUrl="https://www.assemblyai.com/app/account",r.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>AssemblyAI Audio</b></div>
    <p><b>Upload an audio file</b> to transcribe it into text.
    <p>
      Click <a href="https://www.assemblyai.com/docs/Guides/transcribing_an_audio_file#get-started">here</a> for more info.
    </p>`,r.url="https://api.assemblyai.com/v2/upload",r.isTextInputDisabled=!0,r.textInputPlaceholderText="Upload an audio file",r.permittedErrorPrefixes=["Authentication","Invalid"],r.canSendMessage=t.canFileSendMessage,r}return M(t,[{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a,s){var l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if((l=this.requestSettings)!=null&&l.headers){u.next=2;break}throw new Error("Request settings have not been set up");case 2:if(s!=null&&s[0]){u.next=4;break}throw new Error("No file was added");case 4:et.request(this,s[0],o,!1);case 5:case"end":return u.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){var a,s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!o.error){u.next=2;break}throw o.error;case 2:return l=(s=(a=this.requestSettings)==null?void 0:a.headers)==null?void 0:s.Authorization,u.next=5,Uc.poll(l,o.upload_url);case 5:return u.t0=u.sent.text,u.abrupt("return",{text:u.t0});case 7:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()}],[{key:"canFileSendMessage",value:function(r,i){return!!(i!=null&&i[0])}}]),t}($t),k1=function(e){pe(t,e);function t(n,r,i,o,a){var s;return T(this,t),s=he(this,t,[n,zr.buildSpeechKeyVerificationDetails(i),r,o,a]),s.insertKeyPlaceholderText="Azure Speech Subscription Key",s.keyHelpUrl="https://learn.microsoft.com/en-us/azure/api-management/api-management-subscriptions#create-and-manage-subscriptions-in-azure-portal",s}return M(t)}($t),T1=function(e){pe(t,e);function t(n){var r,i,o,a;T(this,t);var s,l,c,u,d,f,h=(l=(s=n.directConnection)==null?void 0:s.azure)==null?void 0:l.textToSpeech,p=(c=n.directConnection)==null?void 0:c.azure;return a=he(this,t,[n,zr.buildTextToSpeechHeaders.bind({},(h==null?void 0:h.outputFormat)||"audio-16khz-128kbitrate-mono-mp3"),h.region,p]),a.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Azure Text To Speech</b></div>
    <p>Insert text to synthesize it to audio.
    <p>
      Click <a href="`.concat(t.HELP_LINK,`">here</a> for more info.
    </p>`),a.url="",Object.assign(a.rawBody,h),(r=(u=a.rawBody).lang)!==null&&r!==void 0||(u.lang="en-US"),(i=(d=a.rawBody).name)!==null&&i!==void 0||(d.name="en-US-JennyNeural"),(o=(f=a.rawBody).gender)!==null&&o!==void 0||(f.gender="Female"),a.url="https://".concat(h.region,".tts.speech.microsoft.com/cognitiveservices/v1"),a}return M(t,[{key:"preprocessBody",value:function(r,i){var o=i[i.length-1].text;if(o)return"<speak version='1.0' xml:lang='".concat(r.lang,`'>
      <voice xml:lang='`).concat(r.lang,"' xml:gender='").concat(r.gender,"' name='").concat(r.name,`'>
        `).concat(o,`
      </voice>
    </speak>`)}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a){var s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.requestSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:s=this.preprocessBody(this.rawBody,a),et.request(this,s,o,!1);case 4:case"end":return c.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new Promise(function(l){var c=new FileReader;c.readAsDataURL(o),c.onload=function(u){l({files:[{src:u.target.result,type:"audio"}]})}}));case 1:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(k1);T1.HELP_LINK="https://learn.microsoft.com/en-GB/azure/cognitive-services/speech-service/get-started-text-to-speech?tabs=windows%2Cterminal&pivots=programming-language-rest";var aB=T1,M1=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o,a,s=(o=(i=n.directConnection)==null?void 0:i.azure)==null?void 0:o.speechToText,l=(a=n.directConnection)==null?void 0:a.azure,c={audio:{files:{acceptedFormats:".wav,.ogg"}}};r=he(this,t,[n,zr.buildSpeechToTextHeaders,s.region,l,c]),r.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Azure Speech To Text</b></div>
    <p><b>Upload a .wav or .ogg audio file</b> to transcribe it into text.
    <p>
      Click <a href="`.concat(t.HELP_LINK,`">here</a> for more info.
    </p>`),r.url="",r.isTextInputDisabled=!0,r.textInputPlaceholderText="Upload an audio file",r.canSendMessage=t.canFileSendMessage;var u=s.lang||"en-US";return r.url="https://".concat(s.region,".stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1?language=").concat(u,"&format=detailed"),r.recordAudio=void 0,r}return M(t,[{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a,s){var l,c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if((l=this.requestSettings)!=null&&l.headers){d.next=2;break}throw new Error("Request settings have not been set up");case 2:if(s!=null&&s[0]){d.next=4;break}throw new Error("No file was added");case 4:(c=this.requestSettings)!=null&&c.headers&&(this.requestSettings.headers["Content-Type"]=s[0].name.toLocaleLowerCase().endsWith(".wav")?"audio/wav; codecs=audio/pcm; samplerate=16000":"audio/ogg; codecs=opus"),et.request(this,s[0],o,!1);case 5:case"end":return d.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.error){s.next=2;break}throw o.error;case 2:return s.abrupt("return",{text:o.DisplayText||""});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}],[{key:"canFileSendMessage",value:function(r,i){return!!(i!=null&&i[0])}}]),t}(k1);M1.HELP_LINK="https://learn.microsoft.com/en-GB/azure/cognitive-services/speech-service/get-started-text-to-speech?tabs=windows%2Cterminal&pivots=programming-language-rest";var sB=M1,lB=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o,a,s=(o=(i=n.directConnection)==null?void 0:i.azure)==null?void 0:o.translation,l=(a=n.directConnection)==null?void 0:a.azure;return r=he(this,t,[n,zr.buildTranslationKeyVerificationDetails(s.region),zr.buildTranslationHeaders.bind({},s==null?void 0:s.region),l]),r.insertKeyPlaceholderText="Azure Translate Subscription Key",r.keyHelpUrl="https://learn.microsoft.com/en-us/azure/api-management/api-management-subscriptions#create-and-manage-subscriptions-in-azure-portal",r.url="",r.url="https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=".concat(s.language||"es"),r}return M(t,[{key:"preprocessBody",value:function(r){var i=r[r.length-1].text;if(i)return[{Text:i}]}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a){var s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.requestSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:s=this.preprocessBody(a),et.request(this,s,o);case 4:case"end":return c.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){var a;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!Array.isArray(o)){l.next=2;break}return l.abrupt("return",{text:((a=o[0].translations)==null?void 0:a[0].text)||""});case 2:throw o.error;case 3:case"end":return l.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}($t),Hm=function(){function e(){T(this,e)}return M(e,null,[{key:"storeFiles",value:function(){var t=D(_().mark(function r(i,o,a){var s,l,c,u;return _().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s=i.requestSettings.headers,s){f.next=3;break}return f.abrupt("return");case 3:return i.url="https://api.openai.com/v1/files",l=s[we.CONTENT_TYPE],delete s[we.CONTENT_TYPE],c=a.map(function(){var h=D(_().mark(function p(m){var y;return _().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return y=new FormData,v.abrupt("return",(y.append("purpose","assistants"),y.append("file",m),new Promise(function(b){b(Tt.directFetch(i,y,"POST",!1))})));case 2:case"end":return v.stop()}},p)}));return function(p){return h.apply(this,arguments)}}()),f.prev=7,f.next=10,Promise.all(c);case 10:return u=f.sent.map(function(h){return h.id}),f.abrupt("return",(s[we.CONTENT_TYPE]=l,u));case 14:throw f.prev=14,f.t0=f.catch(7),s[we.CONTENT_TYPE]=l,we.displayError(o,f.t0),i.completionsHandlers.onFinish(),f.t0;case 17:case"end":return f.stop()}},r,null,[[7,14]])}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"getType",value:function(n,r){var i=n[r].path;return!i||i.endsWith("png")?"image":"any"}},{key:"getFiles",value:function(){var t=D(_().mark(function r(i,o){var a,s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=o.map(function(u){var d=u.fileId;return i.url="https://api.openai.com/v1/files/".concat(d,"/content"),new Promise(function(f){f(Tt.directFetch(i,void 0,"GET",!1))})}),c.next=3,Promise.all(a);case 3:return s=c.sent.map(function(u,d){return new Promise(function(f){var h=new FileReader;h.readAsDataURL(u),h.onload=function(p){f({src:p.target.result,name:o[d].name,type:e.getType(o,d)})}})}),c.next=6,Promise.all(s);case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}},r)}));function n(r,i){return t.apply(this,arguments)}return n}()},{key:"getFileName",value:function(n){var r=n.split("/");return r[r.length-1]}},{key:"getFileDetails",value:function(n,r){var i,o=[];return(i=r==null?void 0:r.text)!=null&&i.value&&n.content.forEach(function(a){var s,l;(l=(s=a.text)==null?void 0:s.annotations)==null||l.forEach(function(c){var u;c.text&&c.text.startsWith("sandbox:")&&(u=c.file_path)!=null&&u.file_id&&o.push({path:c.text,fileId:c.file_path.file_id,name:e.getFileName(c.text)})})}),r!=null&&r.image_file&&o.push({fileId:r.image_file.file_id}),o}},{key:"getFilesAndNewText",value:function(){var t=D(_().mark(function r(i,o,a,s){var l,c,u;return _().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(f.t0=o.length>0,!f.t0){f.next=6;break}return f.next=4,e.getFiles(i,o);case 4:u=f.sent,(l=s==null?void 0:s.text)!=null&&l.value&&u.forEach(function(h,p){var m;if(h.src){var y=o[p].path;(m=s==null?void 0:s.text)!=null&&m.value&&y&&(s.text.value=s.text.value.replace(y,h.src))}});case 6:return f.abrupt("return",{files:u,text:(c=s==null?void 0:s.text)==null?void 0:c.value,role:a});case 7:case"end":return f.stop()}},r)}));function n(r,i,o,a){return t.apply(this,arguments)}return n}()},{key:"getFilesAndText",value:function(){var t=D(_().mark(function r(i,o,a){var s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=e.getFileDetails(o,a),c.next=3,e.getFilesAndNewText(i,s,o.role,a);case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},r)}));function n(r,i,o){return t.apply(this,arguments)}return n}()}]),e}(),Kl=function(e){pe(t,e);function t(n){var r,i,o;T(this,t);var a,s,l,c,u,d,f=JSON.parse(JSON.stringify(n.directConnection)),h=f.openAI;o=he(this,t,[n,Tt.buildKeyVerificationDetails(),Tt.buildHeaders,h]),o.insertKeyPlaceholderText="OpenAI API Key",o.keyHelpUrl="https://platform.openai.com/account/api-keys",o.url="",o.permittedErrorPrefixes=["Incorrect"],o.searchedForThreadId=!1,o.config={},o.newAssistantDetails={model:"gpt-4"},o.shouldFetchHistory=!1;var p=(a=f.openAI)==null?void 0:a.assistant;if(fe(p)=="object"){o.config=p;var m=o.config,y=m.new_assistant,g=m.thread_id,v=m.load_thread_history;Object.assign(o.newAssistantDetails,y),g&&(o.sessionId=g),v&&(o.shouldFetchHistory=!0);var b=(l=(s=n.directConnection)==null?void 0:s.openAI)==null?void 0:l.assistant,E=b.function_handler;E&&(o._functionHandler=E)}else(c=f.openAI)!=null&&c.assistant&&(f.openAI.assistant=p);return(r=(u=o.requestSettings).headers)!==null&&r!==void 0||(u.headers={}),(i=(d=o.requestSettings.headers)["OpenAI-Beta"])!==null&&i!==void 0||(d["OpenAI-Beta"]="assistants=v1"),o.maxMessages=1,o.shouldFetchHistory&&o.sessionId&&(o.fetchHistory=o.fetchHistoryFunc.bind(Qt(o))),o}return M(t,[{key:"fetchHistoryFunc",value:function(){var n=D(_().mark(function i(){var o=this,a;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return setTimeout(function(){return o.deepChat.disableSubmitButton()},2),l.prev=1,l.next=4,this.getThreadMessages(this.sessionId,!0);case 4:return a=l.sent,l.abrupt("return",(this.deepChat.disableSubmitButton(!1),a.reverse()));case 8:return l.prev=8,l.t0=l.catch(1),l.abrupt("return",[{error:"failed to fetch thread history"}]);case 11:case"end":return l.stop()}},i,this,[[1,8]])}));function r(){return n.apply(this,arguments)}return r}()},{key:"processMessage",value:function(r,i){var o=this.totalMessagesMaxCharLength||-1;return{content:_f.getCharacterLimitMessages(r,o)[0].text||"",role:"user",file_ids:i}}},{key:"createNewThreadMessages",value:function(r,i,o){var a=JSON.parse(JSON.stringify(r)),s=this.processMessage(i,o);return a.thread={messages:[s]},a}},{key:"callService",value:function(r,i,o){if(this.sessionId){this.url="".concat(t.THREAD_PREFIX,"/").concat(this.sessionId,"/messages");var a=this.processMessage(i,o);et.request(this,a,r)}else{this.url="".concat(t.THREAD_PREFIX,"/runs");var s=this.createNewThreadMessages(this.rawBody,i,o);et.request(this,s,r)}this.messages=r}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a,s){var l,c,u;return _().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.requestSettings){f.next=2;break}throw new Error("Request settings have not been set up");case 2:if(!((l=(c=this.rawBody).assistant_id)!==null&&l!==void 0)){f.next=6;break}f.next=12;break;case 6:if(f.t0=this.config.assistant_id,f.t0){f.next=11;break}return f.next=10,this.createNewAssistant();case 10:f.t0=f.sent;case 11:c.assistant_id=f.t0;case 12:if(this.searchedForThreadId||this.searchPreviousMessagesForThreadId(o.messages),!s){f.next=19;break}return f.next=16,Hm.storeFiles(this,o,s);case 16:f.t1=f.sent,f.next=20;break;case 19:f.t1=void 0;case 20:u=f.t1,this.requestSettings.method="POST",this.callService(o,a,u);case 22:case"end":return f.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"createNewAssistant",value:function(){var n=D(_().mark(function i(){var o;return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,this.url=t.NEW_ASSISTANT_URL,s.next=4,Tt.directFetch(this,JSON.parse(JSON.stringify(this.newAssistantDetails)),"POST");case 4:return o=s.sent,s.abrupt("return",(this.config.assistant_id=o.id,this.config.assistant_id));case 8:s.prev=8,s.t0=s.catch(0),console.error(s.t0),console.error("Failed to create a new assistant");case 11:case"end":return s.stop()}},i,this,[[0,8]])}));function r(){return n.apply(this,arguments)}return r}()},{key:"searchPreviousMessagesForThreadId",value:function(r){var i=r.find(function(o){return o._sessionId});i&&(this.sessionId=i._sessionId),this.searchedForThreadId=!0}},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){var a,s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!o.error){u.next=2;break}throw o.error.message;case 2:return u.next=4,this.assignThreadAndRun(o);case 4:return s="".concat(t.THREAD_PREFIX,"/").concat(this.sessionId,"/runs/").concat(this.run_id),l={method:"GET",headers:(a=this.requestSettings)==null?void 0:a.headers},u.abrupt("return",(et.executePollRequest(this,s,l,this.messages),{makingAnotherRequest:!0}));case 6:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"assignThreadAndRun",value:function(){var n=D(_().mark(function i(o){var a;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.sessionId){l.next=8;break}return this.url="".concat(t.THREAD_PREFIX,"/").concat(this.sessionId,"/runs"),l.next=4,Tt.directFetch(this,JSON.parse(JSON.stringify(this.rawBody)),"POST");case 4:a=l.sent,this.run_id=a.id,l.next=9;break;case 8:this.sessionId=o.thread_id,this.run_id=o.id,this.messages&&(this.messages.messages[this.messages.messages.length-1]._sessionId=this.sessionId);case 9:case"end":return l.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"getThreadMessages",value:function(){var n=D(_().mark(function i(o){var a=this,s,l,c,u,d,f=arguments;return _().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return s=f.length>1&&f[1]!==void 0?f[1]:!1,this.url="".concat(t.THREAD_PREFIX,"/").concat(o,"/messages"),p.next=4,Tt.directFetch(this,{},"GET");case 4:if(u=p.sent,p.t0=!s&&this.deepChat.responseInterceptor,!p.t0){p.next=10;break}return p.next=9,(c=(l=this.deepChat).responseInterceptor)==null?void 0:c.call(l,u);case 9:u=p.sent;case 10:return d=(s?u.data:[u.data[0]]).map(function(){var m=D(_().mark(function y(g){var v;return _().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return v=g.content.find(function(C){return!!C.text||!!C.image_file}),E.next=3,Hm.getFilesAndText(a,g,v);case 3:return E.abrupt("return",E.sent);case 4:case"end":return E.stop()}},y)}));return function(y){return m.apply(this,arguments)}}()),p.abrupt("return",Promise.all(d));case 12:case"end":return p.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"extractPollResultData",value:function(){var n=D(_().mark(function i(o){var a,s,l,c,u,d,f,h,p,m,y;return _().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(c=o.status,u=o.required_action,!(c==="queued"||c==="in_progress")){v.next=3;break}return v.abrupt("return",{timeoutMS:t.POLLING_TIMEOUT_MS});case 3:if(!(c==="completed"&&this.messages)){v.next=11;break}return v.next=6,this.getThreadMessages(o.thread_id);case 6:return d=v.sent,f=d[0],h=f.text,p=f.files,v.abrupt("return",{text:h,_sessionId:this.sessionId,files:p});case 11:if(m=(a=u==null?void 0:u.submit_tool_outputs)==null?void 0:a.tool_calls,!(c==="requires_action"&&m)){v.next=22;break}return v.next=15,this.handleTools(m);case 15:return y=v.sent,v.next=18,(l=(s=this.deepChat).responseInterceptor)==null?void 0:l.call(s,y);case 18:if(v.t0=v.sent,v.t0){v.next=21;break}v.t0=y;case 21:return v.abrupt("return",v.t0);case 22:throw Error("Thread run status: ".concat(c));case 23:case"end":return v.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"handleTools",value:function(){var n=D(_().mark(function i(o){var a,s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this._functionHandler){u.next=2;break}throw Error("Please define the `function_handler` property inside the [openAI](https://deepchat.dev/docs/directConnection/openAI#Assistant) object.");case 2:return a=o.map(function(d){return{name:d.function.name,arguments:d.function.arguments}}),u.next=5,this._functionHandler(a);case 5:if(s=u.sent,!(!Array.isArray(s)||s.find(function(d){return typeof d!="string"})||o.length!==s.length)){u.next=8;break}throw Error("Response must contain an array of strings for each individual function/tool_call, see https://deepchat.dev/docs/directConnection/OpenAI/#assistant-functions.");case 8:return l=s.map(function(d,f){return{tool_call_id:o[f].id,output:d}}),this.url="".concat(t.THREAD_PREFIX,"/").concat(this.sessionId,"/runs/").concat(this.run_id,"/submit_tool_outputs"),u.next=12,Tt.directFetch(this,{tool_outputs:l},"POST");case 12:return u.abrupt("return",{timeoutMS:t.POLLING_TIMEOUT_MS});case 13:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}($t);Kl.THREAD_PREFIX="https://api.openai.com/v1/threads";Kl.NEW_ASSISTANT_URL="https://api.openai.com/v1/assistants";Kl.POLLING_TIMEOUT_MS=800;var cB=Kl,Gl=function(e){pe(t,e);function t(n){var r;T(this,t);var i,o=n.directConnection,a=o==null?void 0:o.openAI,s={images:{files:{acceptedFormats:".png",maxNumberOfFiles:2}}};r=he(this,t,[n,Tt.buildKeyVerificationDetails(),Tt.buildHeaders,a,s]),r.insertKeyPlaceholderText="OpenAI API Key",r.keyHelpUrl="https://platform.openai.com/account/api-keys",r.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>OpenAI DALL·E</b></div>
    <p><b>Insert text</b> to generate an image.</p>
    <p><b>Upload 1</b> PNG image to generate its variation and optionally insert text to specify the change.</p>
    <p><b>Upload 2</b> PNG images where the second is a copy of the first with a transparent area where the edit should
      take place and text to specify the edit.</p>
    <p>Click <a href="https://platform.openai.com/docs/guides/images/introduction">here</a> for more info.</p>`,r.url="",r.permittedErrorPrefixes=["Incorrect","Invalid input image"];var l=(i=o==null?void 0:o.openAI)==null?void 0:i.images;if(r.camera){var c=fe(l)=="object"&&l.size?Number.parseInt(l.size):1024;r.camera.files={dimensions:{width:c,height:c}}}return fe(l)=="object"&&Object.assign(r.rawBody,l),r.canSendMessage=t.canFileSendMessage,r}return M(t,[{key:"preprocessBody",value:function(r,i){var o=JSON.parse(JSON.stringify(r));return i&&i!==""&&(o.prompt=i),o}},{key:"callApiWithImage",value:function(r,i,o){var a,s,l,c=(s=(a=i[i.length-1])==null?void 0:a.text)==null?void 0:s.trim();if(o[1]||c&&c!==""){this.url=t.IMAGE_EDIT_URL;var u=this.preprocessBody(this.rawBody,c);l=t.createFormDataBody(u,o[0],o[1])}else this.url=t.IMAGE_VARIATIONS_URL,l=t.createFormDataBody(this.rawBody,o[0]);we.tempRemoveContentHeader(this.requestSettings,et.request.bind(this,this,l,r),!1)}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a,s){var l,c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if((l=this.requestSettings)!=null&&l.headers){d.next=2;break}throw new Error("Request settings have not been set up");case 2:if(!(s!=null&&s[0])){d.next=6;break}this.callApiWithImage(o,a,s),d.next=11;break;case 6:if(this.requestSettings){d.next=8;break}throw new Error("Request settings have not been set up");case 8:this.url=t.IMAGE_GENERATION_URL,c=this.preprocessBody(this.rawBody,a[a.length-1].text),et.request(this,c,o);case 11:case"end":return d.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.error){s.next=2;break}throw o.error.message;case 2:return s.abrupt("return",{files:o.data.map(function(l){return l.url?{src:l.url,type:"image"}:{src:"".concat(fa).concat(l.b64_json),type:"image"}})});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}],[{key:"canFileSendMessage",value:function(r,i){return!!(i!=null&&i[0])||!!(r&&r.trim()!=="")}},{key:"createFormDataBody",value:function(r,i,o){var a=new FormData;return a.append("image",i),o&&a.append("mask",o),Object.keys(r).forEach(function(s){a.append(s,String(r[s]))}),a}}]),t}($t);Gl.IMAGE_GENERATION_URL="https://api.openai.com/v1/images/generations";Gl.IMAGE_VARIATIONS_URL="https://api.openai.com/v1/images/variations";Gl.IMAGE_EDIT_URL="https://api.openai.com/v1/images/edits";var uB=Gl,dB=function(e){pe(t,e);function t(n){var r,i,o;T(this,t);var a,s,l,c,u=JSON.parse(JSON.stringify(n.directConnection)),d=u.openAI;o=he(this,t,[n,Tt.buildKeyVerificationDetails(),Tt.buildHeaders,d]),o.insertKeyPlaceholderText="OpenAI API Key",o.keyHelpUrl="https://platform.openai.com/account/api-keys",o.url="https://api.openai.com/v1/chat/completions",o.permittedErrorPrefixes=["Incorrect"],o.asyncCallInProgress=!1,o._systemMessage=t.generateSystemMessage("You are a helpful assistant.");var f=(a=u.openAI)==null?void 0:a.chat;if(fe(f)=="object"){f.system_prompt&&(o._systemMessage=t.generateSystemMessage(f.system_prompt));var h=(l=(s=n.directConnection)==null?void 0:s.openAI)==null?void 0:l.chat,p=h.function_handler;p&&(o._functionHandler=p),o.cleanConfig(f),Object.assign(o.rawBody,f)}return(r=o.maxMessages)!==null&&r!==void 0||(o.maxMessages=-1),(i=(c=o.rawBody).model)!==null&&i!==void 0||(c.model="gpt-3.5-turbo"),o}return M(t,[{key:"cleanConfig",value:function(r){delete r.system_prompt,delete r.function_handler}},{key:"preprocessBody",value:function(r,i){var o,a=JSON.parse(JSON.stringify(r)),s=_f.getCharacterLimitMessages(i,this.totalMessagesMaxCharLength?this.totalMessagesMaxCharLength-this._systemMessage.content.length:-1).map(function(l){return{content:t.getContent(l),role:l.role===_e.USER_ROLE?"user":"assistant"}});return i.find(function(l){return l.files&&l.files.length>0})&&((o=a.max_tokens)!==null&&o!==void 0||(a.max_tokens=300)),a.messages=[this._systemMessage].concat(Q0(s)),a}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a){var s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.requestSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:s=this.preprocessBody(this.rawBody,a),l=this.deepChat.stream,l&&(fe(l)!="object"||!l.simulation)||s.stream?(s.stream=!0,St.request(this,s,o)):et.request(this,s,o);case 4:case"end":return u.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o,a,s){var l,c,u,d;return _().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!o.error){h.next=2;break}throw o.error.message;case 2:return h.abrupt("return",(c=(l=o.choices)==null?void 0:l[0])!=null&&c.delta?this.extractStreamResult(o.choices[0],a,s):(d=(u=o.choices)==null?void 0:u[0])!=null&&d.message?o.choices[0].message.tool_calls?this.handleTools(o.choices[0].message,a,s):{text:o.choices[0].message.content}:{text:""});case 3:case"end":return h.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"extractStreamResult",value:function(){var n=D(_().mark(function i(o,a,s){var l=this,c,u,d;return _().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(c=o.delta,u=o.finish_reason,u!=="tool_calls"){h.next=7;break}return this.asyncCallInProgress=!0,d={tool_calls:this._streamToolCalls},h.abrupt("return",(this._streamToolCalls=void 0,this.handleTools(d,a,s)));case 7:c!=null&&c.tool_calls&&(this._streamToolCalls?c.tool_calls.forEach(function(p,m){l._streamToolCalls&&(l._streamToolCalls[m].function.arguments+=p.function.arguments)}):this._streamToolCalls=c.tool_calls);case 8:return h.abrupt("return",{text:(c==null?void 0:c.content)||""});case 9:case"end":return h.stop()}},i,this)}));function r(i,o,a){return n.apply(this,arguments)}return r}()},{key:"handleTools",value:function(){var n=D(_().mark(function i(o,a,s){var l,c,u,d,f,h,p,m,y,g;return _().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!o.tool_calls||!a||!s||!this._functionHandler)){b.next=2;break}throw Error("Please define the `function_handler` property inside the [openAI](https://deepchat.dev/docs/directConnection/openAI#Chat) object.");case 2:return h=JSON.parse(JSON.stringify(s)),p=o.tool_calls.map(function(E){return{name:E.function.name,arguments:E.function.arguments}}),b.next=6,(l=this._functionHandler)==null?void 0:l.call(this,p);case 6:if(m=b.sent,!m.text){b.next=15;break}return y={text:m.text},b.next=11,(u=(c=this.deepChat).responseInterceptor)==null?void 0:u.call(c,y);case 11:if(b.t0=b.sent,b.t0){b.next=14;break}b.t0=y;case 14:return b.abrupt("return",b.t0);case 15:if(h.messages.push({tool_calls:o.tool_calls,role:"assistant",content:null}),!(Array.isArray(m)&&!m.find(function(E){return typeof E!="string"})||p.length===m.length)){b.next=35;break}return m.forEach(function(E,C){var x,O=(x=o.tool_calls)==null?void 0:x[C];h==null||h.messages.push({role:"tool",tool_call_id:O==null?void 0:O.id,name:O==null?void 0:O.function.name,content:E.response})}),delete h.tools,delete h.tool_choice,delete h.stream,b.prev=17,b.next=20,a==null?void 0:a(h).then(function(E){return we.processResponseByType(E)});case 20:return g=b.sent,b.next=23,(f=(d=this.deepChat).responseInterceptor)==null?void 0:f.call(d,g);case 23:if(b.t1=b.sent,b.t1){b.next=26;break}b.t1=g;case 26:if(g=b.t1,!g.error){b.next=29;break}throw g.error.message;case 29:return b.abrupt("return",{text:g.choices[0].message.content||""});case 32:throw b.prev=32,b.t2=b.catch(17),this.asyncCallInProgress=!1,b.t2;case 35:throw Error("Response object must either be {response: string}[] for each individual function or {text: string} for a direct response, see https://deepchat.dev/docs/directConnection/OpenAI#FunctionHandler.");case 36:case"end":return b.stop()}},i,this,[[17,32]])}));function r(i,o,a){return n.apply(this,arguments)}return r}()}],[{key:"generateSystemMessage",value:function(r){return{role:"system",content:r}}},{key:"getContent",value:function(r){if(r.files&&r.files.length>0){var i=r.files.map(function(o){return{type:"image_url",image_url:{url:o.src}}});return r.text&&r.text.trim().length>0&&i.unshift({type:"text",text:r.text}),i}return r.text}}]),t}($t),fB=function(e){pe(t,e);function t(n){var r,i;T(this,t);var o,a=JSON.parse(JSON.stringify(n.directConnection)),s=(o=a.cohere)==null?void 0:o.chat,l=a.cohere;return i=he(this,t,[n,"https://api.cohere.ai/v1/chat","Ask me anything!",s,l]),fe(s)=="object"&&Object.assign(i.rawBody,s),(r=i.maxMessages)!==null&&r!==void 0||(i.maxMessages=-1),i}return M(t,[{key:"preprocessBody",value:function(r,i){var o=JSON.parse(JSON.stringify(r)),a=i.filter(function(s){return s.text});return o.query=a[a.length-1].text,o.chat_history=a.slice(0,a.length-1).map(function(s){return{text:s.text,user_name:s.role==="ai"?"CHATBOT":"USER"}}),o}},{key:"callServiceAPI",value:function(){var n=D(_().mark(function i(o,a){var s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.requestSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:s=this.preprocessBody(this.rawBody,a),et.request(this,s,o);case 4:case"end":return c.stop()}},i,this)}));function r(i,o){return n.apply(this,arguments)}return r}()},{key:"extractResultData",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.message){s.next=2;break}throw o.message;case 2:return s.abrupt("return",{text:o.text});case 3:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()}]),t}(Cf),hB=function(){function e(){T(this,e)}return M(e,null,[{key:"create",value:function(n){var r=n.directConnection,i=n.request,o=n.demo,a=n.webModel;if(a)return new wf(n);if(r){if(r.openAI)return r.openAI.images?new uB(n):r.openAI.speechToText?new nB(n):r.openAI.textToSpeech?new tB(n):r.openAI.assistant?new cB(n):new dB(n);if(r.assemblyAI)return new oB(n);if(r.cohere)return r.cohere.textGeneration?new QF(n):r.cohere.summarization?new eB(n):new fB(n);if(r.huggingFace)return r.huggingFace.textGeneration?new VF(n):r.huggingFace.summarization?new KF(n):r.huggingFace.translation?new JF(n):r.huggingFace.fillMask?new XF(n):r.huggingFace.questionAnswer?new WF(n):r.huggingFace.audioSpeechRecognition?new zF(n):r.huggingFace.audioClassification?new jF(n):r.huggingFace.imageClassification?new $F(n):new GF(n);if(r.azure){if(r.azure.speechToText)return new sB(n);if(r.azure.textToSpeech)return new aB(n);if(r.azure.summarization)return new iB(n);if(r.azure.translation)return new lB(n)}if(r.stabilityAI)return r.stabilityAI.imageToImage?new YF(n):r.stabilityAI.imageToImageUpscale?new HF(n):r.stabilityAI.imageToImageMasking?new qF(n):new ZF(n)}return i?new js(n):new js(n,void 0,o||!0)}}]),e}(),R1=function(){function e(){T(this,e)}return M(e,null,[{key:"appendStyleSheetToHead",value:function(){var n=document.getElementsByTagName("head")[0];if(!Array.from(n.getElementsByTagName("link")).some(function(i){return i.getAttribute("href")===e.FONT_URL})){var r=document.createElement("link");r.rel="stylesheet",r.href=e.FONT_URL,n.appendChild(r)}}}]),e}();R1.FONT_URL="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap";var pB=R1,P1=M(function e(){T(this,e)});P1.attibutes={string:function(t){return t},number:function(t){return parseFloat(t)},boolean:function(t){return t==="true"},object:function(t){return JSON.parse(t)},array:function(t){return JSON.parse(t)},function:function(t){return new Function("return ".concat(t))()}};function Ae(e){return function(t,n){Object.defineProperty(t,n,{});var r=t.constructor,i=n.toLocaleLowerCase();r._attributes_[i]=P1.attibutes[e],r._attributeToProperty_[i]=n}}var mB=function(){function e(){T(this,e)}return M(e,null,[{key:"colorToHex",value:function(n){var r=document.createElement("div");return r.style.color=n,document.body.appendChild(r),"#".concat(window.getComputedStyle(r).color.match(/\d+/g).map(function(i){return parseInt(i).toString(16).padStart(2,"0")}).join(""))}},{key:"set",value:function(n,r){var i,o,a,s;if((o=(i=r==null?void 0:r.loading)==null?void 0:i.bubble)!=null&&o.color){var l=e.colorToHex((s=(a=r==null?void 0:r.loading)==null?void 0:a.bubble)==null?void 0:s.color);n.style.setProperty("--message-dots-color",l),n.style.setProperty("--message-dots-color-fade","".concat(l,"33"))}else n.style.setProperty("--message-dots-color","#848484"),n.style.setProperty("--message-dots-color-fade","#55555533")}}]),e}(),gB=function(){function e(t,n,r){T(this,e),this._isDisplayed=!1,t?(this._elementRef=this.createIntroPanelWithChild(t,r),this._isDisplayed=!0):n&&(this._elementRef=this.createInternalIntroPanel(n,r),this._isDisplayed=!0)}return M(e,[{key:"createIntroPanelWithChild",value:function(n,r){var i=e.createIntroPanel(r);return n.style.display==="none"&&(n.style.display="block"),i.appendChild(n),i}},{key:"createInternalIntroPanel",value:function(n,r){var i=e.createIntroPanel(r);return i.id="internal-intro-panel",i.innerHTML=n,i}},{key:"hide",value:function(){this._isDisplayed&&this._elementRef&&(this._elementRef.style.display="none",this._isDisplayed=!1)}},{key:"display",value:function(){!this._isDisplayed&&this._elementRef&&(this._elementRef.style.display="",this._isDisplayed=!0)}}],[{key:"createIntroPanel",value:function(n){var r=document.createElement("div");return r.classList.add("intro-panel"),Object.assign(r.style,n),r}}]),e}(),vB=function(){function e(){T(this,e)}return M(e,null,[{key:"getText",value:function(n,r){var i;if(!n.directConnection&&!n.request&&!n.webModel&&!n.demo)return`Connect to any API using the [request](https://deepchat.dev/docs/connect#Request)
        property or a popular service via
        [directConnection](https://deepchat.dev/docs/directConnection/#directConnection).
        
 Host AI entirely on your browser via a [webModel](https://deepchat.dev/docs/webModel).
        
 To get started checkout the [Start](https://deepchat.dev/start) page and
        live code [examples](https://deepchat.dev/examples/frameworks).
        
 To remove this message set the [demo](https://deepchat.dev/docs/demo#demo) property to true.`;if(n.directConnection){if(!r.isDirectConnection())return`Please define a valid service inside
          the [directConnection](https://deepchat.dev/docs/directConnection/#directConnection) object.`;var o=(i=n.directConnection.openAI)==null?void 0:i.chat;if(fe(o)=="object"&&o.tools&&!o.function_handler)return"Please define the `function_handler` property inside the openAI [chat](https://deepchat.dev/docs/directConnection/openAI#Chat) object."}else if(n.request&&!n.request.url&&!n.request.handler)return"Please define a `url` or a `handler` property inside the [request](https://deepchat.dev/docs/connect#Request) object.";return null}}]),e}(),yB=`<?xml version="1.0" encoding="iso-8859-1"?>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="50 30 420 450" xml:space="preserve">
<g filter="brightness(0) saturate(100%) invert(16%) sepia(0%) saturate(1942%) hue-rotate(215deg) brightness(99%) contrast(93%)">
	<g>
		<path d="M447.933,103.629c-0.034-3.076-1.224-6.09-3.485-8.352L352.683,3.511c-0.004-0.004-0.007-0.005-0.011-0.008
			C350.505,1.338,347.511,0,344.206,0H89.278C75.361,0,64.04,11.32,64.04,25.237v461.525c0,13.916,11.32,25.237,25.237,25.237
			h333.444c13.916,0,25.237-11.32,25.237-25.237V103.753C447.96,103.709,447.937,103.672,447.933,103.629z M356.194,40.931
			l50.834,50.834h-49.572c-0.695,0-1.262-0.567-1.262-1.262V40.931z M423.983,486.763c0,0.695-0.566,1.261-1.261,1.261H89.278
			c-0.695,0-1.261-0.566-1.261-1.261V25.237c0-0.695,0.566-1.261,1.261-1.261h242.94v66.527c0,13.916,11.322,25.239,25.239,25.239
			h66.527V486.763z"/>
	</g>
</g>
<g>
	<g>
		<path d="M362.088,164.014H149.912c-6.62,0-11.988,5.367-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175
			c6.62,0,11.988-5.368,11.988-11.988C374.076,169.381,368.707,164.014,362.088,164.014z"/>
	</g>
</g>
<g>
	<g>
		<path d="M362.088,236.353H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175
			c6.62,0,11.988-5.368,11.988-11.988C374.076,241.721,368.707,236.353,362.088,236.353z"/>
	</g>
</g>
<g>
	<g>
		<path d="M362.088,308.691H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988h212.175
			c6.62,0,11.988-5.367,11.988-11.988C374.076,314.06,368.707,308.691,362.088,308.691z"/>
	</g>
</g>
<g>
	<g>
		<path d="M256,381.031H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988H256
			c6.62,0,11.988-5.367,11.988-11.988C267.988,386.398,262.62,381.031,256,381.031z"/>
	</g>
</g>
</svg>`,bB=function(){function e(){T(this,e)}return M(e,null,[{key:"createImage",value:function(n,r){var i=new Image;return i.src=n.src,xn.scrollDownOnImageLoad(i.src,r),xn.processContent("image",i,i.src,n.name)}},{key:"addNewImageMessage",value:function(){var t=D(_().mark(function r(i,o,a){var s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:s=e.createImage(o,i.elementRef),l=i.createNewMessageElement("",a),l.bubbleElement.appendChild(s),l.bubbleElement.classList.add("image-message"),xn.addMessage(i,l,"image",a);case 2:case"end":return u.stop()}},r)}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"createAudioElement",value:function(n,r){var i=document.createElement("audio");return i.src=n.src,i.classList.add("audio-player"),i.controls=!0,dr.IS_SAFARI&&(i.classList.add("audio-player-safari"),i.classList.add(r===_e.USER_ROLE?"audio-player-safari-right":"audio-player-safari-left")),i}},{key:"addNewAudioMessage",value:function(n,r,i){var o=e.createAudioElement(r,i),a=n.createNewMessageElement("",i);a.bubbleElement.appendChild(o),a.bubbleElement.classList.add("audio-message"),xn.addMessage(n,a,"audio",i)}},{key:"createAnyFile",value:function(n){var r=document.createElement("div");r.classList.add("any-file-message-contents");var i=document.createElement("div");i.classList.add("any-file-message-icon-container");var o=tn.createSVGElement(yB);o.classList.add("any-file-message-icon"),i.appendChild(o);var a=document.createElement("div");return a.classList.add("any-file-message-text"),a.textContent=n.name||xn.DEFAULT_FILE_NAME,r.appendChild(i),r.appendChild(a),xn.processContent("any",r,n.src,a.textContent)}},{key:"addNewAnyFileMessage",value:function(n,r,i){var o=n.createNewMessageElement("",i),a=e.createAnyFile(r);o.bubbleElement.classList.add("any-file-message-bubble"),o.bubbleElement.appendChild(a),xn.addMessage(n,o,"file",i)}},{key:"addMessages",value:function(n,r,i){r.forEach(function(o){var a,s;o.ref&&(o=xn.removeFileRef(o)),o.type==="audio"||(a=o.src)!=null&&a.startsWith("data:audio")?e.addNewAudioMessage(n,o,i):o.type==="image"||(s=o.src)!=null&&s.startsWith("data:image")?e.addNewImageMessage(n,o,i):e.addNewAnyFileMessage(n,o,i)})}}]),e}(),_B=function(e){pe(t,e);function t(n,r,i){var o;T(this,t);var a,s;o=he(this,t,[n]);var l=r.permittedErrorPrefixes,c=r.introPanelMarkUp,u=r.demo;return o._errorMessageOverrides=(a=n.errorMessages)==null?void 0:a.overrides,o._onClearMessages=Bs.onClearMessages.bind(Qt(o),n),o._onError=Bs.onError.bind(Qt(o),n),o._displayLoadingMessage=t.getDisplayLoadingMessage(n,r),o._permittedErrorPrefixes=l,o.addSetupMessageIfNeeded(n,r)||o.populateIntroPanel(i,c,n.introPanelStyle),o.addIntroductoryMessage(n,r),n.initialMessages&&o.populateInitialMessages(n.initialMessages),o._displayServiceErrorMessages=(s=n.errorMessages)==null?void 0:s.displayServiceErrorMessages,n.getMessages=function(){return JSON.parse(JSON.stringify(o.messages))},n.clearMessages=o.clearMessages.bind(Qt(o),r),n.refreshMessages=o.refreshTextMessages.bind(Qt(o)),n.scrollToBottom=en.scrollToBottom.bind(Qt(o),o.elementRef),n._addMessage=function(d,f){o.addNewMessage(Ne(Ne({},d),{},{sendUpdate:!!f}),!f)},r.isWebModel()&&r.setUpMessages(Qt(o)),u&&o.prepareDemo(u),n.textToSpeech&&cs.processConfig(n.textToSpeech,function(d){o.textToSpeech=d}),r.fetchHistory&&o.fetchHistory(r.fetchHistory),o}return M(t,[{key:"prepareDemo",value:function(r){fe(r)=="object"&&(r.response&&(this.customDemoResponse=r.response),r.displayErrors&&(r.displayErrors.default&&this.addNewErrorMessage("",""),r.displayErrors.service&&this.addNewErrorMessage("service",""),r.displayErrors.speechToText&&this.addNewErrorMessage("speechToText","")),r.displayLoadingBubble&&this.addLoadingMessage())}},{key:"addSetupMessageIfNeeded",value:function(r,i){var o=vB.getText(r,i);if(o){var a=this.createAndAppendNewMessageElement(o,_e.AI_ROLE);this.applyCustomStyles(a,_e.AI_ROLE,!1)}return!!o}},{key:"addIntroductoryMessage",value:function(r,i){var o,a;r!=null&&r.shadowRoot&&(this._introMessage=r.introMessage);var s=this._introMessage;if(i!=null&&i.isWebModel()&&((o=s)!==null&&o!==void 0||(s=i.getIntroMessage(s))),s){var l;s!=null&&s.text?l=this.createAndAppendNewMessageElement(s.text,_e.AI_ROLE):s!=null&&s.html&&(l=Fu.add(this,s.html,_e.AI_ROLE,this.messageElementRefs)),l&&(this.applyCustomStyles(l,_e.AI_ROLE,!1,(a=this.messageStyles)==null?void 0:a.intro),l.outerContainer.classList.add("deep-chat-intro"))}}},{key:"removeIntroductoryMessage",value:function(){var r=this.messageElementRefs[0];r.outerContainer.classList.contains("deep-chat-intro")&&(r.outerContainer.remove(),this.messageElementRefs.shift())}},{key:"populateInitialMessages",value:function(r){var i=this;r.forEach(function(o){$r.processInitialMessageFile(o),i.addNewMessage(o,!0)}),setTimeout(function(){return en.scrollToBottom(i.elementRef)},0)}},{key:"fetchHistory",value:function(){var n=D(_().mark(function i(o){var a=this;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,o();case 2:l.sent.forEach(function(c){c.error?a.addNewErrorMessage("service",c.error):a.addNewMessage(c,!0)}),setTimeout(function(){return en.scrollToBottom(a.elementRef)},0);case 4:case"end":return l.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"addNewMessage",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=t.createMessageContent(r),a={status:r.overwrite};if(!r.ignoreText&&o.text!==void 0&&r.text!==null&&(this.addNewTextMessage(o.text,o.role,a),!i&&this.textToSpeech&&o.role!==_e.USER_ROLE&&cs.speak(o.text,this.textToSpeech)),o.files&&Array.isArray(o.files)&&bB.addMessages(this,o.files,o.role),o.html!==void 0&&o.html!==null){var s=Fu.add(this,o.html,o.role,this.messageElementRefs,a);Fs.isElementTemporary(s)&&delete o.html}this.isValidMessageContent(o)&&this.updateStateOnMessage(o,r.overwrite,r.sendUpdate,i)}},{key:"isValidMessageContent",value:function(r){return r.text||r.html||r.files&&r.files.length>0}},{key:"updateStateOnMessage",value:function(r,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;i||this.messages.push(r),o&&this.sendClientUpdate(r,a)}},{key:"removeMessageOnError",value:function(){var r=this.messageElementRefs[this.messageElementRefs.length-1],i=r==null?void 0:r.bubbleElement;(i!=null&&i.classList.contains(qr.MESSAGE_CLASS)&&i.textContent===""||t.isTemporaryElement(r))&&this.removeLastMessage()}},{key:"addNewErrorMessage",value:function(r,i){var o,a,s,l,c;this.removeMessageOnError();var u=t.createBaseElements(),d=u.outerContainer,f=u.bubbleElement;f.classList.add("error-message-text");var h=this.getPermittedMessage(i)||((o=this._errorMessageOverrides)==null?void 0:o[r])||((a=this._errorMessageOverrides)==null?void 0:a.default)||"Error, please try again.";this.renderText(f,h);var p=us.extractParticularSharedStyles(["fontSize","fontFamily"],(s=this.messageStyles)==null?void 0:s.default);us.applyCustomStylesToElements(u,!1,p),us.applyCustomStylesToElements(u,!1,(l=this.messageStyles)==null?void 0:l.error),this.elementRef.appendChild(d),en.scrollToBottom(this.elementRef),this.textToSpeech&&cs.speak(h,this.textToSpeech),(c=this._onError)==null||c.call(this,h)}},{key:"getPermittedMessage",value:function(r){if(r){if(this._displayServiceErrorMessages)return r;if(typeof r=="string"&&this._permittedErrorPrefixes){var i=t.checkPermittedErrorPrefixes(this._permittedErrorPrefixes,r);if(i)return i}else if(Array.isArray(r)&&this._permittedErrorPrefixes)for(var o=0;o<r.length;o+=1){var a=t.checkPermittedErrorPrefixes(this._permittedErrorPrefixes,r[o]);if(a)return a}}}},{key:"removeError",value:function(){this.isLastMessageError()&&_e.getLastMessageElement(this.elementRef).remove()}},{key:"addLoadingMessage",value:function(){var r;if(this._displayLoadingMessage){var i=this.createMessageElements("",_e.AI_ROLE),o=i.outerContainer,a=i.bubbleElement;a.classList.add("loading-message-text");var s=document.createElement("div");s.classList.add("dots-flashing"),a.appendChild(s),this.applyCustomStyles(i,_e.AI_ROLE,!1,(r=this.messageStyles)==null?void 0:r.loading),mB.set(a,this.messageStyles),this.elementRef.appendChild(o),en.scrollToBottom(this.elementRef)}}},{key:"populateIntroPanel",value:function(r,i,o){(r||i)&&(this._introPanel=new gB(r,i,o),this._introPanel._elementRef&&(Ko.apply(this,this._introPanel._elementRef),this.elementRef.appendChild(this._introPanel._elementRef)))}},{key:"addMultipleFiles",value:function(){var n=D(_().mark(function i(o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.all((o||[]).map(function(l){return new Promise(function(c){if(!l.type||l.type==="any"){var u=l.file.name||xn.DEFAULT_FILE_NAME;c({name:u,type:"any",ref:l.file})}else{var d=new FileReader;d.readAsDataURL(l.file),d.onload=function(){c({src:d.result,type:l.type,ref:l.file})}}})})));case 1:case"end":return s.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"clearMessages",value:function(r,i){var o,a,s=[];this.messageElementRefs.forEach(function(l){var c=l.bubbleElement.classList;c.contains("loading-message-text")||c.contains(qr.MESSAGE_CLASS)?s.push(l):l.outerContainer.remove()}),Array.from(this.elementRef.children).forEach(function(l){var c,u=(c=l.children[0])==null?void 0:c.children[0];u!=null&&u.classList.contains("error-message-text")&&l.remove()}),this.messageElementRefs=s,i!==!1&&((o=this._introPanel)!=null&&o._elementRef&&this._introPanel.display(),this.addIntroductoryMessage()),this.messages.splice(0,this.messages.length),this.textElementsToText.splice(0,this.textElementsToText.length),(a=this._onClearMessages)==null||a.call(this),delete r.sessionId}}],[{key:"getDisplayLoadingMessage",value:function(r,i){var o;return i.websocket?!1:(o=r.displayLoadingBubble)!==null&&o!==void 0?o:!0}},{key:"checkPermittedErrorPrefixes",value:function(r,i){for(var o=0;o<r.length;o+=1)if(i.startsWith(r[o]))return i}}]),t}(E1),ha=function(){function e(){T(this,e)}return M(e,null,[{key:"adjustInputPadding",value:function(n,r){r["inside-left"].length>0&&n.classList.add("text-input-inner-left-adjustment"),r["inside-right"].length>0&&n.classList.add("text-input-inner-right-adjustment")}},{key:"adjustForOutsideButton",value:function(n,r,i){i["outside-right"].length===0&&i["outside-left"].length>0?(n[0].classList.add(e.INPUT_OUTSIDE_LEFT_SMALL_ADJUSTMENT_CLASS),r.classList.add(e.INPUT_OUTSIDE_LEFT_SMALL_ADJUSTMENT_CLASS)):i["outside-left"].length===0&&i["outside-right"].length>0&&(n[3].classList.add(e.INPUT_OUTSIDE_RIGHT_SMALL_ADJUSTMENT_CLASS),r.classList.add(e.INPUT_OUTSIDE_RIGHT_SMALL_ADJUSTMENT_CLASS))}},{key:"adjustOutsideSubmit",value:function(n,r,i){if(!(i["inside-left"].length>0||i["inside-right"].length>0)){if(i["outside-right"].length===0&&i["outside-left"].length>0)return n[0].classList.add(e.INPUT_OUTSIDE_LEFT_ADJUSTMENT_CLASS),r.classList.add(e.INPUT_OUTSIDE_LEFT_ADJUSTMENT_CLASS),i["outside-left"].map(function(o){return o.button.elementRef.classList.add("submit-button-enlarged")});if(i["outside-left"].length===0&&i["outside-right"].length>0)return n[3].classList.add(e.INPUT_OUTSIDE_RIGHT_ADJUSTMENT_CLASS),r.classList.add(e.INPUT_OUTSIDE_RIGHT_ADJUSTMENT_CLASS),i["outside-right"].map(function(o){return o.button.elementRef.classList.add("submit-button-enlarged")})}}},{key:"set",value:function(n,r,i,o){e.adjustOutsideSubmit(r,i,o)||e.adjustForOutsideButton(r,i,o),e.adjustInputPadding(n,o)}}]),e}();ha.INPUT_OUTSIDE_LEFT_ADJUSTMENT_CLASS="text-input-container-left-adjustment";ha.INPUT_OUTSIDE_RIGHT_ADJUSTMENT_CLASS="text-input-container-right-adjustment";ha.INPUT_OUTSIDE_LEFT_SMALL_ADJUSTMENT_CLASS="text-input-container-left-small-adjustment";ha.INPUT_OUTSIDE_RIGHT_SMALL_ADJUSTMENT_CLASS="text-input-container-right-small-adjustment";var SB=ha,$s=function(){function e(){T(this,e)}return M(e,null,[{key:"create",value:function(){return Array.from({length:4}).map(function(n,r){var i=document.createElement("div");return i.classList.add("input-button-container"),(r===0||r===3)&&i.classList.add("outer-button-container"),(r===1||r===2)&&i.classList.add("inner-button-container"),i})}},{key:"add",value:function(n,r){n.insertBefore(r[1],n.firstChild),n.insertBefore(r[0],n.firstChild),n.appendChild(r[2]),n.appendChild(r[3])}},{key:"getContainerIndex",value:function(n){return n==="outside-left"?0:n==="inside-left"?1:n==="inside-right"?2:3}},{key:"addButton",value:function(n,r,i){r.classList.add(i);var o=e.getContainerIndex(i);n[o].appendChild(r),o===3&&r.classList.add("outside-right")}}]),e}(),qm=["camera","gifs","images","audio","mixedFiles","submit","microphone"],Ri=function(){function e(){T(this,e)}return M(e,null,[{key:"createTextElement",value:function(n){var r=document.createElement("div");return r.classList.add("text-button"),r.innerText=n,r}},{key:"createElement",value:function(n,r){return r?e.createTextElement(n):tn.createSVGElement(n)}},{key:"createCustomElement",value:function(n,r){var i,o,a,s,l=r==null?void 0:r[n];if((i=l==null?void 0:l.text)!=null&&i.content)return e.createElement((o=l==null?void 0:l.text)==null?void 0:o.content,!0);if((a=l==null?void 0:l.svg)!=null&&a.content)return e.createElement((s=l==null?void 0:l.svg)==null?void 0:s.content,!1)}},{key:"processElement",value:function(n,r){r!=null&&r.classList.contains("text-button")||n.classList.add("input-button-svg")}},{key:"createSpecificStateElement",value:function(n,r,i){var o;return i&&(o=e.createCustomElement(r,i)),e.processElement(n,o),o}},{key:"create",value:function(n,r,i){var o={};if(!i)return e.processElement(n),o;var a=e.createSpecificStateElement(n,r[0],i);o[r[0]]=a;var s=a;return r.slice(1).forEach(function(l){s=e.createCustomElement(l,i)||s,o[l]=s}),o}}]),e}(),wB=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <path d="M16 0c-8.836 0-16 7.163-16 16s7.163 16 16 16c8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 30.032c-7.72 0-14-6.312-14-14.032s6.28-14 14-14 14 6.28 14 14-6.28 14.032-14 14.032zM23 15h-6v-6c0-0.552-0.448-1-1-1s-1 0.448-1 1v6h-6c-0.552 0-1 0.448-1 1s0.448 1 1 1h6v6c0 0.552 0.448 1 1 1s1-0.448 1-1v-6h6c0.552 0 1-0.448 1-1s-0.448-1-1-1z"></path>
</svg>`,kr=function(){function e(){T(this,e)}return M(e,null,[{key:"unsetAllCSS",value:function(n,r){var i,o;r.container&&xt.unsetAllCSSMouseStates(n,r.container),(i=r.svg)!=null&&i.styles&&xt.unsetAllCSSMouseStates(n.children[0],r.svg.styles),(o=r.text)!=null&&o.styles&&xt.unsetAllCSSMouseStates(n.children[0],r.text.styles)}},{key:"unsetActionCSS",value:function(n,r){var i,o;r.container&&xt.unsetActivityCSSMouseStates(n,r.container),(i=r.svg)!=null&&i.styles&&xt.unsetActivityCSSMouseStates(n.children[0],r.svg.styles),(o=r.text)!=null&&o.styles&&xt.unsetActivityCSSMouseStates(n.children[0],r.text.styles)}},{key:"setElementsCSS",value:function(n,r,i){var o,a,s,l,c;Object.assign(n.style,(o=r.container)==null?void 0:o[i]),Object.assign(n.children[0].style,(s=(a=r.svg)==null?void 0:a.styles)==null?void 0:s[i]),Object.assign(n.children[0].style,(c=(l=r.text)==null?void 0:l.styles)==null?void 0:c[i])}},{key:"setElementCssUpToState",value:function(n,r,i){e.setElementsCSS(n,r,"default"),i!=="default"&&(e.setElementsCSS(n,r,"hover"),i!=="hover"&&e.setElementsCSS(n,r,"click"))}}]),e}(),pa=function(){function e(t,n,r,i){T(this,e),this._mouseState={state:"default"},this.elementRef=t,this._customStyles=r,this.position=n,this.dropupText=i}return M(e,[{key:"buttonMouseLeave",value:function(n){this._mouseState.state="default",n&&(kr.unsetAllCSS(this.elementRef,n),kr.setElementsCSS(this.elementRef,n,"default"))}},{key:"buttonMouseEnter",value:function(n){this._mouseState.state="hover",n&&kr.setElementsCSS(this.elementRef,n,"hover")}},{key:"buttonMouseUp",value:function(n){n&&kr.unsetActionCSS(this.elementRef,n),this.buttonMouseEnter(n)}},{key:"buttonMouseDown",value:function(n){this._mouseState.state="click",n&&kr.setElementsCSS(this.elementRef,n,"click")}},{key:"setEvents",value:function(n){this.elementRef.onmousedown=this.buttonMouseDown.bind(this,n),this.elementRef.onmouseup=this.buttonMouseUp.bind(this,n),this.elementRef.onmouseenter=this.buttonMouseEnter.bind(this,n),this.elementRef.onmouseleave=this.buttonMouseLeave.bind(this,n)}},{key:"unsetCustomStateStyles",value:function(n){if(this._customStyles)for(var r=0;r<n.length;r+=1){var i=n[r],o=i&&this._customStyles[i];o&&kr.unsetActionCSS(this.elementRef,o)}}},{key:"reapplyStateStyle",value:function(n,r){if(this._customStyles){r&&this.unsetCustomStateStyles(r);var i=this._customStyles[n];i&&kr.setElementCssUpToState(this.elementRef,i,this._mouseState.state),this.setEvents(i)}}}]),e}(),zm=function(){function e(){T(this,e)}return M(e,null,[{key:"focusItemWhenOnEdge",value:function(n,r){var i=r?n.children[0]:n.children[n.children.length-1];e.focusSiblingItem(i,n,r,!0)}},{key:"focusSiblingItem",value:function(n,r,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=o?n:n[i?"nextSibling":"previousSibling"];a?(n.dispatchEvent(new MouseEvent("mouseleave")),a.dispatchEvent(new MouseEvent("mouseenter"))):(n.dispatchEvent(new MouseEvent("mouseleave")),e.focusItemWhenOnEdge(r,i))}}]),e}(),EB=function(){function e(){T(this,e)}return M(e,null,[{key:"addItemEvents",value:function(n,r,i,o){d1.add(r,o),r.addEventListener("click",function(){i.click()}),r.addEventListener("mouseenter",function(a){n.highlightedItem=a.target}),r.addEventListener("mouseleave",function(){n.highlightedItem=void 0})}},{key:"createItemText",value:function(n,r){var i=document.createElement("div");return Object.assign(i.style,r),i.classList.add("dropup-menu-item-text"),i.textContent=n||"File",i}},{key:"createItemIcon",value:function(n,r){var i=document.createElement("div");return Object.assign(i.style,r),i.classList.add("dropup-menu-item-icon"),i.appendChild(n.children[0]),i}},{key:"populateItem",value:function(n,r,i,o){var a=n.children[0];a.classList.contains("text-button")?r.appendChild(e.createItemText(a.textContent,o==null?void 0:o.text)):(r.appendChild(e.createItemIcon(n,o==null?void 0:o.iconContainer)),r.appendChild(e.createItemText(i,o==null?void 0:o.text)))}},{key:"createItem",value:function(n,r,i){var o,a=r.elementRef,s=r.dropupText,l=document.createElement("div");Object.assign(l.style,(o=i==null?void 0:i.item)==null?void 0:o.default),e.populateItem(a,l,s,i),l.classList.add("dropup-menu-item");var c=xt.processStateful((i==null?void 0:i.item)||{},{backgroundColor:"#f3f3f3"},{backgroundColor:"#ebebeb"});return e.addItemEvents(n,l,a,c),l}}]),e}(),CB=function(){function e(t,n){var r=this;T(this,e);var i;this._isOpen=!0,this._styles=n,this.elementRef=e.createElement((i=this._styles)==null?void 0:i.container),this.close(),setTimeout(function(){return r.addWindowEvents(t)})}return M(e,[{key:"open",value:function(){this.elementRef.style.display="block",this._isOpen=!0}},{key:"close",value:function(){this._isOpen&&(this.elementRef.style.display="none",this._isOpen=!1)}},{key:"toggle",value:function(){this._isOpen?this.close():this.open()}},{key:"addItem",value:function(n){var r=EB.createItem(this,n,this._styles);this.elementRef.appendChild(r)}},{key:"addWindowEvents",value:function(n){this.clickEvent=this.windowClick.bind(this,n),window.addEventListener("click",this.clickEvent),this.keyDownEvent=this.windowKeyDown.bind(this,n),window.addEventListener("keydown",this.keyDownEvent)}},{key:"windowClick",value:function(n,r){var i;!n.isConnected&&this.clickEvent?window.removeEventListener("click",this.clickEvent):n.parentElement!==((i=r.target.shadowRoot)==null?void 0:i.children[0])&&this.close()}},{key:"windowKeyDown",value:function(n,r){var i,o,a;!n.isConnected&&this.keyDownEvent?window.removeEventListener("keydown",this.keyDownEvent):this._isOpen&&(r.key===_t.ESCAPE?(this.close(),(i=this.highlightedItem)==null||i.dispatchEvent(new MouseEvent("mouseleave"))):r.key===_t.ENTER?((o=this.highlightedItem)==null||o.click(),(a=this.highlightedItem)==null||a.dispatchEvent(new MouseEvent("mouseleave"))):r.key===_t.ARROW_DOWN?zm.focusSiblingItem(this.highlightedItem||this.elementRef.children[this.elementRef.children.length-1],this.elementRef,!0):r.key===_t.ARROW_UP&&zm.focusSiblingItem(this.highlightedItem||this.elementRef.children[0],this.elementRef,!1))}}],[{key:"createElement",value:function(n){var r=document.createElement("div");return r.id="dropup-menu",Object.assign(r.style,n),r}}]),e}(),Vm=function(e){pe(t,e);function t(n,r){var i;T(this,t);var o;i=he(this,t,[t.createButtonElement(),void 0,{styles:(o=r==null?void 0:r.button)==null?void 0:o.styles}]);var a=i.createInnerElements(i._customStyles);return i._menu=new CB(n,r==null?void 0:r.menu),i.addClickEvent(),i.buttonContainer=t.createButtonContainer(),i.elementRef.appendChild(a.styles),i.buttonContainer.appendChild(i.elementRef),i.elementRef.classList.add("dropup-icon","upload-file-button"),i.elementRef.children[0].id="dropup-icon",i.buttonContainer.appendChild(i._menu.elementRef),i.reapplyStateStyle("styles"),i.addContainerEvents(n),i}return M(t,[{key:"createInnerElements",value:function(r){return{styles:this.createInnerElement(t.createSVGIconElement(),"styles",r)}}},{key:"createInnerElement",value:function(r,i,o){return Ri.createSpecificStateElement(this.elementRef,i,o)||r}},{key:"addClickEvent",value:function(){this.elementRef.onclick=this._menu.toggle.bind(this._menu)}},{key:"addItem",value:function(r){this._menu.addItem(r)}},{key:"addContainerEvents",value:function(r){var i=this;r.addEventListener("click",function(o){o.target.classList.contains("dropup-icon")||i._menu.close()})}}],[{key:"createButtonElement",value:function(){var r=document.createElement("div");return r.classList.add("input-button"),r}},{key:"createSVGIconElement",value:function(){return tn.createSVGElement(wB)}},{key:"createButtonContainer",value:function(){var r=document.createElement("div");return r.id="dropup-container",r}},{key:"getPosition",value:function(r,i){var o,a;return(o=i==null?void 0:i.button)!=null&&o.position?(a=i==null?void 0:i.button)==null?void 0:a.position:r["outside-left"].length>0&&r["outside-right"].length===0?"outside-right":"outside-left"}}]),t}(pa),IB=function(){function e(){T(this,e)}return M(e,null,[{key:"addToDropup",value:function(n,r,i,o){var a=new Vm(i,o);qm.forEach(function(l){var c=r["dropup-menu"].findIndex(function(d){return d.buttonType===l}),u=r["dropup-menu"][c];u&&(a.addItem(u.button),r["dropup-menu"].splice(c,1))});var s=Vm.getPosition(r,o);$s.addButton(n,a.buttonContainer,s),r[s].push({})}},{key:"addToSideContainer",value:function(n,r){["inside-left","inside-right","outside-left","outside-right"].forEach(function(i){var o=i;r[o].forEach(function(a){$s.addButton(n,a.button.elementRef,o)})})}},{key:"setPosition",value:function(n,r,i){var o=Ne(Ne({},n[r]),{},{buttonType:r});i.push(o),delete n[r]}},{key:"createPositionsObj",value:function(){return{"dropup-menu":[],"outside-left":[],"inside-left":[],"inside-right":[],"outside-right":[]}}},{key:"generatePositions",value:function(n){var r=e.createPositionsObj();Object.keys(n).forEach(function(o){var a,s=(a=n[o])==null?void 0:a.button.position;s&&e.setPosition(n,o,r[s])}),r["inside-right"].length===0&&n.submit&&e.setPosition(n,"submit",r["inside-right"]),r["outside-right"].length===0&&(n.submit?e.setPosition(n,"submit",r["outside-right"]):n.microphone?e.setPosition(n,"microphone",r["outside-right"]):n.camera&&e.setPosition(n,"camera",r["outside-right"])),n.submit&&e.setPosition(n,"submit",r["outside-left"].length===0?r["outside-left"]:r["inside-right"]),n.microphone&&e.setPosition(n,"microphone",r["outside-left"].length===0?r["outside-left"]:r["inside-right"]);var i=Object.keys(n);return i.length>1||r["dropup-menu"].length>0?qm.forEach(function(o){n[o]&&r["dropup-menu"].push(Ne(Ne({},n[o]),{},{buttonType:o}))}):i.length===1&&e.setPosition(n,i[0],r["outside-right"].length===0?r["outside-right"]:r["outside-left"]),r}},{key:"addButtons",value:function(n,r,i,o){var a=e.generatePositions(r);return e.addToSideContainer(n,a),a["dropup-menu"].length>0&&e.addToDropup(n,a,i,o),a}}]),e}(),xB=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<title>file</title>
<path d="M20 10.9696L11.9628 18.5497C10.9782 19.4783 9.64274 20 8.25028 20C6.85782 20 5.52239 19.4783 4.53777 18.5497C3.55315 17.6211 3 16.3616 3 15.0483C3 13.7351 3.55315 12.4756 4.53777 11.547L12.575 3.96687C13.2314 3.34779 14.1217 3 15.05 3C15.9783 3 16.8686 3.34779 17.525 3.96687C18.1814 4.58595 18.5502 5.4256 18.5502 6.30111C18.5502 7.17662 18.1814 8.01628 17.525 8.63535L9.47904 16.2154C9.15083 16.525 8.70569 16.6989 8.24154 16.6989C7.77738 16.6989 7.33224 16.525 7.00403 16.2154C6.67583 15.9059 6.49144 15.4861 6.49144 15.0483C6.49144 14.6106 6.67583 14.1907 7.00403 13.8812L14.429 6.88674" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,AB=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M20,15.2928932 L20,5.5 C20,4.67157288 19.3284271,4 18.5,4 L5.5,4 C4.67157288,4 4,4.67157288 4,5.5 L4,12.2928932 L7.14644661,9.14644661 C7.34170876,8.95118446 7.65829124,8.95118446 7.85355339,9.14644661 L13.5,14.7928932 L16.1464466,12.1464466 C16.3417088,11.9511845 16.6582912,11.9511845 16.8535534,12.1464466 L20,15.2928932 Z M20,16.7071068 L16.5,13.2071068 L13.8535534,15.8535534 C13.6582912,16.0488155 13.3417088,16.0488155 13.1464466,15.8535534 L7.5,10.2071068 L4,13.7071068 L4,18.5 C4,19.3284271 4.67157288,20 5.5,20 L18.5,20 C19.3284271,20 20,19.3284271 20,18.5 L20,16.7071068 Z M3,5.5 C3,4.11928813 4.11928813,3 5.5,3 L18.5,3 C19.8807119,3 21,4.11928813 21,5.5 L21,18.5 C21,19.8807119 19.8807119,21 18.5,21 L5.5,21 C4.11928813,21 3,19.8807119 3,18.5 L3,5.5 Z M15,6 L17,6 C17.5522847,6 18,6.44771525 18,7 L18,9 C18,9.55228475 17.5522847,10 17,10 L15,10 C14.4477153,10 14,9.55228475 14,9 L14,7 C14,6.44771525 14.4477153,6 15,6 Z M15,7 L15,9 L17,9 L17,7 L15,7 Z"/>
</svg>
`,kB=`<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-49.49 -49.49 593.87 593.87" stroke-width="3.95908" transform="rotate(0)">
  <g stroke-width="0"></g>
  <g stroke-linecap="round" stroke-linejoin="round" stroke-width="0.98977"></g>
  <g>
    <g>
      <g>
        <path d="M163.205,76.413v293.301c-3.434-3.058-7.241-5.867-11.486-8.339c-21.38-12.452-49.663-15.298-77.567-7.846 c-49.038,13.096-80.904,54.519-71.038,92.337c4.019,15.404,14.188,28.221,29.404,37.087c13.553,7.894,29.87,11.933,47.115,11.933 c9.962,0,20.231-1.356,30.447-4.087c42.74-11.406,72.411-44.344,72.807-77.654h0.011v-0.162c0.002-0.166,0-0.331,0-0.496V187.072 l290.971-67.3v178.082c-3.433-3.055-7.238-5.863-11.481-8.334c-21.385-12.452-49.654-15.308-77.567-7.846 c-49.038,13.087-80.904,54.519-71.038,92.356c4.019,15.385,14.183,28.212,29.404,37.067c13.548,7.894,29.875,11.933,47.115,11.933 c9.962,0,20.231-1.356,30.452-4.087c42.74-11.413,72.411-44.346,72.804-77.654h0.004v-0.065c0.003-0.236,0.001-0.469,0-0.704V0 L163.205,76.413z M104.999,471.779c-22.543,6.038-45.942,3.846-62.572-5.846c-10.587-6.163-17.591-14.817-20.255-25.038 c-7.144-27.375,18.452-58.029,57.062-68.346c8.409-2.25,16.938-3.346,25.188-3.346c13.87,0,26.962,3.115,37.389,9.192 c10.587,6.163,17.591,14.817,20.255,25.029c0.809,3.102,1.142,6.248,1.139,9.4v0.321h0.014 C162.99,437.714,139.082,462.678,104.999,471.779z M182.898,166.853V92.067l290.971-67.298v74.784L182.898,166.853z M415.677,399.923c-22.558,6.038-45.942,3.837-62.587-5.846c-10.587-6.163-17.587-14.817-20.25-25.019 c-7.144-27.385,18.452-58.058,57.058-68.365c8.414-2.25,16.942-3.346,25.192-3.346c13.875,0,26.962,3.115,37.385,9.192 c10.596,6.163,17.596,14.817,20.26,25.029v0.01c0.796,3.05,1.124,6.144,1.135,9.244v0.468h0.02 C473.668,365.851,449.763,390.814,415.677,399.923z">
        </path>
      </g>
    </g>
  </g>
</svg>`,TB=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 5.9266752 5.6408391" height="21.31971" width="22.4">
  <g>
    <path d="m 5.2564627,1.548212 c -3.1136005,-0.4796804 -1.5568006,-0.2398402 0,0 z M 2.0001198,2.0922063 c 0.1556781,0 0.2657489,0.020893 0.3917849,0.080366 0.081154,0.038347 0.1153492,0.134065 0.076377,0.2138602 -0.038973,0.07979 -0.1363527,0.1134129 -0.2175069,0.075091 -0.078199,-0.036919 -0.1407455,-0.048792 -0.250655,-0.048792 -0.2260486,0 -0.3921482,0.2042182 -0.3921482,0.4801409 0,0.2761822 0.1663188,0.4810688 0.3921482,0.4810688 0.1117901,0 0.2064255,-0.046133 0.255659,-0.1284198 l 0.00162,-0.00389 V 3.0534032 l -0.098011,1.75e-4 c -0.081844,0 -0.1495979,-0.059305 -0.1612403,-0.1365887 l -0.00175,-0.023683 c 0,-0.08047 0.060311,-0.1470874 0.1389194,-0.1585331 l 0.024085,-0.00195 h 0.2612303 c 0.081842,0 0.149598,0.059305 0.1612404,0.1365891 l 0.00175,0.023683 -3.398e-4,0.3968809 v 0 l -0.00168,0.014211 v 0 l -0.00553,0.023034 v 0 l -0.00532,0.014145 c -0.098178,0.22826 -0.3236506,0.3528713 -0.5706303,0.3528713 -0.4240855,0 -0.7181621,-0.3622714 -0.7181621,-0.8016063 0,-0.4391857 0.2940275,-0.8006848 0.7181621,-0.8006848 z m 1.2034759,0.031275 c 0.081843,0 0.1495977,0.059305 0.1612403,0.1365891 l 0.00175,0.023683 v 1.2211775 c 0,0.088516 -0.07298,0.1602721 -0.1630073,0.1602721 -0.081841,0 -0.1495972,-0.059305 -0.1612397,-0.1365892 L 3.040589,3.5049308 V 2.2837527 c 0,-0.088516 0.07298,-0.1602721 0.1630067,-0.1602714 z m 0.7813442,0 0.5209469,0.00195 c 0.090025,3.048e-4 0.1627543,0.072306 0.1624458,0.1608234 -2.809e-4,0.08047 -0.06083,0.1468798 -0.1394772,0.158066 l -0.024092,0.00195 -0.3575326,-0.0013 v 0.4497782 l 0.2928918,2.27e-4 c 0.081842,0 0.1495979,0.059305 0.1612403,0.136589 l 0.00175,0.023683 c 0,0.080469 -0.06031,0.1470871 -0.1389193,0.1585393 l -0.024092,0.00195 -0.2928919,-2.336e-4 1.563e-4,0.2860316 c 0,0.080471 -0.06031,0.1470873 -0.1389193,0.1585395 l -0.024085,0.00195 c -0.081843,0 -0.1495979,-0.059305 -0.1612403,-0.1365826 l -0.00175,-0.023691 V 2.2841354 c 2.798e-4,-0.08047 0.060829,-0.1468797 0.1394758,-0.1580594 z"/>
    <path d="m 5.0894191,1.0943261 c 0,-0.21918999 -0.177687,-0.39686999 -0.396876,-0.39686999 h -3.43959 c -0.2191879,0 -0.391262,0.1777519 -0.3968759,0.39686999 l -0.027082,3.4379266 c 0.040152,0.2939927 0.4235456,0.409415 0.4235456,0.409415 l 3.4785583,-0.00851 c 0,0 0.3008506,-0.1402998 0.3236271,-0.4201576 0.042911,-0.5272495 0.034693,-1.6106146 0.034693,-3.4186761 z m -4.49792494,0 c 0,-0.36530999 0.29614504,-0.66145999 0.66145894,-0.66145999 h 3.43959 c 0.365314,0 0.66146,0.29615 0.66146,0.66145999 v 3.43959 c 0,0.36532 -0.296146,0.66146 -0.66146,0.66146 h -3.43959 c -0.3653139,0 -0.66145894,-0.29614 -0.66145894,-0.66146 z"/>
  </g>
</svg>
`,MB={images:{id:"upload-images-icon",svgString:AB,dropupText:"Image"},gifs:{id:"upload-gifs-icon",svgString:TB,dropupText:"GIF"},audio:{id:"upload-audio-icon",svgString:kB,dropupText:"Audio"},mixedFiles:{id:"upload-mixed-files-icon",svgString:xB,dropupText:"File"}},xf=function(){function e(t,n,r,i){var o=this;T(this,e),this._attachments=[],this._fileCountLimit=99,this._acceptedFormat="",n.maxNumberOfFiles&&(this._fileCountLimit=n.maxNumberOfFiles),this._toggleContainerDisplay=r,this._fileAttachmentsContainerRef=i,n.acceptedFormats&&(this._acceptedFormat=n.acceptedFormats),setTimeout(function(){o._validationHandler=t._validationHandler})}return M(e,[{key:"attemptAddFile",value:function(n,r){return e.isFileTypeValid(n,this._acceptedFormat)?(this.addAttachmentBasedOnType(n,r,!0),!0):!1}},{key:"addAttachmentBasedOnType",value:function(n,r,i){var o=e.getTypeFromBlob(n);if(o==="image"){var a=e.createImageAttachment(r);this.addFileAttachment(n,"image",a,i)}else if(o==="audio"){var s=zu.createAudioAttachment(r);this.addFileAttachment(n,"audio",s,i)}else{var l=e.createAnyFileAttachment(n.name);this.addFileAttachment(n,"any",l,i)}}},{key:"addFileAttachment",value:function(n,r,i,o){var a,s=e.createContainer(i);if(this._attachments.length>=this._fileCountLimit){var l=this._attachments[this._attachments.length-1].removeButton;l==null||l.click();var c=this._fileAttachmentsContainerRef.children;this._fileAttachmentsContainerRef.insertBefore(s,c[0])}else this._fileAttachmentsContainerRef.appendChild(s);var u={file:n,attachmentContainerElement:s,fileType:r};return o&&(u.removeButton=this.createRemoveAttachmentButton(u),s.appendChild(u.removeButton)),this._toggleContainerDisplay(!0),this._attachments.push(u),this._fileAttachmentsContainerRef.scrollTop=this._fileAttachmentsContainerRef.scrollHeight,(a=this._validationHandler)==null||a.call(this),u}},{key:"createRemoveAttachmentButton",value:function(n){var r=document.createElement("div");r.classList.add("remove-file-attachment-button"),r.onclick=this.removeAttachment.bind(this,n);var i=document.createElement("div");return i.classList.add("x-icon"),i.innerText="×",r.appendChild(i),r}},{key:"removeAttachment",value:function(n){var r,i=this._attachments.findIndex(function(a){return a===n}),o=this._attachments[i].attachmentContainerElement;this._attachments.splice(i,1),zu.stopAttachmentPlayback(o),o.remove(),this._toggleContainerDisplay(!1),(r=this._validationHandler)==null||r.call(this)}},{key:"getFiles",value:function(){return Array.from(this._attachments).map(function(n){return{file:n.file,type:n.fileType}})}},{key:"removeAllAttachments",value:function(){this._attachments.forEach(function(n){setTimeout(function(){var r;return(r=n.removeButton)==null?void 0:r.click()})})}}],[{key:"isFileTypeValid",value:function(n,r){if(r==="")return!0;for(var i=r.split(","),o=0;o<i.length;o++){var a=i[o].trim();if(n.type===a)return!0;if(a.startsWith(".")){var s=a.slice(1);if(n.name.endsWith(s))return!0}else if(n.name.endsWith(a)||a.endsWith("/*")&&n.type.startsWith(a.slice(0,-2)))return!0}return!1}},{key:"getTypeFromBlob",value:function(n){var r=n.type;return r.startsWith("image")?"image":r.startsWith("audio")?"audio":"any"}},{key:"createImageAttachment",value:function(n){var r=new Image;return r.src=n,r.classList.add("image-attachment"),r}},{key:"createAnyFileAttachment",value:function(n){var r=document.createElement("div");r.classList.add("border-bound-attachment"),dr.IS_SAFARI&&r.classList.add("border-bound-attachment-safari");var i=document.createElement("div");i.classList.add("any-file-attachment-text");var o=document.createElement("div");return o.classList.add("file-attachment-text-container"),o.appendChild(i),i.textContent=n,r.appendChild(o),r}},{key:"createContainer",value:function(n){var r=document.createElement("div");return r.classList.add("file-attachment"),r.appendChild(n),r}}]),e}(),RB=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <title>play</title>
  <path d="M5.92 24.096q0 1.088 0.928 1.728 0.512 0.288 1.088 0.288 0.448 0 0.896-0.224l16.16-8.064q0.48-0.256 0.8-0.736t0.288-1.088-0.288-1.056-0.8-0.736l-16.16-8.064q-0.448-0.224-0.896-0.224-0.544 0-1.088 0.288-0.928 0.608-0.928 1.728v16.16z"></path>
</svg>`,Wm=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
<title>stop</title>
<path d="M5.92 24.096q0 0.832 0.576 1.408t1.44 0.608h16.128q0.832 0 1.44-0.608t0.576-1.408v-16.16q0-0.832-0.576-1.44t-1.44-0.576h-16.128q-0.832 0-1.44 0.576t-0.576 1.44v16.16z"></path>
</svg>`,N1=function(e){pe(t,e);function t(n,r,i,o){return T(this,t),he(this,t,[n,r,i,o])}return M(t,[{key:"createTimer",value:function(r,i){var o=this,a=0,s=i!==void 0&&i<t.TIMER_LIMIT_S?i:t.TIMER_LIMIT_S;return setInterval(function(){var l;a+=1,a===s&&((l=o.stopPlaceholderCallback)==null||l.call(o),o.clearTimer()),a===600&&r.classList.add("audio-placeholder-text-4-digits");var c=Math.floor(a/60),u=(a%60).toString().padStart(2,"0");r.textContent="".concat(c,":").concat(u)},1e3)}},{key:"createPlaceholderAudioAttachment",value:function(r){var i=t.createAudioContainer(),o=document.createElement("div");o.classList.add("audio-placeholder-text-3-digits");var a=document.createElement("div");a.classList.add("file-attachment-text-container","audio-placeholder-text-3-digits-container"),a.appendChild(o);var s=tn.createSVGElement(Wm);return s.classList.add("attachment-icon","stop-icon","not-removable-attachment-icon"),o.textContent="0:00",this._activePlaceholderTimer=this.createTimer(o,r),i.appendChild(a),this.addPlaceholderAudioAttachmentEvents(i,s,a),i}},{key:"addPlaceholderAudioAttachmentEvents",value:function(r,i,o){var a=this,s=function(){return r.replaceChildren(i)};r.addEventListener("mouseenter",s);var l=function(){return r.replaceChildren(o)};r.addEventListener("mouseleave",l);var c=function(){var d;return(d=a.stopPlaceholderCallback)==null?void 0:d.call(a)};r.addEventListener("click",c)}},{key:"addPlaceholderAttachment",value:function(r,i){var o=this.createPlaceholderAudioAttachment(i);this._activePlaceholderAttachment=this.addFileAttachment(new File([],""),"audio",o,!1),this.stopPlaceholderCallback=r}},{key:"completePlaceholderAttachment",value:function(r,i){var o=this._activePlaceholderAttachment;o&&(o.file=r,t.addAudioElements(o.attachmentContainerElement.children[0],i),o.removeButton=this.createRemoveAttachmentButton(o),o.attachmentContainerElement.appendChild(o.removeButton),this._activePlaceholderAttachment=void 0,this.clearTimer())}},{key:"removePlaceholderAttachment",value:function(){this._activePlaceholderAttachment&&(this.removeAttachment(this._activePlaceholderAttachment),this._activePlaceholderAttachment=void 0,this.clearTimer())}},{key:"clearTimer",value:function(){this._activePlaceholderTimer!==void 0&&(clearInterval(this._activePlaceholderTimer),this._activePlaceholderTimer=void 0,this.stopPlaceholderCallback=void 0)}}],[{key:"createAudioContainer",value:function(){var r=document.createElement("div");return r.classList.add("border-bound-attachment","audio-attachment-icon-container"),dr.IS_SAFARI&&r.classList.add("border-bound-attachment-safari"),r}},{key:"addAudioElements",value:function(r,i){var o=r.parentElement?en.cloneElement(r):r,a=document.createElement("audio");a.src=i;var s=tn.createSVGElement(RB);s.classList.add("attachment-icon","play-icon");var l=tn.createSVGElement(Wm);l.classList.add("attachment-icon","stop-icon"),o.replaceChildren(s),a.onplay=function(){o.replaceChildren(l)},a.onpause=function(){o.replaceChildren(s),a.currentTime=0},a.onended=function(){o.replaceChildren(s)},o.onclick=function(){a.paused?a.play():a.pause()}}},{key:"createAudioAttachment",value:function(r){var i=t.createAudioContainer();return t.addAudioElements(i,r),i}},{key:"stopAttachmentPlayback",value:function(r){var i,o,a;(a=(o=(i=r.children[0])==null?void 0:i.children)==null?void 0:o[0])!=null&&a.classList.contains("stop-icon")&&r.children[0].click()}}]),t}(xf);N1.TIMER_LIMIT_S=5999;var zu=N1,PB=function(){function e(){T(this,e)}return M(e,null,[{key:"create",value:function(n,r,i,o,a){return a==="audio"?new zu(n,r,i,o):new xf(n,r,i,o)}}]),e}(),Af=function(){function e(t,n,r){T(this,e),this._fileAttachmentsTypes=[],this.elementRef=this.createAttachmentContainer();var i=fe(r)=="object"&&!!r.displayFileAttachmentContainer;this.toggleContainerDisplay(i),t.appendChild(this.elementRef),n&&Object.assign(this.elementRef.style,n)}return M(e,[{key:"addType",value:function(n,r,i){var o=PB.create(n,r,this.toggleContainerDisplay.bind(this),this.elementRef,i);return this._fileAttachmentsTypes.push(o),o}},{key:"createAttachmentContainer",value:function(){var n=document.createElement("div");return n.id="file-attachment-container",n}},{key:"toggleContainerDisplay",value:function(n){n?this.elementRef.style.display="block":this.elementRef.children.length===0&&(this.elementRef.style.display="none")}},{key:"getAllFileData",value:function(){var n=this._fileAttachmentsTypes.map(function(r){return r.getFiles()}).flat();return n.length>0?n:void 0}},{key:"completePlaceholders",value:function(){var t=D(_().mark(function r(){return _().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Promise.all(this._fileAttachmentsTypes.map(function(){var a=D(_().mark(function s(l){var c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(c=l.stopPlaceholderCallback)==null?void 0:c.call(l));case 1:case"end":return d.stop()}},s)}));return function(s){return a.apply(this,arguments)}}()));case 2:case"end":return o.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"addFilesToAnyType",value:function(n){e.addFilesToType(n,this._fileAttachmentsTypes)}},{key:"removeAllFiles",value:function(){this._fileAttachmentsTypes.forEach(function(n){return n.removeAllAttachments()}),this.elementRef.replaceChildren(),this.toggleContainerDisplay(!1)}},{key:"getNumberOfTypes",value:function(){return this._fileAttachmentsTypes.length}}],[{key:"addFilesToType",value:function(n,r){n.forEach(function(i){var o=new FileReader;o.readAsDataURL(i),o.onload=function(a){for(var s=0;s<r.length&&!r[s].attemptAddFile(i,a.target.result);s+=1);}})}}]),e}(),O1=function(){function e(t,n,r){T(this,e),this._isOpen=!1,this._contentRef=e.createModalContent(n,r==null?void 0:r.backgroundColor),this._buttonPanel=e.createButtonPanel(r==null?void 0:r.backgroundColor),this._elementRef=e.createContainer(this._contentRef,r),this._elementRef.appendChild(this._buttonPanel),t.appendChild(this._elementRef),this._backgroundPanelRef=e.createDarkBackgroundPanel(),t.appendChild(this._backgroundPanelRef),this.addWindowEvents(t)}return M(e,[{key:"isOpen",value:function(){return this._isOpen}},{key:"addButtons",value:function(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];i.forEach(function(a){return n._buttonPanel.appendChild(a)})}},{key:"close",value:function(){var n=this;this._elementRef.classList.remove("show-modal"),this._elementRef.classList.add("hide-modal"),this._backgroundPanelRef.classList.remove("show-modal-background"),this._backgroundPanelRef.classList.add("hide-modal-background"),this._isOpen=!1,setTimeout(function(){n._elementRef.style.display="none",n._backgroundPanelRef.style.display="none"},e.MODAL_CLOSE_TIMEOUT_MS)}},{key:"displayModalElements",value:function(){this._elementRef.style.display="flex",this._elementRef.classList.remove("hide-modal"),this._elementRef.classList.add("show-modal"),this._backgroundPanelRef.style.display="block",this._backgroundPanelRef.classList.remove("hide-modal-background"),this._backgroundPanelRef.classList.add("show-modal-background"),this._isOpen=!0}},{key:"openTextModal",value:function(n){this._contentRef.innerHTML=n,this.displayModalElements()}},{key:"addCloseButton",value:function(n,r,i){var o=this,a=r?e.createSVGButton(n):e.createTextButton(n);return this.addButtons(a),a.onclick=function(){o.close(),setTimeout(function(){i==null||i()},140)},a}},{key:"addWindowEvents",value:function(n){this.keyDownEvent=this.windowKeyDown.bind(this,n),window.addEventListener("keydown",this.keyDownEvent)}},{key:"windowKeyDown",value:function(n,r){var i,o;!n.isConnected&&this.keyDownEvent?window.removeEventListener("keydown",this.keyDownEvent):this._isOpen&&(r.key===_t.ESCAPE?(this.close(),(i=this.extensionCloseCallback)==null||i.call(this)):r.key===_t.ENTER&&(this.close(),(o=this.extensionCloseCallback)==null||o.call(this)))}}],[{key:"createContainer",value:function(n,r){var i=document.createElement("div");return i.classList.add("modal"),i.appendChild(n),r&&delete r.backgroundColor,Object.assign(i.style,r),i}},{key:"createModalContent",value:function(n,r){var i,o=document.createElement("div");return(i=o.classList).add.apply(i,Q0(n)),r&&(o.style.backgroundColor=r),document.createElement("div").appendChild(o),o}},{key:"createButtonPanel",value:function(n){var r=document.createElement("div");return r.classList.add("modal-button-panel"),n&&(r.style.backgroundColor=n),r}},{key:"createDarkBackgroundPanel",value:function(){var n=document.createElement("div");return n.id="modal-background-panel",n}},{key:"createTextButton",value:function(n){var r=document.createElement("div");return r.classList.add("modal-button"),r.textContent=n,r}},{key:"createSVGButton",value:function(n){var r=document.createElement("div");r.classList.add("modal-button","modal-svg-button");var i=tn.createSVGElement(n);return i.classList.add("modal-svg-button-icon"),r.appendChild(i),r}},{key:"createTextModalFunc",value:function(n,r,i){var o;if(fe(r)=="object"&&(o=r.files)!=null&&o.infoModal){var a=new e(n,["modal-content"],r.files.infoModal.containerStyle);return a.addCloseButton("OK",!1,i),a.openTextModal.bind(a,r.infoModalTextMarkUp||"")}}}]),e}();O1.MODAL_CLOSE_TIMEOUT_MS=190;var bo=O1,NB=function(e){pe(t,e);function t(n,r,i,o,a,s){var l;T(this,t);var c,u,d,f,h,p;l=he(this,t,[t.createButtonElement(),(c=i.button)==null?void 0:c.position,i.button,s]);var m=l.createInnerElements(o,a,l._customStyles);return l._inputElement=t.createInputElement((u=i==null?void 0:i.files)==null?void 0:u.acceptedFormats),l.addClickEvent(n,i),l.elementRef.replaceChildren(m.styles),l.reapplyStateStyle("styles"),l._fileAttachmentsType=r,l._openModalOnce=((f=(d=i.files)==null?void 0:d.infoModal)==null?void 0:f.openModalOnce)===!1||(p=(h=i.files)==null?void 0:h.infoModal)==null?void 0:p.openModalOnce,l}return M(t,[{key:"createInnerElements",value:function(r,i,o){var a=t.createSVGIconElement(r,i);return{styles:this.createInnerElement(a,"styles",o)}}},{key:"triggerImportPrompt",value:function(r){r.onchange=this.import.bind(this,r),r.click()}},{key:"import",value:function(r){Af.addFilesToType(Array.from(r.files||[]),[this._fileAttachmentsType]),r.value=""}},{key:"createInnerElement",value:function(r,i,o){return Ri.createSpecificStateElement(this.elementRef,i,o)||r}},{key:"addClickEvent",value:function(r,i){var o=this.triggerImportPrompt.bind(this,this._inputElement),a=bo.createTextModalFunc(r,i,o);this.elementRef.onclick=this.click.bind(this,a)}},{key:"click",value:function(r){r&&(this._openModalOnce===void 0||this._openModalOnce===!0)?(r(),this._openModalOnce===!0&&(this._openModalOnce=!1)):this.triggerImportPrompt(this._inputElement)}}],[{key:"createInputElement",value:function(r){var i=document.createElement("input");return i.type="file",i.accept=r||"",i.hidden=!0,i.multiple=!0,i}},{key:"createButtonElement",value:function(){var r=document.createElement("div");return r.classList.add("input-button","upload-file-button"),r}},{key:"createSVGIconElement",value:function(r,i){var o=tn.createSVGElement(i);return o.id=r,o}}]),t}(pa),Km=function(){function e(){T(this,e)}return M(e,null,[{key:"create",value:function(n,r,i){var o=e.createElement(i);e.addEvents(o,n,r),n.appendChild(o)}},{key:"createElement",value:function(n){var r=document.createElement("div");return r.id="drag-and-drop",fe(n)=="object"&&Object.assign(r.style,n),r}},{key:"addEvents",value:function(n,r,i){r.ondragenter=function(o){o.preventDefault(),e.display(n)},n.ondragleave=function(o){o.preventDefault(),e.hide(n)},n.ondragover=function(o){o.preventDefault()},n.ondrop=function(o){o.preventDefault(),e.uploadFile(i,o),e.hide(n)}}},{key:"uploadFile",value:function(n,r){var i,o=(i=r.dataTransfer)==null?void 0:i.files;o&&n.addFilesToAnyType(Array.from(o))}},{key:"display",value:function(n){n.style.display="block"}},{key:"hide",value:function(n){n.style.display="none"}},{key:"isEnabled",value:function(n,r){return r!==void 0&&r===!1?!1:!!r||n.getNumberOfTypes()>0}}]),e}(),OB=function(){function e(){T(this,e)}return M(e,null,[{key:"validate",value:function(n,r,i,o,a){var s=n(i,o,a);return s?r.changeToSubmitIcon():r.changeToDisabledIcon(),s}},{key:"useValidationFunc",value:function(){var t=D(_().mark(function r(i,o,a,s){var l,c,u,d;return _().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return l=o.inputElementRef,c=l.classList.contains("text-input-placeholder")?"":l.textContent,h.next=3,a.completePlaceholders();case 3:return u=a.getAllFileData(),d=u==null?void 0:u.map(function(p){return p.file}),h.abrupt("return",e.validate(i,s,c,d));case 5:case"end":return h.stop()}},r)}));function n(r,i,o,a){return t.apply(this,arguments)}return n}()},{key:"useValidationFuncProgrammatic",value:function(){var t=D(_().mark(function r(i,o,a){var s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return l=(s=o.files)==null?void 0:s.map(function(d){return d.file}),u.abrupt("return",e.validate(i,a,o.text,l,!0));case 2:case"end":return u.stop()}},r)}));function n(r,i,o){return t.apply(this,arguments)}return n}()},{key:"validateWebsocket",value:function(n,r){return n.websocket&&!Jo.canSendMessage(n.websocket)?(r.changeToDisabledIcon(),!1):!0}},{key:"attach",value:function(n,r,i,o,a){var s=n.validateInput||$r.processValidateInput(n);n._validationHandler=function(){var l=D(_().mark(function c(u){var d;return _().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(a.status.loadingActive||a.status.requestInProgress||r.isSubmitProgrammaticallyDisabled===!0||!e.validateWebsocket(r,a))){h.next=2;break}return h.abrupt("return",!1);case 2:return d=s||r.canSendMessage,h.abrupt("return",d?u?e.useValidationFuncProgrammatic(d,u,a):e.useValidationFunc(d,i,o,a):null);case 4:case"end":return h.stop()}},c)}));return function(c){return l.apply(this,arguments)}}()}}]),e}(),LB=`<?xml version="1.0" encoding="iso-8859-1"?>
<svg height="1.4em" width="1.4em" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 viewBox="0 0 490.9 490.9" xml:space="preserve">
	<g>
		<g>
			<path d="M245.5,322.9c53,0,96.2-43.2,96.2-96.2V96.2c0-53-43.2-96.2-96.2-96.2s-96.2,43.2-96.2,96.2v130.5
				C149.3,279.8,192.5,322.9,245.5,322.9z M173.8,96.2c0-39.5,32.2-71.7,71.7-71.7s71.7,32.2,71.7,71.7v130.5
				c0,39.5-32.2,71.7-71.7,71.7s-71.7-32.2-71.7-71.7V96.2z"/>
			<path d="M94.4,214.5c-6.8,0-12.3,5.5-12.3,12.3c0,85.9,66.7,156.6,151.1,162.8v76.7h-63.9c-6.8,0-12.3,5.5-12.3,12.3
				s5.5,12.3,12.3,12.3h152.3c6.8,0,12.3-5.5,12.3-12.3s-5.5-12.3-12.3-12.3h-63.9v-76.7c84.4-6.3,151.1-76.9,151.1-162.8
				c0-6.8-5.5-12.3-12.3-12.3s-12.3,5.5-12.3,12.3c0,76.6-62.3,138.9-138.9,138.9s-138.9-62.3-138.9-138.9
				C106.6,220,101.2,214.5,94.4,214.5z"/>
		</g>
	</g>
</svg>
`,L1=function(e){pe(t,e);function t(n){var r;return T(this,t),(n==null?void 0:n.position)==="dropup-menu"&&(n.position="outside-right"),r=he(this,t,[t.createMicrophoneElement(),n==null?void 0:n.position,n]),r.isActive=!1,r._innerElements=r.createInnerElements(r._customStyles),r.changeToDefault(),r}return M(t,[{key:"createInnerElements",value:function(r){var i=t.createSVGIconElement();return{default:this.createInnerElement(i,"default",r),active:this.createInnerElement(i,"active",r),unsupported:this.createInnerElement(i,"unsupported",r),commandMode:this.createInnerElement(i,"commandMode",r)}}},{key:"createInnerElement",value:function(r,i,o){return Ri.createSpecificStateElement(this.elementRef,i,o)||r}},{key:"changeToActive",value:function(){this.elementRef.replaceChildren(this._innerElements.active),this.toggleIconFilter("active"),this.reapplyStateStyle("active",["default","commandMode"]),this.isActive=!0}},{key:"changeToDefault",value:function(){this.elementRef.replaceChildren(this._innerElements.default),this.toggleIconFilter("default"),this.reapplyStateStyle("default",["active","commandMode"]),this.isActive=!1}},{key:"changeToCommandMode",value:function(){this.elementRef.replaceChildren(this._innerElements.unsupported),this.toggleIconFilter("command"),this.reapplyStateStyle("commandMode",["active"])}},{key:"changeToUnsupported",value:function(){this.elementRef.replaceChildren(this._innerElements.unsupported),this.elementRef.classList.add("unsupported-microphone"),this.reapplyStateStyle("unsupported",["active"])}},{key:"toggleIconFilter",value:function(r){var i=this.elementRef.children[0];if(i.tagName.toLocaleLowerCase()==="svg")switch(r){case"default":i.classList.remove("active-microphone-icon","command-microphone-icon"),i.classList.add("default-microphone-icon");break;case"active":i.classList.remove("default-microphone-icon","command-microphone-icon"),i.classList.add("active-microphone-icon");break;case"command":i.classList.remove("active-microphone-icon","default-microphone-icon"),i.classList.add("command-microphone-icon");break}}}],[{key:"createMicrophoneElement",value:function(){var r=document.createElement("div");return r.id="microphone-button",r.classList.add("input-button"),r}},{key:"createSVGIconElement",value:function(){var r=tn.createSVGElement(LB);return r.id="microphone-icon",r}}]),t}(pa),D1={},Yl={},Jl={},ma={},ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.Text=void 0;var Zl=function(){function e(){T(this,e)}return M(e,null,[{key:"capitalize",value:function(n){return n.replace(e.FIRST_CHAR_REGEX,function(r){return r.toUpperCase()})}},{key:"lineBreak",value:function(n){return n.replace(e.DOUBLE_LINE,"<p></p>").replace(e.ONE_LINE,"<br>")}},{key:"isCharDefined",value:function(n){return n!==void 0&&n!==" "&&n!==" "&&n!==`
`&&n!==""}},{key:"breakupIntoWordsArr",value:function(n){return n.split(/(\W+)/)}}]),e}();ei.Text=Zl;Zl.FIRST_CHAR_REGEX=/\S/;Zl.DOUBLE_LINE=/\n\n/g;Zl.ONE_LINE=/\n/g;Object.defineProperty(ma,"__esModule",{value:!0});ma.Translate=void 0;var DB=ei,UB=function(){function e(){T(this,e)}return M(e,null,[{key:"translate",value:function(n,r){for(var i=DB.Text.breakupIntoWordsArr(n),o=0;o<i.length;o+=1)r[i[o]]&&(i[o]=r[i[o]]);return i.join("")}}]),e}();ma.Translate=UB;Object.defineProperty(Jl,"__esModule",{value:!0});Jl.WebSpeechTranscript=void 0;var Gm=ma,FB=function(){function e(){T(this,e)}return M(e,null,[{key:"extract",value:function(n,r,i){for(var o="",a=n.resultIndex;a<n.results.length;++a){var s=n.results[a][0].transcript;i&&(s=Gm.Translate.translate(s,i)),n.results[a].isFinal?r+=s:o+=s}return{interimTranscript:o,finalTranscript:r,newText:o||r}}},{key:"extractSafari",value:function(n,r,i){for(var o="",a="",s=n.resultIndex;s<n.results.length;++s){var l=n.results[s][0].transcript;i&&(l=Gm.Translate.translate(l,i)),o+=l}return{interimTranscript:a,finalTranscript:o,newText:o}}}]),e}();Jl.WebSpeechTranscript=FB;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.Browser=void 0;var _o=M(function e(){T(this,e)});Ji.Browser=_o;_o.IS_SAFARI=function(){return _o._IS_SAFARI===void 0&&(_o._IS_SAFARI=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),_o._IS_SAFARI};var ga={},Xl={};Object.defineProperty(Xl,"__esModule",{value:!0});Xl.EventListeners=void 0;var U1=function(){function e(){T(this,e)}return M(e,null,[{key:"getElementIfFocusedOnAvailable",value:function(n,r){return Array.isArray(n)?n.find(function(i){return r===i}):r===n?n:void 0}},{key:"keyDownWindow",value:function(n){var r=this;n.element&&e.getElementIfFocusedOnAvailable(n.element,document.activeElement)&&(e.KEY_DOWN_TIMEOUT!==null&&clearTimeout(e.KEY_DOWN_TIMEOUT),e.KEY_DOWN_TIMEOUT=setTimeout(function(){e.KEY_DOWN_TIMEOUT=null,r.resetRecording(n)},500))}},{key:"mouseDownWindow",value:function(n,r){this.mouseDownElement=e.getElementIfFocusedOnAvailable(n,r.target)}},{key:"mouseUpWindow",value:function(n){this.mouseDownElement&&this.resetRecording(n),this.mouseDownElement=void 0}},{key:"add",value:function(n,r){var i=(r==null?void 0:r.insertInCursorLocation)===void 0||(r==null?void 0:r.insertInCursorLocation);r!=null&&r.element&&i&&(n.mouseDownEvent=e.mouseDownWindow.bind(n,r.element),document.addEventListener("mousedown",n.mouseDownEvent),n.mouseUpEvent=e.mouseUpWindow.bind(n,r),document.addEventListener("mouseup",n.mouseUpEvent),n.keyDownEvent=e.keyDownWindow.bind(n,r),document.addEventListener("keydown",n.keyDownEvent))}},{key:"remove",value:function(n){document.removeEventListener("mousedown",n.mouseDownEvent),document.removeEventListener("mouseup",n.mouseUpEvent),document.removeEventListener("keydown",n.keyDownEvent)}}]),e}();Xl.EventListeners=U1;U1.KEY_DOWN_TIMEOUT=null;var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.PreResultUtils=void 0;var BB=function(){function e(){T(this,e)}return M(e,null,[{key:"process",value:function(n,r,i,o,a){var s=o==null?void 0:o(r,i);return s?(setTimeout(function(){s.restart?n.resetRecording(a):s.stop&&n.stop()}),(s.stop||s.restart)&&s.removeNewText):!1}}]),e}();Ql.PreResultUtils=BB;var va={},ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.AutoScroll=void 0;var jB=function(){function e(){T(this,e)}return M(e,null,[{key:"changeStateIfNeeded",value:function(n,r){r&&!n.isCursorAtEnd&&(n.endPadding="",n.scrollingSpan.innerHTML="&nbsp;")}},{key:"scrollGeneric",value:function(n,r){n.isCursorAtEnd?r.scrollTop=r.scrollHeight:n.scrollingSpan.scrollIntoView({block:"nearest"})}},{key:"scrollSafariPrimitiveToEnd",value:function(n){n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight}},{key:"isElementOverflown",value:function(n){return n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth}},{key:"isRequired",value:function(n,r){return n&&e.isElementOverflown(r)}}]),e}();ya.AutoScroll=jB;var ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.Elements=void 0;var $B=function(){function e(){T(this,e)}return M(e,null,[{key:"isPrimitiveElement",value:function(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}},{key:"createInterimSpan",value:function(){var n=document.createElement("span");return n.style.color="grey",n.style.pointerEvents="none",n}},{key:"createGenericSpan",value:function(){var n=document.createElement("span");return n.style.pointerEvents="none",n}},{key:"appendSpans",value:function(n,r){if(n.spansPopulated=!0,n.insertInCursorLocation&&document.activeElement===r){var i=window.getSelection();if(i!=null&&i.focusNode){var o=i.getRangeAt(0);o.insertNode(n.scrollingSpan),o.insertNode(n.interimSpan),o.insertNode(n.finalSpan),o.collapse(!1),i.removeAllRanges(),i.addRange(o);return}}r.appendChild(n.finalSpan),r.appendChild(n.interimSpan),r.appendChild(n.scrollingSpan)}},{key:"applyCustomColors",value:function(n,r){r.interim&&(n.interimSpan.style.color=r.interim),r.final&&(n.finalSpan.style.color=r.final)}},{key:"isInsideShadowDOM",value:function(n){return n.getRootNode()instanceof ShadowRoot}}]),e}();ti.Elements=$B;var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.Cursor=void 0;var HB=function(){function e(){T(this,e)}return M(e,null,[{key:"setOffsetForGeneric",value:function(n,r){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=0,a=0;a<n.childNodes.length;a+=1){var s=n.childNodes[a];if(s.childNodes.length>0){var l=e.setOffsetForGeneric(s,r,i);if(l===-1)return-1;i+=l}else if(s.textContent!==null){if(i+s.textContent.length>r){var c=document.createRange();c.setStart(s,r-i),c.collapse(!0);var u=window.getSelection();return u==null||u.removeAllRanges(),u==null||u.addRange(c),n.focus(),-1}i+=s.textContent.length,o+=s.textContent.length}}return o}},{key:"focusEndOfGeneric",value:function(n){var r=document.createRange();r.selectNodeContents(n),r.collapse(!1);var i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(r))}},{key:"setOffsetForSafariGeneric",value:function(n,r){var i=window.getSelection();if(i){var o=e.getGenericElementCursorOffset(n,i,!0);console.log(o),setTimeout(function(){},100),e.setOffsetForGeneric(n,o+r)}}},{key:"setOffsetForPrimitive",value:function(n,r,i){i&&n.blur(),n.setSelectionRange(r,r),n.focus()}},{key:"getGenericElementCursorOffset",value:function(n,r,i){var o=0;if(r.rangeCount>0){var a=r.getRangeAt(0),s=a.cloneRange();s.selectNodeContents(n),i?s.setEnd(a.startContainer,a.startOffset):s.setEnd(a.endContainer,a.endOffset),o=s.toString().length}return o}}]),e}();ni.Cursor=HB;Object.defineProperty(va,"__esModule",{value:!0});va.CommandUtils=void 0;var Ym=ya,qB=ti,zB=Ji,Jm=ni,Zm=ei,VB=function(){function e(){T(this,e)}return M(e,null,[{key:"processCommand",value:function(n,r){return(!r||!r.caseSensitive)&&(n=n.toLowerCase()),(r==null?void 0:r.substrings)===!1?Zm.Text.breakupIntoWordsArr(n):n}},{key:"process",value:function(n){var r;return((r=n.settings)===null||r===void 0?void 0:r.caseSensitive)===!0?n:Object.keys(n).reduce(function(i,o){var a=n[o];return i[o]=typeof a=="string"?e.processCommand(a,n.settings):a,i},{})}},{key:"toggleCommandModeOn",value:function(n){var r;n.isWaitingForCommand=!0,(r=n.onCommandModeTrigger)===null||r===void 0||r.call(n,!0)}},{key:"toggleCommandModeOff",value:function(n){var r;n.isWaitingForCommand&&((r=n.onCommandModeTrigger)===null||r===void 0||r.call(n,!1),n.isWaitingForCommand=!1)}},{key:"setText",value:function(n,r,i,o){e.toggleCommandModeOff(n),qB.Elements.isPrimitiveElement(o)?(o.value=i,n.isTargetInShadow||Jm.Cursor.setOffsetForPrimitive(o,i.length,!0),zB.Browser.IS_SAFARI()&&n.autoScroll&&Ym.AutoScroll.scrollSafariPrimitiveToEnd(o)):(o.textContent=i,n.isTargetInShadow||Jm.Cursor.focusEndOfGeneric(o),setTimeout(function(){return Ym.AutoScroll.scrollGeneric(n,o)})),n.resetRecording(r)}},{key:"checkIfMatchesSubstring",value:function(n,r){return r.includes(n)}},{key:"checkIfMatchesWord",value:function(n,r,i){for(var o=n,a=i.length-1;a>=0;a-=1){for(var s=a,l=o.length-1;i[s]===o[l]&&l>=0;)s-=1,l-=1;if(l<0)return!0}return!1}},{key:"execCommand",value:function(n,r,i,o,a){var s,l,c,u=n.commands;if(!(!u||!o||!i)){var d=((s=u.settings)===null||s===void 0?void 0:s.caseSensitive)===!0?r:r.toLowerCase(),f=Zm.Text.breakupIntoWordsArr(d),h=((l=u.settings)===null||l===void 0?void 0:l.substrings)===!1?e.checkIfMatchesWord:e.checkIfMatchesSubstring;if(u.commandMode&&h(u.commandMode,d,f))return n.setInterimColorToFinal(),setTimeout(function(){return e.toggleCommandModeOn(n)}),{doNotProcessTranscription:!1};if(!(u.commandMode&&!n.isWaitingForCommand)){if(u.stop&&h(u.stop,d,f))return e.toggleCommandModeOff(n),setTimeout(function(){return n.stop()}),{doNotProcessTranscription:!1};if(u.pause&&h(u.pause,d,f))return e.toggleCommandModeOff(n),n.setInterimColorToFinal(),setTimeout(function(){var p;n.isPaused=!0,(p=n.onPauseTrigger)===null||p===void 0||p.call(n,!0)}),{doNotProcessTranscription:!1};if(u.resume&&h(u.resume,d,f))return n.isPaused=!1,(c=n.onPauseTrigger)===null||c===void 0||c.call(n,!1),e.toggleCommandModeOff(n),n.resetRecording(i),{doNotProcessTranscription:!0};if(u.reset&&h(u.reset,d,f))return a!==void 0&&e.setText(n,i,a,o),{doNotProcessTranscription:!0};if(u.removeAllText&&h(u.removeAllText,d,f))return e.setText(n,i,"",o),{doNotProcessTranscription:!0}}}}}]),e}();va.CommandUtils=VB;var ec={};Object.defineProperty(ec,"__esModule",{value:!0});ec.Highlight=void 0;var WB=ti,uo=ni,KB=function(){function e(){T(this,e)}return M(e,null,[{key:"setStateForPrimitive",value:function(n,r){var i,o;r.selectionStart!==null&&(i=r.selectionStart),r.selectionEnd!==null&&(o=r.selectionEnd),n.isHighlighted=i!==o}},{key:"setStateForGeneric",value:function(n,r){var i=window.getSelection();if(i!=null&&i.focusNode){var o=uo.Cursor.getGenericElementCursorOffset(r,i,!0),a=uo.Cursor.getGenericElementCursorOffset(r,i,!1);n.isHighlighted=o!==a}}},{key:"setState",value:function(n,r){document.activeElement===r&&(WB.Elements.isPrimitiveElement(r)?e.setStateForPrimitive(n,r):e.setStateForGeneric(n,r))}},{key:"removeForGeneric",value:function(n,r){var i=window.getSelection();if(i){var o=uo.Cursor.getGenericElementCursorOffset(r,i,!0);i.deleteFromDocument(),uo.Cursor.setOffsetForGeneric(r,o),n.isHighlighted=!1}}},{key:"removeForPrimitive",value:function(n,r){var i=r.selectionStart,o=r.selectionEnd,a=r.value;if(i&&o){var s=a.substring(0,i)+a.substring(o);r.value=s,uo.Cursor.setOffsetForPrimitive(r,i,n.autoScroll)}n.isHighlighted=!1}}]),e}();ec.Highlight=KB;var tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.Padding=void 0;var GB=ti,Xm=ni,di=ei,YB=function(){function e(){T(this,e)}return M(e,null,[{key:"setStateForPrimitiveElement",value:function(n,r){if(document.activeElement===r&&r.selectionStart!==null){var i=r.selectionStart,o=r.value[i-1],a=r.selectionEnd===null?i:r.selectionEnd,s=r.value[a];di.Text.isCharDefined(o)&&(n.startPadding=" ",n.numberOfSpacesBeforeNewText=1),di.Text.isCharDefined(s)&&(n.endPadding=" ",n.numberOfSpacesAfterNewText=1),n.isCursorAtEnd=r.value.length===a;return}var l=r.value[r.value.length-1];di.Text.isCharDefined(l)&&(n.startPadding=" ",n.numberOfSpacesBeforeNewText=1),n.isCursorAtEnd=!0}},{key:"setStateForGenericElement",value:function(n,r){var i,o,a;if(document.activeElement===r){var s=window.getSelection();if(s!=null&&s.focusNode){var l=Xm.Cursor.getGenericElementCursorOffset(r,s,!0),c=(i=r.textContent)===null||i===void 0?void 0:i[l-1],u=Xm.Cursor.getGenericElementCursorOffset(r,s,!1),d=(o=r.textContent)===null||o===void 0?void 0:o[u];di.Text.isCharDefined(c)&&(n.startPadding=" "),di.Text.isCharDefined(d)&&(n.endPadding=" "),n.isCursorAtEnd=((a=r.textContent)===null||a===void 0?void 0:a.length)===u;return}}var f=r.innerText.charAt(r.innerText.length-1);di.Text.isCharDefined(f)&&(n.startPadding=" "),n.isCursorAtEnd=!0}},{key:"setState",value:function(n,r){GB.Elements.isPrimitiveElement(r)?e.setStateForPrimitiveElement(n,r):e.setStateForGenericElement(n,r)}},{key:"adjustStateAfterRecodingPrimitiveElement",value:function(n,r){if(n.primitiveTextRecorded=!0,n.insertInCursorLocation&&document.activeElement===r&&(r.selectionEnd!==null&&(n.endPadding=n.endPadding+r.value.slice(r.selectionEnd)),r.selectionStart!==null)){n.startPadding=r.value.slice(0,r.selectionStart)+n.startPadding;return}n.startPadding=r.value+n.startPadding}},{key:"adjustSateForNoTextPrimitiveElement",value:function(n){n.numberOfSpacesBeforeNewText===1&&(n.startPadding=n.startPadding.substring(0,n.startPadding.length-1),n.numberOfSpacesBeforeNewText=0),n.numberOfSpacesAfterNewText===1&&(n.endPadding=n.endPadding.substring(1),n.numberOfSpacesAfterNewText=0)}}]),e}();tc.Padding=YB;Object.defineProperty(ga,"__esModule",{value:!0});ga.Speech=void 0;var Qm=Xl,JB=Ql,eg=va,Ka=ya,Fc=ec,Cn=ti,Bc=tc,tg=Ji,ng=ni,jc=ei,ZB=function(){function e(){T(this,e),this.finalTranscript="",this.interimSpan=Cn.Elements.createInterimSpan(),this.finalSpan=Cn.Elements.createGenericSpan(),this.scrollingSpan=Cn.Elements.createGenericSpan(),this.isCursorAtEnd=!1,this.spansPopulated=!1,this.startPadding="",this.endPadding="",this.numberOfSpacesBeforeNewText=0,this.numberOfSpacesAfterNewText=0,this.isHighlighted=!1,this.primitiveTextRecorded=!1,this.recognizing=!1,this._displayInterimResults=!0,this.insertInCursorLocation=!0,this.autoScroll=!0,this.isRestarting=!1,this.isPaused=!1,this.isWaitingForCommand=!1,this.isTargetInShadow=!1,this.cannotBeStopped=!1,this.resetState()}return M(e,[{key:"prepareBeforeStart",value:function(n){var r,i;if(n!=null&&n.element)if(Qm.EventListeners.add(this,n),Array.isArray(n.element)){var o=n.element.find(function(a){return a===document.activeElement})||n.element[0];if(!o)return;this.prepare(o)}else this.prepare(n.element);(n==null?void 0:n.displayInterimResults)!==void 0&&(this._displayInterimResults=n.displayInterimResults),n!=null&&n.textColor&&(this._finalTextColor=(r=n==null?void 0:n.textColor)===null||r===void 0?void 0:r.final,Cn.Elements.applyCustomColors(this,n.textColor)),(n==null?void 0:n.insertInCursorLocation)!==void 0&&(this.insertInCursorLocation=n.insertInCursorLocation),(n==null?void 0:n.autoScroll)!==void 0&&(this.autoScroll=n.autoScroll),this._onResult=n==null?void 0:n.onResult,this._onPreResult=n==null?void 0:n.onPreResult,this._onStart=n==null?void 0:n.onStart,this._onStop=n==null?void 0:n.onStop,this._onError=n==null?void 0:n.onError,this.onCommandModeTrigger=n==null?void 0:n.onCommandModeTrigger,this.onPauseTrigger=n==null?void 0:n.onPauseTrigger,this._options=n,!((i=this._options)===null||i===void 0)&&i.commands&&(this.commands=eg.CommandUtils.process(this._options.commands))}},{key:"prepare",value:function(n){Bc.Padding.setState(this,n),Fc.Highlight.setState(this,n),this.isTargetInShadow=Cn.Elements.isInsideShadowDOM(n),Cn.Elements.isPrimitiveElement(n)?(this._primitiveElement=n,this._originalText=this._primitiveElement.value):(this._genericElement=n,this._originalText=this._genericElement.textContent)}},{key:"resetRecording",value:function(n){this.isRestarting=!0,this.stop(!0),this.resetState(!0),this.start(n,!0)}},{key:"updateElements",value:function(n,r,i){var o,a=jc.Text.capitalize(r);if(!(this.finalTranscript===a&&n==="")){JB.PreResultUtils.process(this,i,n==="",this._onPreResult,this._options)&&(n="",i="");var s=this.commands&&eg.CommandUtils.execCommand(this,i,this._options,this._primitiveElement||this._genericElement,this._originalText);if(s){if(s.doNotProcessTranscription)return;n="",i=""}if(!(this.isPaused||this.isWaitingForCommand)){(o=this._onResult)===null||o===void 0||o.call(this,i,n===""),this.finalTranscript=a,this._displayInterimResults||(n="");var l=this.finalTranscript===""&&n==="";this._primitiveElement?this.updatePrimitiveElement(this._primitiveElement,n,l):this._genericElement&&this.updateGenericElement(this._genericElement,n,l)}}}},{key:"updatePrimitiveElement",value:function(n,r,i){this.isHighlighted&&Fc.Highlight.removeForPrimitive(this,n),this.primitiveTextRecorded||Bc.Padding.adjustStateAfterRecodingPrimitiveElement(this,n),i&&Bc.Padding.adjustSateForNoTextPrimitiveElement(this);var o=this.startPadding+this.finalTranscript+r;if(n.value=o+this.endPadding,!this.isTargetInShadow){var a=o.length+this.numberOfSpacesAfterNewText;ng.Cursor.setOffsetForPrimitive(n,a,this.autoScroll)}this.autoScroll&&tg.Browser.IS_SAFARI()&&this.isCursorAtEnd&&Ka.AutoScroll.scrollSafariPrimitiveToEnd(n)}},{key:"updateGenericElement",value:function(n,r,i){this.isHighlighted&&Fc.Highlight.removeForGeneric(this,n),this.spansPopulated||Cn.Elements.appendSpans(this,n);var o=(i?"":this.startPadding)+jc.Text.lineBreak(this.finalTranscript);this.finalSpan.innerHTML=o;var a=Ka.AutoScroll.isRequired(this.autoScroll,n);Ka.AutoScroll.changeStateIfNeeded(this,a);var s=jc.Text.lineBreak(r)+(i?"":this.endPadding);this.interimSpan.innerHTML=s,tg.Browser.IS_SAFARI()&&this.insertInCursorLocation&&ng.Cursor.setOffsetForSafariGeneric(n,o.length+s.length),a&&Ka.AutoScroll.scrollGeneric(this,n),i&&(this.scrollingSpan.innerHTML="")}},{key:"finalise",value:function(n){this._genericElement&&(n?(this.finalSpan=Cn.Elements.createGenericSpan(),this.setInterimColorToFinal(),this.interimSpan=Cn.Elements.createInterimSpan(),this.scrollingSpan=Cn.Elements.createGenericSpan()):this._genericElement.textContent=this._genericElement.textContent,this.spansPopulated=!1),Qm.EventListeners.remove(this)}},{key:"setInterimColorToFinal",value:function(){this.interimSpan.style.color=this._finalTextColor||"black"}},{key:"resetState",value:function(n){this._primitiveElement=void 0,this._genericElement=void 0,this.finalTranscript="",this.finalSpan.innerHTML="",this.interimSpan.innerHTML="",this.scrollingSpan.innerHTML="",this.startPadding="",this.endPadding="",this.isHighlighted=!1,this.primitiveTextRecorded=!1,this.numberOfSpacesBeforeNewText=0,this.numberOfSpacesAfterNewText=0,n||(this.stopTimeout=void 0)}},{key:"setStateOnStart",value:function(){var n;this.recognizing=!0,this.isRestarting?this.isRestarting=!1:(n=this._onStart)===null||n===void 0||n.call(this)}},{key:"setStateOnStop",value:function(){var n;this.recognizing=!1,this.isRestarting||(n=this._onStop)===null||n===void 0||n.call(this)}},{key:"setStateOnError",value:function(n){var r;(r=this._onError)===null||r===void 0||r.call(this,n),this.recognizing=!1}}]),e}();ga.Speech=ZB;Object.defineProperty(Yl,"__esModule",{value:!0});Yl.WebSpeech=void 0;var rg=Jl,ig=Ji,XB=ga,QB=function(e){pe(t,e);function t(){return T(this,t),he(this,t)}return M(t,[{key:"start",value:function(r){var i;this._extractText===void 0&&(this._extractText=ig.Browser.IS_SAFARI()?rg.WebSpeechTranscript.extractSafari:rg.WebSpeechTranscript.extract),this.validate()&&(this.prepareBeforeStart(r),this.instantiateService(r),(i=this._service)===null||i===void 0||i.start(),this._translations=r==null?void 0:r.translations)}},{key:"validate",value:function(){return t.getAPI()?!0:(this.error("Speech Recognition is unsupported"),!1)}},{key:"instantiateService",value:function(r){var i,o,a=t.getAPI();this._service=new a,this._service.continuous=!0,this._service.interimResults=(i=r==null?void 0:r.displayInterimResults)!==null&&i!==void 0?i:!0,this._service.lang=((o=r==null?void 0:r.language)===null||o===void 0?void 0:o.trim())||"en-US",this.setEvents()}},{key:"setEvents",value:function(){var r=this;this._service&&(this._service.onstart=function(){r.setStateOnStart()},this._service.onerror=function(i){ig.Browser.IS_SAFARI()&&i.message==="Another request is started"||i.error==="aborted"&&r.isRestarting||i.error!=="no-speech"&&r.error(i.message||i.error)},this._service.onaudioend=function(){r.setStateOnStop()},this._service.onend=function(){r._stopping=!1},this._service.onresult=function(i){if(fe(i.results)>"u"&&r._service)r._service.onend=null,r._service.stop();else if(r._extractText&&!r._stopping){var o=r._extractText(i,r.finalTranscript,r._translations),a=o.interimTranscript,s=o.finalTranscript,l=o.newText;r.updateElements(a,s,l)}})}},{key:"stop",value:function(r){var i;this._stopping=!0,(i=this._service)===null||i===void 0||i.stop(),this.finalise(r)}},{key:"error",value:function(r){console.error(r),this.setStateOnError(r),this.stop()}}],[{key:"getAPI",value:function(){return window.webkitSpeechRecognition||window.SpeechRecognition}}]),t}(XB.Speech);Yl.WebSpeech=QB;var nc={};Object.defineProperty(nc,"__esModule",{value:!0});nc.GlobalState=void 0;var F1=function(){function e(){T(this,e)}return M(e,null,[{key:"doubleClickDetector",value:function(){return e.doubleClickPending?!0:(e.doubleClickPending=!0,setTimeout(function(){e.doubleClickPending=!1},300),!1)}}]),e}();nc.GlobalState=F1;F1.doubleClickPending=!1;var rc={},ic={};Object.defineProperty(ic,"__esModule",{value:!0});ic.PreventConnectionStop=void 0;var ej=function(){function e(){T(this,e)}return M(e,null,[{key:"applyPrevention",value:function(n){clearTimeout(n._manualConnectionStopPrevention),n.cannotBeStopped=!0,n._manualConnectionStopPrevention=setTimeout(function(){n.cannotBeStopped=!1},800)}},{key:"clearPrevention",value:function(n){clearTimeout(n._manualConnectionStopPrevention),n.cannotBeStopped=!1}}]),e}();ic.PreventConnectionStop=ej;var oc={},ac={};Object.defineProperty(ac,"__esModule",{value:!0});ac.README_URL=void 0;ac.README_URL="https://github.com/OvidijusParsiunas/speech-to-element";Object.defineProperty(oc,"__esModule",{value:!0});oc.AzureSpeechConfig=void 0;var $c=ac,tj=function(){function e(){T(this,e)}return M(e,null,[{key:"validateOptions",value:function(n,r){return r?!r.subscriptionKey&&!r.token&&!r.retrieveToken?(n("Please define a 'subscriptionKey', 'token' or 'retrieveToken' property - more info: ".concat($c.README_URL)),!1):r.region?!0:(n("Please define a 'region' property - more info: ".concat($c.README_URL)),!1):(n("Please provide subscription details - more info: ".concat($c.README_URL)),!1)}},{key:"getNewSpeechConfig",value:function(){var t=D(_().mark(function r(i,o){return _().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o.region){s.next=2;break}return s.abrupt("return",o.subscriptionKey?i.fromSubscription(o.subscriptionKey.trim(),o.region.trim()):o.token?i.fromAuthorizationToken(o.token.trim(),o.region.trim()):o.retrieveToken?o.retrieveToken().then(function(l){return o.region?i.fromAuthorizationToken((l==null?void 0:l.trim())||"",o.region.trim()):null}).catch(function(l){return console.error(l),null}):null);case 2:case"end":return s.stop()}},r)}));function n(r,i){return t.apply(this,arguments)}return n}()},{key:"process",value:function(n,r){r.language&&(n.speechRecognitionLanguage=r.language.trim())}},{key:"get",value:function(){var t=D(_().mark(function r(i,o){var a;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,e.getNewSpeechConfig(i,o);case 2:return a=l.sent,l.abrupt("return",(a&&e.process(a,o),a));case 4:case"end":return l.stop()}},r)}));function n(r,i){return t.apply(this,arguments)}return n}()}]),e}();oc.AzureSpeechConfig=tj;var sc={};Object.defineProperty(sc,"__esModule",{value:!0});sc.StopTimeout=void 0;var B1=function(){function e(){T(this,e)}return M(e,null,[{key:"set",value:function(n){n.stopTimeout=setTimeout(function(){return n.stop()},n.stopTimeoutMS)}},{key:"reset",value:function(n,r){n.stopTimeoutMS=r||e.DEFAULT_MS,n.stopTimeout&&clearTimeout(n.stopTimeout),e.set(n)}}]),e}();sc.StopTimeout=B1;B1.DEFAULT_MS=2e4;var lc={};Object.defineProperty(lc,"__esModule",{value:!0});lc.AzureTranscript=void 0;var nj=ma,rj=function(){function e(){T(this,e)}return M(e,null,[{key:"extract",value:function(n,r,i,o){return o&&(n=nj.Translate.translate(n,o)),i?{interimTranscript:"",finalTranscript:r+n,newText:n}:{interimTranscript:n,finalTranscript:r,newText:n}}}]),e}();lc.AzureTranscript=rj;Object.defineProperty(rc,"__esModule",{value:!0});rc.Azure=void 0;var og=ic,ag=oc,Hc=sc,sg=lc,ij=ga,oj=function(e){pe(t,e);function t(){var n;return T(this,t),n=he(this,t,arguments),n._newTextPadding="",n}return M(t,[{key:"start",value:function(r,i){this._newTextPadding="",this.stopTimeout===void 0&&Hc.StopTimeout.reset(this,r==null?void 0:r.stopAfterSilenceMs),this.prepareBeforeStart(r),this.startAsync(r),i||og.PreventConnectionStop.applyPrevention(this)}},{key:"startAsync",value:function(){var n=D(_().mark(function i(o){var a;return _().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(l.t0=this.validate(o),!l.t0){l.next=6;break}return l.next=4,this.instantiateService(o);case 4:this._translations=o==null?void 0:o.translations,(a=this._service)===null||a===void 0||a.startContinuousRecognitionAsync(function(){},this.error);case 6:case"end":return l.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"validate",value:function(r){return t.getAPI()?ag.AzureSpeechConfig.validateOptions(this.error.bind(this),r):(this.moduleNotFound(),!1)}},{key:"instantiateService",value:function(){var n=D(_().mark(function i(o){var a,s,l,c;return _().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=t.getAPI(),s=a.AudioConfig.fromDefaultMicrophoneInput(),d.next=4,ag.AzureSpeechConfig.get(a.SpeechConfig,o);case 4:l=d.sent,l?(c=new a.SpeechRecognizer(l,s),this.setEvents(c),this._service=c,o.retrieveToken&&this.retrieveTokenInterval(o.retrieveToken)):this.error("Unable to contact Azure server");case 6:case"end":return d.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"setEvents",value:function(r){r.recognizing=this.onRecognizing.bind(this),r.recognized=this.onRecognized.bind(this),r.sessionStarted=this.onSessionStarted.bind(this),r.canceled=this.onCanceled.bind(this),r.sessionStopped=this.onSessionStopped.bind(this)}},{key:"onRecognizing",value:function(r,i){if(!this._stopping){var o=sg.AzureTranscript.extract(this._newTextPadding+i.result.text,this.finalTranscript,!1,this._translations),a=o.interimTranscript,s=o.finalTranscript,l=o.newText;Hc.StopTimeout.reset(this,this.stopTimeoutMS),this.updateElements(a,s,l)}}},{key:"onRecognized",value:function(r,i){var o=i.result;switch(o.reason){case window.SpeechSDK.ResultReason.Canceled:break;case window.SpeechSDK.ResultReason.RecognizedSpeech:if(o.text&&!this._stopping){var a=sg.AzureTranscript.extract(this._newTextPadding+o.text,this.finalTranscript,!0,this._translations),s=a.interimTranscript,l=a.finalTranscript,c=a.newText;Hc.StopTimeout.reset(this,this.stopTimeoutMS),this.updateElements(s,l,c),l!==""&&(this._newTextPadding=" ")}break}}},{key:"onCanceled",value:function(r,i){i.reason===window.SpeechSDK.CancellationReason.Error&&this.error(i.errorDetails)}},{key:"onSessionStarted",value:function(){og.PreventConnectionStop.clearPrevention(this),this.setStateOnStart()}},{key:"onSessionStopped",value:function(){this._retrieveTokenInterval||clearInterval(this._retrieveTokenInterval),this._stopping=!1,this.setStateOnStop()}},{key:"retrieveTokenInterval",value:function(r){var i=this;this._retrieveTokenInterval=setInterval(function(){r==null||r().then(function(o){i._service&&(i._service.authorizationToken=(o==null?void 0:o.trim())||"")}).catch(function(o){i.error(o)})},1e4)}},{key:"stop",value:function(r){var i;!r&&this._retrieveTokenInterval&&clearInterval(this._retrieveTokenInterval),this._stopping=!0,(i=this._service)===null||i===void 0||i.stopContinuousRecognitionAsync(),this.finalise(r)}},{key:"moduleNotFound",value:function(){console.error("speech recognition module not found:"),console.error(`please install the 'microsoft-cognitiveservices-speech-sdk' npm package or add a script tag: <script src="https://aka.ms/csspeech/jsbrowserpackageraw"><\/script>`),this.setStateOnError("speech recognition module not found")}},{key:"error",value:function(r){this._retrieveTokenInterval&&clearInterval(this._retrieveTokenInterval),console.error(r),this.setStateOnError(r),this.stop()}}],[{key:"getAPI",value:function(){return window.SpeechSDK}}]),t}(ij.Speech);rc.Azure=oj;Object.defineProperty(D1,"__esModule",{value:!0});var lg=Yl,aj=va,pn=nc,sj=rc,lj=function(){function e(){T(this,e)}return M(e,null,[{key:"toggle",value:function(n,r){var i,o,a=n.toLocaleLowerCase().trim();!((i=pn.GlobalState.service)===null||i===void 0)&&i.recognizing?this.stop():a==="webspeech"?e.startWebSpeech(r):a==="azure"?e.startAzure(r):(console.error("service not found - must be either 'webspeech' or 'azure'"),(o=r==null?void 0:r.onError)===null||o===void 0||o.call(r,"service not found - must be either 'webspeech' or 'azure'"))}},{key:"startWebSpeech",value:function(n){e.stop()||(pn.GlobalState.service=new lg.WebSpeech,pn.GlobalState.service.start(n))}},{key:"isWebSpeechSupported",value:function(){return!!lg.WebSpeech.getAPI()}},{key:"startAzure",value:function(n){var r;e.stop()||!((r=pn.GlobalState.service)===null||r===void 0)&&r.cannotBeStopped||(pn.GlobalState.service=new sj.Azure,pn.GlobalState.service.start(n))}},{key:"stop",value:function(){var n;return pn.GlobalState.doubleClickDetector()?!0:(!((n=pn.GlobalState.service)===null||n===void 0)&&n.recognizing&&pn.GlobalState.service.stop(),!1)}},{key:"endCommandMode",value:function(){pn.GlobalState.service&&aj.CommandUtils.toggleCommandModeOff(pn.GlobalState.service)}}]),e}(),qc=D1.default=lj,cj=function(e){pe(t,e);function t(n,r,i){var o;T(this,t);var a;o=he(this,t,[fe(n.speechToText)=="object"?(a=n.speechToText)==null?void 0:a.button:{}]);var s=t.processConfiguration(r,n.speechToText),l=s.serviceName,c=s.processedConfig;if(o._addErrorMessage=i,l==="webspeech"&&!qc.isWebSpeechSupported())o.changeToUnsupported();else{var u=!n.textInput||!n.textInput.disabled;o.elementRef.onclick=o.buttonClick.bind(Qt(o),r,u,l,c)}return o}return M(t,[{key:"buttonClick",value:function(r,i,o,a){r.removeTextIfPlaceholder(),qc.toggle(o,Ne({insertInCursorLocation:!1,element:i?r.inputElementRef:void 0,onError:this.onError.bind(this),onStart:this.changeToActive.bind(this),onStop:this.changeToDefault.bind(this),onCommandModeTrigger:this.onCommandModeTrigger.bind(this)},a))}},{key:"onCommandModeTrigger",value:function(r){r?this.changeToCommandMode():this.changeToActive()}},{key:"onError",value:function(){this._addErrorMessage("speechToText","speech input error")}}],[{key:"processConfiguration",value:function(r,i){var o,a,s,l,c,u=fe(i)=="object"?i:{},d=fe(u.webSpeech)=="object"?u.webSpeech:{},f=u.azure||{},h=Ne(Ne({displayInterimResults:(o=u.displayInterimResults)!==null&&o!==void 0?o:void 0,textColor:(a=u.textColor)!==null&&a!==void 0?a:void 0,translations:(s=u.translations)!==null&&s!==void 0?s:void 0,commands:(l=u.commands)!==null&&l!==void 0?l:void 0},d),f),p=(c=u.commands)==null?void 0:c.submit;return p&&(h.onPreResult=function(m){return m.toLowerCase().includes(p)?(setTimeout(function(){var y;return(y=r.submit)==null?void 0:y.call(r)}),qc.endCommandMode(),{restart:!0,removeNewText:!0}):null}),{serviceName:t.getServiceName(u),processedConfig:h}}},{key:"getServiceName",value:function(r){return r.webSpeech?"webspeech":r.azure?"azure":"webspeech"}}]),t}(L1),j1=function(){function e(){T(this,e)}return M(e,null,[{key:"getFileName",value:function(n,r){var i=new Date,o=String(i.getHours()).padStart(2,"0"),a=String(i.getMinutes()).padStart(2,"0"),s=String(i.getSeconds()).padStart(2,"0");return"".concat(n,"-").concat(o,"-").concat(a,"-").concat(s,".").concat(r)}}]),e}(),uj=function(e){pe(t,e);function t(n,r){var i;T(this,t);var o,a;return i=he(this,t,[r.button]),i._waitingForBrowserApproval=!1,i._audioType=n,i._extension=((o=r.files)==null?void 0:o.format)||"mp3",i._maxDurationSeconds=(a=r.files)==null?void 0:a.maxDurationSeconds,i.elementRef.onclick=i.buttonClick.bind(Qt(i)),i}return M(t,[{key:"buttonClick",value:function(){this._waitingForBrowserApproval||(this.isActive?this.stop():(this._waitingForBrowserApproval=!0,this.record()))}},{key:"stop",value:function(){var r=this;return new Promise(function(i){var o,a;r.changeToDefault(),(o=r._mediaRecorder)==null||o.stop(),(a=r._mediaStream)==null||a.getTracks().forEach(function(s){return s.stop()}),setTimeout(function(){i()},10)})}},{key:"record",value:function(){var r=this;navigator.mediaDevices.getUserMedia({audio:!0}).then(function(i){r.changeToActive(),r._mediaRecorder=new MediaRecorder(i),r._audioType.addPlaceholderAttachment(r.stop.bind(r),r._maxDurationSeconds),r._mediaStream=i,r._mediaRecorder.addEventListener("dataavailable",function(o){r.createFile(o)}),r._mediaRecorder.start()}).catch(function(i){console.error(i),r.stop()}).finally(function(){r._waitingForBrowserApproval=!1})}},{key:"createFile",value:function(r){var i=this,o=new Blob([r.data],{type:"audio/".concat(this._extension)}),a=j1.getFileName(this._newFilePrefix||"audio",this._extension),s=new File([o],a,{type:o.type}),l=new FileReader;l.readAsDataURL(s),l.onload=function(c){i._audioType.completePlaceholderAttachment(s,c.target.result)}}}]),t}(L1),dj=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg xmlns="http://www.w3.org/2000/svg" stroke="currentColor" fill="none" stroke-width="1" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
  <line x1="22" y1="2" x2="11" y2="14"></line>
  <polygon points="22 2 15 22 11 14 2 10 22 2"></polygon>
</svg>
`,Tr=function(){function e(){T(this,e)}return M(e,null,[{key:"setPropertyValueIfDoesNotExist",value:function(n,r,i){var o,a,s=r[0];r.length===1?(o=n[s])!==null&&o!==void 0||(n[s]=i):((a=n[s])!==null&&a!==void 0||(n[s]={}),r.shift(),e.setPropertyValueIfDoesNotExist(n[s],r,i))}},{key:"setPropertyValue",value:function(n,r,i){var o,a=r[0];r.length===1?n[a]=i:((o=n[a])!==null&&o!==void 0||(n[a]={}),r.shift(),e.setPropertyValue(n[a],r,i))}},{key:"getObjectValue",value:function(n,r){var i=r[0],o=n[i];return o===void 0||r.length===1?o:e.getObjectValue(o,r.slice(1))}},{key:"overwritePropertyObjectFromAnother",value:function(n,r,i){var o=e.getObjectValue(r,i);if(o){var a=Ne(Ne({},o),e.getObjectValue(n,i)||{});e.setPropertyValue(n,i,a)}}}]),e}(),cg=function(){function e(){T(this,e)}return M(e,null,[{key:"resetSubmit",value:function(n,r){r?n.unsetCustomStateStyles(["loading","submit"]):n.unsetCustomStateStyles(["stop","loading","submit"]),n.reapplyStateStyle("submit")}},{key:"overwriteDefaultStyleWithSubmit",value:function(n,r){if(n.submit){var i=JSON.parse(JSON.stringify(n[r]||{}));Tr.overwritePropertyObjectFromAnother(i,n.submit,["container","default"]),Tr.overwritePropertyObjectFromAnother(i,n.submit,["text","styles","default"]),Tr.overwritePropertyObjectFromAnother(i,n.submit,["svg","styles","default"]),n[r]=i}}},{key:"setUpDisabledButton",value:function(n){Tr.setPropertyValueIfDoesNotExist(n,["submit","container","default","backgroundColor"],""),Tr.setPropertyValueIfDoesNotExist(n,["disabled","container","default","backgroundColor"],"unset"),Tr.setPropertyValueIfDoesNotExist(n.submit,["svg","styles","default","filter"],""),Tr.setPropertyValueIfDoesNotExist(n.disabled,["svg","styles","default","filter"],"brightness(0) saturate(100%) invert(70%) sepia(0%) saturate(5564%) hue-rotate(207deg) brightness(100%) contrast(97%)"),e.overwriteDefaultStyleWithSubmit(n,"disabled")}},{key:"process",value:function(n){var r=JSON.parse(JSON.stringify(n||{}));return e.overwriteDefaultStyleWithSubmit(r,"loading"),e.overwriteDefaultStyleWithSubmit(r,"stop"),n!=null&&n.alwaysEnabled||e.setUpDisabledButton(r),r}}]),e}(),cc=function(e){pe(t,e);function t(n,r,i,o,a){var s;T(this,t);var l=cg.process(n.submitButtonStyles);return s=he(this,t,[t.createButtonContainerElement(),l==null?void 0:l.position,l]),s._isSVGLoadingIconOverriden=!1,s.status={requestInProgress:!1,loadingActive:!1},s._messages=i,s._inputElementRef=r,s._fileAttachments=a,s._innerElements=s.createInnerElements(),s._abortStream=new AbortController,s._stopClicked={listener:function(){}},s._serviceIO=o,s._alwaysEnabled=!!(l!=null&&l.alwaysEnabled),n.disableSubmitButton=s.disableSubmitButton.bind(Qt(s),o),s.attemptOverwriteLoadingStyle(n),setTimeout(function(){var c;s._validationHandler=n._validationHandler,s.assignHandlers(s._validationHandler),(c=s._validationHandler)==null||c.call(Qt(s))}),s}return M(t,[{key:"createInnerElements",value:function(){var r=Ri.create(this.elementRef,["submit","loading","stop"],this._customStyles),i=r.submit,o=r.loading,a=r.stop,s=i||t.createSubmitIconElement();return{submit:s,loading:o||t.createLoadingIconElement(),stop:a||t.createStopIconElement(),disabled:this.createDisabledIconElement(s)}}},{key:"createDisabledIconElement",value:function(r){return Ri.createCustomElement("disabled",this._customStyles)||r.cloneNode(!0)}},{key:"attemptOverwriteLoadingStyle",value:function(r){var i,o,a,s,l,c,u,d,f;if(!((o=(i=this._customStyles)==null?void 0:i.submit)!=null&&o.svg||(l=(s=(a=this._customStyles)==null?void 0:a.loading)==null?void 0:s.svg)!=null&&l.content||(d=(u=(c=this._customStyles)==null?void 0:c.loading)==null?void 0:u.text)!=null&&d.content)&&(r.displayLoadingBubble===void 0||r.displayLoadingBubble===!0)){var h=document.createElement("style");h.textContent=`
        .loading-button > * {
          filter: brightness(0) saturate(100%) invert(72%) sepia(0%) saturate(3044%) hue-rotate(322deg) brightness(100%)
            contrast(96%) !important;
        }`,(f=r.shadowRoot)==null||f.appendChild(h),this._isSVGLoadingIconOverriden=!0}}},{key:"assignHandlers",value:function(r){this._serviceIO.completionsHandlers={onFinish:this.resetSubmit.bind(this,r)},this._serviceIO.streamHandlers={onOpen:this.changeToStopIcon.bind(this),onClose:this.resetSubmit.bind(this,r),abortStream:this._abortStream,stopClicked:this._stopClicked};var i=this._serviceIO.deepChat.stream;fe(i)=="object"&&typeof i.simulation=="number"&&(this._serviceIO.streamHandlers.simulationInterim=i.simulation)}},{key:"resetSubmit",value:function(r){this.status.requestInProgress=!1,this.status.loadingActive=!1,r()}},{key:"submitFromInput",value:function(){var n=D(_().mark(function i(){var o,a,s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this._fileAttachments.completePlaceholders();case 2:a=this._fileAttachments.getAllFileData(),this._inputElementRef.classList.contains("text-input-placeholder")?this.attemptSubmit({text:"",files:a}):(s=(o=this._inputElementRef.textContent)==null?void 0:o.trim(),this.attemptSubmit({text:s,files:a}));case 4:case"end":return c.stop()}},i,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"programmaticSubmit",value:function(){var n=D(_().mark(function i(o){var a=this,s;return _().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:typeof o=="string"&&(o=$r.processSubmitUserMessage(o)),s={text:o.text},o.files&&(s.files=Array.from(o.files).map(function(u){return{file:u,type:xf.getTypeFromBlob(u)}})),setTimeout(function(){return a.attemptSubmit(s,!0)});case 3:case"end":return c.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"attemptSubmit",value:function(){var n=D(_().mark(function i(o){var a,s,l,c,u,d,f=arguments;return _().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return a=f.length>1&&f[1]!==void 0?f[1]:!1,p.next=3,(s=this._validationHandler)==null?void 0:s.call(this,a?o:void 0);case 3:if(p.t0=p.sent,p.t1=!1,p.t0!==p.t1){p.next=7;break}return p.abrupt("return");case 7:return this.changeToLoadingIcon(),p.next=10,this.addNewMessage(o);case 10:return this._serviceIO.isWebModel()||this._messages.addLoadingMessage(),hf.clear(this._inputElementRef),u=(l=o.files)==null?void 0:l.map(function(m){return m.file}),d={text:o.text===""?void 0:o.text,files:u},p.next=15,this._serviceIO.callAPI(d,this._messages);case 15:(c=this._fileAttachments)==null||c.removeAllFiles();case 16:case"end":return p.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"addNewMessage",value:function(){var n=D(_().mark(function i(o){var a,s,l;return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=o.text,s=o.files,l={role:_e.USER_ROLE},a&&(l.text=a),u.t0=s,!u.t0){u.next=8;break}return u.next=7,this._messages.addMultipleFiles(s);case 7:l.files=u.sent;case 8:this._serviceIO.sessionId&&(l._sessionId=this._serviceIO.sessionId),Object.keys(l).length>0&&this._messages.addNewMessage(l);case 10:case"end":return u.stop()}},i,this)}));function r(i){return n.apply(this,arguments)}return r}()},{key:"stopStream",value:function(){var r;this._abortStream.abort(),(r=this._stopClicked)==null||r.listener(),this._validationHandler&&this.resetSubmit(this._validationHandler)}},{key:"changeToStopIcon",value:function(){this._serviceIO.websocket||(this.elementRef.classList.remove(t.LOADING_CLASS,t.DISABLED_CLASS,t.SUBMIT_CLASS),this.elementRef.replaceChildren(this._innerElements.stop),this.reapplyStateStyle("stop",["loading","submit"]),this.elementRef.onclick=this.stopStream.bind(this),this.status.loadingActive=!1)}},{key:"changeToLoadingIcon",value:function(){this._serviceIO.websocket||(this._isSVGLoadingIconOverriden||this.elementRef.replaceChildren(this._innerElements.loading),this.elementRef.classList.remove(t.SUBMIT_CLASS,t.DISABLED_CLASS),this.elementRef.classList.add(t.LOADING_CLASS),this.reapplyStateStyle("loading",["submit"]),this.elementRef.onclick=function(){},this.status.requestInProgress=!0,this.status.loadingActive=!0)}},{key:"changeToSubmitIcon",value:function(){this.elementRef.classList.contains(t.SUBMIT_CLASS)||(this.elementRef.classList.remove(t.LOADING_CLASS,t.DISABLED_CLASS),this.elementRef.classList.add(t.SUBMIT_CLASS),this.elementRef.replaceChildren(this._innerElements.submit),cg.resetSubmit(this,this.status.loadingActive),this.elementRef.onclick=this.submitFromInput.bind(this))}},{key:"changeToDisabledIcon",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._alwaysEnabled&&!r?this.changeToSubmitIcon():this.elementRef.classList.contains(t.DISABLED_CLASS)||(this.elementRef.classList.remove(t.LOADING_CLASS,t.SUBMIT_CLASS),this.elementRef.classList.add(t.DISABLED_CLASS),this.elementRef.replaceChildren(this._innerElements.disabled),this.reapplyStateStyle("disabled",["submit"]),this.elementRef.onclick=function(){})}},{key:"disableSubmitButton",value:function(r,i){var o;r.isSubmitProgrammaticallyDisabled=i!==!1,!(this.status.requestInProgress||this.status.loadingActive)&&(i===!1?(o=this._validationHandler)==null||o.call(this):this.changeToDisabledIcon(!0))}}],[{key:"createButtonContainerElement",value:function(){var r=document.createElement("div");return r.classList.add("input-button"),r}},{key:"createSubmitIconElement",value:function(){var r=tn.createSVGElement(dj);return r.id="submit-icon",r}},{key:"createLoadingIconElement",value:function(){var r=document.createElement("div");return r.classList.add("dots-jumping"),r}},{key:"createStopIconElement",value:function(){var r=document.createElement("div");return r.id="stop-icon",r}}]),t}(pa);cc.SUBMIT_CLASS="submit-button";cc.LOADING_CLASS="loading-button";cc.DISABLED_CLASS="disabled-button";var fj=cc,hj=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
  <path d="M27.1 14.313V5.396L24.158 8.34c-2.33-2.325-5.033-3.503-8.11-3.503C9.902 4.837 4.901 9.847 4.899 16c.001 6.152 5.003 11.158 11.15 11.16 4.276 0 9.369-2.227 10.836-8.478l.028-.122h-3.23l-.022.068c-1.078 3.242-4.138 5.421-7.613 5.421a8 8 0 0 1-5.691-2.359A7.993 7.993 0 0 1 8 16.001c0-4.438 3.611-8.049 8.05-8.049 2.069 0 3.638.58 5.924 2.573l-3.792 3.789H27.1z"/>
</svg>
`,pj=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <title>capture</title>
  <path d="M0 16q0 3.264 1.28 6.208t3.392 5.12 5.12 3.424 6.208 1.248 6.208-1.248 5.12-3.424 3.392-5.12 1.28-6.208-1.28-6.208-3.392-5.12-5.088-3.392-6.24-1.28q-3.264 0-6.208 1.28t-5.12 3.392-3.392 5.12-1.28 6.208zM4 16q0-3.264 1.6-6.016t4.384-4.352 6.016-1.632 6.016 1.632 4.384 4.352 1.6 6.016-1.6 6.048-4.384 4.352-6.016 1.6-6.016-1.6-4.384-4.352-1.6-6.048z"></path>
</svg>
`,mj=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
  <path d="M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"/>
</svg>`,gj=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M4.89163 13.2687L9.16582 17.5427L18.7085 8" stroke="#000000" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,vj=function(e){pe(t,e);function t(n,r,i,o){var a;T(this,t),a=he(this,t,[n,["modal-content","modal-camera-content"],i]),a._stopped=!1,a._format="image/png",a._canvas=document.createElement("canvas"),a._canvas.classList.add("camera-modal-canvas");var s=a.addButtonsAndTheirEvents(r),l=s.captureButton,c=s.submitButton;return a._captureButton=l,a._submitButton=c,a._captureIcon=a._captureButton.children[0],a._refreshIcon=tn.createSVGElement(hj),a._refreshIcon.classList.add("modal-svg-button-icon","modal-svg-refresh-icon"),(o==null?void 0:o.format)==="jpeg"&&(a._format="image/jpeg"),o!=null&&o.dimensions&&(a._dimensions=o.dimensions),a._contentRef.appendChild(a._canvas),a.extensionCloseCallback=a.stop,a}return M(t,[{key:"addButtonsAndTheirEvents",value:function(r){var i=bo.createSVGButton(pj);i.classList.add("modal-svg-camera-button"),i.children[0].classList.add("modal-svg-camera-icon");var o=this.addCloseButton(mj,!0);o.classList.add("modal-svg-close-button"),o.children[0].classList.add("modal-svg-close-icon");var a=bo.createSVGButton(gj);return a.classList.add("modal-svg-submit-button"),this.addButtons(i,a),this.addButtonEvents(i,o,a,r),{captureButton:i,submitButton:a}}},{key:"addButtonEvents",value:function(r,i,o,a){var s=this;r.onclick=function(){s.capture()},i.addEventListener("click",this.stop.bind(this)),o.onclick=function(){var l=s.getFile();l&&Af.addFilesToType([l],[a]),s.stop(),s.close()}}},{key:"stop",value:function(){var r=this;this._mediaStream&&this._mediaStream.getTracks().forEach(function(i){return i.stop()}),this._stopped=!0,setTimeout(function(){r._captureButton.replaceChildren(r._captureIcon),r._captureButton.classList.replace("modal-svg-refresh-button","modal-svg-camera-button");var i=r._canvas.getContext("2d");i==null||i.clearRect(0,0,r._canvas.width,r._canvas.height)},bo.MODAL_CLOSE_TIMEOUT_MS)}},{key:"start",value:function(){var r=this;this._dataURL=void 0,this._submitButton.classList.add("modal-svg-submit-disabled"),this._stopped=!1,navigator.mediaDevices.getUserMedia({video:this._dimensions||!0}).then(function(i){if(r._mediaStream=i,!r.isOpen())return r.stop();var o=document.createElement("video");o.srcObject=i,o.play(),requestAnimationFrame(r.updateCanvas.bind(r,o,r._canvas))}).catch(function(i){console.error(i),r.stop(),r.close()})}},{key:"capture",value:function(){this._dataURL?(this._captureButton.replaceChildren(this._captureIcon),this._captureButton.classList.replace("modal-svg-refresh-button","modal-svg-camera-button"),this._submitButton.classList.add("modal-svg-submit-disabled"),this._dataURL=void 0):(this._captureButton.replaceChildren(this._refreshIcon),this._captureButton.classList.replace("modal-svg-camera-button","modal-svg-refresh-button"),this._submitButton.classList.remove("modal-svg-submit-disabled"),this._dataURL=this._canvas.toDataURL())}},{key:"getFile",value:function(){if(this._dataURL){for(var r=atob(this._dataURL.split(",")[1]),i=new Array(r.length),o=0;o<r.length;o++)i[o]=r.charCodeAt(o);var a=new Uint8Array(i),s=new Blob([a],{type:this._format}),l=this._format==="image/jpeg"?"jpeg":"png",c=j1.getFileName(this._newFilePrefix||"photo",l);return new File([s],c,{type:s.type})}}},{key:"updateCanvas",value:function(r,i){if(!this._stopped){if(!this._dataURL){i.width=r.videoWidth,i.height=r.videoHeight;var o=i.getContext("2d");o==null||o.drawImage(r,0,0,i.width,i.height)}requestAnimationFrame(this.updateCanvas.bind(this,r,i))}}},{key:"openCameraModal",value:function(r){this.displayModalElements(),r.start()}}],[{key:"createCameraModalFunc",value:function(r,i,o,a){var s=new t(r,i,o,a);return s.openCameraModal.bind(s,s)}}]),t}(bo),yj=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M29 7h-4.599l-2.401-4h-12l-2.4 4h-4.6c-1 0-3 1-3 2.969v16.031c0 1.657 1.5 3 2.792 3h26.271c1.313 0 2.938-1.406 2.938-2.968v-16.032c0-1-1-3-3-3zM30 26.032c0 0.395-0.639 0.947-0.937 0.969h-26.265c-0.232-0.019-0.797-0.47-0.797-1v-16.031c0-0.634 0.851-0.953 1-0.969h5.732l2.4-4h9.802l1.785 3.030 0.55 0.97h5.731c0.705 0 0.99 0.921 1 1v16.032zM16 10c-3.866 0-7 3.134-7 7s3.134 7 7 7 7-3.134 7-7-3.134-7-7-7zM16 22c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"></path>
</svg>`,bj=function(e){pe(t,e);function t(n,r,i){var o;T(this,t);var a;o=he(this,t,[t.createButtonElement(),(a=i==null?void 0:i.button)==null?void 0:a.position,(i==null?void 0:i.button)||{},"Photo"]);var s=o.createInnerElements(o._customStyles);return i&&o.addClickEvent(n,r,i.modalContainerStyle,i.files),o.elementRef.classList.add("upload-file-button"),o.elementRef.appendChild(s.styles),o.reapplyStateStyle("styles"),o}return M(t,[{key:"createInnerElements",value:function(r){return{styles:this.createInnerElement(t.createSVGIconElement(),"styles",r)}}},{key:"createInnerElement",value:function(r,i,o){return Ri.createSpecificStateElement(this.elementRef,i,o)||r}},{key:"addClickEvent",value:function(r,i,o,a){var s=vj.createCameraModalFunc(r,i,o,a);this.elementRef.onclick=s}}],[{key:"createButtonElement",value:function(){var r=document.createElement("div");return r.classList.add("input-button"),r}},{key:"createSVGIconElement",value:function(){var r=tn.createSVGElement(yj);return r.id="camera-icon",r}}]),t}(pa),_j=function(){function e(t,n,r,i){T(this,e),this.elementRef=e.createPanelElement(t.inputAreaStyle);var o=new hf(t,r),a={},s=this.createFileUploadComponents(t,r,i,a);t.speechToText&&!a.microphone&&(a.microphone={button:new cj(t,o,n.addNewErrorMessage.bind(n))});var l=new fj(t,o.inputElementRef,n,r,s);o.submit=l.submitFromInput.bind(l),OB.attach(t,r,o,s,l),t.submitUserMessage=l.programmaticSubmit.bind(l),a.submit={button:l},e.addElements(this.elementRef,o,a,i,s,t.dropupStyles)}return M(e,[{key:"createFileUploadComponents",value:function(n,r,i,o){var a,s,l,c,u=new Af(this.elementRef,n.attachmentContainerStyle,r.demo);if(e.createUploadButtons(n,r.fileTypes||{},u,i,o),(a=r.camera)!=null&&a.files){var d=((s=o.images)==null?void 0:s.fileType)||u.addType(n,r.camera.files,"images");o.camera={button:new bj(i,d,r.camera)}}if((l=r.recordAudio)!=null&&l.files){var f=((c=o.audio)==null?void 0:c.fileType)||u.addType(n,r.recordAudio.files,"audio");o.microphone={button:new uj(f,r.recordAudio)}}return Km.isEnabled(u,n.dragAndDrop)&&Km.create(i,u,n.dragAndDrop),u}}],[{key:"createPanelElement",value:function(n){var r=document.createElement("div");return r.id="input",Object.assign(r.style,n),r}},{key:"createUploadButtons",value:function(n,r,i,o,a){Object.keys(r).forEach(function(s){var l=s,c=r[l];if(c.files){var u=i.addType(n,c.files,l),d=MB[l],f=d.id,h=d.svgString,p=d.dropupText,m=new NB(o,u,c,f,h,p);a[l]={button:m,fileType:u}}})}},{key:"addElements",value:function(n,r,i,o,a,s){en.addElements(n,r.elementRef);var l=$s.create(),c=IB.addButtons(l,i,o,s);SB.set(r.inputElementRef,l,a.elementRef,c),$s.add(n,l)}}]),e}(),Sj=function(){function e(){T(this,e)}return M(e,null,[{key:"createElements",value:function(n,r,i){var o=document.createElement("div");o.id="chat-view";var a=new _B(n,r,i);r.websocket&&Jo.createConnection(r,a);var s=new _j(n,a,r,o);return en.addElements(o,a.elementRef,s.elementRef),o}},{key:"render",value:function(n,r,i,o){var a=e.createElements(n,i,o);r.replaceChildren(a)}}]),e}(),wj=`#validate-property-key-view{height:100%;position:relative;display:flex;justify-content:center;align-items:center;padding:8px}#large-loading-ring{display:inline-block;width:50px;height:50px}#large-loading-ring:after{content:" ";display:block;width:38px;height:38px;margin:1px;border-radius:50%;border:5px solid #5fb2ff;border-color:#5fb2ff transparent #5fb2ff transparent;animation:large-loading-ring 1.4s linear infinite}@keyframes large-loading-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}#insert-key-view{height:100%;position:relative}#insert-key-contents{text-align:center;position:absolute;top:44%;left:50%;transform:translate(-50%,-50%);width:82%;display:flex;max-width:700px}#insert-key-title{margin-bottom:15px}#insert-key-input-container{margin-right:2.7em;width:calc(100% - 80px)}#insert-key-input{padding:.3em 1.7em .3em .3em;border-width:1px;border-style:solid;border-radius:3px;width:100%;font-size:inherit}.insert-key-input-valid{border-color:gray}.insert-key-input-invalid{border-color:red}#visibility-icon-container{position:relative;float:right;cursor:pointer;-webkit-user-select:none;user-select:none}.visibility-icon{filter:brightness(0) saturate(100%) invert(63%) sepia(1%) saturate(9%) hue-rotate(43deg) brightness(98%) contrast(92%);position:absolute;right:-1.7em;top:-1.43em}#visible-icon{top:-1.4em}.visibility-icon:hover{filter:unset}.visibility-icon>*{pointer-events:none}#start-button{border:1px solid grey;color:#454545;border-radius:4px;width:3em;display:flex;justify-content:center;align-items:center;cursor:pointer;padding:.28em .3em;-webkit-user-select:none;user-select:none;background-color:#fff}#start-button:hover{background-color:#f2f2f2}#start-button:active{background-color:#d2d2d2}#insert-key-help-text-container{width:100%;position:absolute;margin-top:32px;margin-bottom:20px}#insert-key-help-text-contents{width:100%;position:absolute}#insert-key-input-invalid-text{display:block;margin-top:1em;margin-bottom:.5em;color:red}.insert-key-input-help-text{display:block;margin-top:16px}#loading-ring{display:inline-block;width:16px;height:16px}#loading-ring:after{content:" ";display:block;width:11px;height:11px;margin:1px;border-radius:50%;border:2px solid #0084ff;border-color:#0084ff transparent #0084ff transparent;animation:loading-ring 1.2s linear infinite}@keyframes loading-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}#error-view{color:red;font-size:1.2em;line-height:1.3em;margin-top:-5px;text-align:center;height:100%;display:flex;justify-content:center;align-items:center;padding-left:8px;padding-right:8px}.intro-panel{position:absolute;display:flex;justify-content:center;right:0;bottom:0;left:0;margin:auto;height:fit-content;top:-2.5em}#internal-intro-panel{width:250px;height:min-content;display:block;border-radius:5px;overflow:auto;border:1px solid rgb(203,203,203);padding:10px;max-height:calc(100% - 6.8em)}#internal-intro-panel>p{margin-block-start:.8em;margin-block-end:.8em}pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
  Theme: a11y-dark
  Author: @ericwbailey
  Maintainer: @ericwbailey

  Based on the Tomorrow Night Eighties theme: https://github.com/isagalaev/highlight.js/blob/master/src/styles/tomorrow-night-eighties.css
*/.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast: active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}#messages{overflow:auto}.outer-message-container:last-child{margin-bottom:5px}.inner-message-container{display:flex;margin-left:auto;margin-right:auto;width:calc(97.5% - 24px);max-width:100%}.message-bubble{margin-top:10px;word-wrap:break-word;width:fit-content;max-width:60%;border-radius:10px;padding:.42em .55em;height:fit-content;line-height:1.26em}.user-message-text{color:#fff;background-color:#0084ff;margin-right:0;margin-left:auto}.ai-message-text{color:#000;background-color:#e4e6eb;margin-left:0;margin-right:auto}.html-message{max-width:unset}.error-message-text{margin:14px auto 10px;background-color:#f4c0c0;color:#474747;text-align:center;max-width:95%}.loading-message-text{width:1em;padding:.6em .75em .6em 1.3em}.message-bubble>p:first-child{margin-top:0}.message-bubble>p:last-child{margin-bottom:0}pre{overflow:auto;display:block;word-break:break-all;word-wrap:break-word;border-radius:7px;background:#2b2b2b;color:#f8f8f2;margin-top:.8em;margin-bottom:.8em;padding:.6em;font-size:.9em;line-height:1.5em}.image-message{padding:0;display:flex;background-color:#ddd}.image-message>*,.image-message>*>*{width:100%;border-radius:8px;display:flex}.audio-message{width:60%;max-width:300px;height:2.2em;max-height:54px;padding:0;background-color:unset}.audio-player{width:100%;height:100%}.audio-player-safari{height:fit-content;width:40px}.audio-player-safari-left{float:left}.audio-player-safari-right{float:right}.any-file-message-bubble{padding:1px}.any-file-message-contents{display:flex}.any-file-message-icon-container{width:1.3em;min-width:1.3em;position:relative;border-radius:4px;margin-left:6px;margin-right:2px}.any-file-message-icon{background-color:#fff;border-radius:4px;position:absolute;width:1em;height:1.25em;padding:1px;margin-top:auto;margin-bottom:auto;top:0;bottom:0}.any-file-message-text{padding-top:5px;overflow-wrap:anywhere;padding-bottom:5px;padding-right:7px}.message-bubble>a{color:inherit}.left-item-position{margin-right:10px}.right-item-position{margin-left:10px}.deep-chat-web-model-button{margin-top:10px;margin-bottom:5px;margin-left:1px}.avatar{padding-top:5px;width:1.5em;height:1.5em;border-radius:1px}.avatar-container{margin-top:9px}.name{margin-top:16px;font-size:15px}#drag-and-drop{position:absolute;display:none;z-index:10;height:calc(100% - 10px);width:calc(100% - 10px);background-color:#70c6ff4d;border:5px dashed #6dafff}#file-attachment-container{position:absolute;height:3.6em;width:calc(80% - 4px);top:-2.5em;border-radius:5px;overflow:auto;text-align:left;background-color:#d7d7d73b;padding-left:4px}.file-attachment{width:2.85em;height:2.85em;display:inline-flex;margin-right:.6em;margin-bottom:.44em;margin-top:4px;position:relative;background-color:#fff;border-radius:5px}.image-attachment{width:100%;height:100%;object-fit:cover;border-radius:5px}.border-bound-attachment{width:calc(100% - 2px);height:calc(100% - 2px);border:1px solid #c3c3c3;border-radius:5px;overflow:hidden}.border-bound-attachment-safari{width:calc(100% - 1px);height:calc(100% - 1px)}.audio-attachment-icon-container{cursor:pointer}.audio-attachment-icon-container:hover{background-color:#f8f8f8}.attachment-icon{left:0;right:0;bottom:0;top:2px;margin:auto;position:absolute;width:25px;-webkit-user-select:none;user-select:none}.not-removable-attachment-icon{top:0;right:0;bottom:0;left:0}.play-icon{filter:brightness(0) saturate(100%) invert(17%) sepia(0%) saturate(1392%) hue-rotate(67deg) brightness(98%) contrast(97%)}.stop-icon{filter:brightness(0) saturate(100%) invert(29%) sepia(90%) saturate(1228%) hue-rotate(198deg) brightness(93%) contrast(98%)}.audio-placeholder-text-3-digits{padding-left:.26rem}.audio-placeholder-text-4-digits{padding-left:.1rem}.any-file-attachment{padding:2px 0}.file-attachment-text-container{position:absolute;width:inherit;display:flex;align-items:center;height:100%;top:-1px}.audio-placeholder-text-3-digits-container{padding-top:1px;cursor:default}.any-file-attachment-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;padding-left:.13em;margin-left:auto;margin-right:auto}.remove-file-attachment-button{height:1.25em;width:1.25em;border:1px solid #cfcfcf;border-radius:25px;background-color:#fff;top:-4px;right:-5px;position:absolute;display:flex;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none}.remove-file-attachment-button:hover{background-color:#e4e4e4}.remove-file-attachment-button:active{background-color:#d7d7d7}.x-icon{color:#4e4e4e;top:-.075em;position:relative;font-size:1.05em}.modal{display:none;flex-direction:column;align-items:center;justify-content:center;position:absolute;width:80%;max-width:420px;max-height:80%;margin:auto;top:0;right:0;bottom:0;left:0;z-index:2}.modal-content{border-top:1px solid rgb(217,217,217);border-left:1px solid rgb(217,217,217);border-right:1px solid rgb(217,217,217);border-top-left-radius:inherit;border-top-right-radius:inherit;background-color:#fff;overflow-y:auto;height:fit-content;max-height:calc(100% - 3.3em);width:100%}.modal-content>p{margin-left:1em;margin-right:1em}.modal-content>ul{margin-right:1em}.modal-button-panel{height:3.3em;border:1px solid;border-color:rgb(223,223,223) rgb(217,217,217) rgb(217,217,217);border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;background-color:#fff;text-align:center;justify-content:center;display:flex;width:100%}.modal-button{min-width:2.5em;text-align:center;color:#fff;border-radius:5px;padding:.4em .4em .3em;height:1.25em;background-color:#3279b2;top:0;bottom:0;cursor:pointer;-webkit-user-select:none;user-select:none;margin:auto .31em}.modal-button:hover{background-color:#276da7}.modal-button:active{background-color:#1b5687}.modal-svg-button{padding:0 0 2px;width:2em;height:1.8em}.modal-svg-button-icon{width:100%;height:100%;filter:brightness(0) saturate(100%) invert(100%) sepia(15%) saturate(4%) hue-rotate(346deg) brightness(101%) contrast(102%)}#modal-background-panel{position:absolute;width:100%;height:100%;background-color:#00000042;z-index:1;display:none}.show-modal-background{animation:fadeInBackground .3s ease-in-out}@keyframes fadeInBackground{0%{opacity:0}to{opacity:1}}.show-modal{animation:fadeInModal .3s ease-in-out}@keyframes fadeInModal{0%{opacity:0;scale:.95}to{opacity:1;scale:1}}.hide-modal-background{animation:fadeOutBackground .2s ease-in-out}@keyframes fadeOutBackground{0%{opacity:1}to{opacity:0}}.hide-modal{animation:fadeOutModal .2s ease-in-out}@keyframes fadeOutModal{0%{opacity:1;scale:1}to{opacity:0;scale:.95}}.modal-camera-content{overflow:hidden;text-align:center;border:unset;height:100%;background-color:#2a2a2a;display:flex;justify-content:center}.camera-modal-canvas{max-width:100%;max-height:100%;margin-top:auto;margin-bottom:auto}.modal-svg-submit-button{background-color:green}.modal-svg-submit-button:hover{background-color:#007500}.modal-svg-submit-button:active{background-color:#006500}.modal-svg-submit-disabled{pointer-events:none;background-color:#747474}.modal-svg-close-button{height:1.56em;padding-top:.37em;padding-bottom:0;background-color:#c13e3e}.modal-svg-close-button:hover{background-color:#b43434}.modal-svg-close-button:active{background-color:#972929}.modal-svg-close-icon{width:80%;height:80%}.modal-svg-camera-button{height:1.6em;padding-top:.38em;padding-bottom:0}.modal-svg-camera-icon{height:76%}.modal-svg-refresh-icon{height:105%}.modal-svg-refresh-button{height:1.66em;padding-top:.11em;padding-bottom:.21em}.input-button-container{position:relative;z-index:1}.inside-right{position:absolute;right:calc(10% + .35em);bottom:.85em}.inside-left{position:absolute;left:calc(10% + .35em);bottom:.85em}.outside-left{position:absolute;right:calc(11px - .55em);bottom:.88em}.outside-right{position:absolute;left:calc(11px - .55em);bottom:.88em}#upload-images-icon{position:absolute;pointer-events:none;width:1.45em;height:1.45em;left:.11em;bottom:.08em;filter:brightness(0) saturate(100%) invert(43%) sepia(0%) saturate(740%) hue-rotate(77deg) brightness(99%) contrast(92%)}#upload-gifs-icon{position:absolute;pointer-events:none;width:1.5em;height:1.48em;left:.07em;bottom:.08em;filter:brightness(0) saturate(100%) invert(49%) sepia(0%) saturate(2586%) hue-rotate(12deg) brightness(93%) contrast(90%)}#upload-audio-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.17em;bottom:.2em;filter:brightness(0) saturate(100%) invert(15%) sepia(0%) saturate(337%) hue-rotate(125deg) brightness(91%) contrast(94%);transform:scaleX(.95)}#camera-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.23em;bottom:.2em;filter:brightness(0) saturate(100%) invert(52%) sepia(0%) saturate(161%) hue-rotate(164deg) brightness(91%) contrast(92%);transform:scaleX(.95)}#upload-mixed-files-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.25em;bottom:.2em;filter:brightness(0) saturate(100%) invert(53%) sepia(0%) saturate(36%) hue-rotate(74deg) brightness(98%) contrast(93%);transform:scaleX(.95)}#interim-text{color:gray}#microphone-button{padding-top:.5px}.outer-button-container>#microphone-button{padding-bottom:1px}#microphone-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.25em;bottom:.25em}.default-microphone-icon{filter:brightness(0) saturate(100%) invert(32%) sepia(0%) saturate(924%) hue-rotate(46deg) brightness(95%) contrast(99%)}.active-microphone-icon{filter:brightness(0) saturate(100%) invert(10%) sepia(97%) saturate(7495%) hue-rotate(0deg) brightness(101%) contrast(107%);border-radius:10px}.command-microphone-icon{filter:brightness(0) saturate(100%) invert(42%) sepia(96%) saturate(1067%) hue-rotate(77deg) brightness(99%) contrast(102%)}.unsupported-microphone{display:none}#submit-icon{height:100%;filter:brightness(0) saturate(100%) invert(32%) sepia(0%) saturate(924%) hue-rotate(46deg) brightness(95%) contrast(99%);width:1.21em}#stop-icon{background-color:#acacac;position:absolute;width:.95em;height:.95em;left:.35em;bottom:.35em;border-radius:2px}.submit-button-enlarged{scale:1.1;margin-right:.3em;margin-left:.3em}.dots-jumping{position:relative;left:calc(-9990px + .275em);width:.22em;height:.22em;border-radius:5px;background-color:#848484;color:#848484;box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484;animation:dots-jumping 1.5s infinite linear;bottom:-.7em}@keyframes dots-jumping{0%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}16.667%{box-shadow:9990px -6px #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}33.333%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}50%{box-shadow:9990px 0 #848484,calc(9990px + .44em) -6px 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}66.667%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}83.333%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) -6px 0 0 #848484}to{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}}.dots-flashing{position:relative;width:.45em;height:.45em;border-radius:5px;background-color:var(--message-dots-color);color:var(--message-dots-color);animation:dots-flashing 1s infinite linear alternate;animation-delay:.5s}.dots-flashing:before,.dots-flashing:after{content:"";display:inline-block;position:absolute;top:0}.dots-flashing:before{left:-.7em;width:.45em;height:.45em;border-radius:5px;background-color:var(--message-dots-color);color:var(--message-dots-color);animation:dots-flashing 1s infinite alternate;animation-delay:0s}.dots-flashing:after{left:.7em;width:.45em;height:.45em;border-radius:5px;background-color:var(--message-dots-color);color:var(--message-dots-color);animation:dots-flashing 1s infinite alternate;animation-delay:1s}@keyframes dots-flashing{0%{background-color:var(--message-dots-color)}50%,to{background-color:var(--message-dots-color-fade)}}.input-button{border-radius:4px;cursor:pointer;margin-bottom:.2em;-webkit-user-select:none;user-select:none}.input-button-svg{width:1.65em;height:1.65em}.input-button:hover{background-color:#9c9c9c2e}.input-button:active{background-color:#9c9c9c5e}.loading-button{cursor:auto}.loading-button:hover{background-color:unset}.text-button{filter:unset!important;display:flex;justify-content:center;align-items:center;margin-left:4px;margin-right:4px;height:1.6em}#text-input-container{background-color:#fff;width:80%;display:flex;border:1px solid #0000001a;border-radius:5px;margin-top:.8em;margin-bottom:.8em;box-shadow:#959da533 0 1px 12px;overflow-y:auto;max-height:200px;position:relative}.text-input-container-left-adjustment{margin-left:1.5em}.text-input-container-right-adjustment{margin-right:1.5em}.text-input-container-left-small-adjustment{margin-left:1.1em}.text-input-container-left-small-adjustment>.outside-left{right:calc(14px - .55em)}.text-input-container-right-small-adjustment{margin-right:1.1em}.text-input-container-right-small-adjustment>.outside-right{left:calc(14px - .55em)}#text-input{text-align:left;outline:none;word-wrap:break-word;line-break:auto}.text-input-styling{padding:.4em .5em;overflow:overlay;width:100%}.text-input-inner-left-adjustment{padding-left:2.2em}.text-input-inner-right-adjustment{padding-right:2em}.text-input-disabled{pointer-events:none;-webkit-user-select:none;user-select:none}.text-input-placeholder{color:gray}.outside-right>#dropup-menu,.inside-right>#dropup-menu{right:0}#dropup-icon{position:absolute;pointer-events:none;width:1.16em;height:1.2em;left:.265em;bottom:.43em;filter:brightness(0) saturate(100%) invert(54%) sepia(0%) saturate(724%) hue-rotate(6deg) brightness(92%) contrast(90%)}#dropup-menu{background-color:#fff;position:absolute;transform:translateY(-100%);border-radius:5px;z-index:1;top:-.49em;box-shadow:#0003 -1px 2px 10px,#0000001a 0 2px 4px;cursor:pointer;-webkit-user-select:none;user-select:none}.dropup-menu-item{height:1.4em;padding:.28em .84em .28em .35em;display:flex;position:relative}.dropup-menu-item:first-child{padding-top:.49em;border-top-left-radius:inherit;border-top-right-radius:inherit}.dropup-menu-item:last-child{padding-bottom:.45em;border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.dropup-menu-item-icon{width:1.39em;position:relative;margin-right:.56em}.dropup-menu-item-icon>svg{bottom:0!important;top:0!important;margin-bottom:auto;margin-top:auto}.dropup-menu-item-text{margin-top:.08em;width:max-content}#input{width:100%;display:inline-flex;text-align:center;margin-left:auto;margin-right:auto;margin-top:auto;position:relative;justify-content:center}#chat-view{height:100%;display:grid;grid-template-columns:100%}::-webkit-scrollbar{width:9px;height:9px}::-webkit-scrollbar-thumb{background-color:#d0d0d0;border-radius:5px}::-webkit-scrollbar-track{background-color:#f2f2f2}:host{all:initial;display:table-cell}#container{height:inherit;width:inherit;overflow:hidden}
`,Ej=Object.defineProperty,ke=function(t,n,r,i){for(var o=void 0,a=t.length-1,s;a>=0;a--)(s=t[a])&&(o=s(n,r,o)||o);return o&&Ej(n,r,o),o},Ce=function(e){pe(t,e);function t(){var n;return T(this,t),n=he(this,t),n.getMessages=function(){return[]},n.submitUserMessage=function(){return console.warn("submitUserMessage failed - please wait for chat view to render before calling this property.")},n.focusInput=function(){return a1.focusFromParentElement(n._elementRef)},n.refreshMessages=function(){},n.clearMessages=function(){},n.scrollToBottom=function(){},n.disableSubmitButton=function(){},n._hasBeenRendered=!1,n._auxiliaryStyleApplied=!1,n._addMessage=function(){return console.warn("addMessage failed - please wait for chat view to render before calling this property.")},pB.appendStyleSheetToHead(),n._elementRef=document.createElement("div"),n._elementRef.id="container",n.attachShadow({mode:"open"}).appendChild(n._elementRef),Pc.apply(wj,n.shadowRoot),setTimeout(function(){n._hasBeenRendered||n.onRender()},20),n}return M(t,[{key:"changeToChatView",value:function(){this._activeService&&(this._activeService.validateConfigKey=!1),this.onRender()}},{key:"onRender",value:function(){var r;(!this._activeService||this._activeService.demo)&&(this._activeService=hB.create(this)),this.auxiliaryStyle&&!this._auxiliaryStyleApplied&&(Pc.apply(this.auxiliaryStyle,this.shadowRoot),this._auxiliaryStyleApplied=!0),Pc.applyDefaultStyleToComponent(this.style,this.chatStyle),$r.checkForContainerStyles(this,this._elementRef),this._activeService.key&&this._activeService.validateConfigKey?NU.render(this._elementRef,this.changeToChatView.bind(this),this._activeService):!(this._activeService instanceof $t)||this._activeService.key?((r=this._childElement)!==null&&r!==void 0||(this._childElement=this.children[0]),Sj.render(this,this._elementRef,this._activeService,this._childElement)):this._activeService instanceof $t&&BF.render(this._elementRef,this.changeToChatView.bind(this),this._activeService),this._hasBeenRendered=!0,Bs.onRender(this)}},{key:"disconnectedCallback",value:function(){wf.chat=void 0}}]),t}(LF);ke([Ae("object")],Ce.prototype,"directConnection");ke([Ae("object")],Ce.prototype,"request");ke([Ae("object")],Ce.prototype,"webModel");ke([Ae("object")],Ce.prototype,"stream");ke([Ae("object")],Ce.prototype,"requestBodyLimits");ke([Ae("function")],Ce.prototype,"requestInterceptor");ke([Ae("function")],Ce.prototype,"responseInterceptor");ke([Ae("function")],Ce.prototype,"validateInput");ke([Ae("object")],Ce.prototype,"chatStyle");ke([Ae("object")],Ce.prototype,"attachmentContainerStyle");ke([Ae("object")],Ce.prototype,"dropupStyles");ke([Ae("object")],Ce.prototype,"inputAreaStyle");ke([Ae("object")],Ce.prototype,"textInput");ke([Ae("object")],Ce.prototype,"submitButtonStyles");ke([Ae("string")],Ce.prototype,"auxiliaryStyle");ke([Ae("array")],Ce.prototype,"initialMessages");ke([Ae("object")],Ce.prototype,"introMessage");ke([Ae("object")],Ce.prototype,"avatars");ke([Ae("object")],Ce.prototype,"names");ke([Ae("boolean")],Ce.prototype,"displayLoadingBubble");ke([Ae("object")],Ce.prototype,"errorMessages");ke([Ae("object")],Ce.prototype,"messageStyles");ke([Ae("object")],Ce.prototype,"textToSpeech");ke([Ae("object")],Ce.prototype,"speechToText");ke([Ae("object")],Ce.prototype,"images");ke([Ae("object")],Ce.prototype,"gifs");ke([Ae("object")],Ce.prototype,"camera");ke([Ae("object")],Ce.prototype,"audio");ke([Ae("object")],Ce.prototype,"microphone");ke([Ae("object")],Ce.prototype,"mixedFiles");ke([Ae("object")],Ce.prototype,"dragAndDrop");ke([Ae("object")],Ce.prototype,"introPanelStyle");ke([Ae("object")],Ce.prototype,"htmlClassUtilities");ke([Ae("function")],Ce.prototype,"onNewMessage");ke([Ae("function")],Ce.prototype,"onClearMessages");ke([Ae("function")],Ce.prototype,"onComponentRender");ke([Ae("function")],Ce.prototype,"onError");ke([Ae("object")],Ce.prototype,"demo");ke([Ae("object")],Ce.prototype,"_insertKeyViewStyles");customElements.define("deep-chat",Ce);const Cj={class:"chat-container"},Ij={__name:"ChatComponent",props:["assistantConfig"],setup(e){const t=e,n=ot(null),r={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Content-Type":"application/json","x-amz-content-sha256":"","x-access-token":""},i=async()=>Or.getTokens().then(u=>u.accessToken.toString()),o=async c=>{const u=new TextEncoder().encode(c),d=await crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(h=>h.toString(16).padStart(2,"0")).join("")},a=async()=>{const{assistant_url:c,bedrock_converse_parameters:u,assistant_parameters:d}=t.assistantConfig.assistantConfigData();u.messages=s(n.value.getMessages()).messages;const f=JSON.stringify({bedrock_converse_parameters:u,assistant_parameters:d});return r["x-access-token"]=await i(),r["x-amz-content-sha256"]=await o(f),{url:c,method:"POST",headers:r,body:f}},s=c=>({messages:c.map(u=>({content:[{text:u.text}],role:u.role==="ai"?"assistant":"user"}))}),l={handler:async(c,u)=>{let d=await a();fetch(d.url,d).then(h=>{if(h.ok&&h.body&&h.body.getReader){u.onOpen();const p=h.body.getReader();({value:null,done:!1,read(){p.read().then(({done:y,value:g})=>{if(y){this.done=!0,u.onClose();return}f(g),this.read()})}}).read()}else u.onResponse({text:"Error from server. Please try again later."}),u.onClose()}).catch(h=>{u.onResponse({error:h}),u.onClose()});function f(h){u.onResponse({text:new TextDecoder().decode(h)})}}};return(c,u)=>{const d=Bb("deep-chat");return re(),Qe("div",Cj,[R(d,{ref_key:"deepChatInstance",ref:n,request:l,id:"deep-chat-instance",stream:"true"},null,512)])}}},xj=$l(Ij,[["__scopeId","data-v-97e611a2"]]),Aj={class:"container"},kj={class:"menubar"},Tj=["onClick"],Mj={class:"main_area"},Rj={class:"left-pane"},Pj={class:"right-pane"},Nj={__name:"App",setup(e){const t=ot(null);return(n,r)=>(re(),Se(w(WD),{"hide-sign-up":""},{default:A(({user:i,signOut:o})=>[te("div",Aj,[te("div",kj,[R(XD,null,{default:A(()=>[me(ue(i.signInDetails.loginId)+" | ",1),te("span",{onClick:o,class:"sign-out-link"},"Sign Out",8,Tj)]),_:2},1024)]),te("div",Mj,[te("div",Rj,[R(EU,{ref_key:"assistantConfigData",ref:t},null,512)]),te("div",Pj,[R(xj,{"assistant-config":t.value},null,8,["assistant-config"])])])])]),_:1}))}},Oj=$l(Nj,[["__scopeId","data-v-29c19264"]]),Lj={user_pool_id:"us-east-1_JJArNyv3l",aws_region:"us-east-1",user_pool_client_id:"5uo4m5ntbc868ojtrkhc5r0ehm",identity_pool_id:"us-east-1:d3ba67f5-318a-426e-b08d-0afdd0568f9d",standard_required_attributes:["email"],username_attributes:["email"],user_verification_types:["email"],password_policy:{min_length:8,require_numbers:!0,require_lowercase:!0,require_uppercase:!0,require_symbols:!0},unauthenticated_identities_enabled:!0},Dj="1",Uj={auth:Lj,version:Dj};gl.configure(Uj);const zc=gl.getConfig();var ug;gl.configure({...zc,API:{...zc.API,REST:{...(ug=zc.API)==null?void 0:ug.REST,AssistantConfigApi:{endpoint:"https://31c9drnfej.execute-api.us-east-1.amazonaws.com/",region:"us-east-1"}}}});lS(Oj).mount("#app");
